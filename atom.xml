<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Hexotest</title>
  
  <subtitle>hei</subtitle>
  <link href="https://maydaychen.github.io/atom.xml" rel="self"/>
  
  <link href="https://maydaychen.github.io/"/>
  <updated>2025-11-13T09:58:09.000Z</updated>
  <id>https://maydaychen.github.io/</id>
  
  <author>
    <name>Maydaychen</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Linuxé—®é¢˜è®°å½•3--sftpè¿æ¥åˆ°æœåŠ¡å™¨åè¿›åº¦ä¸€ç›´å¡0%</title>
    <link href="https://maydaychen.github.io/2025/11/14/Linux%E9%97%AE%E9%A2%98%E8%AE%B0%E5%BD%953-sftp%E8%BF%9E%E6%8E%A5%E5%88%B0%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%90%8E%E8%BF%9B%E5%BA%A6%E4%B8%80%E7%9B%B4%E5%8D%A10/"/>
    <id>https://maydaychen.github.io/2025/11/14/Linux%E9%97%AE%E9%A2%98%E8%AE%B0%E5%BD%953-sftp%E8%BF%9E%E6%8E%A5%E5%88%B0%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%90%8E%E8%BF%9B%E5%BA%A6%E4%B8%80%E7%9B%B4%E5%8D%A10/</id>
    <published>2025-11-14T09:56:49.000Z</published>
    <updated>2025-11-13T09:58:09.000Z</updated>
    
    
    
    
    <category term="è¿ç»´" scheme="https://maydaychen.github.io/categories/%E8%BF%90%E7%BB%B4/"/>
    
    
    <category term="Linux" scheme="https://maydaychen.github.io/tags/Linux/"/>
    
  </entry>
  
  <entry>
    <title>AWSä½¿ç”¨æ—¥å¿—10--é€šè¿‡CloudwatchLogInsightæŸ¥æ‰¾CloudTrailäº‹ä»¶</title>
    <link href="https://maydaychen.github.io/2025/11/13/AWS%E4%BD%BF%E7%94%A8%E6%97%A5%E5%BF%9710-%E9%80%9A%E8%BF%87CloudwatchLogInsight%E6%9F%A5%E6%89%BECloudTrail%E4%BA%8B%E4%BB%B6/"/>
    <id>https://maydaychen.github.io/2025/11/13/AWS%E4%BD%BF%E7%94%A8%E6%97%A5%E5%BF%9710-%E9%80%9A%E8%BF%87CloudwatchLogInsight%E6%9F%A5%E6%89%BECloudTrail%E4%BA%8B%E4%BB%B6/</id>
    <published>2025-11-13T02:53:58.000Z</published>
    <updated>2025-11-13T10:02:00.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">On November 21, 2025, Amazon Simple Storage Service (Amazon S3) will stop returning Owner.DisplayName for all request responses. Owner.DisplayName is a legacy field that most modern applications do not rely on as it has been superseded by AWS Account IDs and IAM ARNs. Until November 21, 2025, S3 will progressively remove this field from request responses. After this date, Owner.DisplayName will not be returned for any requests made to Amazon S3. The Owner.DisplayName parameter is supported only in eight AWS Regions on the Amazon S3 APIs listed below under recommended actions. If you have applications that rely on this behavior to validate ownership of objects, we recommend using canonical IDs (unique identifier for AWS accounts), AWS account ID (12 digit identifier) or IAM ARNs (full resource naming) as a direct replacement of Owner.DisplayName. This change affects the following AWS Regions: US-EAST-1 Region, US-WEST-1 Region, US-WEST-2 Region, AP-SOUTHEAST-1 Region, AP-SOUTHEAST-2 Region, AP-NORTHEAST-1 Region, EU-WEST-1 Region, and SA-EAST-1 Region.</span><br></pre></td></tr></table></figure><p>AWS é€šçŸ¥ï¼šä» 2025-11-21 èµ·ï¼ŒS3 ä¸å†è¿”å› Owner.DisplayName å­—æ®µï¼ˆé€æ­¥åœ¨æ­¤ä¹‹å‰ç§»é™¤ï¼‰ã€‚<br>å»ºè®®æ›¿ä»£ï¼šä½¿ç”¨ owner canonical IDï¼ˆOwner.IDï¼‰ã€AWS Account IDï¼ˆ12ä½ï¼‰ æˆ– IAM ARN æ¥æ ¡éªŒå¯¹è±¡å½’å±æˆ–æ›¿ä»£ DisplayNameã€‚</p><h1 id="è§£å†³åŠæ³•"><a href="#è§£å†³åŠæ³•" class="headerlink" title="è§£å†³åŠæ³•"></a>è§£å†³åŠæ³•</h1><p>å…¶å®ä¸€å¼€å§‹æƒ³äº†å¥½å‡ ä¸ªè§£å†³åŠæ³•çš„ï¼Œå¤§è‡´åˆ†ä¸ºè¿™å‡ ç§</p><h2 id="å¼€å‘è‡ªæŸ¥"><a href="#å¼€å‘è‡ªæŸ¥" class="headerlink" title="å¼€å‘è‡ªæŸ¥"></a>å¼€å‘è‡ªæŸ¥</h2><p>ä¸€å¼€å§‹æˆ‘ä»¬æƒ³çš„è®©å¼€å‘è‡ªå·±æŸ¥ä¸€ä¸‹ï¼Œä½†æ˜¯ç”±äºé¡¹ç›®å®åœ¨å¤ªå¤šï¼Œè€Œä¸”å¼€å‘ä»»åŠ¡å¾ˆè¿‘ï¼Œå°±æ­¤ä½œç½¢</p><h2 id="Lambdaç¡®è®¤"><a href="#Lambdaç¡®è®¤" class="headerlink" title="Lambdaç¡®è®¤"></a>Lambdaç¡®è®¤</h2><p>ä¸€ä¸ªä¸€ä¸ªæ£€æŸ¥ç°æœ‰çš„Lambda functionï¼Œè™½ç„¶èƒ½æŸ¥åˆ°ä¸€äº›ä¸œè¥¿ï¼Œä½†æ˜¯æœ‰å±€é™æ€§ï¼Œæ¯”å¦‚</p><ol><li>functionè¿‡å¤šï¼Œä¸€ä¸ªä¸€ä¸ªæŸ¥æµªè´¹å¤§é‡æ—¶é—´</li><li>é™¤äº†Lambdaï¼Œå¯èƒ½è¿˜æœ‰åˆ«çš„åœ°æ–¹ä¾‹å¦‚é€šè¿‡sdkæŸ¥è¯¢çš„ï¼Œæ²¡æœ‰åŠæ³•æŸ¥å®Œæ•´</li></ol><h2 id="CloudTrailæŸ¥è¯¢"><a href="#CloudTrailæŸ¥è¯¢" class="headerlink" title="CloudTrailæŸ¥è¯¢"></a>CloudTrailæŸ¥è¯¢</h2><p>ç”±äºAWSåŒæ—¶æä¾›äº†å¯èƒ½ä¼šå—å½±å“çš„APIï¼Œæ‰€ä»¥å…¶å®åªè¦é€šè¿‡CloudTrailæŸ¥è¯¢è®°å½•å³å¯<br>æœ€åå†³å®šç”¨è¯¥æ–¹æ³•æŸ¥è¯¢</p><table><thead><tr><th>API åç§°</th><th>CloudTrail äº‹ä»¶å</th><th>ç±»å‹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>REST.GET.ACL</code></td><td><code>GetBucketAcl</code>, <code>GetObjectAcl</code></td><td><strong>Management event</strong></td><td>å› ä¸ºå±äºè®¿é—®èµ„æºçš„è®¿é—®æ§åˆ¶åˆ—è¡¨ï¼ˆACLï¼‰ï¼Œä¸ç®—å¯¹è±¡çº§æ•°æ®æ“ä½œ</td></tr><tr><td><code>REST.GET.BUCKET</code></td><td><code>ListObjects</code>, <code>ListObjectsV2</code></td><td><strong>Data event</strong></td><td>å±äºè¯»å–å¯¹è±¡åˆ—è¡¨ï¼ˆå¯¹è±¡çº§æ“ä½œï¼‰</td></tr><tr><td><code>REST.GET.BUCKETVERSIONS</code></td><td><code>ListObjectVersions</code></td><td><strong>Data event</strong></td><td>åŒæ ·æ˜¯åˆ—å‡ºå¯¹è±¡ç‰ˆæœ¬ï¼ˆå¯¹è±¡çº§æ“ä½œï¼‰</td></tr><tr><td><code>REST.GET.LOGGING_STATUS</code></td><td><code>GetBucketLogging</code></td><td><strong>Management event</strong></td><td>å±äºæŸ¥çœ‹ bucket å±æ€§çš„ç®¡ç†æ“ä½œ</td></tr><tr><td><code>REST.GET.SERVICE</code></td><td><code>ListBuckets</code></td><td><strong>Management event</strong></td><td>å±äºæŸ¥çœ‹è´¦æˆ·ä¸‹æ‰€æœ‰ bucketï¼ˆç®¡ç†çº§ï¼‰</td></tr><tr><td><code>REST.GET.UPLOAD</code></td><td><code>ListParts</code></td><td><strong>Data event</strong></td><td>å¯¹è±¡ä¸Šä¼ åˆ†ç‰‡ä¿¡æ¯ï¼ˆå¯¹è±¡çº§åˆ«ï¼‰</td></tr><tr><td><code>REST.GET.UPLOADS</code></td><td><code>ListMultipartUploads</code></td><td><strong>Data event</strong></td><td>åŒä¸Šï¼Œå±äºå¯¹è±¡ä¸Šä¼ è¿‡ç¨‹çš„ä¸€éƒ¨åˆ†</td></tr></tbody></table><h1 id="å®ç°"><a href="#å®ç°" class="headerlink" title="å®ç°"></a>å®ç°</h1><h2 id="å¦‚æœä¸èƒ½ç”¨Organization-Trail"><a href="#å¦‚æœä¸èƒ½ç”¨Organization-Trail" class="headerlink" title="å¦‚æœä¸èƒ½ç”¨Organization Trail"></a>å¦‚æœä¸èƒ½ç”¨Organization Trail</h2><p>éœ€åœ¨æ¯ä¸ªå­è´¦å·ï¼š<br>æ‰‹åŠ¨ç™»å½•æŸ¥çœ‹ Event historyï¼ˆä»…ç®¡ç†äº‹ä»¶ï¼Œä¿ç•™ 90 å¤©ï¼‰ï¼›<br>è‹¥è¦ Data Eventï¼Œåˆ™åœ¨è¯¥å­è´¦å·åˆ›å»º&#x2F;é…ç½® Trail å¯ç”¨ Data Eventsï¼›<br>æˆ–è€…åœ¨æ¯ä¸ªå­è´¦å·å»ºç«‹ä¸€ä¸ª â€œAudit Roleâ€ï¼Œåœ¨ç®¡ç†è´¦å·ç”¨ AssumeRole è„šæœ¬é€ä¸ªæŸ¥è¯¢ CloudTrail äº‹ä»¶ï¼ˆè‡ªåŠ¨åŒ–ä½†éœ€è·¨è´¦å·æƒé™ä¸è„šæœ¬ï¼‰ã€‚</p><h2 id="å¦‚æœç”¨äº†Organization-Trail"><a href="#å¦‚æœç”¨äº†Organization-Trail" class="headerlink" title="å¦‚æœç”¨äº†Organization Trail"></a>å¦‚æœç”¨äº†Organization Trail</h2><p>é‚£æˆ‘ä»¬è¿™é‡Œéœ€è¦ç¡®è®¤æœ‰æ²¡æœ‰é›†æˆCloudWatch Log,åœ¨Trailçš„è¯¦æƒ…é‡Œå¦‚å›¾æ‰€ç¤º<br>å¦‚æœçœ‹åˆ°è¿™ä¸ªé…ç½®äº†ï¼Œå°±è¯´æ˜å·²ç»å¼€å¯äº†é›†æˆCloudWatch Log</p><img src="/2025/11/13/AWS%E4%BD%BF%E7%94%A8%E6%97%A5%E5%BF%9710-%E9%80%9A%E8%BF%87CloudwatchLogInsight%E6%9F%A5%E6%89%BECloudTrail%E4%BA%8B%E4%BB%B6/img.png" class="" title="å¦‚å›¾æ‰€ç¤º"><p>è¿™æ—¶å€™æˆ‘ä»¬å°±å¯ä»¥å»CloudWatché‡Œé¢æŸ¥æ‰¾äº‹ä»¶äº†</p><h3 id="CloudWatch"><a href="#CloudWatch" class="headerlink" title="CloudWatch"></a>CloudWatch</h3><h1 id="é—®é¢˜è®°å½•"><a href="#é—®é¢˜è®°å½•" class="headerlink" title="é—®é¢˜è®°å½•"></a>é—®é¢˜è®°å½•</h1><h2 id="ç®¡ç†è´¦å·çš„Event-historyä¸­æ²¡çœ‹åˆ°åˆ«çš„è´¦å·çš„event"><a href="#ç®¡ç†è´¦å·çš„Event-historyä¸­æ²¡çœ‹åˆ°åˆ«çš„è´¦å·çš„event" class="headerlink" title="ç®¡ç†è´¦å·çš„Event historyä¸­æ²¡çœ‹åˆ°åˆ«çš„è´¦å·çš„event"></a>ç®¡ç†è´¦å·çš„Event historyä¸­æ²¡çœ‹åˆ°åˆ«çš„è´¦å·çš„event</h2><ul><li>CloudTrail Event History åªæ˜¾ç¤º Management Account æœ¬è´¦å·æˆ– organization trail å¯ä»¥çœ‹åˆ°çš„äº‹ä»¶ã€‚</li><li>Event History é¡µé¢æœ¬èº«åªæ˜¾ç¤ºæœ€è¿‘ 90 å¤©çš„äº‹ä»¶ã€‚</li><li>æ›´é‡è¦çš„æ˜¯ï¼ŒEvent History ä¸ä¼šè‡ªåŠ¨å±•ç¤º Organization ä¸­æ‰€æœ‰å­è´¦å·çš„äº‹ä»¶ï¼Œå®ƒåªæ˜¾ç¤ºäº‹ä»¶çš„æ‘˜è¦ï¼Œç»„ç»‡çº§çš„äº‹ä»¶éœ€è¦ é€šè¿‡ Trail æŒ‡å‘çš„ S3 æˆ– CloudWatch Logs æ¥è®¿é—®ã€‚<br>ä¹Ÿå°±æ˜¯è¯´ï¼Œå³ä¾¿ä½ åœ¨ Management Account åˆ›å»ºäº† Organization Trailï¼ŒManagement Account çš„ Event History ç•Œé¢ä¸ä¼šç›´æ¥æ˜¾ç¤ºå­è´¦å·çš„äº‹ä»¶ã€‚</li></ul><h2 id="æ²¡æœ‰Data-Event"><a href="#æ²¡æœ‰Data-Event" class="headerlink" title="æ²¡æœ‰Data Event"></a>æ²¡æœ‰Data Event</h2><p>organizationè‡ªå¸¦äº†ä¸€ä¸ªorganization trailï¼Œ ä½†æ˜¯è¿™ä¸ªtrailåªæœ‰management eventï¼Œå¹¶ä¸ä¼šæ”¶é›†data event<br>å¦‚æœæƒ³è¦æ”¶é›†data eventçš„è¯ï¼Œéœ€è¦åœ¨ç®¡ç†è´¦å·ä¸­ä¿®æ”¹é…ç½®ï¼Œæ·»åŠ data event</p><h3 id="å¦‚æœæˆ‘åœ¨ç®¡ç†è´¦å·åˆ›å»º-Organization-Trailï¼Œä¼šä¸ä¼šè‡ªåŠ¨æ”¶é›†åˆ°æ‰€æœ‰å­è´¦å·çš„-Data-Eventsï¼Ÿ"><a href="#å¦‚æœæˆ‘åœ¨ç®¡ç†è´¦å·åˆ›å»º-Organization-Trailï¼Œä¼šä¸ä¼šè‡ªåŠ¨æ”¶é›†åˆ°æ‰€æœ‰å­è´¦å·çš„-Data-Eventsï¼Ÿ" class="headerlink" title="å¦‚æœæˆ‘åœ¨ç®¡ç†è´¦å·åˆ›å»º Organization Trailï¼Œä¼šä¸ä¼šè‡ªåŠ¨æ”¶é›†åˆ°æ‰€æœ‰å­è´¦å·çš„ Data Eventsï¼Ÿ"></a>å¦‚æœæˆ‘åœ¨ç®¡ç†è´¦å·åˆ›å»º Organization Trailï¼Œä¼šä¸ä¼šè‡ªåŠ¨æ”¶é›†åˆ°æ‰€æœ‰å­è´¦å·çš„ Data Eventsï¼Ÿ</h3><p>æ˜¯çš„ï¼ˆæ¡ä»¶ï¼‰ï¼š<br>ç®¡ç†è´¦å·åˆ›å»ºçš„ Organization Trailï¼Œå¹¶åœ¨è¯¥ trail ä¸­å¯ç”¨äº† DataEventsï¼ˆä¾‹å¦‚ AWS::S3::Objectï¼‰ï¼Œåˆ™ä¼šè‡ªåŠ¨æ”¶é›†æ•´ä¸ª Organization ä¸‹æ‰€æœ‰å­è´¦å·çš„ Data Eventsï¼ˆå­è´¦å·æ— éœ€åšä»»ä½•é¢å¤–é…ç½®ï¼‰ã€‚<br>å…³é”®æ˜¯ï¼šåˆ›å»ºæ—¶éœ€è®¾ç½® â€“is-organization-trail &#x2F; IsOrganizationTrail: trueï¼Œå¹¶ put-event-selectors åŠ å…¥ S3 DataResourcesï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">aws cloudtrail put-event-selectors \</span><br><span class="line">--trail-name OrgTrail \</span><br><span class="line">--event-selectors &#x27;[&#123;</span><br><span class="line">&quot;ReadWriteType&quot;:&quot;All&quot;,</span><br><span class="line">&quot;IncludeManagementEvents&quot;: true,</span><br><span class="line">&quot;DataResources&quot;: [</span><br><span class="line">&#123;&quot;Type&quot;:&quot;AWS::S3::Object&quot;,&quot;Values&quot;:[&quot;arn:aws:s3:::&quot;]&#125;</span><br><span class="line">]</span><br><span class="line">&#125;]&#x27;</span><br></pre></td></tr></table></figure><p>éªŒè¯ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">aws cloudtrail describe-trails --trail-name OrgTrail -&gt; IsOrganizationTrail: true</span><br></pre></td></tr></table></figure><p>S3 å­˜å‚¨è·¯å¾„ä¸‹ä¼šçœ‹åˆ°å„è´¦æˆ·çš„æ—¥å¿— AWSLogs&#x2F;<account-id>&#x2F;CloudTrail&#x2F;â€¦</p><h1 id="çŸ¥è¯†ç‚¹"><a href="#çŸ¥è¯†ç‚¹" class="headerlink" title="çŸ¥è¯†ç‚¹"></a>çŸ¥è¯†ç‚¹</h1><ol><li>Organization Trailçš„æ—¥å¿—ä¼šå­˜åœ¨Log Archivedè¿™ä¸ªaccountä¸­ï¼Œè€Œä¸æ˜¯ç®¡ç†è´¦å·</li></ol><h1 id="è´¹ç”¨"><a href="#è´¹ç”¨" class="headerlink" title="è´¹ç”¨"></a>è´¹ç”¨</h1><p>CloudTrail &#x2F; Organization Trail çš„è®¡è´¹ï¼ˆç®€è¦ï¼‰<br>Management eventsï¼šç¬¬ä¸€ä¸ªå‰¯æœ¬ï¼ˆå†™å…¥ S3 çš„ trailï¼‰å…è´¹ã€‚<br>Data eventsï¼šæŒ‰äº‹ä»¶æ•°é‡è®¡è´¹ï¼ˆä¾‹å¦‚ S3&#x2F;Lambda Data Eventï¼Œé€šå¸¸ä¸ºæ¯ 100,000 æ¡ ~ $0.10 â€”â€” ä»¥ AWS å…¬å¸ƒçš„å½“æœŸä»·æ ¼ä¸ºå‡†ï¼‰ã€‚<br>Organization Trail æœ¬èº«ä¸å•ç‹¬æ”¶è´¹ï¼Œä½†Data Event çš„è®¡è´¹ä¼šåœ¨ç®¡ç†è´¦å·ä¸­ç»“ç®—ï¼ˆæ‰€æœ‰å­è´¦å·çš„ data event æ±‡æ€»åˆ°ç®¡ç†è´¦å·è®¡è´¹ï¼‰ã€‚<br>æ³¨æ„ï¼šå¦‚æœå¯¹å­è´¦å·ä¹Ÿå•ç‹¬åˆ›å»ºäº†å¦ä¸€ä¸ª trail æ”¶é›†ç›¸åŒçš„ data eventsï¼Œä¼šäº§ç”Ÿé‡å¤è®¡è´¹ï¼ˆæ¯ä¸ª trail éƒ½è®¡è´¹ï¼‰ã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;èƒŒæ™¯&quot;&gt;&lt;a href=&quot;#èƒŒæ™¯&quot; class=&quot;headerlink&quot; title=&quot;èƒŒæ™¯&quot;&gt;&lt;/a&gt;èƒŒæ™¯&lt;/h1&gt;&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;s</summary>
      
    
    
    
    <category term="è¿ç»´" scheme="https://maydaychen.github.io/categories/%E8%BF%90%E7%BB%B4/"/>
    
    
    <category term="AWS" scheme="https://maydaychen.github.io/tags/AWS/"/>
    
  </entry>
  
  <entry>
    <title>AWSä½¿ç”¨æ—¥å¿—11--OrganizationAPIæ›´æ–°Satuså­—æ®µçš„å½±å“</title>
    <link href="https://maydaychen.github.io/2025/11/13/AWS%E4%BD%BF%E7%94%A8%E6%97%A5%E5%BF%9711-OrganizationAPI%E6%9B%B4%E6%96%B0Satus%E5%AD%97%E6%AE%B5%E7%9A%84%E5%BD%B1%E5%93%8D/"/>
    <id>https://maydaychen.github.io/2025/11/13/AWS%E4%BD%BF%E7%94%A8%E6%97%A5%E5%BF%9711-OrganizationAPI%E6%9B%B4%E6%96%B0Satus%E5%AD%97%E6%AE%B5%E7%9A%84%E5%BD%B1%E5%93%8D/</id>
    <published>2025-11-13T02:53:58.000Z</published>
    <updated>2025-12-02T06:14:58.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h2><p>ä»Šå¤©æ”¶åˆ°äº†AWSçš„ä¸€æ¡eventæé†’</p><p>æ ‡é¢˜æ˜¯Organizations planned lifecycle event</p><p>å†…å®¹å¦‚ä¸‹<br>AWS Organizations is transitioning from the account status (Status field) to the new account state (State field) to provide more detailed account lifecycle information. The new State field offers enhanced granularity with values including PENDING_ACTIVATION, ACTIVE, SUSPENDED, PENDING_CLOSURE, and CLOSED, available through both the AWS Organizations console and APIs (DescribeAccount, ListAccounts, ListAccountsForParent, and ListDelegatedAdministrators).</p><p>Starting September 9, 2025, we have begun a one-year transition period where both Status and State fields will be available in the API responses. After September 9, 2026, the Status field will be permanently removed. If you use automated processes for account management, we recommend updating your systems to use the State field before the deprecation date. For more information, see Updates to account status information in AWS Organizations [1] or visit our documentation [2].</p><p>If you have any questions, concerns, or require assistance, please do not hesitate to contact AWS Support [3].</p><p>[1] <a href="https://aws.amazon.com/blogs/mt/updates-to-account-status-information-in-aws-organizations/">https://aws.amazon.com/blogs/mt/updates-to-account-status-information-in-aws-organizations/</a><br>[2] <a href="https://docs.aws.amazon.com/organizations/latest/userguide/orgs_manage_accounts_account_state.html">https://docs.aws.amazon.com/organizations/latest/userguide/orgs_manage_accounts_account_state.html</a><br>[3] <a href="https://console.aws.amazon.com/support">https://console.aws.amazon.com/support</a></p><h2 id="æè¿°"><a href="#æè¿°" class="headerlink" title="æè¿°"></a>æè¿°</h2><h3 id="æ˜¯ä»€ä¹ˆ"><a href="#æ˜¯ä»€ä¹ˆ" class="headerlink" title="æ˜¯ä»€ä¹ˆ"></a>æ˜¯ä»€ä¹ˆ</h3><p>è¿™æ˜¯ AWS Organizations å®˜æ–¹å‘å¸ƒçš„å˜æ›´é€šçŸ¥ï¼Œå‘Šè¯‰ä½  AWS å°†æŠŠ Status å­—æ®µå¼ƒç”¨ï¼ˆDeprecatedï¼‰ï¼Œæ”¹ä¸ºä½¿ç”¨æ–°çš„ã€æ›´ç»†ç²’åº¦çš„ State å­—æ®µæ¥è¡¨ç¤º AWS è´¦æˆ·çš„ç”Ÿå‘½å‘¨æœŸçŠ¶æ€ã€‚</p><p>å®ƒå±äº API å˜æ›´å…¬å‘Š &#x2F; Deprecation Noticeï¼Œå½±å“æ‰€æœ‰ä½¿ç”¨ Organizations API çš„è‡ªåŠ¨åŒ–ã€è„šæœ¬ã€ç›‘æ§ã€IAM æƒé™ç®¡ç†ã€è´¦æˆ·ç”Ÿå‘½å‘¨æœŸç®¡ç†ç³»ç»Ÿã€‚</p><h3 id="è¦å¹²å˜›"><a href="#è¦å¹²å˜›" class="headerlink" title="è¦å¹²å˜›"></a>è¦å¹²å˜›</h3><ol><li>æ–°å­—æ®µï¼šState<br>AWS Organizations å¼•å…¥äº†æ–°çš„å­—æ®µ Stateï¼Œæ¯”æ—§å­—æ®µ Status æ›´ç»†è‡´ã€‚<br>æ–°çš„ State å€¼åŒ…æ‹¬ï¼š<br>PENDING_ACTIVATION<br>åˆ›å»ºè´¦æˆ·åã€æœªæ¿€æ´»å‰çš„çŠ¶æ€</li></ol><p>ACTIVE<br>æ­£å¸¸ä½¿ç”¨</p><p>SUSPENDED<br>è¢«æš‚åœ</p><p>PENDING_CLOSURE<br>è¯·æ±‚å…³é—­åï¼Œå…³é—­æµç¨‹ä¸­</p><p>CLOSED<br>è´¦æˆ·å·²å®Œå…¨å…³é—­</p><ol start="2"><li>æ—§å­—æ®µï¼šStatus å°†è¢«åºŸå¼ƒ</li></ol><p>Status åªæœ‰ï¼š</p><p>ACTIVE</p><p>SUSPENDED</p><p>ç²’åº¦å¤ªç²—ï¼Œæ‰€ä»¥è¦è¢«æ·˜æ±°ã€‚</p><h2 id="å½±å“åŠè§£å†³æ–¹æ¡ˆ"><a href="#å½±å“åŠè§£å†³æ–¹æ¡ˆ" class="headerlink" title="å½±å“åŠè§£å†³æ–¹æ¡ˆ"></a>å½±å“åŠè§£å†³æ–¹æ¡ˆ</h2><p>è¿™é‡Œæˆ‘ä»¬éœ€è¦çœ‹ä¸€ä¸‹æˆ‘ä»¬çš„é¡¹ç›®ä¸­æœ‰æ²¡æœ‰åœ°æ–¹ç”¨åˆ°äº†è¿™ä¸ªå­—æ®µï¼Œå¦‚æœæœ‰çš„è¯éœ€è¦æ›´æ”¹å­—æ®µ<br>æ‰€å¹¸AWSæŠŠæ‰€æœ‰èƒ½è¿”å›è¿™ä¸ªå­—æ®µçš„APIéƒ½åˆ—å‡ºæ¥äº†</p><ul><li>DescribeAccount</li><li>ListAccounts</li><li>ListAccountsForParent</li><li>ListDelegatedAdministrators<br>æˆ‘ä»¬åªéœ€è¦é€šè¿‡CloudTrailçœ‹ä¸€ä¸‹æœ‰æ²¡æœ‰å¯¹åº”çš„eventå³å¯<br>å› æ­¤æˆ‘ä»¬éœ€è¦å»åˆ°CloudTrail -&gt; Event historyä¸­æŸ¥æ‰¾ï¼Œç­›é€‰æ¡ä»¶ä¸ºevent name &#x3D; ä¸Šé¢å››ä¸ª<br>å¦‚æœæ²¡æœ‰æŸ¥åˆ°ç»“æœï¼Œæˆ–è€…æŸ¥åˆ°çš„Event sourceä¸ºsso.amazonaws.com,å°±ä¸éœ€è¦å†çœ‹äº†ï¼Œè¯´æ˜æ²¡æœ‰äººä¸ºçš„è°ƒç”¨</li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;èƒŒæ™¯&quot;&gt;&lt;a href=&quot;#èƒŒæ™¯&quot; class=&quot;headerlink&quot; title=&quot;èƒŒæ™¯&quot;&gt;&lt;/a&gt;èƒŒæ™¯&lt;/h2&gt;&lt;p&gt;ä»Šå¤©æ”¶åˆ°äº†AWSçš„ä¸€æ¡eventæé†’&lt;/p&gt;
&lt;p&gt;æ ‡é¢˜æ˜¯Organizations planned lifecycle event&lt;/p&gt;</summary>
      
    
    
    
    <category term="è¿ç»´" scheme="https://maydaychen.github.io/categories/%E8%BF%90%E7%BB%B4/"/>
    
    
    <category term="AWS" scheme="https://maydaychen.github.io/tags/AWS/"/>
    
  </entry>
  
  <entry>
    <title>AWSä½¿ç”¨æ—¥å¿—9--ä¸ºStorageGatewayåˆ›å»ºCacheReport</title>
    <link href="https://maydaychen.github.io/2025/11/11/AWS%E4%BD%BF%E7%94%A8%E6%97%A5%E5%BF%979-%E4%B8%BAStorageGateway%E5%88%9B%E5%BB%BACacheReport/"/>
    <id>https://maydaychen.github.io/2025/11/11/AWS%E4%BD%BF%E7%94%A8%E6%97%A5%E5%BF%979-%E4%B8%BAStorageGateway%E5%88%9B%E5%BB%BACacheReport/</id>
    <published>2025-11-11T02:52:13.000Z</published>
    <updated>2025-11-13T09:45:16.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h1><p>å…¶å®æ¥è‡ªäºAWS health dashboardä¸­çš„è¿™ä¹ˆä¸€æ¡æŠ¥è­¦</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">StorageGateway security notification</span><br><span class="line"></span><br><span class="line">We identified an issue affecting S3 File Gateway versions 1.27.7-1.27.10, which may require your attention.</span><br><span class="line"></span><br><span class="line">We have identified that your gateway may have been impacted by this issue due to having large files written to your NFS shares. This issue affects the updating of file metadata for files larger than 6MB when copied to a NFS file share. Specifically, when copying large files (greater than 6MB) to a NFS file share and then updating the file metadata (e.g: permissions, owner, group, creation/modification timestamp), the updates are only applied to the gateway cache, not to S3. If the metadata in the gateway cache is evicted, updates that are not uploaded to S3 may be lost. If your workload is impacted by this issue, you may need to update the file metadata to the desired values.</span><br><span class="line"></span><br><span class="line">A list of your affected resource(s) can be found in the &#x27;Affected resources&#x27; tab.</span><br><span class="line"></span><br><span class="line">We have implemented a fix and recommend updating to version 1.27.11 [1]. After this update is applied, the issue will be resolved for future file copy operations.</span><br><span class="line"></span><br><span class="line">For questions or concerns, please contact AWS Support [2].</span><br><span class="line"></span><br><span class="line">[1] https://docs.aws.amazon.com/filegateway/latest/files3/MaintenanceManagingUpdate-common.html</span><br><span class="line">[2] https://aws.amazon.com/support</span><br></pre></td></tr></table></figure><p>è¡¨ç¤ºæˆ‘ç°åœ¨ç”¨çš„storage gatewayæœ‰ä¸€äº›æ–‡ä»¶ä¸Šä¼ å¤±è´¥äº†ï¼Œéœ€è¦æŸ¥çœ‹å¹¶è§£å†³</p><h1 id="è§£å†³æ–¹æ¡ˆ"><a href="#è§£å†³æ–¹æ¡ˆ" class="headerlink" title="è§£å†³æ–¹æ¡ˆ"></a>è§£å†³æ–¹æ¡ˆ</h1><h2 id="æŸ¥çœ‹storage-gatewayé—®é¢˜"><a href="#æŸ¥çœ‹storage-gatewayé—®é¢˜" class="headerlink" title="æŸ¥çœ‹storage gatewayé—®é¢˜"></a>æŸ¥çœ‹storage gatewayé—®é¢˜</h2><img src="/2025/11/11/AWS%E4%BD%BF%E7%94%A8%E6%97%A5%E5%BF%979-%E4%B8%BAStorageGateway%E5%88%9B%E5%BB%BACacheReport/img.png" class="" title="å¦‚å›¾æ‰€ç¤º"><p>å¯ä»¥çœ‹åˆ°æœ‰ä¸ªæç¤ºè¯´ä¸Šä¼ æœ‰é—®é¢˜ï¼Œå»ºè®®åˆ›å»ºcache report</p><p>S3 æ–‡ä»¶ç½‘å…³å¯ä»¥ä¸ºå½“å‰ä½äºç‰¹å®šæ–‡ä»¶å…±äº«çš„æœ¬åœ°ä¸Šä¼ ç¼“å­˜ä¸­çš„æ–‡ä»¶ç”Ÿæˆå…ƒæ•°æ®æŠ¥å‘Šã€‚æ‚¨å¯ä»¥åº”ç”¨ç­›é€‰å™¨å’Œå…¶ä»–æ ‡å‡†æ¥ç¡®å®šå“ªäº›ç‰¹å®šç±»å‹çš„ç¼“å­˜æ–‡ä»¶å‡ºç°åœ¨æŠ¥å‘Šä¸­ã€‚æ‚¨å¯ä»¥ä½¿ç”¨æ­¤æŠ¥å‘Šæ¥å¸®åŠ©è¯†åˆ«å’Œè§£å†³ç½‘å…³é—®é¢˜ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæ‚¨æ— æ³•å°†æ–‡ä»¶ä»ç½‘å…³ä¸Šä¼ åˆ° Amazon S3ï¼Œåˆ™å¯ä»¥ç”Ÿæˆä¸€ä»½æŠ¥å‘Šï¼Œåˆ—å‡ºä¸Šä¼ å¤±è´¥çš„å…·ä½“æ–‡ä»¶ä»¥åŠä¸Šä¼ å¤±è´¥çš„åŸå› ã€‚è¯¥æŠ¥å‘Šæ˜¯ä¸€ä¸ª CSV æ–‡ä»¶ï¼Œå…¶ä¸­åŒ…å«ä¸æ‚¨æŒ‡å®šçš„ç­›é€‰å‚æ•°é›†åŒ¹é…çš„æ–‡ä»¶åˆ—è¡¨ã€‚è¾“å‡ºæ–‡ä»¶ä½œä¸º Amazon S3 å¯¹è±¡å­˜å‚¨åœ¨æ‚¨åœ¨é…ç½®æŠ¥å‘Šæ—¶æŒ‡å®šçš„å­˜å‚¨æ¡¶ä½ç½®ã€‚</p><h2 id="åˆ›å»ºcache-report"><a href="#åˆ›å»ºcache-report" class="headerlink" title="åˆ›å»ºcache report"></a>åˆ›å»ºcache report</h2><img src="/2025/11/11/AWS%E4%BD%BF%E7%94%A8%E6%97%A5%E5%BF%979-%E4%B8%BAStorageGateway%E5%88%9B%E5%BB%BACacheReport/img_1.png" class="" title="å¦‚å›¾æ‰€ç¤º"><p>å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªIAM roleä»¥åŠä¸€ä¸ªS3 bucketæ¥å­˜æ”¾report</p><h3 id="IAM-Role"><a href="#IAM-Role" class="headerlink" title="IAM Role"></a>IAM Role</h3><p>roleéœ€è¦é…ç½®ä»¥ä¸‹trust relationship</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &quot;Version&quot;: &quot;2012-10-17&quot;,</span><br><span class="line">    &quot;Statement&quot;: [</span><br><span class="line">        &#123;</span><br><span class="line">            &quot;Effect&quot;: &quot;Allow&quot;,</span><br><span class="line">            &quot;Principal&quot;: &#123;</span><br><span class="line">                &quot;Service&quot;: &quot;storagegateway.amazonaws.com&quot;</span><br><span class="line">            &#125;,</span><br><span class="line">            &quot;Action&quot;: &quot;sts:AssumeRole&quot;</span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä»¥åŠä»¥ä¸‹æƒé™ç­–ç•¥</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &quot;Version&quot;: &quot;2012-10-17&quot;,</span><br><span class="line">    &quot;Statement&quot;: [</span><br><span class="line">        &#123;</span><br><span class="line">            &quot;Sid&quot;: &quot;VisualEditor0&quot;,</span><br><span class="line">            &quot;Effect&quot;: &quot;Allow&quot;,</span><br><span class="line">            &quot;Action&quot;: [</span><br><span class="line">                &quot;s3:PutObject&quot;,</span><br><span class="line">                &quot;s3:AbortMultipartUpload&quot;,</span><br><span class="line">                &quot;s3:GetBucketLocation&quot;,</span><br><span class="line">                &quot;s3:ListBucket&quot;</span><br><span class="line">            ],</span><br><span class="line">            &quot;Resource&quot;: [</span><br><span class="line">                &quot;arn:aws:s3:::storagegatewaygachereporttemporary&quot;,</span><br><span class="line">                &quot;arn:aws:s3:::storagegatewaygachereporttemporary/*&quot;</span><br><span class="line">            ]</span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Report-Filter"><a href="#Report-Filter" class="headerlink" title="Report Filter"></a>Report Filter</h3><p>filterè¿™è¾¹æœ‰ä¸¤ä¸ªé€‰é¡¹</p><table><thead><tr><th>é€‰é¡¹</th><th>å«ä¹‰</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td><strong>All failing uploads</strong></td><td>åŒ…å«æ‰€æœ‰ä¸Šä¼ å¤±è´¥çš„æ–‡ä»¶ï¼ˆä¸è®ºå¤±è´¥åŸå› ï¼‰</td><td>é€‚ç”¨äºä½ è¦å…¨é¢æ’æŸ¥ä¸Šä¼ å¼‚å¸¸çš„æƒ…å†µï¼ˆæ¨èç¬¬ä¸€æ¬¡æ’æŸ¥æ—¶ä½¿ç”¨ï¼‰</td></tr><tr><td><strong>Subset by specific reasons</strong></td><td>ä»…åŒ…å«æŒ‡å®šå¤±è´¥åŸå› çš„æ–‡ä»¶</td><td>é€‚ç”¨äºä½ æƒ³èšç„¦æŸç±»é—®é¢˜ï¼ˆä¾‹å¦‚åªçœ‹ <code>InvalidObjectState</code> æˆ– <code>AccessDenied</code>ï¼‰æ—¶ä½¿ç”¨</td></tr></tbody></table><p>å››ç§é”™è¯¯è§£é‡ŠåŠå¯èƒ½åŸå› </p><table><thead><tr><th>å¤±è´¥åŸå› </th><th>å«ä¹‰</th><th>å¯èƒ½åŸå› </th></tr></thead><tbody><tr><td><strong>Inaccessible storage class</strong></td><td>ç½‘å…³æ— æ³•è®¿é—®å¯¹è±¡çš„å­˜å‚¨ç±»åˆ«</td><td>ç›®æ ‡å¯¹è±¡åœ¨ <strong>Glacier &#x2F; Glacier Deep Archive</strong>ï¼Œéœ€è¦æ¢å¤åæ‰èƒ½è®¿é—®</td></tr><tr><td><strong>Invalid object state</strong></td><td>æ–‡ä»¶åœ¨æœ¬åœ°å’Œ S3 ä¸Šçš„çŠ¶æ€ä¸ä¸€è‡´</td><td>å¯¹è±¡å¯èƒ½è¢«å†»ç»“ã€è¢«æ›¿æ¢ã€è¢«éƒ¨åˆ†ä¸Šä¼ æˆ–å…ƒæ•°æ®ä¸åŒæ­¥</td></tr><tr><td><strong>Object missing</strong></td><td>å¯¹è±¡åœ¨ S3 ä¸Šè¢«åˆ é™¤æˆ–ç§»åŠ¨</td><td>å¯èƒ½æœ‰äººåœ¨ S3 æ§åˆ¶å°æˆ– CLI ä¸­æ‰‹åŠ¨åˆ é™¤äº†å¯¹è±¡</td></tr><tr><td><strong>S3 Access Denied</strong></td><td>ç½‘å…³çš„ IAM è§’è‰²æ²¡æœ‰ä¸Šä¼ æƒé™</td><td>å¯èƒ½æ˜¯ IAM Role ç¼ºå°‘ <code>s3:PutObject</code> æˆ– <code>s3:ListBucketMultipartUploads</code> æƒé™</td></tr></tbody></table><p>é€‰æ‹©å»ºè®®</p><table><thead><tr><th>ç›®çš„</th><th>æ¨è Filter</th></tr></thead><tbody><tr><td>æƒ³å…¨é¢äº†è§£æœ‰å“ªäº›ä¸Šä¼ å¤±è´¥çš„æ–‡ä»¶</td><td><strong>All failing uploads</strong></td></tr><tr><td>åªæƒ³æ’æŸ¥â€œInvalidObjectStateâ€ç±»é—®é¢˜ï¼ˆæœ€å¸¸è§ï¼‰</td><td>é€‰æ‹© <strong>Subset â†’ Invalid object state</strong></td></tr><tr><td>åªæƒ³ç¡®è®¤æƒé™é—®é¢˜</td><td>é€‰æ‹© <strong>Subset â†’ S3 Access Denied</strong></td></tr></tbody></table><p>åˆ›å»ºä¹‹åå¤§çº¦1-5åˆ†é’Ÿå°±å¯ä»¥åœ¨S3ä¸­çœ‹åˆ°ä¸€ä¸ªcsvæ–‡ä»¶ï¼Œé‚£ä¸ªå°±æ˜¯report</p><h2 id="cache-reportè§£è¯»"><a href="#cache-reportè§£è¯»" class="headerlink" title="cache reportè§£è¯»"></a>cache reportè§£è¯»</h2><img src="/2025/11/11/AWS%E4%BD%BF%E7%94%A8%E6%97%A5%E5%BF%979-%E4%B8%BAStorageGateway%E5%88%9B%E5%BB%BACacheReport/img_2.png" class="" title="å¦‚å›¾æ‰€ç¤º"><p>å­—æ®µè¯¦è§£</p><table><thead><tr><th align="left">å­—æ®µå</th><th align="left">å«ä¹‰</th><th align="left">å…¸å‹å–å€¼</th><th align="left">è¯´æ˜ä¸é‡ç‚¹</th></tr></thead><tbody><tr><td align="left"><strong>Bucket</strong></td><td align="left">ç›®æ ‡ S3 Bucket åç§°</td><td align="left"><code>xxx-s3</code></td><td align="left">è¡¨ç¤ºè¯¥æ–‡ä»¶æœ€ç»ˆåº”å†™å…¥çš„ S3 bucketã€‚</td></tr><tr><td align="left"><strong>S3ObjectKey</strong></td><td align="left">åœ¨ S3 ä¸­çš„å¯¹è±¡è·¯å¾„ï¼ˆKeyï¼‰</td><td align="left"><code>aaa/bbb/cb/...</code></td><td align="left">å¯¹åº” S3 ä¸­çš„å¯¹è±¡é”®ã€‚å¯ç›´æ¥åœ¨ S3 æ§åˆ¶å°æœç´¢æ­¤ Key éªŒè¯æ–‡ä»¶æ˜¯å¦å­˜åœ¨ã€‚</td></tr><tr><td align="left"><strong>FilePath</strong></td><td align="left">Gateway æœ¬åœ°æŒ‚è½½ç‚¹ä¸­çš„æ–‡ä»¶è·¯å¾„</td><td align="left"><code>/mnt/share/aaa/bbb/cb/...</code></td><td align="left">æŒ‡æ–‡ä»¶åœ¨æœ¬åœ°ç½‘å…³ä¸­çš„è·¯å¾„ã€‚ç”¨äºå®šä½æœ¬åœ°ç¼“å­˜çš„æ–‡ä»¶ã€‚</td></tr><tr><td align="left"><strong>Type</strong></td><td align="left">æ–‡ä»¶æˆ–ç›®å½•ç±»å‹</td><td align="left"><code>File</code> &#x2F; <code>Directory</code></td><td align="left">é€šå¸¸ä¸º Fileã€‚å¦‚æœæ˜¯ Directoryï¼Œå°±ä»£è¡¨ç›®å½•é¡¹ï¼ˆä¸ä¼šä¸Šä¼ ï¼‰ã€‚</td></tr><tr><td align="left"><strong>IsDirty</strong></td><td align="left">æ–‡ä»¶æ˜¯å¦æœ‰å°šæœªä¸Šä¼ åˆ° S3 çš„æ›´æ”¹ï¼ˆæ•°æ®æˆ–å…ƒæ•°æ®ï¼‰</td><td align="left"><code>true</code> &#x2F; <code>false</code></td><td align="left">å¦‚æœä¸º <code>true</code>ï¼Œè¯´æ˜è¯¥æ–‡ä»¶åœ¨æœ¬åœ°æœ‰ä¿®æ”¹ä½†è¿˜æ²¡å®Œå…¨åŒæ­¥åˆ° S3ã€‚</td></tr><tr><td align="left"><strong>IsDataDirty</strong></td><td align="left">æ–‡ä»¶æ•°æ®éƒ¨åˆ†æ˜¯å¦æœªä¸Šä¼ å®Œæˆ</td><td align="left"><code>true</code> &#x2F; <code>false</code></td><td align="left">æ¯” <code>IsDirty</code> æ›´å…·ä½“ï¼Œåªè¡¨ç¤ºæ–‡ä»¶å†…å®¹ï¼ˆæ•°æ®å—ï¼‰æœªåŒæ­¥ã€‚</td></tr><tr><td align="left"><strong>IsDeleted</strong></td><td align="left">æ–‡ä»¶æ˜¯å¦å·²åœ¨æœ¬åœ°åˆ é™¤ä½†è¿˜æ²¡åŒæ­¥åˆ° S3</td><td align="left"><code>true</code> &#x2F; <code>false</code></td><td align="left">è‹¥ä¸º <code>true</code>ï¼ŒS3 ä¸Šå¯èƒ½è¿˜ä¿ç•™æ—§æ–‡ä»¶ã€‚</td></tr><tr><td align="left"><strong>IsFailingToUpload</strong></td><td align="left">æ˜¯å¦åœ¨ä¸Šä¼ è‡³ S3 æ—¶å‘ç”Ÿé”™è¯¯</td><td align="left"><code>true</code> &#x2F; <code>false</code></td><td align="left">ğŸš¨ å¦‚æœä¸º <code>true</code>ï¼Œå°±æ˜¯å…³é”®å­—æ®µ â€”â€” è¡¨ç¤ºè¯¥æ–‡ä»¶ä¸Šä¼ å¤±è´¥ã€‚</td></tr><tr><td align="left"><strong>UploadError</strong></td><td align="left">ä¸Šä¼ å¤±è´¥çš„å…·ä½“é”™è¯¯ç±»å‹</td><td align="left">ä¾‹å¦‚ï¼š<code>InvalidObjectState</code>, <code>AccessDenied</code>, <code>EntityTooLarge</code></td><td align="left">å¯ç›´æ¥ç”¨æ¥åˆ¤æ–­åŸå› ã€‚å’Œä½  CloudWatch Log ä¸­çš„é”™è¯¯å­—æ®µä¸€è‡´ã€‚</td></tr><tr><td align="left"><strong>SizeInBytes</strong></td><td align="left">æ–‡ä»¶å¤§å°</td><td align="left">ä¾‹å¦‚ <code>6345721</code></td><td align="left">å¯å¸®åŠ©ç¡®è®¤æ˜¯å¦å±äº â€œ&gt;6MB metadata update bugâ€ èŒƒå›´ã€‚</td></tr><tr><td align="left"><strong>IsWholeFileInCache</strong></td><td align="left">æ–‡ä»¶æ˜¯å¦å®Œæ•´ä¿å­˜åœ¨ gateway cache ä¸­</td><td align="left"><code>true</code> &#x2F; <code>false</code></td><td align="left">å¦‚æœä¸º <code>false</code>ï¼Œè¯´æ˜åªç¼“å­˜äº†éƒ¨åˆ†æ–‡ä»¶å†…å®¹ã€‚é‡æ–°ä¸Šä¼ æ—¶å¯èƒ½éœ€è¦é‡æ–°æ‹‰å–ã€‚</td></tr></tbody></table><h3 id="è§£æ"><a href="#è§£æ" class="headerlink" title="è§£æ"></a>è§£æ</h3><p>IsDirty &#x3D; TRUE ä¸” IsDataDirty &#x3D; FALSE<br>è¡¨ç¤ºæ–‡ä»¶çš„â€œå…ƒæ•°æ®â€ï¼ˆå¦‚æ—¶é—´æˆ³ã€æƒé™ï¼‰åœ¨æœ¬åœ°å·²æ›´æ–°ï¼Œä½†æ–‡ä»¶å†…å®¹æ²¡æœ‰å˜åŒ–ã€‚<br>ğŸ”¹è¯´æ˜è¯¥æ–‡ä»¶çš„å†…å®¹æ²¡é—®é¢˜ï¼Œä½†å…ƒæ•°æ®æ›´æ–°æ²¡èƒ½ä¸Šä¼ æˆåŠŸã€‚<br>å…·ä½“é”™è¯¯å¯å‚è€ƒï¼š <a href="https://docs.aws.amazon.com/filegateway/latest/files3/troubleshooting-file-gateway-issues.html#troubleshoot-logging-errors-invalidobjectstate">https://docs.aws.amazon.com/filegateway/latest/files3/troubleshooting-file-gateway-issues.html#troubleshoot-logging-errors-invalidobjectstate</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;èƒŒæ™¯&quot;&gt;&lt;a href=&quot;#èƒŒæ™¯&quot; class=&quot;headerlink&quot; title=&quot;èƒŒæ™¯&quot;&gt;&lt;/a&gt;èƒŒæ™¯&lt;/h1&gt;&lt;p&gt;å…¶å®æ¥è‡ªäºAWS health dashboardä¸­çš„è¿™ä¹ˆä¸€æ¡æŠ¥è­¦&lt;/p&gt;
&lt;figure class=&quot;highlight shell&quot;&gt;</summary>
      
    
    
    
    <category term="è¿ç»´" scheme="https://maydaychen.github.io/categories/%E8%BF%90%E7%BB%B4/"/>
    
    
    <category term="AWS" scheme="https://maydaychen.github.io/tags/AWS/"/>
    
  </entry>
  
  <entry>
    <title>AWSä½¿ç”¨æ—¥å¿—8--æ€ä¹ˆé€šè¿‡AWS ConfigæŸ¥æ‰¾é…ç½®äº†Lifecycleçš„S3</title>
    <link href="https://maydaychen.github.io/2025/10/28/AWS%E4%BD%BF%E7%94%A8%E6%97%A5%E5%BF%978-%E6%80%8E%E4%B9%88%E9%80%9A%E8%BF%87AWS-Config%E6%9F%A5%E6%89%BE%E9%85%8D%E7%BD%AE%E4%BA%86Lifecycle%E7%9A%84S3/"/>
    <id>https://maydaychen.github.io/2025/10/28/AWS%E4%BD%BF%E7%94%A8%E6%97%A5%E5%BF%978-%E6%80%8E%E4%B9%88%E9%80%9A%E8%BF%87AWS-Config%E6%9F%A5%E6%89%BE%E9%85%8D%E7%BD%AE%E4%BA%86Lifecycle%E7%9A%84S3/</id>
    <published>2025-10-28T06:19:48.000Z</published>
    <updated>2025-11-13T02:51:08.567Z</updated>
    
    <content type="html"><![CDATA[<h1 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h1><p>å¦‚æœä½ æ˜¯ä¸€ä¸ªorganizationï¼Œè€Œä¸”è¿˜æƒ³è·å–åˆ°æ‰€æœ‰å·²ç»é…ç½®äº†lifecycleè·Ÿreplicationçš„bucketï¼Œé‚£ä¹ˆé€šè¿‡AWS Configå¯èƒ½æ˜¯æœ€å¿«é€Ÿçš„åŠæ³•</p><h1 id="å®ç°"><a href="#å®ç°" class="headerlink" title="å®ç°"></a>å®ç°</h1><p>è€åŠæ³•ï¼Œè¿™é‡Œæˆ‘ä»¬ä½¿ç”¨AWS Configçš„advanced queryåŠŸèƒ½</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">SELECT</span><br><span class="line">  resourceId,</span><br><span class="line">  resourceType,</span><br><span class="line">  supplementaryConfiguration.BucketReplicationConfiguration,</span><br><span class="line">  supplementaryConfiguration.BucketLifecycleConfiguration</span><br><span class="line">WHERE</span><br><span class="line">  resourceType = &#x27;AWS::S3::Bucket&#x27;</span><br><span class="line">  AND supplementaryConfiguration.BucketReplicationConfiguration.roleARN LIKE &#x27;arn:aws:iam::%&#x27;</span><br></pre></td></tr></table></figure><p>supplementaryConfigurationæ˜¯ä¸€äº›è¾…åŠ©çš„å‚æ•°ï¼Œå¯ä»¥å±•ç¤ºä¸€äº›<br>å¦‚æœä¸ç¡®å®šä½ è¦ç”¨å“ªä¸ªå‚æ•°ï¼Œå¯ä»¥ç›´æ¥å†™supplementaryConfigurationï¼Œå…ˆå±•ç¤ºæ•´ä¸ªjson</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;èƒŒæ™¯&quot;&gt;&lt;a href=&quot;#èƒŒæ™¯&quot; class=&quot;headerlink&quot; title=&quot;èƒŒæ™¯&quot;&gt;&lt;/a&gt;èƒŒæ™¯&lt;/h1&gt;&lt;p&gt;å¦‚æœä½ æ˜¯ä¸€ä¸ªorganizationï¼Œè€Œä¸”è¿˜æƒ³è·å–åˆ°æ‰€æœ‰å·²ç»é…ç½®äº†lifecycleè·Ÿreplicationçš„bucketï¼Œé‚£ä¹ˆé€šè¿‡AWS </summary>
      
    
    
    
    <category term="è¿ç»´" scheme="https://maydaychen.github.io/categories/%E8%BF%90%E7%BB%B4/"/>
    
    
    <category term="AWS" scheme="https://maydaychen.github.io/tags/AWS/"/>
    
  </entry>
  
  <entry>
    <title>Zabbixè¿›é˜¶13--å¦‚ä½•ä½¿ç”¨ZabbixSender</title>
    <link href="https://maydaychen.github.io/2025/10/22/Zabbix%E8%BF%9B%E9%98%B613-%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8ZabbixSender/"/>
    <id>https://maydaychen.github.io/2025/10/22/Zabbix%E8%BF%9B%E9%98%B613-%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8ZabbixSender/</id>
    <published>2025-10-22T02:45:23.000Z</published>
    <updated>2025-10-22T02:45:23.794Z</updated>
    
    
    
    
    
  </entry>
  
  <entry>
    <title>AWSä½¿ç”¨æ—¥å¿—7--ä½¿ç”¨Data Exportsç”ŸæˆcostæŠ¥å‘Š</title>
    <link href="https://maydaychen.github.io/2025/10/21/AWS%E4%BD%BF%E7%94%A8%E6%97%A5%E5%BF%977-%E4%BD%BF%E7%94%A8DataExports%E7%94%9F%E6%88%90cost%E6%8A%A5%E5%91%8A/"/>
    <id>https://maydaychen.github.io/2025/10/21/AWS%E4%BD%BF%E7%94%A8%E6%97%A5%E5%BF%977-%E4%BD%BF%E7%94%A8DataExports%E7%94%9F%E6%88%90cost%E6%8A%A5%E5%91%8A/</id>
    <published>2025-10-21T09:34:11.000Z</published>
    <updated>2025-10-22T03:33:33.639Z</updated>
    
    <content type="html"><![CDATA[<h1 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h1><p>financeå›¢é˜Ÿæ¯ä¸ªæœˆéœ€è¦åœ¨AWSä¸Šä¸‹è½½billingçš„csvï¼Œä½†æ˜¯ä»11æœˆå¼€å§‹ï¼ŒDownload all to CSVè¿™ä¸ªåŠŸèƒ½å°±è¦ä¸‹çº¿äº†ï¼ŒAWSå®˜æ–¹æ¨èä½¿ç”¨Data ExportsåŠŸèƒ½ç”Ÿæˆæ¯ä¸ªæœˆçš„csvæ–‡ä»¶å¹¶ä¸”ä¿å­˜åœ¨S3ä¸­</p><img src="/2025/10/21/AWS%E4%BD%BF%E7%94%A8%E6%97%A5%E5%BF%977-%E4%BD%BF%E7%94%A8DataExports%E7%94%9F%E6%88%90cost%E6%8A%A5%E5%91%8A/1.png" class="" title="å¦‚å›¾æ‰€ç¤º"><h1 id="è´¹ç”¨"><a href="#è´¹ç”¨" class="headerlink" title="è´¹ç”¨"></a>è´¹ç”¨</h1><p>è¿™ä¸ªåŠŸèƒ½æœ¬èº«æ˜¯ä¸è¦é’±çš„ï¼Œä½†æ˜¯ç”±äºéœ€è¦ä¿å­˜æ–‡ä»¶åˆ°S3ä¸­ï¼Œæ‰€ä»¥ä¼šäº§ç”Ÿä¸€äº›é—´æ¥çš„è´¹ç”¨åŒ…æ‹¬</p><ul><li>S3çš„å­˜å‚¨å’Œæµé‡è´¹</li><li>å¦‚æœç”¨Athenaè¿›è¡ŒæŸ¥è¯¢çš„è¯ï¼ŒAthenaéœ€è¦ä»˜è´¹<br>å…¶ä»–æ²¡ä»€ä¹ˆè´¹ç”¨é—®é¢˜</li></ul><h1 id="å®è·µä¸è¯´æ˜"><a href="#å®è·µä¸è¯´æ˜" class="headerlink" title="å®è·µä¸è¯´æ˜"></a>å®è·µä¸è¯´æ˜</h1><h2 id="å¯¼å‡ºç±»å‹"><a href="#å¯¼å‡ºç±»å‹" class="headerlink" title="å¯¼å‡ºç±»å‹"></a>å¯¼å‡ºç±»å‹</h2><p>AWSç°åœ¨çš„è´¦å•å¯¼å‡ºä½“ç³»æœ‰ä¸‰ç§ç±»å‹</p><img src="/2025/10/21/AWS%E4%BD%BF%E7%94%A8%E6%97%A5%E5%BF%977-%E4%BD%BF%E7%94%A8DataExports%E7%94%9F%E6%88%90cost%E6%8A%A5%E5%91%8A/2.png" class="" title="å¦‚å›¾æ‰€ç¤º"><table><thead><tr><th>ç±»å‹</th><th>åç§°ï¼ˆè‹±æ–‡ï¼‰</th><th>æ ¸å¿ƒç›®æ ‡</th></tr></thead><tbody><tr><td>1ï¸âƒ£</td><td><strong>Standard data export</strong></td><td>ç°ä»£åŒ–ã€çµæ´»ã€é€‚åˆ BI &#x2F; ETL &#x2F; åˆ†æç³»ç»Ÿ</td></tr><tr><td>2ï¸âƒ£</td><td><strong>Cost and usage dashboard (QuickSight)</strong></td><td>ä¸€é”®éƒ¨ç½²å¯è§†åŒ–çœ‹æ¿</td></tr><tr><td>3ï¸âƒ£</td><td><strong>Legacy CUR export</strong></td><td>æ—§ç‰ˆå¯¼å‡ºæ–¹å¼ï¼ˆå³ä½ ä¹‹å‰è¯´çš„ â€œeCSV æŠ¥è¡¨â€ï¼‰</td></tr></tbody></table><p>æ€»ç»“å¯¹æ¯”</p><table><thead><tr><th>åŠŸèƒ½ç‚¹</th><th>Standard Data Export</th><th>Cost &amp; Usage Dashboard</th><th>Legacy CUR Export</th></tr></thead><tbody><tr><td>æŠ€æœ¯åº•å±‚</td><td>CUR 2.0 (SQL-based)</td><td>CUR 2.0 + QuickSight</td><td>Legacy CUR (æ—§)</td></tr><tr><td>å¯å®šåˆ¶åˆ—</td><td>âœ… å¯è‡ªé€‰åˆ— &#x2F; è¿‡æ»¤</td><td>âŒ å›ºå®šæ¨¡æ¿</td><td>âŒ å›ºå®šæ‰€æœ‰åˆ—</td></tr><tr><td>è¾“å‡ºæ ¼å¼</td><td>Parquet &#x2F; CSV</td><td>Parquet</td><td>CSV.gz &#x2F; Parquet</td></tr><tr><td>è¾“å‡ºç›®æ ‡</td><td>S3</td><td>S3 + QuickSight</td><td>S3</td></tr><tr><td>Athena æŸ¥è¯¢</td><td>âœ… ç›´æ¥æ”¯æŒ</td><td>âŒ ä¸æ”¯æŒ</td><td>âœ… æ”¯æŒ</td></tr><tr><td>å¯è§†åŒ–</td><td>è‡ªè¡Œæ„å»º (BI å·¥å…·)</td><td>âœ… é¢„åˆ¶çœ‹æ¿</td><td>è‡ªè¡Œæ„å»º</td></tr><tr><td>æˆæœ¬è¶‹åŠ¿</td><td>âœ… æ”¯æŒ</td><td>âœ… æ”¯æŒ</td><td>âœ… æ”¯æŒ</td></tr><tr><td>æ¨èç¨‹åº¦</td><td>â­â­â­â­ï¼ˆæ–°æ¶æ„ï¼‰</td><td>â­â­ï¼ˆå¿«é€Ÿå±•ç¤ºï¼‰</td><td>â­ï¼ˆå…¼å®¹æ—§ç³»ç»Ÿï¼‰</td></tr></tbody></table><h2 id="è¡¨å†…å®¹è®¾å®š"><a href="#è¡¨å†…å®¹è®¾å®š" class="headerlink" title="è¡¨å†…å®¹è®¾å®š"></a>è¡¨å†…å®¹è®¾å®š</h2><p>âš ï¸é™å®šStandard data exportæ‰æœ‰çš„è®¾å®š</p><img src="/2025/10/21/AWS%E4%BD%BF%E7%94%A8%E6%97%A5%E5%BF%977-%E4%BD%BF%E7%94%A8DataExports%E7%94%9F%E6%88%90cost%E6%8A%A5%E5%91%8A/3.png" class="" title="å¦‚å›¾æ‰€ç¤º"><p>é¦–å…ˆæˆ‘ä»¬ä¼šçœ‹åˆ°å››ä¸ªç±»å‹ï¼Œè¿™æ˜¯æ¯ä¸ªç±»å‹å¯¹åº”çš„åº”ç”¨åœºæ™¯</p><table><thead><tr><th>åœºæ™¯</th><th>æ¨èè¡¨</th></tr></thead><tbody><tr><td>æˆæœ¬åˆ†æ&#x2F;é¢„ç®—</td><td>CUR 2.0</td></tr><tr><td>æˆæœ¬ä¼˜åŒ–</td><td>Cost Optimization Recommendations</td></tr><tr><td>å¤šäº‘&#x2F;FinOps æ ‡å‡†åŒ–</td><td>FOCUS 1.0 with AWS columns</td></tr><tr><td>ESG&#x2F;å¯æŒç»­å‘å±•æŠ¥å‘Š</td><td>Carbon Emissions</td></tr></tbody></table><p>è¿™æ˜¯æ¯ä¸€ä¸ªç±»å‹çš„æŠ¥å‘Šæ‰€åŒ…å«çš„æ—¶é—´èŒƒå›´</p><table><thead><tr><th>é€‰æ‹©</th><th>æ¯æ—¥æ–‡ä»¶å†…å®¹åŒ…å«çš„æ—¶é—´èŒƒå›´</th></tr></thead><tbody><tr><td>CUR 2.0</td><td>å½“æœˆ1å·åˆ°å½“å¤©ï¼ˆç´¯ç§¯æ•°æ®ï¼‰</td></tr><tr><td>FOCUS 1.0</td><td>å½“æœˆ1å·åˆ°å½“å¤©ï¼ˆç´¯ç§¯æ•°æ®ï¼‰</td></tr><tr><td>Cost Optimization Recommendations</td><td>å½“å¤©å¿«ç…§</td></tr><tr><td>Carbon Emissions</td><td>å½“æœˆæˆ–ä¸Šæœˆç´¯è®¡æ•°æ®ï¼ˆæ›´æ–°é¢‘ç‡ä½ï¼‰</td></tr></tbody></table><h2 id="æ–‡ä»¶ç±»å‹"><a href="#æ–‡ä»¶ç±»å‹" class="headerlink" title="æ–‡ä»¶ç±»å‹"></a>æ–‡ä»¶ç±»å‹</h2><img src="/2025/10/21/AWS%E4%BD%BF%E7%94%A8%E6%97%A5%E5%BF%977-%E4%BD%BF%E7%94%A8DataExports%E7%94%9F%E6%88%90cost%E6%8A%A5%E5%91%8A/4.png" class="" title="å¦‚å›¾æ‰€ç¤º"><table><thead><tr><th>ç›®æ ‡</th><th>æ¨èé…ç½®</th></tr></thead><tbody><tr><td>æƒ³ä¸‹è½½ CSV æ–‡ä»¶æŸ¥çœ‹</td><td>Format: CSV + Compression: GZIP</td></tr><tr><td>æƒ³ç”¨ Athena æŸ¥è¯¢</td><td>Format: Parquetï¼ˆæ€§èƒ½æ›´å¥½ï¼Œè´¹ç”¨æ›´ä½ï¼‰</td></tr><tr><td>æƒ³å…¼å®¹æ—§è„šæœ¬æˆ–è´¦å•ç³»ç»Ÿ</td><td>é€‰ GZIPï¼ˆå³æ—§çš„ eCSV æ›¿ä»£ï¼‰</td></tr></tbody></table><p>âš ï¸ æ–‡ä»¶ç±»å‹ä»Šåä¸å¯ä¿®æ”¹ï¼Œå¦‚æœæƒ³è¦æ”¹æ ¼å¼å°±è¦é‡æ–°åˆ›å»ºä¸€ä¸ªæ–°çš„exportæ‰è¡Œ</p><h3 id="å¯¼å‡ºæ ¼å¼"><a href="#å¯¼å‡ºæ ¼å¼" class="headerlink" title="å¯¼å‡ºæ ¼å¼"></a>å¯¼å‡ºæ ¼å¼</h3><table><thead><tr><th>ç›®æ ‡</th><th>æ¨èé…ç½®</th></tr></thead><tbody><tr><td>æƒ³ä¸‹è½½ CSV æ–‡ä»¶æŸ¥çœ‹</td><td>Format: CSV + Compression: GZIP</td></tr><tr><td>æƒ³ç”¨ Athena æŸ¥è¯¢</td><td>Format: Parquetï¼ˆæ€§èƒ½æ›´å¥½ï¼Œè´¹ç”¨æ›´ä½ï¼‰</td></tr><tr><td>æƒ³å…¼å®¹æ—§è„šæœ¬æˆ–è´¦å•ç³»ç»Ÿ</td><td>é€‰ GZIPï¼ˆå³æ—§çš„ eCSV æ›¿ä»£ï¼‰</td></tr></tbody></table><h3 id="æ–‡ä»¶ç‰ˆæœ¬æ§åˆ¶"><a href="#æ–‡ä»¶ç‰ˆæœ¬æ§åˆ¶" class="headerlink" title="æ–‡ä»¶ç‰ˆæœ¬æ§åˆ¶"></a>æ–‡ä»¶ç‰ˆæœ¬æ§åˆ¶</h3><p>è¿™é‡Œå…¶å®æœ‰ä¸¤ä¸ªé€‰é¡¹ï¼Œä¸€ä¸ªæ˜¯æ¯æ¬¡éƒ½åˆ›å»ºæ–°æ–‡ä»¶ï¼Œä¸€ä¸ªæ˜¯åœ¨ä¹‹å‰çš„æ–‡ä»¶ä¸Šæ›´æ–°<br>ä¸ªäººè®¤ä¸ºä¸ç®¡ä»€ä¹ˆæƒ…å†µï¼Œåœ¨ä¹‹å‰çš„æ–‡æ¡£ä¸Šæ›´æ–°å°±å¥½å•¦</p><table><thead><tr><th>é€‰é¡¹</th><th>å®é™…ç»“æœ</th><th>æ˜¯å¦æœ‰é¢å¤–ä¿¡æ¯</th><th>å­˜å‚¨æˆæœ¬</th></tr></thead><tbody><tr><td><strong>Overwrite existing data export file</strong></td><td>æ¯å¤©ä¿ç•™æœ€æ–°çš„å®Œæ•´æœˆåº¦æ–‡ä»¶</td><td>âŒ æ²¡æœ‰</td><td>ğŸ’°ä½</td></tr><tr><td><strong>Create new data export file</strong></td><td>æ¯å¤©å¤šç”Ÿæˆä¸€ä»½å‡ ä¹é‡å¤çš„æ–‡ä»¶</td><td>âŒ æ²¡æœ‰ï¼ˆä»…æ–‡ä»¶åä¸åŒï¼‰</td><td>ğŸ’°é«˜</td></tr></tbody></table><p>ğŸ§  ä»€ä¹ˆæ—¶å€™ Create new data export file æ‰æœ‰æ„ä¹‰ï¼š</p><ul><li>å¸Œæœ›ä¿ç•™æ¯æ—¥å¿«ç…§ï¼Œç”¨äºè¿½è¸ªè®¡è´¹ä¿®æ­£å˜åŒ–<ul><li>AWS æœ‰æ—¶ä¼šå›è¡¥æˆ–è°ƒæ•´å‰å‡ å¤©çš„è´¦å•ï¼ˆä¾‹å¦‚é€€æ¬¾ã€Savings Plan æŠµæ‰£é‡ç®—ï¼‰ã€‚</li><li>å¦‚æœä½ æƒ³ç ”ç©¶ â€œAWS è´¦å•æ¯æ—¥æ³¢åŠ¨â€ï¼Œé‚£ä¹ˆä¿ç•™æ¯æ—¥æŠ¥å‘Šä¼šæœ‰ä»·å€¼ã€‚</li></ul></li><li>è‡ªåŠ¨åŒ–ç³»ç»Ÿéœ€è¦æ£€æµ‹â€œæ–°å¢æ–‡ä»¶â€æ¥è§¦å‘ä»»åŠ¡<ul><li>ä¾‹å¦‚ï¼Œç”¨ Lambda æ£€æµ‹æ–°å¯¹è±¡ä¸Šä¼  â†’ è‡ªåŠ¨æ‰§è¡Œ Athena æŸ¥è¯¢ &#x2F; Glue ETLã€‚</li><li>å¦‚æœä½ ç”¨ Overwrite æ¨¡å¼ï¼Œæ–°æ–‡ä»¶ key ä¸å˜ï¼ŒS3 äº‹ä»¶è§¦å‘ä¼šæ›´éº»çƒ¦ã€‚</li></ul></li><li>å¤šç§Ÿæˆ·æˆ–å®¡è®¡éœ€æ±‚<ul><li>æŸäº›ä¼ä¸šåˆè§„åœºæ™¯è¦æ±‚â€œè´¦å•åŸå§‹ç‰ˆæœ¬ç•™å­˜â€ï¼Œä¸èƒ½è¦†ç›–æ—§æ•°æ®ã€‚</li></ul></li></ul><h3 id="ç›®æ ‡S3é…ç½®"><a href="#ç›®æ ‡S3é…ç½®" class="headerlink" title="ç›®æ ‡S3é…ç½®"></a>ç›®æ ‡S3é…ç½®</h3><img src="/2025/10/21/AWS%E4%BD%BF%E7%94%A8%E6%97%A5%E5%BF%977-%E4%BD%BF%E7%94%A8DataExports%E7%94%9F%E6%88%90cost%E6%8A%A5%E5%91%8A/5.png" class="" title="å¦‚å›¾æ‰€ç¤º"><h2 id="æŠ¥å‘ŠæŸ¥çœ‹"><a href="#æŠ¥å‘ŠæŸ¥çœ‹" class="headerlink" title="æŠ¥å‘ŠæŸ¥çœ‹"></a>æŠ¥å‘ŠæŸ¥çœ‹</h2><p>å½“ä½ é…ç½®å®Œexportä¹‹åï¼Œéœ€è¦24å°æ—¶æ‰èƒ½ç”Ÿæˆç¬¬ä¸€ä»½æŠ¥å‘Šï¼Œä¼šåœ¨é¡¶éƒ¨å‘ŠçŸ¥ä½ </p><img src="/2025/10/21/AWS%E4%BD%BF%E7%94%A8%E6%97%A5%E5%BF%977-%E4%BD%BF%E7%94%A8DataExports%E7%94%9F%E6%88%90cost%E6%8A%A5%E5%91%8A/6.png" class="" title="æµ‹è¯•"><p>24å°æ—¶åï¼Œå°±å¯ä»¥å»å¯¹åº”çš„S3 BucketæŸ¥çœ‹åˆ°reportå•¦</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;èƒŒæ™¯&quot;&gt;&lt;a href=&quot;#èƒŒæ™¯&quot; class=&quot;headerlink&quot; title=&quot;èƒŒæ™¯&quot;&gt;&lt;/a&gt;èƒŒæ™¯&lt;/h1&gt;&lt;p&gt;financeå›¢é˜Ÿæ¯ä¸ªæœˆéœ€è¦åœ¨AWSä¸Šä¸‹è½½billingçš„csvï¼Œä½†æ˜¯ä»11æœˆå¼€å§‹ï¼ŒDownload all to CSVè¿™ä¸ªåŠŸèƒ½å°±è¦ä¸‹çº¿äº†</summary>
      
    
    
    
    <category term="è¿ç»´" scheme="https://maydaychen.github.io/categories/%E8%BF%90%E7%BB%B4/"/>
    
    
    <category term="AWS" scheme="https://maydaychen.github.io/tags/AWS/"/>
    
  </entry>
  
  <entry>
    <title>AWSä½¿ç”¨æ—¥å¿—6--ä½¿ç”¨TransferFamilyæ›¿ä»£SFTPæœåŠ¡å™¨</title>
    <link href="https://maydaychen.github.io/2025/10/20/AWS%E4%BD%BF%E7%94%A8%E6%97%A5%E5%BF%976-%E4%BD%BF%E7%94%A8TransferFamily%E6%9B%BF%E4%BB%A3SFTP%E6%9C%8D%E5%8A%A1%E5%99%A8/"/>
    <id>https://maydaychen.github.io/2025/10/20/AWS%E4%BD%BF%E7%94%A8%E6%97%A5%E5%BF%976-%E4%BD%BF%E7%94%A8TransferFamily%E6%9B%BF%E4%BB%A3SFTP%E6%9C%8D%E5%8A%A1%E5%99%A8/</id>
    <published>2025-10-20T09:32:55.000Z</published>
    <updated>2025-10-22T01:46:17.296Z</updated>
    
    <content type="html"><![CDATA[<p>AWS Transfer Family æ˜¯ä¸€ä¸ªæ‰˜ç®¡çš„ SFTP&#x2F;FTPS&#x2F;FTP æœåŠ¡ï¼Œå¯è®©å¤–éƒ¨ç”¨æˆ·å®‰å…¨è®¿é—®ä½ çš„ S3 bucket æˆ– EFS æ–‡ä»¶ç³»ç»Ÿã€‚<br>å®ƒä¸éœ€è¦ä½ å†ç»´æŠ¤ EC2ã€Nginxã€sshd ç­‰ï¼Œåªè¦å®šä¹‰ç”¨æˆ·èº«ä»½æ˜ å°„å³å¯</p><h1 id="ç›®æ ‡"><a href="#ç›®æ ‡" class="headerlink" title="ç›®æ ‡"></a>ç›®æ ‡</h1><ol><li>ä¸ºæ¯ä¸ªç³»ç»Ÿç”¨æˆ·åˆ›å»ºä¸€ä¸ª Transfer Family ç”¨æˆ·ï¼ˆService-managed æ¨¡å¼ï¼‰</li><li>ä½¿ç”¨ SSH å…¬é’¥ç™»å½•ï¼Œè€Œéå¯†ç </li><li>å°†æ¯ä¸ªç”¨æˆ·çš„ &#x2F;home&#x2F;<username> æ•°æ®åŒæ­¥åˆ°å„è‡ªçš„ S3 å‰ç¼€ç›®å½•</li></ol><h1 id="å®è·µ"><a href="#å®è·µ" class="headerlink" title="å®è·µ"></a>å®è·µ</h1><p>ç”±äºåŸSFTPæœåŠ¡å™¨ä½¿ç”¨å¯†ç ç™»å½•ï¼Œç°åœ¨éœ€è¦æ”¹ä¸ºkeyç™»å½•ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦åœ¨åŸSFTPæœåŠ¡å™¨ä¸Šä¸ºæ¯ä¸€ä¸ªç”¨æˆ·åˆ›å»ºæ–°çš„keyå¹¶ç»‘å®šåˆ°transerä¸Šï¼ŒåŒæ—¶éœ€è¦ä¸ºæ¯ä¸€ä¸ªç”¨æˆ·éƒ½è®¾ç½®ä¸€ä¸ªIAM Role</p><h2 id="ä¸ºEC2åˆ›å»ºIAM-Role"><a href="#ä¸ºEC2åˆ›å»ºIAM-Role" class="headerlink" title="ä¸ºEC2åˆ›å»ºIAM Role"></a>ä¸ºEC2åˆ›å»ºIAM Role</h2><p>ä¿¡ä»»å®ä½“ï¼šec2.amazonaws.com<br>éœ€è¦æƒé™ï¼š<br>transfer:CreateUser<br>s3:ListBucket</p><h2 id="ä¸ºç”¨æˆ·åˆ›å»ºIAM-Role-TransferAccessRole"><a href="#ä¸ºç”¨æˆ·åˆ›å»ºIAM-Role-TransferAccessRole" class="headerlink" title="ä¸ºç”¨æˆ·åˆ›å»ºIAM Role(TransferAccessRole)"></a>ä¸ºç”¨æˆ·åˆ›å»ºIAM Role(TransferAccessRole)</h2><p>ä¿¡ä»»å®ä½“ï¼štransfer.amazonaws.com<br>åœ¨åˆ›å»ºtransfer serverçš„ç”¨æˆ·æ—¶ï¼Œæˆ‘ä»¬éœ€è¦ä¸ºæ¯ä¸€ä¸ªç”¨æˆ·ç»‘å®šä¸€ä¸ªIAM role</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &quot;Version&quot;: &quot;2012-10-17&quot;,</span><br><span class="line">    &quot;Statement&quot;: [</span><br><span class="line">        &#123;</span><br><span class="line">            &quot;Effect&quot;: &quot;Allow&quot;,</span><br><span class="line">            &quot;Action&quot;: [</span><br><span class="line">                &quot;s3:ListBucket&quot;</span><br><span class="line">            ],</span><br><span class="line">            &quot;Resource&quot;: &quot;arn:aws:s3:::transfer-test&quot;</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            &quot;Effect&quot;: &quot;Allow&quot;,</span><br><span class="line">            &quot;Action&quot;: [</span><br><span class="line">                &quot;s3:GetObject&quot;,</span><br><span class="line">                &quot;s3:PutObject&quot;,</span><br><span class="line">                &quot;s3:DeleteObject&quot;</span><br><span class="line">            ],</span><br><span class="line">            &quot;Resource&quot;: &quot;arn:aws:s3:::transfer-test/*&quot;</span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æˆ–è€…å¦‚æœæƒé™æƒ³è®¾ç½®çš„ä¸¥æ ¼ä¸€ç‚¹ï¼Œå¯ä»¥ç”¨è¿™ä¸ª</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;Version&quot;: &quot;2012-10-17&quot;,</span><br><span class="line">  &quot;Statement&quot;: [</span><br><span class="line">    &#123;</span><br><span class="line">      &quot;Effect&quot;: &quot;Allow&quot;,</span><br><span class="line">      &quot;Action&quot;: [&quot;s3:ListBucket&quot;],</span><br><span class="line">      &quot;Resource&quot;: &quot;arn:aws:s3:::my-sftp-bucket&quot;,</span><br><span class="line">      &quot;Condition&quot;: &#123;</span><br><span class="line">        &quot;StringLike&quot;: &#123;&quot;s3:prefix&quot;: [&quot;$&#123;transfer:UserName&#125;/*&quot;]&#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      &quot;Effect&quot;: &quot;Allow&quot;,</span><br><span class="line">      &quot;Action&quot;: [&quot;s3:GetObject&quot;, &quot;s3:PutObject&quot;, &quot;s3:DeleteObject&quot;],</span><br><span class="line">      &quot;Resource&quot;: &quot;arn:aws:s3:::my-sftp-bucket/$&#123;transfer:UserName&#125;/*&quot;</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="åˆ›å»ºtransfer-server"><a href="#åˆ›å»ºtransfer-server" class="headerlink" title="åˆ›å»ºtransfer server"></a>åˆ›å»ºtransfer server</h2><img src="/2025/10/20/AWS%E4%BD%BF%E7%94%A8%E6%97%A5%E5%BF%976-%E4%BD%BF%E7%94%A8TransferFamily%E6%9B%BF%E4%BB%A3SFTP%E6%9C%8D%E5%8A%A1%E5%99%A8/1.png" class="" title="å¦‚å›¾æ‰€ç¤º"><p>AWS Transfer Family æä¾› ä¸‰ç§ä¸»è¦è®¤è¯æ–¹å¼ï¼š</p><table><thead><tr><th>æ¨¡å¼</th><th>ç”¨æˆ·ç®¡ç†æ–¹å¼</th><th>ç™»å½•æ–¹å¼</th><th>ä¼˜ç‚¹</th><th>ç¼ºç‚¹</th></tr></thead><tbody><tr><td>Service managed</td><td>åœ¨ AWS æ§åˆ¶å°&#x2F;CLI åˆ›å»ºç”¨æˆ·ï¼Œå¯†ç å­˜ Secrets Manager</td><td>ç”¨æˆ·å + å¯†ç  &#x2F; SSH key</td><td>æœ€ç®€å•ã€å®˜æ–¹æ‰˜ç®¡</td><td>å¯†ç éœ€ä½ é‡æ–°è®¾ç½®ï¼Œæ— æ³•è¿ç§»ç³»ç»Ÿå¯†ç </td></tr><tr><td>Custom identity provider</td><td>è‡ªå®šä¹‰ï¼ˆLambda + API Gatewayï¼‰</td><td>ç”¨æˆ·å + å¯†ç  &#x2F; SSH key</td><td>å¯å®Œå…¨æ§åˆ¶ç”¨æˆ·éªŒè¯é€»è¾‘</td><td>å®ç°æˆæœ¬é«˜ï¼ˆéœ€å¼€å‘ï¼‰</td></tr><tr><td>Directory Service (AD)</td><td>ä½¿ç”¨ AWS Managed AD</td><td>åŸŸè´¦å· + å¯†ç </td><td>ä¸ä¼ä¸š AD é›†æˆ</td><td>é€‚åˆä¼ä¸šç¯å¢ƒï¼Œä¸é€‚åˆä½ è¿™ç§æœ¬åœ°è´¦å·åœºæ™¯</td></tr></tbody></table><img src="/2025/10/20/AWS%E4%BD%BF%E7%94%A8%E6%97%A5%E5%BF%976-%E4%BD%BF%E7%94%A8TransferFamily%E6%9B%BF%E4%BB%A3SFTP%E6%9C%8D%E5%8A%A1%E5%99%A8/2.png" class="" title="å¦‚å›¾æ‰€ç¤º"><p>ä¸‰ç§ Endpoint ç±»å‹</p><table><thead><tr><th>ç±»å‹</th><th>è¯´æ˜</th><th>ç½‘ç»œè®¿é—®</th><th>å…¸å‹ä½¿ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>Publicly accessible (Public endpoint)</td><td>AWS æ‰˜ç®¡å…¬ç½‘ç«¯ç‚¹ï¼ˆè‡ªåŠ¨åˆ†é…åŸŸåï¼‰</td><td>ğŸŒ äº’è”ç½‘ä¸Šä»»ä½•åœ°æ–¹å¯è®¿é—®</td><td>å¤–éƒ¨åˆä½œä¼™ä¼´ã€å®¢æˆ·ä¸Šä¼ æ–‡ä»¶</td></tr><tr><td>VPC hosted (VPC endpoint)</td><td>åœ¨ä½ æŒ‡å®šçš„ VPC&#x2F;Subnet å†…è¿è¡Œ</td><td>ğŸ”’ ä»…é™ VPC å†…æˆ–é€šè¿‡ VPN&#x2F;Direct Connect è®¿é—®</td><td>å†…éƒ¨ç³»ç»Ÿä½¿ç”¨ã€åˆè§„éš”ç¦»è¦æ±‚</td></tr><tr><td>VPC endpoint with custom hostname</td><td>åŒä¸Šï¼Œä½†ç»‘å®šè‡ªå®šä¹‰åŸŸåï¼ˆä¾‹å¦‚ sftp.company.comï¼‰</td><td>ğŸ”’ + ğŸŒï¼ˆå–å†³äºä½ DNSé…ç½®ï¼‰</td><td>å¯¹å¤–ç»Ÿä¸€å“ç‰ŒåŸŸåæˆ–æ··åˆäº‘åœºæ™¯</td></tr></tbody></table><p>âœ… 1ï¸âƒ£ Public endpointï¼ˆæœ€å¸¸ç”¨ï¼‰<br>ä¼˜ç‚¹ï¼š<br>æœ€ç®€å•çš„éƒ¨ç½²ï¼›<br>AWS è‡ªåŠ¨ç”ŸæˆåŸŸåï¼š<br>s-xxxxxxxxx.server.transfer.ap-southeast-1.amazonaws.com<br>æ— éœ€é…ç½® VPCã€å®‰å…¨ç»„ã€å­ç½‘ï¼›<br>ç›´æ¥æ”¯æŒ SFTP&#x2F;FTPSã€‚</p><p>é€‚åˆåœºæ™¯ï¼š<br>ä½ ç°åœ¨çš„è€ SFTP æœåŠ¡å™¨æ˜¯å…¬ç½‘è®¿é—®çš„ï¼›<br>ç”¨æˆ·åˆ†å¸ƒåœ¨äº’è”ç½‘ï¼›<br>æ²¡æœ‰åˆè§„è¦æ±‚å¿…é¡»åœ¨ç§ç½‘ä¸­è¿è¡Œã€‚</p><p>âš™ï¸ æ¨èé…ç½®ï¼š<br>Endpoint typeï¼šPublicly accessible<br>Protocolsï¼šSFTPï¼ˆå¦‚æœ‰å®‰å…¨è¦æ±‚å†å¼€ FTPSï¼‰<br>AZsï¼š3ä¸ªï¼ˆå…è´¹ï¼‰<br>Loggingï¼šå¯ç”¨ CloudWatch Logsï¼ˆæ–¹ä¾¿å®¡è®¡ï¼‰</p><p>âœ… 2ï¸âƒ£ VPC hosted endpointï¼ˆç§æœ‰éƒ¨ç½²ï¼‰</p><p>ç‰¹ç‚¹ï¼š</p><p>SFTP æœåŠ¡å™¨è¿è¡Œåœ¨ä½ çš„ VPC å†…ï¼›<br>åªèƒ½é€šè¿‡ï¼š<br>VPC å†… EC2ï¼›<br>VPNï¼›<br>æˆ– Direct Connect è®¿é—®ï¼›<br>ä½ å¯ä»¥ç²¾ç¡®æ§åˆ¶å®‰å…¨ç»„ã€NACLã€å­ç½‘ã€‚</p><p>é€‚åˆåœºæ™¯ï¼š<br>ä¼ä¸šå†…éƒ¨æ–‡ä»¶ä¼ è¾“ï¼›<br>å¿…é¡»èµ°ä¸“çº¿ &#x2F; VPNï¼›<br>ä¸èƒ½æš´éœ²åœ¨å…¬ç½‘ï¼ˆä¾‹å¦‚é‡‘èæœºæ„ï¼‰ã€‚</p><p>âš™ï¸ æ¨èé…ç½®ï¼š<br>Endpoint typeï¼šVPC hosted<br>VPCï¼šé€‰æ‹©ä½ å½“å‰çš„ VPC<br>Subnetsï¼šå»ºè®®é€‰ 3 ä¸ªä¸åŒ AZ<br>Security groupï¼šå…è®¸ 22ï¼ˆSFTPï¼‰æˆ– 990&#x2F;21ï¼ˆFTPSï¼‰ç«¯å£<br>Routeï¼šç¡®ä¿èƒ½è®¿é—® S3ï¼ˆé€šè¿‡ Gateway Endpoint æˆ– NATï¼‰</p><p>âœ… 3ï¸âƒ£ VPC endpoint + Custom hostnameï¼ˆå“ç‰ŒåŸŸåï¼‰<br>ç‰¹ç‚¹ï¼š<br>åŠŸèƒ½ä¸ VPC endpoint ç›¸åŒï¼›<br>é¢å¤–å…è®¸ä½ ç»‘å®šè‡ªå®šä¹‰åŸŸåï¼ˆä¾‹å¦‚ sftp.company.comï¼‰ï¼›<br>éœ€åœ¨ Route53 æˆ–å¤–éƒ¨ DNS è®¾ç½® CNAMEï¼›<br>æ”¯æŒ TLS è¯ä¹¦ï¼ˆACM ç®¡ç†ï¼‰ã€‚</p><p>é€‚åˆåœºæ™¯ï¼š<br>å¸Œæœ›ç”¨æˆ·ä½¿ç”¨å“ç‰ŒåŸŸåï¼›<br>æœ‰è‡ªå·±çš„ TLS è¯ä¹¦ï¼›<br>æ··åˆäº‘æˆ–å¤šåŒºåŸŸéƒ¨ç½²ã€‚</p><p>âš™ï¸ æ¨èé…ç½®ï¼š<br>Endpoint typeï¼šVPC endpoint<br>Custom hostnameï¼šsftp.company.com<br>ACM Certificateï¼šé€‰ä½ çš„è‡ªå®šä¹‰è¯ä¹¦<br>DNS è®°å½•ï¼šåœ¨å¤–éƒ¨æˆ– Route53 å»ºç«‹ CNAME â†’ Transfer endpoint</p><h3 id="Security-Policy"><a href="#Security-Policy" class="headerlink" title="Security Policy"></a>Security Policy</h3><p><strong>Security Policyï¼ˆå®‰å…¨ç­–ç•¥ï¼‰</strong>å†³å®šäº†å½“å®¢æˆ·ç«¯ï¼ˆä¾‹å¦‚ FileZillaã€WinSCPã€ç¨‹åºé‡Œçš„ SFTP æ¨¡å—ï¼‰è¿æ¥åˆ°ä½ çš„ AWS Transfer æœåŠ¡å™¨æ—¶ï¼ŒåŒæ–¹åœ¨æ¡æ‰‹è¿‡ç¨‹ä¸­å¯ä»¥ä½¿ç”¨å“ªäº›ï¼š</p><p>Kexï¼ˆKey Exchangeï¼‰ï¼šå¯†é’¥äº¤æ¢ç®—æ³•<br>MACï¼ˆMessage Authentication Codeï¼‰ï¼šæ¶ˆæ¯å®Œæ•´æ€§éªŒè¯ç®—æ³•<br>SSH Ciphers &#x2F; TLS Ciphersï¼šåŠ å¯†ç®—æ³•<br>ç®€å•æ¥è¯´ï¼Œå°±æ˜¯è¶Šæ–°çš„è§„åˆ™è¶Šä¸¥æ ¼ï¼Œå¦‚æœè¦å…¼å®¹è€ç³»ç»Ÿï¼Œé‚£ä¹ˆå°±å¯ä»¥è®¾ç½®çš„ä¸æ˜¯é‚£ä¹ˆæ–°</p><h3 id="Logical-Directories"><a href="#Logical-Directories" class="headerlink" title="Logical Directories"></a>Logical Directories</h3><p>è¿™æ˜¯ä¸€ä¸ªè™šæ‹Ÿç›®å½•æ˜ å°„åŠŸèƒ½ï¼Œè®©ä½ çš„ S3 bucket çœ‹èµ·æ¥åƒä¼ ç»ŸæœåŠ¡å™¨çš„æ–‡ä»¶ç»“æ„ã€‚<br>AWS Transfer Family æœ¬è´¨ä¸Šæ˜¯æŠŠç”¨æˆ·æ“ä½œçš„è·¯å¾„ï¼ˆ&#x2F;home&#x2F;alice&#x2F;data.txtï¼‰æ˜ å°„åˆ° S3 ä¸Šçš„å¯¹è±¡è·¯å¾„ï¼ˆs3:&#x2F;&#x2F;my-bucket&#x2F;users&#x2F;alice&#x2F;data.txtï¼‰ã€‚<br>å¦‚æœä¸ç”¨ Logical Directoryï¼Œä½ çš„ç”¨æˆ·ç™»å½•åçœ‹åˆ°çš„æ˜¯å®é™… S3 è·¯å¾„ç»“æ„ï¼›<br>ä½†ç”¨å®ƒä¹‹åï¼Œä½ å¯ä»¥äººä¸ºå®šä¹‰â€œå‹å¥½çš„è·¯å¾„â€ã€‚<br>è¿™å¯¹äºï¼š</p><ul><li>å¤šç”¨æˆ·å…±äº«ä¸€ä¸ª bucket</li><li>ç”¨æˆ·ç›®å½•æ¯”è¾ƒæ·±æˆ–å¤æ‚</li><li>éœ€è¦éšè—çœŸå® bucket ç»“æ„<br>éƒ½éå¸¸æœ‰ç”¨ã€‚</li></ul><h3 id="Optimized-Directories"><a href="#Optimized-Directories" class="headerlink" title="Optimized Directories"></a>Optimized Directories</h3><p>è¿™æ˜¯ AWS åœ¨ 2024 å¹´æ¨å‡ºçš„æ–°åŠŸèƒ½ï¼Œä¸“é—¨æå‡ SFTP åˆ—ç›®å½•ï¼ˆls å‘½ä»¤ï¼‰æ€§èƒ½çš„ã€‚<br>é»˜è®¤æƒ…å†µä¸‹ï¼ŒTransfer Family åœ¨åˆ—å‡º S3 æ–‡ä»¶å¤¹å†…å®¹æ—¶ï¼Œåº•å±‚å…¶å®æ˜¯åœ¨è°ƒç”¨ï¼š<br>ListObjectsV2 APIï¼ˆS3 åŸç”Ÿæ¥å£ï¼‰</p><p>è¿™ä¸ªæ¥å£åœ¨æ–‡ä»¶å¾ˆå¤šæ—¶ï¼ˆæ¯”å¦‚ä¸€ä¸ªç›®å½•é‡Œä¸Šä¸‡æ–‡ä»¶ï¼‰ä¼šéå¸¸æ…¢ã€‚<br>å¼€å¯ Optimized directories åï¼ŒAWS ä¼šè‡ªåŠ¨ä¸ºä½ çš„ S3 ç›®å½•æ„å»ºç´¢å¼•ï¼ˆmetadata indexï¼‰ï¼ŒåŠ å¿«æŸ¥è¯¢ã€‚<br>ç»“æœå°±æ˜¯ï¼š<br>lsã€dir å‘½ä»¤å“åº”å‡ ä¹æ˜¯ç§’çº§<br>å¤§ç›®å½•åˆ—å‡ºæ€§èƒ½æå‡ 10~100 å€<br>ä¸éœ€è¦æ”¹å˜ç°æœ‰ S3 ç»“æ„</p><p>âœ… æ³¨æ„äº‹é¡¹<br>åªé€‚ç”¨äº S3 backendï¼ˆä¸æ˜¯ EFSï¼‰<br>AWS åœ¨åå°è‡ªåŠ¨ç»´æŠ¤ç´¢å¼•ï¼ˆä½ ä¸ç”¨æ‰‹åŠ¨å¹²é¢„ï¼‰<br>ä¸ä¼šé¢å¤–æ”¶è´¹ï¼Œä½†ä¼šç•¥å¾®å¢åŠ  S3 API è°ƒç”¨é¢‘ç‡</p><h3 id="SetStat-option"><a href="#SetStat-option" class="headerlink" title="SetStat option"></a>SetStat option</h3><p>AWS ç»™ä½ ä¸¤ä¸ªé€‰æ‹©ï¼š</p><table><thead><tr><th>è®¾ç½®</th><th>å«ä¹‰</th><th>è¡Œä¸º</th></tr></thead><tbody><tr><td>Ignore SetStat &#x3D; true</td><td>å¿½ç•¥ SETSTAT å‘½ä»¤ï¼ˆæ¨èï¼‰</td><td>å®¢æˆ·ç«¯æ‰§è¡Œä¿®æ”¹å±æ€§æ—¶ä¸ä¼šæŠ¥é”™ï¼Œåªä¼šåœ¨ CloudWatch æ—¥å¿—ä¸­è®°å½•</td></tr><tr><td>Ignore SetStat &#x3D; false</td><td>ä¸å¿½ç•¥ï¼ˆé»˜è®¤ï¼‰</td><td>å½“å®¢æˆ·ç«¯å°è¯•ä¿®æ”¹å±æ€§æ—¶ï¼Œè¿”å›â€œOperation not supportedâ€é”™è¯¯</td></tr></tbody></table><p>âœ… å»ºè®®åšæ³•ï¼š<br>å¦‚æœä½ ç”¨çš„æ˜¯ S3 ä½œä¸ºå­˜å‚¨åç«¯ï¼Œè¯·å¯ç”¨ â€œIgnore SetStatâ€ã€‚</p><p>åŸå› ï¼š<br>ç»å¤§å¤šæ•° SFTP å®¢æˆ·ç«¯éƒ½ä¼šè‡ªåŠ¨å°è¯•æ‰§è¡Œ SETSTATï¼ˆä¾‹å¦‚ WinSCP ä¸Šä¼ åè‡ªåŠ¨è®¾ç½®æ—¶é—´æˆ³ï¼‰ã€‚<br>å¦‚æœä¸å¿½ç•¥ï¼Œå®ƒä¼šåœ¨æ¯æ¬¡ä¸Šä¼ åæŠ¥é”™ï¼ˆè™½ç„¶æ–‡ä»¶å…¶å®ä¸Šä¼ æˆåŠŸäº†ï¼Œä½†ç”¨æˆ·ä¼šçœ‹åˆ°çº¢è‰²é”™è¯¯ä¿¡æ¯ï¼‰ã€‚<br>å¯ç”¨å¿½ç•¥åï¼Œç”¨æˆ·ä½“éªŒæ›´å¥½ï¼Œæ—¥å¿—ä»ç„¶ä¼šåœ¨ CloudWatch ä¸­ä¿ç•™ã€‚</p><h2 id="åˆ›å»ºä¸€ä¸ªæ–°çš„S3-Bucket"><a href="#åˆ›å»ºä¸€ä¸ªæ–°çš„S3-Bucket" class="headerlink" title="åˆ›å»ºä¸€ä¸ªæ–°çš„S3 Bucket"></a>åˆ›å»ºä¸€ä¸ªæ–°çš„S3 Bucket</h2><p>è¿™ä¸ªä¸å¿…å¤šè¯´ï¼Œç›´æ¥åˆ›å»ºä¸€ä¸ªgeneral purpose bucketå³å¯</p><h2 id="å¯é€‰-åœ¨EC2ä¸Šé€šè¿‡è„šæœ¬åˆ›å»ºæµ‹è¯•ç”¨æˆ·åŠæ–‡ä»¶"><a href="#å¯é€‰-åœ¨EC2ä¸Šé€šè¿‡è„šæœ¬åˆ›å»ºæµ‹è¯•ç”¨æˆ·åŠæ–‡ä»¶" class="headerlink" title="(å¯é€‰)åœ¨EC2ä¸Šé€šè¿‡è„šæœ¬åˆ›å»ºæµ‹è¯•ç”¨æˆ·åŠæ–‡ä»¶"></a>(å¯é€‰)åœ¨EC2ä¸Šé€šè¿‡è„šæœ¬åˆ›å»ºæµ‹è¯•ç”¨æˆ·åŠæ–‡ä»¶</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line"># æ‰¹é‡åˆ›å»º SFTP æµ‹è¯•ç”¨æˆ·å¹¶ç”Ÿæˆéšæœºæ–‡ä»¶</span><br><span class="line"># é€‚ç”¨äº Amazon Linux / CentOS / Ubuntu</span><br><span class="line"></span><br><span class="line">USER_COUNT=5                # è¦åˆ›å»ºçš„ç”¨æˆ·æ•°é‡</span><br><span class="line">BASE_NAME=&quot;sftpuser&quot;        # ç”¨æˆ·åå‰ç¼€</span><br><span class="line">PASSWORD_FILE=&quot;./user_passwords.txt&quot;</span><br><span class="line"></span><br><span class="line"># æ¸…ç©ºæ—§çš„å¯†ç è®°å½•</span><br><span class="line">echo &quot;ç”Ÿæˆæ—¥æœŸ: $(date)&quot; &gt; $PASSWORD_FILE</span><br><span class="line"></span><br><span class="line">for i in $(seq 1 $USER_COUNT); do</span><br><span class="line">  USERNAME=&quot;$&#123;BASE_NAME&#125;$&#123;i&#125;&quot;</span><br><span class="line">  PASSWORD=$(openssl rand -base64 12)</span><br><span class="line"></span><br><span class="line">  # åˆ›å»ºç”¨æˆ·ï¼ˆå¸¦ home ç›®å½•ï¼‰ï¼Œç¦æ­¢ SSH ç™»å½•ï¼Œä»…ç”¨äº SFTP</span><br><span class="line">  useradd -m -s /sbin/nologin &quot;$USERNAME&quot;</span><br><span class="line"></span><br><span class="line">  # è®¾ç½®å¯†ç ï¼ˆå¯é€‰ï¼‰</span><br><span class="line">  echo &quot;$&#123;USERNAME&#125;:$&#123;PASSWORD&#125;&quot; | chpasswd</span><br><span class="line"></span><br><span class="line">  # åœ¨ home ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªéšæœºæ–‡ä»¶</span><br><span class="line">  HOME_DIR=&quot;/home/$&#123;USERNAME&#125;&quot;</span><br><span class="line">  FILE_PATH=&quot;$&#123;HOME_DIR&#125;/file_$(date +%s)_$RANDOM.txt&quot;</span><br><span class="line"></span><br><span class="line">  echo &quot;This is a random test file for $&#123;USERNAME&#125;&quot; &gt; &quot;$FILE_PATH&quot;</span><br><span class="line">  echo &quot;Random content: $(openssl rand -hex 8)&quot; &gt;&gt; &quot;$FILE_PATH&quot;</span><br><span class="line"></span><br><span class="line">  # ä¿®æ”¹æ–‡ä»¶æ‰€æœ‰æƒ</span><br><span class="line">  chown $&#123;USERNAME&#125;:$&#123;USERNAME&#125; &quot;$FILE_PATH&quot;</span><br><span class="line"></span><br><span class="line">  # è¾“å‡ºç»“æœ</span><br><span class="line">  echo &quot;âœ… Created user: $&#123;USERNAME&#125;, password: $&#123;PASSWORD&#125;, file: $(basename $FILE_PATH)&quot; | tee -a $PASSWORD_FILE</span><br><span class="line">done</span><br><span class="line"></span><br><span class="line">echo</span><br><span class="line">echo &quot;âœ… æ‰€æœ‰ç”¨æˆ·å·²åˆ›å»ºå®Œæˆï¼Œå¯†ç å·²ä¿å­˜åˆ°: $PASSWORD_FILE&quot;</span><br></pre></td></tr></table></figure><h2 id="åœ¨EC2ä¸Šè¿è¡Œè¿ç§»è„šæœ¬"><a href="#åœ¨EC2ä¸Šè¿è¡Œè¿ç§»è„šæœ¬" class="headerlink" title="åœ¨EC2ä¸Šè¿è¡Œè¿ç§»è„šæœ¬"></a>åœ¨EC2ä¸Šè¿è¡Œè¿ç§»è„šæœ¬</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line"># === Configuration ===</span><br><span class="line">SERVER_ID=&quot;s-xxxxxxxxxxxx&quot;    # æ›¿æ¢ä¸ºä½ çš„ Transfer Family server ID</span><br><span class="line">ROLE_ARN=&quot;arn:aws:iam::123456789012:role/TransferAccessRole&quot;</span><br><span class="line">BUCKET=&quot;my-sftp-bucket&quot;</span><br><span class="line">OUTPUT_CSV=&quot;transfer_users.csv&quot;</span><br><span class="line">KEY_DIR=&quot;./sftp_keys&quot;</span><br><span class="line"></span><br><span class="line">mkdir -p $KEY_DIR</span><br><span class="line">echo &quot;username,private_key_path,s3_path&quot; &gt; $OUTPUT_CSV</span><br><span class="line"></span><br><span class="line"># === Iterate system users ===</span><br><span class="line">for user in $(ls /home); do</span><br><span class="line">  HOME_DIR=&quot;/home/$user&quot;</span><br><span class="line">  if [ ! -d &quot;$HOME_DIR&quot; ]; then</span><br><span class="line">    continue</span><br><span class="line">  fi</span><br><span class="line"></span><br><span class="line">  echo &quot;Processing user: $user&quot;</span><br><span class="line"></span><br><span class="line">  # Generate SSH key pair</span><br><span class="line">  ssh-keygen -t rsa -b 2048 -N &quot;&quot; -f &quot;$KEY_DIR/$user&quot; &gt;/dev/null 2&gt;&amp;1</span><br><span class="line">  PUB_KEY=$(cat &quot;$KEY_DIR/$user.pub&quot;)</span><br><span class="line"></span><br><span class="line">  # Create Transfer user</span><br><span class="line">  aws transfer create-user \</span><br><span class="line">    --server-id $SERVER_ID \</span><br><span class="line">    --user-name &quot;$user&quot; \</span><br><span class="line">    --role &quot;$ROLE_ARN&quot; \</span><br><span class="line">    --home-directory &quot;/$BUCKET/$user&quot; \</span><br><span class="line">    --ssh-public-key-body &quot;$PUB_KEY&quot;</span><br><span class="line"></span><br><span class="line">  # Sync user data to S3</span><br><span class="line">  aws s3 sync &quot;$HOME_DIR&quot; &quot;s3://$BUCKET/$user&quot; --exclude &quot;.ssh/*&quot;</span><br><span class="line"></span><br><span class="line">  # Save record</span><br><span class="line">  echo &quot;$user,$KEY_DIR/$user,s3://$BUCKET/$user&quot; &gt;&gt; $OUTPUT_CSV</span><br><span class="line">done</span><br><span class="line"></span><br><span class="line">echo &quot;âœ… Migration complete. Keys saved in $KEY_DIR, summary in $OUTPUT_CSV.&quot;</span><br></pre></td></tr></table></figure><p>è„šæœ¬åŠŸèƒ½ï¼š</p><ol><li>åˆ›å»ºtransfer userï¼Œå¹¶ä¸ºæ¯ä¸ªç”¨æˆ·åˆ›å»ºssh key</li><li>å°†userä¸S3 Bucketå¯¹åº”çš„è·¯å¾„åŒ¹é…ä¸Š</li><li>å°†&#x2F;home&#x2F;userä¸‹çš„æ–‡ä»¶åŒæ­¥åˆ°S3</li><li>é€šè¿‡csvæ–‡ä»¶è®°å½•æ¯ä¸€ä¸ªç”¨æˆ·çš„keyï¼Œä»¥ä¾¿åˆ°æ—¶å€™åˆ†å‘</li></ol><h2 id="å¦‚ä½•ç™»å½•"><a href="#å¦‚ä½•ç™»å½•" class="headerlink" title="å¦‚ä½•ç™»å½•"></a>å¦‚ä½•ç™»å½•</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">é€šè¿‡winscpæˆ–å…¶ä»–å·¥å…·ç™»å½•æ—¶ï¼Œhostå°±ä¸æ˜¯ipåœ°å€ï¼Œè€Œæ˜¯transfer serverçš„DNSäº†</span><br><span class="line">æ ¼å¼å¦‚ä¸‹ï¼š</span><br><span class="line">s-xxxxxxxxx.server.transfer.ap-southeast-1.amazonaws.com</span><br><span class="line">username: åˆšæ‰ç”Ÿæˆçš„ç”¨æˆ·å</span><br><span class="line">ssh key: ç”Ÿæˆçš„ç”¨æˆ·ç§é’¥</span><br><span class="line"></span><br><span class="line">ç”¨å‘½ä»¤è¡Œçš„è¯ï¼Œå‘½ä»¤å¦‚ä¸‹</span><br><span class="line">sftp -i ./alice alice@s-xxxxxxxxx.server.transfer.ap-southeast-1.amazonaws.com</span><br></pre></td></tr></table></figure><h1 id="ä»·æ ¼"><a href="#ä»·æ ¼" class="headerlink" title="ä»·æ ¼"></a>ä»·æ ¼</h1><table><thead><tr><th>æ”¶è´¹ç±»åˆ«</th><th>æ”¶è´¹è¯´æ˜</th><th>å¤‡æ³¨</th></tr></thead><tbody><tr><td>Endpoint æ¯å°æ—¶å¯ç”¨è´¹</td><td>å½“ä½ å»ºç«‹ä¸€ä¸ª SFTPï¼ˆæˆ– FTPS&#x2F;FTPï¼AS2ï¼‰â€œæœåŠ¡å™¨ç«¯ç‚¹â€ï¼ˆserver endpointï¼‰æ—¶ï¼Œæ¯å°æ—¶æŒ‰åè®®è®¡è´¹ã€‚ä¾‹å¦‚ SFTP æ¯å°æ—¶çº¦ $0.30ï¼ˆç¾ä¸œåŒºåŸŸç¤ºä¾‹ï¼‰<br>Amazon Web Services, Inc.</td><td>æ— è®ºæœ‰å¤šå°‘ç”¨æˆ·ï¼Œåªè¦ç«¯ç‚¹å¯ç”¨ï¼Œéƒ½åœ¨è®¡è´¹ã€‚</td></tr><tr><td>æ•°æ®ä¸Šä¼ &#x2F;ä¸‹è½½é‡ï¼ˆæŒ‰ GBï¼‰</td><td>ç”¨æˆ·é€šè¿‡è¯¥ SFTP ä¸Šä¼ æˆ–ä¸‹è½½çš„æ•°æ®é‡ï¼ŒæŒ‰ GB æ”¶è´¹ã€‚ä¾‹å¦‚ SFTP ä¸Šä¼  + ä¸‹è½½æŒ‰ $0.04&#x2F;GBï¼ˆç¾ä¸œç¤ºä¾‹ï¼‰<br>Amazon Web Services, Inc.</td><td>åªè®¡ç®—é€šè¿‡è¯¥æœåŠ¡åè®®ä¼ è¾“çš„æ•°æ®ï¼Œä¸æ˜¯ S3 é‡Œå·²æœ‰æ•°æ®æœ¬èº«çš„å­˜å‚¨è´¹ç”¨ã€‚</td></tr><tr><td>å…¶ä»–åè®®&#x2F;åŠŸèƒ½æ”¶è´¹</td><td>æ¯”å¦‚ AS2 æ¶ˆæ¯æ¯æ¡ã€SFTP è¿æ¥å™¨è°ƒç”¨ã€å·¥ä½œæµå¤„ç†ç­‰æœ‰é¢å¤–è´¹ç”¨ã€‚<br>Amazon Web Services, Inc.</td><td>è‹¥ä½ åªç”¨ç®€å•çš„ â€œç”¨æˆ·é€šè¿‡ SFTP ç™»å…¥ï¼ŒæŠŠæ•°æ®æ”¾åˆ° S3â€ æƒ…å†µï¼Œå¯èƒ½æš‚æ—¶ä¸ç”¨è¿™äº›é¢å¤–åŠŸèƒ½ã€‚</td></tr><tr><td>å­˜å‚¨ &amp; è¯·æ±‚</td><td>è™½ç„¶ä¸æ˜¯ Transfer Family æœ¬èº«çš„â€œä¸»æ”¶è´¹â€ï¼Œä½†ä½ å°†æ•°æ®å­˜åˆ° Amazon S3ï¼æˆ– Amazon EFS åï¼Œè¦æ”¯ä»˜ S3 çš„å­˜å‚¨è´¹ç”¨ã€è¯·æ±‚ï¼ˆGETï¼PUTï¼‰è´¹ç”¨ã€è·¨åŒºæˆ–è·¨ç½‘ä¼ è¾“è´¹ç”¨ç­‰ã€‚</td><td>è¿™æ˜¯è¿ç§»ä¹‹åä½ é¢å¤–éœ€è¦é¢„ç®—çš„ã€‚</td></tr></tbody></table>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;AWS Transfer Family æ˜¯ä¸€ä¸ªæ‰˜ç®¡çš„ SFTP&amp;#x2F;FTPS&amp;#x2F;FTP æœåŠ¡ï¼Œå¯è®©å¤–éƒ¨ç”¨æˆ·å®‰å…¨è®¿é—®ä½ çš„ S3 bucket æˆ– EFS æ–‡ä»¶ç³»ç»Ÿã€‚&lt;br&gt;å®ƒä¸éœ€è¦ä½ å†ç»´æŠ¤ EC2ã€Nginxã€sshd ç­‰ï¼Œåªè¦å®šä¹‰ç”¨æˆ·èº«ä»½æ˜ å°„å³å¯&lt;/p&gt;
&lt;h</summary>
      
    
    
    
    <category term="è¿ç»´" scheme="https://maydaychen.github.io/categories/%E8%BF%90%E7%BB%B4/"/>
    
    
    <category term="AWS" scheme="https://maydaychen.github.io/tags/AWS/"/>
    
  </entry>
  
  <entry>
    <title>AWSä½¿ç”¨æ—¥å¿—5--ä½¿ç”¨ç¬¬ä¸‰æ–¹æœåŠ¡è·å–æ‰€æœ‰æœåŠ¡ä¿¡æ¯</title>
    <link href="https://maydaychen.github.io/2025/10/19/AWS%E4%BD%BF%E7%94%A8%E6%97%A5%E5%BF%975-%E4%BD%BF%E7%94%A8%E7%AC%AC%E4%B8%89%E6%96%B9%E6%9C%8D%E5%8A%A1%E8%8E%B7%E5%8F%96%E6%89%80%E6%9C%89%E6%9C%8D%E5%8A%A1%E4%BF%A1%E6%81%AF/"/>
    <id>https://maydaychen.github.io/2025/10/19/AWS%E4%BD%BF%E7%94%A8%E6%97%A5%E5%BF%975-%E4%BD%BF%E7%94%A8%E7%AC%AC%E4%B8%89%E6%96%B9%E6%9C%8D%E5%8A%A1%E8%8E%B7%E5%8F%96%E6%89%80%E6%9C%89%E6%9C%8D%E5%8A%A1%E4%BF%A1%E6%81%AF/</id>
    <published>2025-10-19T03:26:07.000Z</published>
    <updated>2025-10-22T01:56:59.785Z</updated>
    
    <content type="html"><![CDATA[<h1 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h1><p>é¡¹ç›®é“¾æ¥ï¼š <a href="https://github.com/aws-samples/aws-auto-inventory">https://github.com/aws-samples/aws-auto-inventory</a><br>é¡¹ç›®ç›®æ ‡ï¼š å¿«é€Ÿæ‰«æè´¦å·ä¸­çš„èµ„äº§ä¿¡æ¯ï¼Œæ”¯æŒç»„ç»‡çº§æŸ¥æ‰¾</p><h1 id="å…·ä½“æ­¥éª¤"><a href="#å…·ä½“æ­¥éª¤" class="headerlink" title="å…·ä½“æ­¥éª¤"></a>å…·ä½“æ­¥éª¤</h1><h2 id="å®‰è£…AWS-cli2"><a href="#å®‰è£…AWS-cli2" class="headerlink" title="å®‰è£…AWS cli2"></a>å®‰è£…AWS cli2</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sudo yum remove awscli</span><br><span class="line"></span><br><span class="line">curl &quot;https://awscli.amazonaws.com/awscli-exe-linux-x86_64.zip&quot; -o &quot;awscliv2.zip&quot;</span><br><span class="line">unzip awscliv2.zip</span><br><span class="line">sudo ./aws/install</span><br></pre></td></tr></table></figure><h2 id="å®‰è£…ç›¸å…³ä¾èµ–"><a href="#å®‰è£…ç›¸å…³ä¾èµ–" class="headerlink" title="å®‰è£…ç›¸å…³ä¾èµ–"></a>å®‰è£…ç›¸å…³ä¾èµ–</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">dnf install python3-devel gcc make</span><br><span class="line">dnf install -y autoconf automake libtool</span><br><span class="line">dnf install python3-pip</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å»ºè®®ä½¿ç”¨érootè´¦å·æ“ä½œ</span></span><br><span class="line">pip3 install wheel</span><br><span class="line"></span><br><span class="line">cd aws-auto-inventory</span><br><span class="line">pip3 install -e .</span><br></pre></td></tr></table></figure><h2 id="AWSç«¯æ“ä½œ"><a href="#AWSç«¯æ“ä½œ" class="headerlink" title="AWSç«¯æ“ä½œ"></a>AWSç«¯æ“ä½œ</h2><p>ç”±äºä»£ç çš„é€»è¾‘ï¼Œæˆ‘ä»¬éœ€è¦ç»™ç®¡ç†è´¦å·è·Ÿå­è´¦å·åˆ›å»ºä¸€ä¸ªç›¸åŒçš„roleï¼Œä½†æ˜¯å†…å®¹å¯èƒ½ä¸å¤ªä¸€æ ·</p><h3 id="å­è´¦å·"><a href="#å­è´¦å·" class="headerlink" title="å­è´¦å·"></a>å­è´¦å·</h3><p>æ·»åŠ trust policy</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;Version&quot;: &quot;2012-10-17&quot;,</span><br><span class="line">  &quot;Statement&quot;: [</span><br><span class="line">    &#123;</span><br><span class="line">      &quot;Effect&quot;: &quot;Allow&quot;,</span><br><span class="line">      &quot;Principal&quot;: &#123;</span><br><span class="line">        &quot;AWS&quot;: &quot;arn:aws:iam::&lt;management account ID&gt;:role/OrganizationAccountAccessRole&quot;</span><br><span class="line">      &#125;,</span><br><span class="line">      &quot;Action&quot;: &quot;sts:AssumeRole&quot;</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ·»åŠ æƒé™<br>è¿™é‡Œçš„æƒé™æ ¹æ®ä½ è¦æ‰«æä»€ä¹ˆå†…å®¹è€Œå®šï¼Œç”±äºæˆ‘éœ€è¦çŸ¥é“EC2ï¼ŒEBSè¿˜æœ‰Fleet manageré‡Œé¢çš„ç›¸å…³å†…å®¹ï¼Œå› æ­¤æ‰é…ç½®å¦‚ä¸‹</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;Version&quot;: &quot;2012-10-17&quot;,</span><br><span class="line">  &quot;Statement&quot;: [</span><br><span class="line">    &#123;</span><br><span class="line">      &quot;Sid&quot;: &quot;AllowEC2ReadOnly&quot;,</span><br><span class="line">      &quot;Effect&quot;: &quot;Allow&quot;,</span><br><span class="line">      &quot;Action&quot;: [</span><br><span class="line">        &quot;ec2:Describe*&quot;</span><br><span class="line">      ],</span><br><span class="line">      &quot;Resource&quot;: &quot;*&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      &quot;Sid&quot;: &quot;AllowSSMDescribe&quot;,</span><br><span class="line">      &quot;Effect&quot;: &quot;Allow&quot;,</span><br><span class="line">      &quot;Action&quot;: [</span><br><span class="line">        &quot;ssm:Describe*&quot;</span><br><span class="line">      ],</span><br><span class="line">      &quot;Resource&quot;: &quot;*&quot;</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ç®¡ç†è´¦å·"><a href="#ç®¡ç†è´¦å·" class="headerlink" title="ç®¡ç†è´¦å·"></a>ç®¡ç†è´¦å·</h3><p>ç®¡ç†è´¦å·éœ€è¦åˆ›å»ºä¸€ä¸ªåŒåroleï¼Œæ³¨æ„å¿…é¡»åŒåï¼Œä¸ç„¶è¿™ä¸ªä»£ç ä¸è®¤ã€‚ã€‚ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;Version&quot;: &quot;2012-10-17&quot;,</span><br><span class="line">  &quot;Statement&quot;: [</span><br><span class="line">    &#123;</span><br><span class="line">      &quot;Sid&quot;: &quot;AllowOrganizationList&quot;,</span><br><span class="line">      &quot;Effect&quot;: &quot;Allow&quot;,</span><br><span class="line">      &quot;Action&quot;: [</span><br><span class="line">        &quot;organizations:ListAccounts&quot;</span><br><span class="line">      ],</span><br><span class="line">      &quot;Resource&quot;: &quot;*&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      &quot;Sid&quot;: &quot;AllowAssumeInventoryRoleInAllAccounts&quot;,</span><br><span class="line">      &quot;Effect&quot;: &quot;Allow&quot;,</span><br><span class="line">      &quot;Action&quot;: &quot;sts:AssumeRole&quot;,</span><br><span class="line">      &quot;Resource&quot;: &quot;arn:aws:iam::*:role/OrganizationAccountAccessRole&quot;</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æŠŠè¿™ä¸ªRoleç»‘å®šç»™æ‰§è¡Œä»£ç çš„EC2</p><h2 id="yamlæ–‡ä»¶é…ç½®"><a href="#yamlæ–‡ä»¶é…ç½®" class="headerlink" title="yamlæ–‡ä»¶é…ç½®"></a>yamlæ–‡ä»¶é…ç½®</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"># AWS Auto Inventory - Example YAML Configuration</span><br><span class="line"></span><br><span class="line">inventories:</span><br><span class="line">  - name: my-aws-inventory</span><br><span class="line">    aws:</span><br><span class="line">      # AWS profile to use (optional, uses default credentials if not specified)</span><br><span class="line">#      profile: default</span><br><span class="line">      </span><br><span class="line">      # AWS regions to scan</span><br><span class="line">      region:</span><br><span class="line">        - ap-southeast-1</span><br><span class="line">      </span><br><span class="line">      # Set to true to scan across all accounts in the organization</span><br><span class="line">      organization: false</span><br><span class="line">      </span><br><span class="line">      # Role name to assume in each account (only used if organization is true)</span><br><span class="line">      role_name: OrganizationAccountAccessRole</span><br><span class="line">    </span><br><span class="line">    # Excel output configuration</span><br><span class="line">    excel:</span><br><span class="line">      # Whether to transpose data in Excel output</span><br><span class="line">      transpose: true</span><br><span class="line">      </span><br><span class="line">      # Additional formatting options</span><br><span class="line">      formatting:</span><br><span class="line">        header_style:</span><br><span class="line">          bold: true</span><br><span class="line">          bg_color: &quot;#4F81BD&quot;</span><br><span class="line">          font_color: &quot;#FFFFFF&quot;</span><br><span class="line">    </span><br><span class="line">    # Sheets to include in the inventory</span><br><span class="line">    sheets:</span><br><span class="line">      # EC2 Instances</span><br><span class="line">      - name: EC2Instances</span><br><span class="line">        service: ec2</span><br><span class="line">        function: describe_instances</span><br><span class="line">        result_key: Reservations</span><br><span class="line">        parameters:</span><br><span class="line">          Filters:</span><br><span class="line">            - Name: instance-state-name</span><br><span class="line">              Values:</span><br><span class="line">                - running</span><br><span class="line">      - name: SSMInstances</span><br><span class="line">        service: ssm</span><br><span class="line">        function: describe_instance_information</span><br><span class="line">      </span><br><span class="line">      - name: Volumes</span><br><span class="line">        service: ec2</span><br><span class="line">        function: describe_volumes</span><br></pre></td></tr></table></figure><h2 id="åœ¨EC2ä¸Šæ‰§è¡Œå‘½ä»¤"><a href="#åœ¨EC2ä¸Šæ‰§è¡Œå‘½ä»¤" class="headerlink" title="åœ¨EC2ä¸Šæ‰§è¡Œå‘½ä»¤"></a>åœ¨EC2ä¸Šæ‰§è¡Œå‘½ä»¤</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd aws-auto-inventory</span><br><span class="line">aws-auto-inventory --config examples/config_example.yaml --output-dir output --format both</span><br></pre></td></tr></table></figure><h1 id="å‘"><a href="#å‘" class="headerlink" title="å‘"></a>å‘</h1><ol><li>å¯¼å‡ºæ¨¡å—ç¼ºå¤±<br>è¿™ä¸ªä»£ç é‡Œï¼Œç”¨åˆ°äº†ä¸€ä¸ªfrom .output.processor import OutputProcessorï¼Œä½†æ˜¯å®é™…ä¸Šå¯èƒ½æ˜¯ä½œè€…æ ¹æœ¬æ²¡æœ‰ä¸Šä¼ è¿™ä¸ªæ¨¡å—ï¼Œå¯¼è‡´ä»£ç æ ¹æœ¬è¿è¡Œä¸èµ·æ¥<br>è§£å†³æ–¹æ¡ˆï¼š æ³¨é‡Šæ‰cli.pyä¸­çš„ç›¸å…³ä»£ç ï¼Œè‡ªå·±åŠ ä¸Šå¯¼å‡ºåŠŸèƒ½</li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;èƒŒæ™¯&quot;&gt;&lt;a href=&quot;#èƒŒæ™¯&quot; class=&quot;headerlink&quot; title=&quot;èƒŒæ™¯&quot;&gt;&lt;/a&gt;èƒŒæ™¯&lt;/h1&gt;&lt;p&gt;é¡¹ç›®é“¾æ¥ï¼š &lt;a href=&quot;https://github.com/aws-samples/aws-auto-inventory&quot;&gt;http</summary>
      
    
    
    
    <category term="è¿ç»´" scheme="https://maydaychen.github.io/categories/%E8%BF%90%E7%BB%B4/"/>
    
    
    <category term="AWS" scheme="https://maydaychen.github.io/tags/AWS/"/>
    
  </entry>
  
  <entry>
    <title>Grafanaä½¿ç”¨æ—¥å¿—12--åœ¨Grafanaç«¯é…ç½®https</title>
    <link href="https://maydaychen.github.io/2025/09/18/Grafana%E4%BD%BF%E7%94%A8%E6%97%A5%E5%BF%9712-%E5%9C%A8Grafana%E7%AB%AF%E9%85%8D%E7%BD%AEhttps/"/>
    <id>https://maydaychen.github.io/2025/09/18/Grafana%E4%BD%BF%E7%94%A8%E6%97%A5%E5%BF%9712-%E5%9C%A8Grafana%E7%AB%AF%E9%85%8D%E7%BD%AEhttps/</id>
    <published>2025-09-18T03:21:29.000Z</published>
    <updated>2025-09-18T06:19:36.695Z</updated>
    
    <content type="html"><![CDATA[<p>ç”±äºæœ‰ä¸ªé¡¹ç›®ä¸­ä¸éœ€è¦å†ä½¿ç”¨nginxäº†ï¼Œæ‰€ä»¥ä¼šæ”¹æˆç”±AWSç›´æ¥Route53 -&gt; ALB -&gt; Target Group -&gt; Grafanaç«¯å£<br>ä½†æ˜¯è¿‡ç¨‹ä¸­å‘ç°ï¼Œç”±äºGrafanaé»˜è®¤æ˜¯httpåè®®çš„ï¼Œå¯¼è‡´å¦‚æœhttpsçš„æµé‡å‘é€åˆ°Grafanaçš„ç«¯å£åï¼Œä¼šæŠ¥é”™åè®®ä¸æ”¯æŒ<br>è¿™æ—¶å€™éœ€è¦æŠŠGrafanaä¹Ÿæ”¹æˆhttpsåè®®çš„ï¼Œè¿™å°±æ˜¯è¿™ç¯‡æ–‡ç« çš„ç”±æ¥</p><p>å…¶å®ä¹Ÿå¾ˆç®€å•ï¼Œåªéœ€è¦æ”¹å‡ ä¸ªé…ç½®é¡¹å°±å¯ä»¥äº†</p><h1 id="ç”Ÿæˆè‡ªç­¾åè¯ä¹¦"><a href="#ç”Ÿæˆè‡ªç­¾åè¯ä¹¦" class="headerlink" title="ç”Ÿæˆè‡ªç­¾åè¯ä¹¦"></a>ç”Ÿæˆè‡ªç­¾åè¯ä¹¦</h1><p>è¿™ä¸€æ­¥å°±å¾ˆåŸºç¡€äº†ï¼Œè¿™é‡Œä¸å†èµ˜è¿°äº†ï¼Œæœ‰é—®é¢˜çš„å°ä¼™ä¼´ç›´æ¥è¯„è®ºåŒºé—®æˆ‘å°±å¯ä»¥äº†<br>æˆ‘æ˜¯æ”¾åœ¨äº†&#x2F;etc&#x2F;grafana&#x2F;sslè¿™ä¸ªè·¯å¾„ä¸‹çš„ï¼Œå…¶å®æ”¾å“ªé‡Œéƒ½å¯ä»¥</p><h1 id="ä¿®æ”¹Grafanaé…ç½®"><a href="#ä¿®æ”¹Grafanaé…ç½®" class="headerlink" title="ä¿®æ”¹Grafanaé…ç½®"></a>ä¿®æ”¹Grafanaé…ç½®</h1><p>ä¿®æ”¹Grafanaé…ç½®æ–‡ä»¶ï¼Œé»˜è®¤&#x2F;etc&#x2F;grafana&#x2F;grafana.ini<br>ä¿®æ”¹æˆå¦‚ä¸‹æ ¼å¼</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">protocol = https</span><br><span class="line">root_url = %(protocol)s://%(domain)s/</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ä¸‹é¢ä¸¤ä¸ªæ–‡ä»¶å°±æ˜¯ä¸Šä¸€æ­¥ç”Ÿæˆçš„è‡ªç­¾åè¯ä¹¦</span></span><br><span class="line">cert_file = /etc/grafana/ssl/10.0.128.173.crt</span><br><span class="line">cert_key = /etc/grafana/ssl/10.0.128.173.key</span><br></pre></td></tr></table></figure><h1 id="é‡å¯Grafana"><a href="#é‡å¯Grafana" class="headerlink" title="é‡å¯Grafana"></a>é‡å¯Grafana</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart grafana-server</span><br></pre></td></tr></table></figure><p>ç„¶åå°±å¯ä»¥æ­£å¸¸è®¿é—®äº†</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;ç”±äºæœ‰ä¸ªé¡¹ç›®ä¸­ä¸éœ€è¦å†ä½¿ç”¨nginxäº†ï¼Œæ‰€ä»¥ä¼šæ”¹æˆç”±AWSç›´æ¥Route53 -&amp;gt; ALB -&amp;gt; Target Group -&amp;gt; Grafanaç«¯å£&lt;br&gt;ä½†æ˜¯è¿‡ç¨‹ä¸­å‘ç°ï¼Œç”±äºGrafanaé»˜è®¤æ˜¯httpåè®®çš„ï¼Œå¯¼è‡´å¦‚æœhttpsçš„æµé‡å‘é€åˆ°Grafana</summary>
      
    
    
    
    <category term="è¿ç»´" scheme="https://maydaychen.github.io/categories/%E8%BF%90%E7%BB%B4/"/>
    
    
    <category term="ç›‘æ§" scheme="https://maydaychen.github.io/tags/%E7%9B%91%E6%8E%A7/"/>
    
    <category term="Grafana" scheme="https://maydaychen.github.io/tags/Grafana/"/>
    
  </entry>
  
  <entry>
    <title>Linuxæ“ä½œè®°å½•11--éšè—OpenSSHç‰ˆæœ¬</title>
    <link href="https://maydaychen.github.io/2025/09/15/Linux%E6%93%8D%E4%BD%9C%E8%AE%B0%E5%BD%9511-%E9%9A%90%E8%97%8FOpenSSH%E7%89%88%E6%9C%AC/"/>
    <id>https://maydaychen.github.io/2025/09/15/Linux%E6%93%8D%E4%BD%9C%E8%AE%B0%E5%BD%9511-%E9%9A%90%E8%97%8FOpenSSH%E7%89%88%E6%9C%AC/</id>
    <published>2025-09-15T03:16:25.000Z</published>
    <updated>2025-09-18T07:03:07.229Z</updated>
    
    <content type="html"><![CDATA[<h1 id="æŸ¥çœ‹ç°æœ‰ç‰ˆæœ¬"><a href="#æŸ¥çœ‹ç°æœ‰ç‰ˆæœ¬" class="headerlink" title="æŸ¥çœ‹ç°æœ‰ç‰ˆæœ¬"></a>æŸ¥çœ‹ç°æœ‰ç‰ˆæœ¬</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">sshd -V</span><br><span class="line"></span><br><span class="line">[root@ec2-sftp-2 ec2-user]# sshd -v</span><br><span class="line">sshd: illegal option -- v</span><br><span class="line">OpenSSH_5.3p1, OpenSSL 1.0.1e-fips 11 Feb 2013</span><br><span class="line">usage: sshd [-46DdeiqTt] [-b bits] [-C connection_spec] [-c host_cert_file]</span><br><span class="line">[-f config_file] [-g login_grace_time] [-h host_key_file]</span><br><span class="line">[-k key_gen_time] [-o option] [-p port] [-u len]</span><br></pre></td></tr></table></figure><p>è™½ç„¶åœ¨æ—§ç‰ˆæœ¬ä¸­ï¼Œè¿™ä¸ªå‘½ä»¤ä¼šæŠ¥ä¸æ”¯æŒï¼Œä½†æ˜¯è¿˜æ˜¯ä¼šæ˜¾ç¤ºç°åœ¨çš„OpenSSHç‰ˆæœ¬OpenSSH_5.3p1<br>ç°åœ¨æˆ‘ä»¬éœ€è¦æŠŠè¿™ä¸ªç‰ˆæœ¬ä¿®æ”¹æˆä¸€ä¸ªæ›´æ–°çš„ç‰ˆæœ¬</p><h1 id="æ€ä¹ˆæ“ä½œ"><a href="#æ€ä¹ˆæ“ä½œ" class="headerlink" title="æ€ä¹ˆæ“ä½œ"></a>æ€ä¹ˆæ“ä½œ</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"># å¤‡ä»½åŸæ¥çš„sshdæ–‡ä»¶</span><br><span class="line">cp /usr/sbin/sshd /usr/sbin/sshd.bak</span><br><span class="line"></span><br><span class="line"># ä½¿ç”¨sedå‘½ä»¤å°†æ–‡ä»¶ä¸­çš„5.3æ”¹æˆ9.9</span><br><span class="line">sed -i &#x27;s/OpenSSH_5.3/OpenSSH_9.9/g&#x27; `which sshd`</span><br><span class="line"></span><br><span class="line"># ä¿®æ”¹å®Œæˆåéœ€è¦é‡å¯sshd</span><br><span class="line">service sshd restart</span><br><span class="line"></span><br><span class="line"># æ£€æŸ¥ç°æœ‰ç‰ˆæœ¬å·</span><br><span class="line">sshd -V</span><br><span class="line"># æ˜¾ç¤º9.9p1ï¼Œè¯´æ˜ä¿®æ”¹æˆåŠŸ</span><br><span class="line"># OpenSSH_9.9p1, OpenSSL 1.0.1e-fips 11 Feb 2013</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;æŸ¥çœ‹ç°æœ‰ç‰ˆæœ¬&quot;&gt;&lt;a href=&quot;#æŸ¥çœ‹ç°æœ‰ç‰ˆæœ¬&quot; class=&quot;headerlink&quot; title=&quot;æŸ¥çœ‹ç°æœ‰ç‰ˆæœ¬&quot;&gt;&lt;/a&gt;æŸ¥çœ‹ç°æœ‰ç‰ˆæœ¬&lt;/h1&gt;&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=</summary>
      
    
    
    
    <category term="è¿ç»´" scheme="https://maydaychen.github.io/categories/%E8%BF%90%E7%BB%B4/"/>
    
    
    <category term="Linux" scheme="https://maydaychen.github.io/tags/Linux/"/>
    
  </entry>
  
  <entry>
    <title>AWSä½¿ç”¨æ—¥å¿—4--ä½¿ç”¨EventBridge+Lambda+Config+SNSç›‘æ§ACMè¯ä¹¦è¿‡æœŸ</title>
    <link href="https://maydaychen.github.io/2025/08/25/AWS%E4%BD%BF%E7%94%A8%E6%97%A5%E5%BF%974-%E4%BD%BF%E7%94%A8EventBridge-Lambda-Config-SNS%E7%9B%91%E6%8E%A7ACM%E8%AF%81%E4%B9%A6%E8%BF%87%E6%9C%9F/"/>
    <id>https://maydaychen.github.io/2025/08/25/AWS%E4%BD%BF%E7%94%A8%E6%97%A5%E5%BF%974-%E4%BD%BF%E7%94%A8EventBridge-Lambda-Config-SNS%E7%9B%91%E6%8E%A7ACM%E8%AF%81%E4%B9%A6%E8%BF%87%E6%9C%9F/</id>
    <published>2025-08-25T07:15:45.000Z</published>
    <updated>2025-10-22T02:28:27.755Z</updated>
    
    <content type="html"><![CDATA[<h1 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h1><p>é€šå¸¸åœ¨AWSä¸­ï¼Œå¦‚æœæˆ‘ä»¬éœ€è¦ç›‘æ§å•ä¸ªsslè¯ä¹¦çš„è¿‡æœŸæ—¶é—´ï¼Œæˆ‘ä»¬ç›´æ¥ç”¨cloudwatchå³å¯ï¼Œä½†æ˜¯å¦‚æœæˆ‘ä»¬æ˜¯control toweræ§åˆ¶çš„ï¼Œæ‹¥æœ‰å‡ ç™¾ä¸ªè´¦å·ï¼Œé‚£ä¹ˆè¿™æ—¶å€™ä¸€ä¸ªä¸ªæ‰‹åŠ¨åˆ›å»ºcloudwatchå°±æ˜¾å¾—éå¸¸è´¹æ—¶è´¹åŠ›äº†ï¼Œé‚£ä¹ˆæœ‰æ²¡æœ‰åŠæ³•ç›´æ¥ä¸€æ¬¡æ€§ç›‘æ§è¯ä¹¦çš„æœ‰æ•ˆæœŸå‘¢ï¼Ÿ<br>æ–¹æ³•è‡ªç„¶æ˜¯æœ‰çš„ï¼Œè¿™é‡Œæ¨èä¸€ç§éå¸¸ç®€å•çš„æ–¹æ³•ï¼Œå³ä½¿ç”¨configæŸ¥è¯¢æ‰€æœ‰è´¦å·çš„æœ‰æ•ˆæœŸ</p><h1 id="åŸç†"><a href="#åŸç†" class="headerlink" title="åŸç†"></a>åŸç†</h1><p>åŸç†å…¶å®éå¸¸ç®€å•ï¼Œä¼—æ‰€å‘¨çŸ¥auditè´¦å·ä¸ä»…èƒ½æŸ¥çœ‹è‡ªå·±çš„AWS Configé…ç½®ï¼ŒåŒæ ·ä¹Ÿèƒ½å¤Ÿé€šè¿‡èšåˆå™¨æŸ¥çœ‹å…¶ä»–è´¦å·çš„Configåˆè§„æ€§ï¼Œè¿™é‡Œæˆ‘ä»¬ä½¿ç”¨é»˜è®¤çš„aws-controltower-GuardrailsComplianceAggregatorå³å¯æŸ¥è¯¢åˆ°æ‰€æœ‰çš„è´¦å·çš„ACMåˆè§„æ€§<br>ä¹Ÿå¯ä»¥åœ¨Configä¸­å…ˆç”¨advanced querieså»éªŒè¯æŸ¥è¯¢è¯­å¥çš„æ­£ç¡®æ€§</p><img src="/2025/08/25/AWS%E4%BD%BF%E7%94%A8%E6%97%A5%E5%BF%974-%E4%BD%BF%E7%94%A8EventBridge-Lambda-Config-SNS%E7%9B%91%E6%8E%A7ACM%E8%AF%81%E4%B9%A6%E8%BF%87%E6%9C%9F/2.png" class="" title="å¦‚å›¾æ‰€ç¤º"><h1 id="å®ç°"><a href="#å®ç°" class="headerlink" title="å®ç°"></a>å®ç°</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> boto3</span><br><span class="line"><span class="keyword">import</span> datetime</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line">AGGREGATOR_NAME = <span class="string">&quot;aws-controltower-GuardrailsComplianceAggregator&quot;</span></span><br><span class="line">SNS_TOPIC_ARN = os.environ.get(<span class="string">&quot;SNS_TOPIC_ARN&quot;</span>)  <span class="comment"># å»ºè®®ç”¨ç¯å¢ƒå˜é‡é…ç½® SNS</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">lambda_handler</span>(<span class="params">event, context</span>):</span><br><span class="line">    config_client = boto3.client(<span class="string">&quot;config&quot;</span>)</span><br><span class="line">    sns_client = boto3.client(<span class="string">&quot;sns&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># è®¡ç®— 30 å¤©åçš„æ—¥æœŸï¼Œæ ¼å¼ YYYY-MM-DD</span></span><br><span class="line">    date_limit = (datetime.datetime.utcnow() + datetime.timedelta(days=<span class="number">30</span>)).date().isoformat()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># æŸ¥è¯¢è¡¨è¾¾å¼</span></span><br><span class="line">    expression = <span class="string">f&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    SELECT accountId, arn, resourceName, configuration.domainName, configuration.notAfter, configuration.type</span></span><br><span class="line"><span class="string">    WHERE resourceType = &#x27;AWS::ACM::Certificate&#x27;</span></span><br><span class="line"><span class="string">    AND configuration.notAfter &lt;= &#x27;<span class="subst">&#123;date_limit&#125;</span>&#x27;</span></span><br><span class="line"><span class="string">    AND configuration.type = &#x27;IMPORTED&#x27;</span></span><br><span class="line"><span class="string">    ORDER BY configuration.notAfter ASC</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        response = config_client.select_aggregate_resource_config(</span><br><span class="line">            Expression=expression,</span><br><span class="line">            ConfigurationAggregatorName=AGGREGATOR_NAME</span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">        results = [json.loads(record) <span class="keyword">for</span> record <span class="keyword">in</span> response.get(<span class="string">&quot;Results&quot;</span>, [])]</span><br><span class="line"></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;æŸ¥è¯¢ç»“æœ:&quot;</span>)</span><br><span class="line">        <span class="keyword">for</span> item <span class="keyword">in</span> results:</span><br><span class="line">            <span class="built_in">print</span>(item)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># å¦‚æœæ•°é‡å¤§äº 1ï¼Œå°±å‘ SNS</span></span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">len</span>(results) &gt; <span class="number">1</span>:</span><br><span class="line">            message = <span class="string">&quot;ä»¥ä¸‹ ACM è¯ä¹¦å°†åœ¨ 30 å¤©å†…è¿‡æœŸï¼ˆä»…é™ IMPORTED ç±»å‹ï¼‰:\n&quot;</span></span><br><span class="line">            <span class="keyword">for</span> cert <span class="keyword">in</span> results:</span><br><span class="line">                message += <span class="string">f&quot;- Account: <span class="subst">&#123;cert[<span class="string">&#x27;accountId&#x27;</span>]&#125;</span>, Domain: <span class="subst">&#123;cert.get(<span class="string">&#x27;configuration.domainName&#x27;</span>)&#125;</span>, Expire: <span class="subst">&#123;cert[<span class="string">&#x27;configuration.notAfter&#x27;</span>]&#125;</span>\n&quot;</span></span><br><span class="line"></span><br><span class="line">            sns_client.publish(</span><br><span class="line">                TopicArn=SNS_TOPIC_ARN,</span><br><span class="line">                Subject=<span class="string">&quot;ACM è¯ä¹¦è¿‡æœŸæé†’&quot;</span>,</span><br><span class="line">                Message=message</span><br><span class="line">            )</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;SNS å·²å‘é€&quot;</span>)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            <span class="string">&quot;statusCode&quot;</span>: <span class="number">200</span>,</span><br><span class="line">            <span class="string">&quot;body&quot;</span>: results</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;æŸ¥è¯¢å¤±è´¥: <span class="subst">&#123;e&#125;</span>&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            <span class="string">&quot;statusCode&quot;</span>: <span class="number">500</span>,</span><br><span class="line">            <span class="string">&quot;body&quot;</span>: <span class="built_in">str</span>(e)</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure><h1 id="æ³¨æ„äº‹é¡¹"><a href="#æ³¨æ„äº‹é¡¹" class="headerlink" title="æ³¨æ„äº‹é¡¹"></a>æ³¨æ„äº‹é¡¹</h1><p>ä¸Šæ–‡ä¹Ÿè¯´å•¦ï¼Œæˆ‘ä»¬ç”¨çš„æ˜¯aws-controltower-GuardrailsComplianceAggregatorè¿™ä¸ªï¼Œä½†æ˜¯éœ€è¦æ³¨æ„è¿™ä¸ªèšåˆå™¨çš„è´¦å·èŒƒå›´ï¼Œå› ä¸ºé»˜è®¤ä¼šæŠŠæ‰€æœ‰çš„è´¦å·éƒ½åŒ…æ‹¬è¿›æ¥ï¼ŒåŒ…æ‹¬UATç­‰ç¯å¢ƒï¼Œæ‰€ä»¥å¦‚æœæˆ‘ä»¬åªéœ€è¦ç›‘æ§Prodç¯å¢ƒï¼Œé‚£ä¹ˆæœ€å¥½çš„åŠæ³•å°±æ˜¯æ–°å»ºä¸€ä¸ªèšåˆå™¨ï¼Œç„¶ååœ¨Source Accountsé‡Œé¢é™å®šè´¦å·èŒƒå›´</p><img src="/2025/08/25/AWS%E4%BD%BF%E7%94%A8%E6%97%A5%E5%BF%974-%E4%BD%BF%E7%94%A8EventBridge-Lambda-Config-SNS%E7%9B%91%E6%8E%A7ACM%E8%AF%81%E4%B9%A6%E8%BF%87%E6%9C%9F/image.png" class="" title="å¦‚å›¾æ‰€ç¤º">]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;èƒŒæ™¯&quot;&gt;&lt;a href=&quot;#èƒŒæ™¯&quot; class=&quot;headerlink&quot; title=&quot;èƒŒæ™¯&quot;&gt;&lt;/a&gt;èƒŒæ™¯&lt;/h1&gt;&lt;p&gt;é€šå¸¸åœ¨AWSä¸­ï¼Œå¦‚æœæˆ‘ä»¬éœ€è¦ç›‘æ§å•ä¸ªsslè¯ä¹¦çš„è¿‡æœŸæ—¶é—´ï¼Œæˆ‘ä»¬ç›´æ¥ç”¨cloudwatchå³å¯ï¼Œä½†æ˜¯å¦‚æœæˆ‘ä»¬æ˜¯control toweræ§åˆ¶çš„</summary>
      
    
    
    
    <category term="è¿ç»´" scheme="https://maydaychen.github.io/categories/%E8%BF%90%E7%BB%B4/"/>
    
    
    <category term="AWS" scheme="https://maydaychen.github.io/tags/AWS/"/>
    
  </entry>
  
  <entry>
    <title>Prometheusé—®é¢˜è®°å½•1--ArgocdClusterConnectionDownè¯¯æŠ¥</title>
    <link href="https://maydaychen.github.io/2025/08/25/Prometheus%E9%97%AE%E9%A2%98%E8%AE%B0%E5%BD%951-ArgocdClusterConnectionDown%E8%AF%AF%E6%8A%A5/"/>
    <id>https://maydaychen.github.io/2025/08/25/Prometheus%E9%97%AE%E9%A2%98%E8%AE%B0%E5%BD%951-ArgocdClusterConnectionDown%E8%AF%AF%E6%8A%A5/</id>
    <published>2025-08-25T02:22:39.000Z</published>
    <updated>2025-08-25T02:51:03.509Z</updated>
    
    <content type="html"><![CDATA[<h1 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h1><p>æœ€è¿‘å‘ç°é›†æˆçš„zabbix&#x2F;prometheusä¸€ç›´åœ¨æŠ¥Argocdé›†ç¾¤è¿æ¥é—®é¢˜ï¼Œä½†æ˜¯åœ¨Argocdé¡µé¢ä¸Šçœ‹åˆæ˜¯æ­£å¸¸çš„ï¼Œ<br>åŸè¡¨è¾¾å¼</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">- alert: &quot;Argocd Cluster Connection Down&quot;</span><br><span class="line">          expr: argocd_cluster_connection_status&#123;status=&quot;down&quot;&#125; &gt; 0</span><br><span class="line">          for: 5m</span><br><span class="line">          labels:</span><br><span class="line">            severity: warning</span><br><span class="line">          annotations:</span><br><span class="line">            summary: Argocd Cluster Connection Unhealthy (instance &#123;&#123; $labels.instance &#125;&#125;)</span><br><span class="line">            description: &quot;Service &#123;&#123; $labels.name &#125;&#125; Argocd Cluster Connection is down.\n  VALUE = &#123;&#123; $value &#125;&#125;\n  LABELS = &#123;&#123; $labels &#125;&#125;&quot;</span><br></pre></td></tr></table></figure><h1 id="è§£å†³åŠæ³•"><a href="#è§£å†³åŠæ³•" class="headerlink" title="è§£å†³åŠæ³•"></a>è§£å†³åŠæ³•</h1><p>å‚è€ƒMR: <a href="https://github.com/argoproj/argo-cd/pull/7419">https://github.com/argoproj/argo-cd/pull/7419</a><br>è§£æï¼šargocd_cluster_connection_statusä»¥å‰è¿”å›0è¡¨ç¤ºæ²¡é—®é¢˜ï¼Œåæ¥å€’äº†ä¸€ä¸‹ï¼Œå¦‚æœè¿”å›1è¯´æ˜æ²¡é—®é¢˜ï¼Œæ‰€ä»¥å¯¼è‡´äº†argocdå‡çº§ä¹‹åä¸€ç›´è¿”å›0ï¼Œè€ŒPrometheusçš„ruleæ²¡æœ‰å¯¹åº”çš„å‡çº§ï¼Œå¯¼è‡´äº†è¯¯æŠ¥</p><h1 id="ä¿®æ”¹ä»¥å"><a href="#ä¿®æ”¹ä»¥å" class="headerlink" title="ä¿®æ”¹ä»¥å"></a>ä¿®æ”¹ä»¥å</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">name: Argocd Cluster Connection Down</span><br><span class="line">expr: argocd_cluster_connection_status &lt; 1</span><br><span class="line">for: 5m</span><br><span class="line">labels:</span><br><span class="line">severity: warning</span><br><span class="line">annotations:</span><br><span class="line">description: Service &#123;&#123; $labels.name &#125;&#125; Argocd Cluster Connection is down.</span><br><span class="line">  VALUE = &#123;&#123; $value &#125;&#125;</span><br><span class="line">  LABELS = &#123;&#123; $labels &#125;&#125;</span><br><span class="line">summary: Argocd Cluster Connection Unhealthy (instance &#123;&#123; $labels.instance &#125;&#125;)</span><br></pre></td></tr></table></figure><p>é—®é¢˜è§£å†³</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;èƒŒæ™¯&quot;&gt;&lt;a href=&quot;#èƒŒæ™¯&quot; class=&quot;headerlink&quot; title=&quot;èƒŒæ™¯&quot;&gt;&lt;/a&gt;èƒŒæ™¯&lt;/h1&gt;&lt;p&gt;æœ€è¿‘å‘ç°é›†æˆçš„zabbix&amp;#x2F;prometheusä¸€ç›´åœ¨æŠ¥Argocdé›†ç¾¤è¿æ¥é—®é¢˜ï¼Œä½†æ˜¯åœ¨Argocdé¡µé¢ä¸Šçœ‹åˆæ˜¯æ­£å¸¸çš„ï¼Œ&lt;br&gt;åŸ</summary>
      
    
    
    
    <category term="è¿ç»´" scheme="https://maydaychen.github.io/categories/%E8%BF%90%E7%BB%B4/"/>
    
    
    <category term="ç›‘æ§" scheme="https://maydaychen.github.io/tags/%E7%9B%91%E6%8E%A7/"/>
    
    <category term="Prometheus" scheme="https://maydaychen.github.io/tags/Prometheus/"/>
    
  </entry>
  
  <entry>
    <title>AWSä½¿ç”¨æ—¥å¿—3--HTTPCode_ELB_4XX_Countå’ŒHTTPCode_Target_4XX_Countçš„åŒºåˆ«</title>
    <link href="https://maydaychen.github.io/2025/08/24/AWS%E4%BD%BF%E7%94%A8%E6%97%A5%E5%BF%973--HTTPCode-ELB-4XX-Count%E5%92%8CHTTPCode-Target-4XX-Count%E7%9A%84%E5%8C%BA%E5%88%AB/"/>
    <id>https://maydaychen.github.io/2025/08/24/AWS%E4%BD%BF%E7%94%A8%E6%97%A5%E5%BF%973--HTTPCode-ELB-4XX-Count%E5%92%8CHTTPCode-Target-4XX-Count%E7%9A%84%E5%8C%BA%E5%88%AB/</id>
    <published>2025-08-24T09:27:53.000Z</published>
    <updated>2025-08-25T07:14:53.347Z</updated>
    
    <content type="html"><![CDATA[<h1 id="æé—®"><a href="#æé—®" class="headerlink" title="æé—®"></a>æé—®</h1><p>è¿™ä¸¤ä¸ªmetricåœ¨AWSä¸­åˆ°åº•ä»£è¡¨äº†ä»€ä¹ˆï¼Ÿ</p><h1 id="å›ç­”"><a href="#å›ç­”" class="headerlink" title="å›ç­”"></a>å›ç­”</h1><p>è¿™æ˜¯ç”¨äºå¸®åŠ©è¯Šæ–­é”™è¯¯æ‰€åœ¨çš„2ç§åº¦é‡æ ‡å‡†ï¼Œç”¨äºè¯Šæ–­4XXé”™è¯¯ã€‚</p><p>HTTPCode_ELB_4XX_Count â€“ è¿™æ˜¯ä»ELBè¿”å›çš„4XXä¸ªé”™è¯¯çš„æ•°é‡ã€‚<br>HTTPCode_Target_4XX_Count â€“ è¿™åªæ˜¯ä»åº”ç”¨æœåŠ¡å™¨è¿”å›çš„4XXé”™è¯¯ã€‚</p><p>ä¹Ÿå°±æ˜¯è¯´ï¼ŒHTTPCode_ELB_4XX_Countæ˜¯æ¥è‡ªè´Ÿè½½å‡è¡¡å™¨çš„4xxå“åº”ä»£ç çš„è®¡æ•°ï¼Œè€Œä¸æ˜¯ç›®æ ‡çš„è®¡æ•°ï¼Œä¾‹å¦‚ï¼Œåœ¨è´Ÿè½½å‡è¡¡å™¨ä¹Ÿä¸çŸ¥é“åœ¨å“ªé‡Œè½¬å‘è¯·æ±‚çš„æƒ…å†µä¸‹,ELBä¼šç›´æ¥æŠ¥é”™4XX<br>ç±»ä¼¼åœ°ï¼ŒHTTPCode_Target_4XX_Countåªè¡¨ç¤ºæ¥è‡ªç›®æ ‡ç»„çš„4xxå“åº”çš„è®¡æ•°ï¼Œè€Œä¸æ˜¯è´Ÿè½½å‡è¡¡å™¨ï¼Œä¾‹å¦‚è®¿é—®applicationè¢«æ‹’ç»ï¼Œæ­¤æ—¶çˆ†å‡ºçš„403ç­‰é”™è¯¯å°±å±äºHTTPCode_Target_4XX_Count</p><p>å‚è€ƒé“¾æ¥ï¼š <a href="https://docs.aws.amazon.com/elasticloadbalancing/latest/application/load-balancer-cloudwatch-metrics.html">https://docs.aws.amazon.com/elasticloadbalancing/latest/application/load-balancer-cloudwatch-metrics.html</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;æé—®&quot;&gt;&lt;a href=&quot;#æé—®&quot; class=&quot;headerlink&quot; title=&quot;æé—®&quot;&gt;&lt;/a&gt;æé—®&lt;/h1&gt;&lt;p&gt;è¿™ä¸¤ä¸ªmetricåœ¨AWSä¸­åˆ°åº•ä»£è¡¨äº†ä»€ä¹ˆï¼Ÿ&lt;/p&gt;
&lt;h1 id=&quot;å›ç­”&quot;&gt;&lt;a href=&quot;#å›ç­”&quot; class=&quot;headerlink</summary>
      
    
    
    
    <category term="è¿ç»´" scheme="https://maydaychen.github.io/categories/%E8%BF%90%E7%BB%B4/"/>
    
    
    <category term="AWS" scheme="https://maydaychen.github.io/tags/AWS/"/>
    
  </entry>
  
  <entry>
    <title>n8nä½¿ç”¨ç¬”è®°1--JSONè½¬HTMLè¸©å‘</title>
    <link href="https://maydaychen.github.io/2025/08/21/n8n%E4%BD%BF%E7%94%A8%E7%AC%94%E8%AE%B01-JSON%E8%BD%ACHTML%E8%B8%A9%E5%9D%91/"/>
    <id>https://maydaychen.github.io/2025/08/21/n8n%E4%BD%BF%E7%94%A8%E7%AC%94%E8%AE%B01-JSON%E8%BD%ACHTML%E8%B8%A9%E5%9D%91/</id>
    <published>2025-08-21T07:11:50.000Z</published>
    <updated>2025-08-21T07:11:50.685Z</updated>
    
    
    
    
    
  </entry>
  
  <entry>
    <title>Linuxæ“ä½œè®°å½•10--Gitå‡çº§ç¬”è®°</title>
    <link href="https://maydaychen.github.io/2025/08/21/Linux%E6%93%8D%E4%BD%9C%E8%AE%B0%E5%BD%9510-Git%E5%8D%87%E7%BA%A7%E7%AC%94%E8%AE%B0/"/>
    <id>https://maydaychen.github.io/2025/08/21/Linux%E6%93%8D%E4%BD%9C%E8%AE%B0%E5%BD%9510-Git%E5%8D%87%E7%BA%A7%E7%AC%94%E8%AE%B0/</id>
    <published>2025-08-21T05:42:20.000Z</published>
    <updated>2025-08-21T05:47:40.659Z</updated>
    
    <content type="html"><![CDATA[<h1 id="ä¸‹è½½Git"><a href="#ä¸‹è½½Git" class="headerlink" title="ä¸‹è½½Git"></a>ä¸‹è½½Git</h1><p>å¦‚æœå·²ç»æœ‰Gitäº†ï¼Œå¯ä»¥ç›´æ¥é€šè¿‡gitå‘½ä»¤ä¸‹è½½</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone https://github.com/git/git</span><br></pre></td></tr></table></figure><p>å¦‚æœæ²¡æœ‰gitï¼Œé‚£å¯ä»¥ç›´æ¥ä¸‹è½½taråŒ…</p><h1 id="è§£å‹ç¼©æ–‡ä»¶"><a href="#è§£å‹ç¼©æ–‡ä»¶" class="headerlink" title="è§£å‹ç¼©æ–‡ä»¶"></a>è§£å‹ç¼©æ–‡ä»¶</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">tar -zxvf git-2.34.1.tar.gz</span><br></pre></td></tr></table></figure><h1 id="å®‰è£…å¿…è¦å·¥å…·"><a href="#å®‰è£…å¿…è¦å·¥å…·" class="headerlink" title="å®‰è£…å¿…è¦å·¥å…·"></a>å®‰è£…å¿…è¦å·¥å…·</h1><p>tar -zxvf git-2.34.1.tar.gz</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yum install curl-devel expat-devel gettext-devel openssl-devel zlib-devel gcc perl-ExtUtils-MakeMaker</span><br><span class="line">tar -zxvf git-2.34.1.tar.gz</span><br></pre></td></tr></table></figure><h1 id="å¸è½½è€ç‰ˆæœ¬git"><a href="#å¸è½½è€ç‰ˆæœ¬git" class="headerlink" title="å¸è½½è€ç‰ˆæœ¬git"></a>å¸è½½è€ç‰ˆæœ¬git</h1><p>å¦‚æœæˆ‘ä»¬ä¹‹å‰å·²ç»å®‰è£…è¿‡gitäº†ï¼Œé‚£ä¹ˆéœ€è¦å…ˆå¸è½½æ—§ç‰ˆæœ¬</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum remove git</span><br></pre></td></tr></table></figure><h1 id="é€šè¿‡makeå®‰è£…"><a href="#é€šè¿‡makeå®‰è£…" class="headerlink" title="é€šè¿‡makeå®‰è£…"></a>é€šè¿‡makeå®‰è£…</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">make prefix=/opt/git all</span><br><span class="line"></span><br><span class="line">make prefix=/opt/git install</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="æ£€æŸ¥å®‰è£…æˆæœ"><a href="#æ£€æŸ¥å®‰è£…æˆæœ" class="headerlink" title="æ£€æŸ¥å®‰è£…æˆæœ"></a>æ£€æŸ¥å®‰è£…æˆæœ</h1><p>é€šè¿‡gitå‘½ä»¤æ£€æŸ¥ç‰ˆæœ¬å³å¯ï¼Œå¦‚æœæ˜¯æœ€æ–°ç‰ˆçš„å°±è¯´æ˜å®‰è£…æ²¡æœ‰é—®é¢˜</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;ä¸‹è½½Git&quot;&gt;&lt;a href=&quot;#ä¸‹è½½Git&quot; class=&quot;headerlink&quot; title=&quot;ä¸‹è½½Git&quot;&gt;&lt;/a&gt;ä¸‹è½½Git&lt;/h1&gt;&lt;p&gt;å¦‚æœå·²ç»æœ‰Gitäº†ï¼Œå¯ä»¥ç›´æ¥é€šè¿‡gitå‘½ä»¤ä¸‹è½½&lt;/p&gt;
&lt;figure class=&quot;highlight shell</summary>
      
    
    
    
    <category term="è¿ç»´" scheme="https://maydaychen.github.io/categories/%E8%BF%90%E7%BB%B4/"/>
    
    
    <category term="Linux" scheme="https://maydaychen.github.io/tags/Linux/"/>
    
  </entry>
  
  <entry>
    <title>Grafanaä½¿ç”¨æ—¥å¿—11--å°†dashboardå¯¼å‡ºä¸ºpdf</title>
    <link href="https://maydaychen.github.io/2025/08/21/Grafana%E4%BD%BF%E7%94%A8%E6%97%A5%E5%BF%9711-%E5%B0%86dashboard%E5%AF%BC%E5%87%BA%E4%B8%BApdf/"/>
    <id>https://maydaychen.github.io/2025/08/21/Grafana%E4%BD%BF%E7%94%A8%E6%97%A5%E5%BF%9711-%E5%B0%86dashboard%E5%AF%BC%E5%87%BA%E4%B8%BApdf/</id>
    <published>2025-08-21T03:18:11.000Z</published>
    <updated>2025-08-21T05:16:05.299Z</updated>
    
    <content type="html"><![CDATA[<h1 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h1><p>åœ¨QAå›¢é˜Ÿåšè´Ÿè½½æµ‹è¯•çš„æ—¶å€™ï¼Œéœ€è¦äº§å‡ºè´Ÿè½½æŠ¥å‘Šï¼Œè¿™æ—¶å€™ä»–ä»¬è¦æ±‚ç›´æ¥ä»Grafanaå¯¼å‡ºæŠ¥å‘Šï¼Œå› æ­¤æ‰æœ‰äº†è¿™ç¯‡æ–‡ç« </p><h1 id="å®ç°"><a href="#å®ç°" class="headerlink" title="å®ç°"></a>å®ç°</h1><p>ä½¿ç”¨ç¬¬ä¸‰æ–¹ï¼š <a href="https://github.com/IzakMarais/reporter">https://github.com/IzakMarais/reporter</a></p><h2 id="å®‰è£…grafana-reporter"><a href="#å®‰è£…grafana-reporter" class="headerlink" title="å®‰è£…grafana-reporter"></a>å®‰è£…grafana-reporter</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">sudo yum install go -y</span><br><span class="line">sudo yum install -y git</span><br><span class="line">sudo yum install -y texlive-latex</span><br><span class="line">sudo yum install texlive texlive-science -y</span><br><span class="line">/usr/local/go/bin/go install -v github.com/IzakMarais/reporter/cmd/grafana-reporter@latest</span><br><span class="line">nohup go/bin/grafana-reporter &amp;</span><br></pre></td></tr></table></figure><h2 id="é…ç½®nginx"><a href="#é…ç½®nginx" class="headerlink" title="é…ç½®nginx"></a>é…ç½®nginx</h2><p>æˆ‘ä»¬éœ€è¦é…ç½® nginx ä»¥å…è®¸è®¿é—® 8686 ç«¯å£ã€‚åŒæ—¶ï¼Œæˆ‘ä»¬éœ€è¦è®¾ç½®è¶…æ—¶æ—¶é—´ï¼Œå› ä¸ºæ­¤åŠŸèƒ½å°†è€—æ—¶è¾ƒé•¿ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo vi /etc/nginx/conf.d/grafana.conf</span><br><span class="line"></span><br><span class="line">sudo nginx -s reload</span><br></pre></td></tr></table></figure><img src="/2025/08/21/Grafana%E4%BD%BF%E7%94%A8%E6%97%A5%E5%BF%9711-%E5%B0%86dashboard%E5%AF%BC%E5%87%BA%E4%B8%BApdf/nginx.png" class="" title="å›¾ç‰‡"><h2 id="å®‰è£…å¿…è¦è½¯ä»¶åŒ…"><a href="#å®‰è£…å¿…è¦è½¯ä»¶åŒ…" class="headerlink" title="å®‰è£…å¿…è¦è½¯ä»¶åŒ…"></a>å®‰è£…å¿…è¦è½¯ä»¶åŒ…</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo yum -y install libX11 libXcomposite libXcursor libXdamage libXext libXi libXtst cups-libs libXScrnSaver libXrandr alsa-lib pango atk at-spi2-atk gtk3</span><br><span class="line">sudo yum install alsa-lib-devel -y</span><br></pre></td></tr></table></figure><h2 id="å®‰è£…Grafanaæ’ä»¶"><a href="#å®‰è£…Grafanaæ’ä»¶" class="headerlink" title="å®‰è£…Grafanaæ’ä»¶"></a>å®‰è£…Grafanaæ’ä»¶</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo grafana-cli plugins install grafana-image-renderer</span><br><span class="line">sudo systemctl restart grafana-server</span><br></pre></td></tr></table></figure><h2 id="ç”ŸæˆAPI-Key"><a href="#ç”ŸæˆAPI-Key" class="headerlink" title="ç”ŸæˆAPI Key"></a>ç”ŸæˆAPI Key</h2><p>æˆ‘ä»¬éœ€è¦ä¸€ä¸ªå¯†é’¥æ¥è®¿é—®å¯ä»¥ç”ŸæˆPDFçš„ç½‘å€ï¼Œå¦‚æœä¸ä½¿ç”¨æ­¤å¯†é’¥ï¼ŒAPIå°†è¿”å›401é”™è¯¯</p><img src="/2025/08/21/Grafana%E4%BD%BF%E7%94%A8%E6%97%A5%E5%BF%9711-%E5%B0%86dashboard%E5%AF%BC%E5%87%BA%E4%B8%BApdf/api-key.png" class="" title="å›¾ç‰‡"><h3 id="401çš„å¦ä¸€ç§è§£å†³æ–¹æ¡ˆ"><a href="#401çš„å¦ä¸€ç§è§£å†³æ–¹æ¡ˆ" class="headerlink" title="401çš„å¦ä¸€ç§è§£å†³æ–¹æ¡ˆ"></a>401çš„å¦ä¸€ç§è§£å†³æ–¹æ¡ˆ</h3><p>æˆ‘ä»¬å¯ä»¥æ›´æ”¹Grafanaçš„é…ç½®ï¼Œæ­¤æ“ä½œå°†å…è®¸ä»»ä½•äººæ— éœ€ç™»å½•å³å¯è®¿é—®Grafanaï¼Œå› æ­¤ä¸å»ºè®®è¿™æ ·åšã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[auth.anonymous]</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="built_in">enable</span> anonymous access</span></span><br><span class="line">enabled = true</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">specify organization name that should be used <span class="keyword">for</span> unauthenticated <span class="built_in">users</span></span></span><br><span class="line">org_name = Main Org.</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">specify role <span class="keyword">for</span> unauthenticated <span class="built_in">users</span></span></span><br><span class="line">org_role = Viewer</span><br></pre></td></tr></table></figure><h2 id="ä¿®æ”¹ALB-timeout"><a href="#ä¿®æ”¹ALB-timeout" class="headerlink" title="ä¿®æ”¹ALB timeout"></a>ä¿®æ”¹ALB timeout</h2><p>ä¸è¦å¿˜è®°è¿™ä¸€éƒ¨åˆ†ï¼è¯·å°†è¶…æ—¶æ—¶é—´æ”¹ä¸º300ç§’ï¼ˆä¸nginxé…ç½®ç›¸åŒï¼‰ï¼Œä¸ç„¶ä¼šåœ¨ALBç«¯æŠ¥è¶…æ—¶å¹¶æ–­å¼€è¿æ¥<br>** è¿™ä¸ªæ˜¯é’ˆå¯¹AWSçš„è¯´æ³•ï¼Œå¯¹äºå…¶ä»–äº‘å¹³å°å¯èƒ½åå­—ä¸ä¸€æ ·</p><h2 id="ä¸ºdashboardæ·»åŠ link"><a href="#ä¸ºdashboardæ·»åŠ link" class="headerlink" title="ä¸ºdashboardæ·»åŠ link"></a>ä¸ºdashboardæ·»åŠ link</h2><img src="/2025/08/21/Grafana%E4%BD%BF%E7%94%A8%E6%97%A5%E5%BF%9711-%E5%B0%86dashboard%E5%AF%BC%E5%87%BA%E4%B8%BApdf/add-link1.png" class="" title="å›¾ç‰‡"><img src="/2025/08/21/Grafana%E4%BD%BF%E7%94%A8%E6%97%A5%E5%BF%9711-%E5%B0%86dashboard%E5%AF%BC%E5%87%BA%E4%B8%BApdf/add-link2.png" class="" title="å›¾ç‰‡"><img src="/2025/08/21/Grafana%E4%BD%BF%E7%94%A8%E6%97%A5%E5%BF%9711-%E5%B0%86dashboard%E5%AF%BC%E5%87%BA%E4%B8%BApdf/add-link3.png" class="" title="å›¾ç‰‡"><img src="/2025/08/21/Grafana%E4%BD%BF%E7%94%A8%E6%97%A5%E5%BF%9711-%E5%B0%86dashboard%E5%AF%BC%E5%87%BA%E4%B8%BApdf/add-link4.png" class="" title="å›¾ç‰‡"><img src="/2025/08/21/Grafana%E4%BD%BF%E7%94%A8%E6%97%A5%E5%BF%9711-%E5%B0%86dashboard%E5%AF%BC%E5%87%BA%E4%B8%BApdf/add-link5.png" class="" title="å›¾ç‰‡"><p>ç‚¹å‡»æ­¤æŒ‰é’®åï¼Œç­‰å¾…å¤§çº¦2åˆ†é’Ÿï¼ˆå–å†³äºé¢æ¿æ•°é‡ï¼Œé¢æ¿è¶Šå¤šï¼Œæ‰€éœ€ç­‰å¾…æ—¶é—´è¶Šé•¿ï¼‰ã€‚</p><img src="/2025/08/21/Grafana%E4%BD%BF%E7%94%A8%E6%97%A5%E5%BF%9711-%E5%B0%86dashboard%E5%AF%BC%E5%87%BA%E4%B8%BApdf/add-link6.png" class="" title="å›¾ç‰‡"><p>ç„¶åæˆ‘ä»¬å°†åœ¨æµè§ˆå™¨ä¸­çœ‹åˆ°PDFæ–‡ä»¶ï¼Œå¦‚æœæƒ³è¦ä¸‹è½½ï¼Œå¯ä»¥ç‚¹å‡»é¡¶éƒ¨çš„â€œä¸‹è½½â€æŒ‰é’®ï¼ˆåœ¨Microsoft Edgeä¸­è¯¥æŒ‰é’®å¯èƒ½æ˜¾ç¤ºä¸ºâ€œä¿å­˜â€ï¼‰ã€‚</p><h1 id="é—®é¢˜è®°å½•"><a href="#é—®é¢˜è®°å½•" class="headerlink" title="é—®é¢˜è®°å½•"></a>é—®é¢˜è®°å½•</h1><h2 id="Error-obtaining-render-500-Internal-Server-Error"><a href="#Error-obtaining-render-500-Internal-Server-Error" class="headerlink" title="Error obtaining render:500 Internal Server Error"></a>Error obtaining render:500 Internal Server Error</h2><h3 id="åŸå› "><a href="#åŸå› " class="headerlink" title="åŸå› "></a>åŸå› </h3><p>æ ¹æ®Grafanaçš„é…ç½®ï¼ŒGrafanaå®é™…ä¸Šå·²ç»è¶…æ—¶ï¼Œä½†è¯¥åŠŸèƒ½å¹¶æœªè¶…æ—¶ï¼Œè¿™å°†å¯¼è‡´è¯¥åŠŸèƒ½æ— æ³•è¿æ¥åˆ°Grafanaï¼Œå› æ­¤ä¼šå‡ºç°ç±»ä¼¼çš„é”™è¯¯æŠ¥å‘Šã€‚</p><h3 id="è§£å†³æ–¹æ¡ˆ"><a href="#è§£å†³æ–¹æ¡ˆ" class="headerlink" title="è§£å†³æ–¹æ¡ˆ"></a>è§£å†³æ–¹æ¡ˆ</h3><p>æˆ‘ä»¬éœ€è¦åœ¨è°ƒç”¨ç”Ÿæˆ PDF åŠŸèƒ½çš„ Grafana é“¾æ¥æœ«å°¾æ·»åŠ å‚æ•° timeout&#x3D;600ã€‚è¿™å°†æŠŠ Grafana çš„è¶…æ—¶æ—¶é—´è®¾ç½®ä¸º 600 ç§’ï¼Œä¸å®¹æ˜“å¯¼è‡´è¶…æ—¶ï¼Œå¹¶ä¸”å°†æœ‰è¶³å¤Ÿçš„æ—¶é—´ç”Ÿæˆ PDFã€‚</p><h3 id="å¤‡æ³¨"><a href="#å¤‡æ³¨" class="headerlink" title="å¤‡æ³¨"></a>å¤‡æ³¨</h3><p>æ­¤åŠŸèƒ½å°†ä½¿ç”¨å¤§é‡å†…å­˜ï¼Œå› æ­¤å¦‚æœæˆ‘ä»¬çš„GrafanaæœåŠ¡å™¨ä»…æœ‰2Gå†…å­˜ï¼Œæ­¤åŠŸèƒ½å°†å¯¼è‡´OOMï¼ˆå†…å­˜æº¢å‡ºï¼‰ã€‚å› æ­¤ï¼Œå¦‚æœæˆ‘ä»¬æƒ³è¦ä½¿ç”¨æ­¤åŠŸèƒ½ï¼Œå¿…é¡»å°†å†…å­˜æ‰©å®¹è‡³è‡³å°‘4Gã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;èƒŒæ™¯&quot;&gt;&lt;a href=&quot;#èƒŒæ™¯&quot; class=&quot;headerlink&quot; title=&quot;èƒŒæ™¯&quot;&gt;&lt;/a&gt;èƒŒæ™¯&lt;/h1&gt;&lt;p&gt;åœ¨QAå›¢é˜Ÿåšè´Ÿè½½æµ‹è¯•çš„æ—¶å€™ï¼Œéœ€è¦äº§å‡ºè´Ÿè½½æŠ¥å‘Šï¼Œè¿™æ—¶å€™ä»–ä»¬è¦æ±‚ç›´æ¥ä»Grafanaå¯¼å‡ºæŠ¥å‘Šï¼Œå› æ­¤æ‰æœ‰äº†è¿™ç¯‡æ–‡ç« &lt;/p&gt;
&lt;h1 id=&quot;å®ç°&quot;</summary>
      
    
    
    
    <category term="è¿ç»´" scheme="https://maydaychen.github.io/categories/%E8%BF%90%E7%BB%B4/"/>
    
    
    <category term="ç›‘æ§" scheme="https://maydaychen.github.io/tags/%E7%9B%91%E6%8E%A7/"/>
    
    <category term="Grafana" scheme="https://maydaychen.github.io/tags/Grafana/"/>
    
  </entry>
  
  <entry>
    <title>Grafanaä½¿ç”¨æ—¥å¿—10--æ¥å…¥keycloakéªŒè¯</title>
    <link href="https://maydaychen.github.io/2025/08/18/Grafana%E4%BD%BF%E7%94%A8%E6%97%A5%E5%BF%9710--%E6%8E%A5%E5%85%A5keycloak%E9%AA%8C%E8%AF%81/"/>
    <id>https://maydaychen.github.io/2025/08/18/Grafana%E4%BD%BF%E7%94%A8%E6%97%A5%E5%BF%9710--%E6%8E%A5%E5%85%A5keycloak%E9%AA%8C%E8%AF%81/</id>
    <published>2025-08-18T02:40:34.000Z</published>
    <updated>2025-08-21T03:15:46.656Z</updated>
    
    <content type="html"><![CDATA[<h1 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h1><p>ä¼—æ‰€å‘¨çŸ¥ï¼Œåœ¨Grafanaä¸­è‡ªå¸¦çš„è´¦å·ä½“ç³»æ˜¯æ²¡æœ‰åŠæ³•æ”¯æŒMFAçš„ï¼Œåªèƒ½é€šè¿‡ç¬¬ä¸‰æ–¹æ¥æ”¯æŒMFAï¼Œè€Œå…¶ä»–çš„MFAå·¥å…·å› ä¸ºå„ç§åŸå› éƒ½ä¸å¤ªå¥½ç”¨ï¼Œæ‰€ä»¥è¿™é‡Œé€‰æ‹©äº†keycloakä½œä¸ºç¬¬ä¸‰æ–¹çš„å·¥å…·<br>ä¸‹é¢å°±æ¥ä»‹ç»ä¸€ä¸‹å¦‚ä½•å¯¹æ¥keycloakä½œä¸ºç¬¬ä¸‰æ–¹ç™»å½•å·¥å…·</p><h1 id="å®ç°"><a href="#å®ç°" class="headerlink" title="å®ç°"></a>å®ç°</h1><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;èƒŒæ™¯&quot;&gt;&lt;a href=&quot;#èƒŒæ™¯&quot; class=&quot;headerlink&quot; title=&quot;èƒŒæ™¯&quot;&gt;&lt;/a&gt;èƒŒæ™¯&lt;/h1&gt;&lt;p&gt;ä¼—æ‰€å‘¨çŸ¥ï¼Œåœ¨Grafanaä¸­è‡ªå¸¦çš„è´¦å·ä½“ç³»æ˜¯æ²¡æœ‰åŠæ³•æ”¯æŒMFAçš„ï¼Œåªèƒ½é€šè¿‡ç¬¬ä¸‰æ–¹æ¥æ”¯æŒMFAï¼Œè€Œå…¶ä»–çš„MFAå·¥å…·å› ä¸ºå„ç§åŸå› éƒ½ä¸å¤ªå¥½ç”¨ï¼Œæ‰€ä»¥</summary>
      
    
    
    
    <category term="è¿ç»´" scheme="https://maydaychen.github.io/categories/%E8%BF%90%E7%BB%B4/"/>
    
    
    <category term="ç›‘æ§" scheme="https://maydaychen.github.io/tags/%E7%9B%91%E6%8E%A7/"/>
    
    <category term="Grafana" scheme="https://maydaychen.github.io/tags/Grafana/"/>
    
  </entry>
  
  <entry>
    <title>AIå°è¯•ç¬”è®°4--é€šè¿‡n8nå‘é€ä¿¡æ¯</title>
    <link href="https://maydaychen.github.io/2025/08/16/AI%E5%B0%9D%E8%AF%95%E7%AC%94%E8%AE%B04-%E9%80%9A%E8%BF%87n8n%E5%8F%91%E9%80%81%E4%BF%A1%E6%81%AF/"/>
    <id>https://maydaychen.github.io/2025/08/16/AI%E5%B0%9D%E8%AF%95%E7%AC%94%E8%AE%B04-%E9%80%9A%E8%BF%87n8n%E5%8F%91%E9%80%81%E4%BF%A1%E6%81%AF/</id>
    <published>2025-08-16T06:48:30.000Z</published>
    <updated>2025-08-16T08:09:05.166Z</updated>
    
    <content type="html"><![CDATA[<p>ä»æ¥æ²¡æƒ³è¿‡é€šè¿‡TGå‘é€æ¶ˆæ¯ç«Ÿç„¶è¿™ä¹ˆç®€å•,ä¸‹é¢è®°å½•ä¸€ä¸‹é€šè¿‡TGå‘é€æ¶ˆæ¯çš„è¯¦ç»†æ­¥éª¤</p><h1 id="åˆ›å»ºæœºå™¨äºº"><a href="#åˆ›å»ºæœºå™¨äºº" class="headerlink" title="åˆ›å»ºæœºå™¨äºº"></a>åˆ›å»ºæœºå™¨äºº</h1><p>æˆ‘ä»¬åªéœ€è¦æ‰¾åˆ°ä¸€ä¸ªå«åšBotFatherçš„è´¦å·ï¼Œç„¶åè¾“å…¥&#x2F;newbot<br>ä»–ä¼šè¦æ±‚ä½ è¾“å…¥ä»¥ä¸‹å†…å®¹</p><ul><li>æœºå™¨äººçš„åå­—</li><li>æœºå™¨äººçš„ç”¨æˆ·åï¼ˆå¿…é¡»ä»¥_botç»“å°¾ï¼‰<img src="/2025/08/16/AI%E5%B0%9D%E8%AF%95%E7%AC%94%E8%AE%B04-%E9%80%9A%E8%BF%87n8n%E5%8F%91%E9%80%81%E4%BF%A1%E6%81%AF/1.png" class="" title="å›¾ç‰‡">ä¹‹åå¦‚æœåˆ›å»ºæˆåŠŸï¼Œä¼šç»™ä½ è¿”å›ä¸€ä¸ªtokenï¼Œè¯·åŠ¡å¿…è®°ä½è¿™ä¸ªtokenï¼Œå› ä¸ºn8nä¸­éœ€è¦</li></ul><h1 id="n8nè®¾ç½®Credential"><a href="#n8nè®¾ç½®Credential" class="headerlink" title="n8nè®¾ç½®Credential"></a>n8nè®¾ç½®Credential</h1><p>åœ¨n8nä¸­åˆ›å»ºä¸€ä¸ªcredentialï¼Œé€‰æ‹©telegramï¼Œç„¶åä¼šè¦æ±‚ä½ è¾“å…¥ä¸€ä¸ªAccess Token<br>å°†åˆšæ‰BotFatherç»™ä½ çš„tokenè¾“å…¥å³å¯</p><img src="/2025/08/16/AI%E5%B0%9D%E8%AF%95%E7%AC%94%E8%AE%B04-%E9%80%9A%E8%BF%87n8n%E5%8F%91%E9%80%81%E4%BF%A1%E6%81%AF/2.png" class="" title="å›¾ç‰‡"><h1 id="å‘é€æ¶ˆæ¯åˆ°ç¾¤èŠ"><a href="#å‘é€æ¶ˆæ¯åˆ°ç¾¤èŠ" class="headerlink" title="å‘é€æ¶ˆæ¯åˆ°ç¾¤èŠ"></a>å‘é€æ¶ˆæ¯åˆ°ç¾¤èŠ</h1><p>å¦‚æœæƒ³è¦è®©è¿™ä¸ªBotè‡ªåŠ¨å‘é€æ¶ˆæ¯ï¼Œéœ€è¦é…ç½®ä¸€ä¸ªchatid<br>åˆ›å»ºç¾¤èŠçš„æ“ä½œè¿™é‡Œå°±ä¸å¤šè¯´ï¼Œ è·Ÿå¾®ä¿¡ä»€ä¹ˆçš„éƒ½æ˜¯ä¸€æ ·çš„<br>åœ¨åˆ›å»ºç¾¤èŠä¹‹åï¼Œæˆ‘ä»¬åœ¨æµè§ˆå™¨ç«¯è®¿é—®API<br><a href="https://api.telegram.org/bot[token]/getUpdates">https://api.telegram.org/bot[token]/getUpdates</a><br>å°†[token]æ¢æˆåˆšæ‰æˆ‘ä»¬è·å–åˆ°çš„Tokenï¼ŒAPIä¼šè¿”å›ä¸€ä¸ªJSON<br>å…¶ä¸­â€idâ€è¿™ä¸ªå­—æ®µå°±æ˜¯æˆ‘ä»¬æƒ³è¦çš„ï¼Œå¦‚æœæ˜¯ç¾¤èŠçš„è¯ä¼šä»¥â€˜-â€™å¼€å¤´<br>åˆ‡è®°åœ¨n8nä¸­å°†è¿™ä¸ªâ€˜-â€™ä¹Ÿç²˜è´´è¿›å»ï¼Œä¸ç„¶ä¼šæŠ¥æ‰¾ä¸åˆ°chatid</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;ä»æ¥æ²¡æƒ³è¿‡é€šè¿‡TGå‘é€æ¶ˆæ¯ç«Ÿç„¶è¿™ä¹ˆç®€å•,ä¸‹é¢è®°å½•ä¸€ä¸‹é€šè¿‡TGå‘é€æ¶ˆæ¯çš„è¯¦ç»†æ­¥éª¤&lt;/p&gt;
&lt;h1 id=&quot;åˆ›å»ºæœºå™¨äºº&quot;&gt;&lt;a href=&quot;#åˆ›å»ºæœºå™¨äºº&quot; class=&quot;headerlink&quot; title=&quot;åˆ›å»ºæœºå™¨äºº&quot;&gt;&lt;/a&gt;åˆ›å»ºæœºå™¨äºº&lt;/h1&gt;&lt;p&gt;æˆ‘ä»¬åªéœ€è¦æ‰¾åˆ°ä¸€ä¸ªå«åš</summary>
      
    
    
    
    <category term="AI" scheme="https://maydaychen.github.io/categories/AI/"/>
    
    
  </entry>
  
  <entry>
    <title>Macä¼˜åŒ–è®°å½•4--ä¿®æ”¹ç³»ç»Ÿè·¯ç”±è¡¨</title>
    <link href="https://maydaychen.github.io/2025/08/15/Mac%E4%BC%98%E5%8C%96%E8%AE%B0%E5%BD%954-%E4%BF%AE%E6%94%B9%E7%B3%BB%E7%BB%9F%E8%B7%AF%E7%94%B1%E8%A1%A8/"/>
    <id>https://maydaychen.github.io/2025/08/15/Mac%E4%BC%98%E5%8C%96%E8%AE%B0%E5%BD%954-%E4%BF%AE%E6%94%B9%E7%B3%BB%E7%BB%9F%E8%B7%AF%E7%94%B1%E8%A1%A8/</id>
    <published>2025-08-15T09:16:36.000Z</published>
    <updated>2025-08-15T09:58:24.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h1><p>ç”±äºé¡¹ç›®éœ€è¦ä½¿ç”¨VPNè½¯ä»¶æ‰èƒ½è¿æ¥åˆ°ç‰¹å®šçš„ç¯å¢ƒï¼Œä½†æ˜¯è¿æ¥VPNä¹‹åï¼Œå†…ç½‘çš„æœåŠ¡å°±è¿ä¸ä¸Šäº†ï¼Œå°±å¯¼è‡´äº†æ²¡æ³•è¿æ¥æ‰“å°æœºæˆ–è€…æ˜¯å†…ç½‘çš„æœåŠ¡å™¨ï¼Œæ•…è€Œäº§ç”Ÿäº†è¿™ä¸ªæ–‡ç« ï¼Œç ”ç©¶äº†æ€ä¹ˆåœ¨è¿æ¥VPNçš„åŒæ—¶è¿˜èƒ½å¤Ÿè¿æ¥åˆ°æœ¬åœ°çš„æœåŠ¡å™¨</p><h1 id="å®ç°æ–¹æ¡ˆ"><a href="#å®ç°æ–¹æ¡ˆ" class="headerlink" title="å®ç°æ–¹æ¡ˆ"></a>å®ç°æ–¹æ¡ˆ</h1><p>è¿™é‡Œæˆ‘æ‰ç”¨çš„æ˜¯ä¿®æ”¹è·¯ç”±è¡¨çš„æ–¹å¼ï¼Œå°†éœ€è¦è¿æ¥çš„å†…ç½‘ipå¼ºåˆ¶è½¬æˆèµ°æœ¬åœ°è·¯ç”±</p><h2 id="æŸ¥è¯¢å½“å‰è·¯ç”±è¡¨"><a href="#æŸ¥è¯¢å½“å‰è·¯ç”±è¡¨" class="headerlink" title="æŸ¥è¯¢å½“å‰è·¯ç”±è¡¨"></a>æŸ¥è¯¢å½“å‰è·¯ç”±è¡¨</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">netstat -rn</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°è¿™æ ·çš„ç»“æœ,æˆ‘å·²ç»è®©GPTç»™æˆ‘è§£æäº†ä¸€ä¸‹</p><img src="/2025/08/15/Mac%E4%BC%98%E5%8C%96%E8%AE%B0%E5%BD%954-%E4%BF%AE%E6%94%B9%E7%B3%BB%E7%BB%9F%E8%B7%AF%E7%94%B1%E8%A1%A8/1.png" class="" title="å›¾ç‰‡"><p>å¯ä»¥çœ‹åˆ°ï¼Œç°åœ¨é»˜è®¤æ‰€æœ‰çš„ç›®æ ‡ç½‘æ®µéƒ½èµ°äº†VPNäº†ï¼Œè¿™å°±å¯¼è‡´äº†æ— æ³•è¿æ¥å†…ç½‘</p><p>å…³é”®ç‚¹<br>ç¬¬ä¸€æ¡ defaultï¼ˆVPNï¼‰ï¼š<br>ç½‘å…³ï¼š10.11.11.6ï¼ˆVPN æœåŠ¡å™¨åˆ†é…çš„è™šæ‹Ÿç½‘å…³ï¼‰ã€‚<br>æ¥å£ï¼šutun23ï¼ˆVPN è™šæ‹Ÿæ¥å£ï¼‰ã€‚<br>Flagsï¼šUGScgï¼ˆU&#x3D;å¯ç”¨ï¼ŒG&#x3D;ç½‘å…³ï¼ŒS&#x3D;é™æ€ï¼Œc&#x3D;å…‹éš†ï¼Œg&#x3D;ç½‘å…³ç¼“å­˜ï¼‰ã€‚<br>ä¼˜å…ˆçº§æ›´é«˜ï¼šå› ä¸º gï¼ˆç½‘å…³ç¼“å­˜ï¼‰æ ‡å¿—è¡¨ç¤ºå®ƒæ˜¯ç³»ç»Ÿå½“å‰ç”Ÿæ•ˆçš„é»˜è®¤è·¯ç”±ã€‚</p><p>ç¬¬äºŒæ¡ defaultï¼ˆæœ¬åœ°ï¼‰ï¼š<br>ç½‘å…³ï¼š10.0.95.254ï¼ˆæœ¬åœ°è·¯ç”±å™¨æˆ–å…‰çŒ«çš„ IPï¼‰ã€‚<br>æ¥å£ï¼šen0ï¼ˆç‰©ç†ç½‘å¡ï¼Œå¦‚ Wi-Fi&#x2F;ä»¥å¤ªç½‘ï¼‰ã€‚<br>Flagsï¼šUGScIgï¼ˆI&#x3D;é—´æ¥è·¯ç”±ï¼Œé€šå¸¸è¡¨ç¤ºå¤‡ç”¨è·¯ç”±ï¼‰ã€‚<br>ä¼˜å…ˆçº§æ›´ä½ï¼šI æ ‡å¿—è¡¨æ˜å®ƒæ˜¯å¤‡é€‰è·¯ç”±ï¼Œä»…åœ¨ä¸»è·¯ç”±å¤±æ•ˆæ—¶ä½¿ç”¨ã€‚</p><h2 id="é…ç½®æ–°è·¯ç”±è§„åˆ™"><a href="#é…ç½®æ–°è·¯ç”±è§„åˆ™" class="headerlink" title="é…ç½®æ–°è·¯ç”±è§„åˆ™"></a>é…ç½®æ–°è·¯ç”±è§„åˆ™</h2><p>ä»¥10.0.199.111ä¸ºä¾‹</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo route -n add 10.0.199.111/32 10.0.95.254</span><br></pre></td></tr></table></figure><p>&#x2F;32 è¡¨ç¤ºç²¾ç¡®åŒ¹é…å•ä¸ª IPã€‚<br>10.0.95.254 éœ€æ›¿æ¢ä¸ºä½ çš„å®é™…æœ¬åœ°ç½‘å…³ï¼ˆé€šè¿‡ netstat -rn | grep default ç¡®è®¤ï¼‰ã€‚</p><h2 id="éªŒè¯è·¯ç”±æ˜¯å¦ç”Ÿæ•ˆ"><a href="#éªŒè¯è·¯ç”±æ˜¯å¦ç”Ÿæ•ˆ" class="headerlink" title="éªŒè¯è·¯ç”±æ˜¯å¦ç”Ÿæ•ˆ"></a>éªŒè¯è·¯ç”±æ˜¯å¦ç”Ÿæ•ˆ</h2><p>ç»§ç»­ä½¿ç”¨å‘½ä»¤</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">netstat -rn</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°å¦‚ä¸‹ä¸€æ¡</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">10.0.199.111/32    10.0.95.254        UGSc                  en0 </span><br></pre></td></tr></table></figure><p>è¡¨ç¤ºéªŒè¯é€šè¿‡</p><h2 id="é‡å¯åè·¯ç”±è¢«è¦†ç›–"><a href="#é‡å¯åè·¯ç”±è¢«è¦†ç›–" class="headerlink" title="é‡å¯åè·¯ç”±è¢«è¦†ç›–"></a>é‡å¯åè·¯ç”±è¢«è¦†ç›–</h2><p>å½“ç”µè„‘é‡å¯ä¹‹åï¼Œå†æ¬¡æ— æ³•è¿æ¥ï¼ŒåŸå› åœ¨äºè·¯ç”±è¡¨è¢«é‡æ–°è¦†ç›–<br>è¿™æ—¶å€™åªéœ€è¦åˆ›å»ºä¸€ä¸ªè„šæœ¬ï¼Œåœ¨é‡å¯ä¹‹åè¿è¡Œå³å¯</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ é™¤å¯èƒ½å†²çªçš„è·¯ç”±</span></span><br><span class="line">sudo route -n delete 10.0.199.111/32 10.11.11.1 2&gt;/dev/null</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ·»åŠ æœ¬åœ°è·¯ç”±</span></span><br><span class="line">sudo route -n add 10.0.199.111/32 10.0.95.254</span><br><span class="line">echo &quot;å·²å¼ºåˆ¶ 10.0.199.111 èµ°æœ¬åœ°ç½‘ç»œ&quot;</span><br></pre></td></tr></table></figure><p>å°†è„šæœ¬ä¿å­˜ä¸ºfix_route.shå¹¶è¿è¡Œå³å¯</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">chmod +x fix_route.sh</span><br><span class="line">./fix_route.sh</span><br></pre></td></tr></table></figure><h2 id="å¼€æœºè‡ªåŠ¨ä¿®æ”¹è·¯ç”±è¡¨"><a href="#å¼€æœºè‡ªåŠ¨ä¿®æ”¹è·¯ç”±è¡¨" class="headerlink" title="å¼€æœºè‡ªåŠ¨ä¿®æ”¹è·¯ç”±è¡¨"></a>å¼€æœºè‡ªåŠ¨ä¿®æ”¹è·¯ç”±è¡¨</h2><p>å¦‚æœæƒ³å¼€æœºè‡ªåŠ¨ä¿®æ”¹çš„è¯ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨cron</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">crontab -e</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ·»åŠ ä¸€è¡Œ</span></span><br><span class="line">@reboot /path/fix_route.sh</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;èƒŒæ™¯&quot;&gt;&lt;a href=&quot;#èƒŒæ™¯&quot; class=&quot;headerlink&quot; title=&quot;èƒŒæ™¯&quot;&gt;&lt;/a&gt;èƒŒæ™¯&lt;/h1&gt;&lt;p&gt;ç”±äºé¡¹ç›®éœ€è¦ä½¿ç”¨VPNè½¯ä»¶æ‰èƒ½è¿æ¥åˆ°ç‰¹å®šçš„ç¯å¢ƒï¼Œä½†æ˜¯è¿æ¥VPNä¹‹åï¼Œå†…ç½‘çš„æœåŠ¡å°±è¿ä¸ä¸Šäº†ï¼Œå°±å¯¼è‡´äº†æ²¡æ³•è¿æ¥æ‰“å°æœºæˆ–è€…æ˜¯å†…ç½‘çš„æœåŠ¡å™¨ï¼Œæ•…è€Œäº§ç”Ÿ</summary>
      
    
    
    
    <category term="Tools" scheme="https://maydaychen.github.io/categories/Tools/"/>
    
    
    <category term="MacOS" scheme="https://maydaychen.github.io/tags/MacOS/"/>
    
  </entry>
  
</feed>
