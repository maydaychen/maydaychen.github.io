{"meta":{"title":"Hexotest","subtitle":"hei","description":"ha","author":"Maydaychen","url":"https://maydaychen.github.io","root":"/"},"pages":[{"title":"å…³äº","date":"2025-02-05T15:02:17.686Z","updated":"2025-02-05T15:02:15.762Z","comments":false,"path":"about/index.html","permalink":"https://maydaychen.github.io/about/index.html","excerpt":"","text":"ENFJä¸€ä¸ªç”¨äºè®°å½•è‡ªå·±æˆé•¿çš„ç½‘ç«™æ‰€æœ‰çš„æ–‡ç« éƒ½ä¼šå¸¦æœ‰è‡ªå·±çš„æ€è€ƒå†…å®¹æ¯”è¾ƒæ‚ï¼Œå…³äºå¼€å‘ï¼Œè¿ç»´ï¼Œæ‘„å½±ï¼Œæ™ºèƒ½å®¶å±…ï¼Œæ•°ç ï¼Œæ—…è¡Œï¼Œæ„Ÿå…´è¶£çš„éƒ½ä¼šè®°ä¸‹æ¥ ç½‘ç«™æ›´æ–°ï¼š20230827 â€”â€” å¼€å§‹å°è¯•å»ºç«™202311 â€”â€” ç–¯ç‹‚è¾“å‡º20240315 â€”â€” æŠŠä¹‹å‰å†™çš„æ–‡ç« ä»å…¶ä»–å¹³å°æ¬è¿è¿‡æ¥20240316 â€”â€” è¯„è®ºç³»ç»Ÿæå®šäº†ï¼Œè¿˜è¯·å°½æƒ…éª‚æˆ‘å§ï¼20240316 â€”â€” ä¸€é¼“ä½œæ°”ï¼Œå›¾åºŠæå®šäº†ï¼Œä¸ƒç‰›äº‘ + PicGoï¼Œå˜å˜å¤Ÿç”¨äº†20241225 â€”â€” ç ”ç©¶äº†ä¸€ä¸‹å›¾åºŠçš„ç¼ºç‚¹ï¼Œæ¯”å¦‚æœ‰äººåˆ·æµé‡å•Šä¹‹ç±»çš„ï¼Œæ‰€ä»¥å›¾ç‰‡æ”¹æˆäº†æœ¬åœ°å›¾ç‰‡ï¼Œå¤Ÿç”¨è‚¯å®šæ˜¯å¤Ÿç”¨äº†20241228 â€”â€” å……æ»¡çºªå¿µæ„ä¹‰çš„ä¸€å¤©ï¼Œå‘œå‘¼20241230 â€”â€” çªå‘å¥‡æƒ³ï¼Œä»¥åè®°å½•ä¸€ä¸‹åšèœçš„ç›¸å…³ç»éªŒï¼Œä»¥åå¤±ä¸šäº†å¯ä»¥å»å½“ä¸ªå¨å­ Todo-list[Done] è¯„è®ºç³»ç»Ÿå¥½åƒæŒ‚äº†ï¼Ÿâ€”â€” 20240316æå®š é—®é¢˜è®°å½• [Done] å›¾åºŠå¾—ä¿®æ”¹ä¸€ä¸‹ï¼Œç ”ç©¶ä¸‹æ€ä¹ˆå¼„åˆé€‚ â€”â€” 20240316æå®š è¿™ç¯‡æ–‡ç« è®²å¾—ä¸é”™ [Done] å“­äº†ï¼Œå›¾è£‚äº†ï¼Œéš¾é“æ˜¯httpçš„é—®é¢˜ï¼Ÿ æ—¢ç„¶æ²¡æ—¶é—´è§£å†³é—®é¢˜ï¼ŒåŠ ä¸Šéšå½¢çš„é£é™©ï¼Œé‚£å°±å®Œç¾è§„é¿è¿™ä¸ªé—®é¢˜å§ [InProgress] æ–‡ç« æ¬è¿ (è‡ªå·±åŸåˆ›çš„!) å¹¶ä¿®æ”¹æ ¼å¼"},{"title":"404 Not Foundï¼šè¯¥é¡µæ— æ³•æ˜¾ç¤º","date":"2024-12-10T13:33:21.481Z","updated":"2023-08-12T02:08:42.446Z","comments":false,"path":"/404.html","permalink":"https://maydaychen.github.io/404.html","excerpt":"","text":""},{"title":"ä¹¦å•","date":"2024-12-10T13:33:24.242Z","updated":"2023-08-12T02:08:42.447Z","comments":false,"path":"books/index.html","permalink":"https://maydaychen.github.io/books/index.html","excerpt":"","text":""},{"title":"å‹æƒ…é“¾æ¥","date":"2024-12-10T13:33:24.238Z","updated":"2023-08-12T02:08:42.447Z","comments":true,"path":"links/index.html","permalink":"https://maydaychen.github.io/links/index.html","excerpt":"","text":""},{"title":"Repositories","date":"2024-12-10T13:33:25.576Z","updated":"2023-08-12T02:08:42.447Z","comments":false,"path":"repository/index.html","permalink":"https://maydaychen.github.io/repository/index.html","excerpt":"","text":""},{"title":"åˆ†ç±»","date":"2024-12-10T13:33:24.236Z","updated":"2023-08-12T02:08:42.447Z","comments":false,"path":"categories/index.html","permalink":"https://maydaychen.github.io/categories/index.html","excerpt":"","text":""},{"title":"æ ‡ç­¾","date":"2024-12-10T13:33:24.434Z","updated":"2023-08-12T02:08:42.447Z","comments":false,"path":"tags/index.html","permalink":"https://maydaychen.github.io/tags/index.html","excerpt":"","text":""}],"posts":[{"title":"Linuxé—®é¢˜è®°å½•3--sftpè¿æ¥åˆ°æœåŠ¡å™¨åè¿›åº¦ä¸€ç›´å¡0%","slug":"Linuxé—®é¢˜è®°å½•3-sftpè¿æ¥åˆ°æœåŠ¡å™¨åè¿›åº¦ä¸€ç›´å¡0","date":"2025-11-14T09:56:49.000Z","updated":"2025-11-13T09:58:09.000Z","comments":true,"path":"2025/11/14/Linuxé—®é¢˜è®°å½•3-sftpè¿æ¥åˆ°æœåŠ¡å™¨åè¿›åº¦ä¸€ç›´å¡0/","link":"","permalink":"https://maydaychen.github.io/2025/11/14/Linux%E9%97%AE%E9%A2%98%E8%AE%B0%E5%BD%953-sftp%E8%BF%9E%E6%8E%A5%E5%88%B0%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%90%8E%E8%BF%9B%E5%BA%A6%E4%B8%80%E7%9B%B4%E5%8D%A10/","excerpt":"","text":"","categories":[{"name":"è¿ç»´","slug":"è¿ç»´","permalink":"https://maydaychen.github.io/categories/%E8%BF%90%E7%BB%B4/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"https://maydaychen.github.io/tags/Linux/"}]},{"title":"AWSä½¿ç”¨æ—¥å¿—10--é€šè¿‡CloudwatchLogInsightæŸ¥æ‰¾CloudTrailäº‹ä»¶","slug":"AWSä½¿ç”¨æ—¥å¿—10-é€šè¿‡CloudwatchLogInsightæŸ¥æ‰¾CloudTrailäº‹ä»¶","date":"2025-11-13T02:53:58.000Z","updated":"2025-11-13T10:02:00.000Z","comments":true,"path":"2025/11/13/AWSä½¿ç”¨æ—¥å¿—10-é€šè¿‡CloudwatchLogInsightæŸ¥æ‰¾CloudTrailäº‹ä»¶/","link":"","permalink":"https://maydaychen.github.io/2025/11/13/AWS%E4%BD%BF%E7%94%A8%E6%97%A5%E5%BF%9710-%E9%80%9A%E8%BF%87CloudwatchLogInsight%E6%9F%A5%E6%89%BECloudTrail%E4%BA%8B%E4%BB%B6/","excerpt":"","text":"èƒŒæ™¯1On November 21, 2025, Amazon Simple Storage Service (Amazon S3) will stop returning Owner.DisplayName for all request responses. Owner.DisplayName is a legacy field that most modern applications do not rely on as it has been superseded by AWS Account IDs and IAM ARNs. Until November 21, 2025, S3 will progressively remove this field from request responses. After this date, Owner.DisplayName will not be returned for any requests made to Amazon S3. The Owner.DisplayName parameter is supported only in eight AWS Regions on the Amazon S3 APIs listed below under recommended actions. If you have applications that rely on this behavior to validate ownership of objects, we recommend using canonical IDs (unique identifier for AWS accounts), AWS account ID (12 digit identifier) or IAM ARNs (full resource naming) as a direct replacement of Owner.DisplayName. This change affects the following AWS Regions: US-EAST-1 Region, US-WEST-1 Region, US-WEST-2 Region, AP-SOUTHEAST-1 Region, AP-SOUTHEAST-2 Region, AP-NORTHEAST-1 Region, EU-WEST-1 Region, and SA-EAST-1 Region. AWS é€šçŸ¥ï¼šä» 2025-11-21 èµ·ï¼ŒS3 ä¸å†è¿”å› Owner.DisplayName å­—æ®µï¼ˆé€æ­¥åœ¨æ­¤ä¹‹å‰ç§»é™¤ï¼‰ã€‚å»ºè®®æ›¿ä»£ï¼šä½¿ç”¨ owner canonical IDï¼ˆOwner.IDï¼‰ã€AWS Account IDï¼ˆ12ä½ï¼‰ æˆ– IAM ARN æ¥æ ¡éªŒå¯¹è±¡å½’å±æˆ–æ›¿ä»£ DisplayNameã€‚ è§£å†³åŠæ³•å…¶å®ä¸€å¼€å§‹æƒ³äº†å¥½å‡ ä¸ªè§£å†³åŠæ³•çš„ï¼Œå¤§è‡´åˆ†ä¸ºè¿™å‡ ç§ å¼€å‘è‡ªæŸ¥ä¸€å¼€å§‹æˆ‘ä»¬æƒ³çš„è®©å¼€å‘è‡ªå·±æŸ¥ä¸€ä¸‹ï¼Œä½†æ˜¯ç”±äºé¡¹ç›®å®åœ¨å¤ªå¤šï¼Œè€Œä¸”å¼€å‘ä»»åŠ¡å¾ˆè¿‘ï¼Œå°±æ­¤ä½œç½¢ Lambdaç¡®è®¤ä¸€ä¸ªä¸€ä¸ªæ£€æŸ¥ç°æœ‰çš„Lambda functionï¼Œè™½ç„¶èƒ½æŸ¥åˆ°ä¸€äº›ä¸œè¥¿ï¼Œä½†æ˜¯æœ‰å±€é™æ€§ï¼Œæ¯”å¦‚ functionè¿‡å¤šï¼Œä¸€ä¸ªä¸€ä¸ªæŸ¥æµªè´¹å¤§é‡æ—¶é—´ é™¤äº†Lambdaï¼Œå¯èƒ½è¿˜æœ‰åˆ«çš„åœ°æ–¹ä¾‹å¦‚é€šè¿‡sdkæŸ¥è¯¢çš„ï¼Œæ²¡æœ‰åŠæ³•æŸ¥å®Œæ•´ CloudTrailæŸ¥è¯¢ç”±äºAWSåŒæ—¶æä¾›äº†å¯èƒ½ä¼šå—å½±å“çš„APIï¼Œæ‰€ä»¥å…¶å®åªè¦é€šè¿‡CloudTrailæŸ¥è¯¢è®°å½•å³å¯æœ€åå†³å®šç”¨è¯¥æ–¹æ³•æŸ¥è¯¢ API åç§° CloudTrail äº‹ä»¶å ç±»å‹ è¯´æ˜ REST.GET.ACL GetBucketAcl, GetObjectAcl Management event å› ä¸ºå±äºè®¿é—®èµ„æºçš„è®¿é—®æ§åˆ¶åˆ—è¡¨ï¼ˆACLï¼‰ï¼Œä¸ç®—å¯¹è±¡çº§æ•°æ®æ“ä½œ REST.GET.BUCKET ListObjects, ListObjectsV2 Data event å±äºè¯»å–å¯¹è±¡åˆ—è¡¨ï¼ˆå¯¹è±¡çº§æ“ä½œï¼‰ REST.GET.BUCKETVERSIONS ListObjectVersions Data event åŒæ ·æ˜¯åˆ—å‡ºå¯¹è±¡ç‰ˆæœ¬ï¼ˆå¯¹è±¡çº§æ“ä½œï¼‰ REST.GET.LOGGING_STATUS GetBucketLogging Management event å±äºæŸ¥çœ‹ bucket å±æ€§çš„ç®¡ç†æ“ä½œ REST.GET.SERVICE ListBuckets Management event å±äºæŸ¥çœ‹è´¦æˆ·ä¸‹æ‰€æœ‰ bucketï¼ˆç®¡ç†çº§ï¼‰ REST.GET.UPLOAD ListParts Data event å¯¹è±¡ä¸Šä¼ åˆ†ç‰‡ä¿¡æ¯ï¼ˆå¯¹è±¡çº§åˆ«ï¼‰ REST.GET.UPLOADS ListMultipartUploads Data event åŒä¸Šï¼Œå±äºå¯¹è±¡ä¸Šä¼ è¿‡ç¨‹çš„ä¸€éƒ¨åˆ† å®ç°å¦‚æœä¸èƒ½ç”¨Organization Trailéœ€åœ¨æ¯ä¸ªå­è´¦å·ï¼šæ‰‹åŠ¨ç™»å½•æŸ¥çœ‹ Event historyï¼ˆä»…ç®¡ç†äº‹ä»¶ï¼Œä¿ç•™ 90 å¤©ï¼‰ï¼›è‹¥è¦ Data Eventï¼Œåˆ™åœ¨è¯¥å­è´¦å·åˆ›å»º&#x2F;é…ç½® Trail å¯ç”¨ Data Eventsï¼›æˆ–è€…åœ¨æ¯ä¸ªå­è´¦å·å»ºç«‹ä¸€ä¸ª â€œAudit Roleâ€ï¼Œåœ¨ç®¡ç†è´¦å·ç”¨ AssumeRole è„šæœ¬é€ä¸ªæŸ¥è¯¢ CloudTrail äº‹ä»¶ï¼ˆè‡ªåŠ¨åŒ–ä½†éœ€è·¨è´¦å·æƒé™ä¸è„šæœ¬ï¼‰ã€‚ å¦‚æœç”¨äº†Organization Trailé‚£æˆ‘ä»¬è¿™é‡Œéœ€è¦ç¡®è®¤æœ‰æ²¡æœ‰é›†æˆCloudWatch Log,åœ¨Trailçš„è¯¦æƒ…é‡Œå¦‚å›¾æ‰€ç¤ºå¦‚æœçœ‹åˆ°è¿™ä¸ªé…ç½®äº†ï¼Œå°±è¯´æ˜å·²ç»å¼€å¯äº†é›†æˆCloudWatch Log è¿™æ—¶å€™æˆ‘ä»¬å°±å¯ä»¥å»CloudWatché‡Œé¢æŸ¥æ‰¾äº‹ä»¶äº† CloudWatché—®é¢˜è®°å½•ç®¡ç†è´¦å·çš„Event historyä¸­æ²¡çœ‹åˆ°åˆ«çš„è´¦å·çš„event CloudTrail Event History åªæ˜¾ç¤º Management Account æœ¬è´¦å·æˆ– organization trail å¯ä»¥çœ‹åˆ°çš„äº‹ä»¶ã€‚ Event History é¡µé¢æœ¬èº«åªæ˜¾ç¤ºæœ€è¿‘ 90 å¤©çš„äº‹ä»¶ã€‚ æ›´é‡è¦çš„æ˜¯ï¼ŒEvent History ä¸ä¼šè‡ªåŠ¨å±•ç¤º Organization ä¸­æ‰€æœ‰å­è´¦å·çš„äº‹ä»¶ï¼Œå®ƒåªæ˜¾ç¤ºäº‹ä»¶çš„æ‘˜è¦ï¼Œç»„ç»‡çº§çš„äº‹ä»¶éœ€è¦ é€šè¿‡ Trail æŒ‡å‘çš„ S3 æˆ– CloudWatch Logs æ¥è®¿é—®ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå³ä¾¿ä½ åœ¨ Management Account åˆ›å»ºäº† Organization Trailï¼ŒManagement Account çš„ Event History ç•Œé¢ä¸ä¼šç›´æ¥æ˜¾ç¤ºå­è´¦å·çš„äº‹ä»¶ã€‚ æ²¡æœ‰Data Eventorganizationè‡ªå¸¦äº†ä¸€ä¸ªorganization trailï¼Œ ä½†æ˜¯è¿™ä¸ªtrailåªæœ‰management eventï¼Œå¹¶ä¸ä¼šæ”¶é›†data eventå¦‚æœæƒ³è¦æ”¶é›†data eventçš„è¯ï¼Œéœ€è¦åœ¨ç®¡ç†è´¦å·ä¸­ä¿®æ”¹é…ç½®ï¼Œæ·»åŠ data event å¦‚æœæˆ‘åœ¨ç®¡ç†è´¦å·åˆ›å»º Organization Trailï¼Œä¼šä¸ä¼šè‡ªåŠ¨æ”¶é›†åˆ°æ‰€æœ‰å­è´¦å·çš„ Data Eventsï¼Ÿæ˜¯çš„ï¼ˆæ¡ä»¶ï¼‰ï¼šç®¡ç†è´¦å·åˆ›å»ºçš„ Organization Trailï¼Œå¹¶åœ¨è¯¥ trail ä¸­å¯ç”¨äº† DataEventsï¼ˆä¾‹å¦‚ AWS::S3::Objectï¼‰ï¼Œåˆ™ä¼šè‡ªåŠ¨æ”¶é›†æ•´ä¸ª Organization ä¸‹æ‰€æœ‰å­è´¦å·çš„ Data Eventsï¼ˆå­è´¦å·æ— éœ€åšä»»ä½•é¢å¤–é…ç½®ï¼‰ã€‚å…³é”®æ˜¯ï¼šåˆ›å»ºæ—¶éœ€è®¾ç½® â€“is-organization-trail &#x2F; IsOrganizationTrail: trueï¼Œå¹¶ put-event-selectors åŠ å…¥ S3 DataResourcesï¼š 123456789aws cloudtrail put-event-selectors \\--trail-name OrgTrail \\--event-selectors &#x27;[&#123;&quot;ReadWriteType&quot;:&quot;All&quot;,&quot;IncludeManagementEvents&quot;: true,&quot;DataResources&quot;: [&#123;&quot;Type&quot;:&quot;AWS::S3::Object&quot;,&quot;Values&quot;:[&quot;arn:aws:s3:::&quot;]&#125;]&#125;]&#x27; éªŒè¯ï¼š 1aws cloudtrail describe-trails --trail-name OrgTrail -&gt; IsOrganizationTrail: true S3 å­˜å‚¨è·¯å¾„ä¸‹ä¼šçœ‹åˆ°å„è´¦æˆ·çš„æ—¥å¿— AWSLogs&#x2F;&#x2F;CloudTrail&#x2F;â€¦ çŸ¥è¯†ç‚¹ Organization Trailçš„æ—¥å¿—ä¼šå­˜åœ¨Log Archivedè¿™ä¸ªaccountä¸­ï¼Œè€Œä¸æ˜¯ç®¡ç†è´¦å· è´¹ç”¨CloudTrail &#x2F; Organization Trail çš„è®¡è´¹ï¼ˆç®€è¦ï¼‰Management eventsï¼šç¬¬ä¸€ä¸ªå‰¯æœ¬ï¼ˆå†™å…¥ S3 çš„ trailï¼‰å…è´¹ã€‚Data eventsï¼šæŒ‰äº‹ä»¶æ•°é‡è®¡è´¹ï¼ˆä¾‹å¦‚ S3&#x2F;Lambda Data Eventï¼Œé€šå¸¸ä¸ºæ¯ 100,000 æ¡ ~ $0.10 â€”â€” ä»¥ AWS å…¬å¸ƒçš„å½“æœŸä»·æ ¼ä¸ºå‡†ï¼‰ã€‚Organization Trail æœ¬èº«ä¸å•ç‹¬æ”¶è´¹ï¼Œä½†Data Event çš„è®¡è´¹ä¼šåœ¨ç®¡ç†è´¦å·ä¸­ç»“ç®—ï¼ˆæ‰€æœ‰å­è´¦å·çš„ data event æ±‡æ€»åˆ°ç®¡ç†è´¦å·è®¡è´¹ï¼‰ã€‚æ³¨æ„ï¼šå¦‚æœå¯¹å­è´¦å·ä¹Ÿå•ç‹¬åˆ›å»ºäº†å¦ä¸€ä¸ª trail æ”¶é›†ç›¸åŒçš„ data eventsï¼Œä¼šäº§ç”Ÿé‡å¤è®¡è´¹ï¼ˆæ¯ä¸ª trail éƒ½è®¡è´¹ï¼‰ã€‚","categories":[{"name":"è¿ç»´","slug":"è¿ç»´","permalink":"https://maydaychen.github.io/categories/%E8%BF%90%E7%BB%B4/"}],"tags":[{"name":"AWS","slug":"AWS","permalink":"https://maydaychen.github.io/tags/AWS/"}]},{"title":"AWSä½¿ç”¨æ—¥å¿—11--OrganizationAPIæ›´æ–°Satuså­—æ®µçš„å½±å“","slug":"AWSä½¿ç”¨æ—¥å¿—11-OrganizationAPIæ›´æ–°Satuså­—æ®µçš„å½±å“","date":"2025-11-13T02:53:58.000Z","updated":"2025-12-02T06:14:58.000Z","comments":true,"path":"2025/11/13/AWSä½¿ç”¨æ—¥å¿—11-OrganizationAPIæ›´æ–°Satuså­—æ®µçš„å½±å“/","link":"","permalink":"https://maydaychen.github.io/2025/11/13/AWS%E4%BD%BF%E7%94%A8%E6%97%A5%E5%BF%9711-OrganizationAPI%E6%9B%B4%E6%96%B0Satus%E5%AD%97%E6%AE%B5%E7%9A%84%E5%BD%B1%E5%93%8D/","excerpt":"","text":"èƒŒæ™¯ä»Šå¤©æ”¶åˆ°äº†AWSçš„ä¸€æ¡eventæé†’ æ ‡é¢˜æ˜¯Organizations planned lifecycle event å†…å®¹å¦‚ä¸‹AWS Organizations is transitioning from the account status (Status field) to the new account state (State field) to provide more detailed account lifecycle information. The new State field offers enhanced granularity with values including PENDING_ACTIVATION, ACTIVE, SUSPENDED, PENDING_CLOSURE, and CLOSED, available through both the AWS Organizations console and APIs (DescribeAccount, ListAccounts, ListAccountsForParent, and ListDelegatedAdministrators). Starting September 9, 2025, we have begun a one-year transition period where both Status and State fields will be available in the API responses. After September 9, 2026, the Status field will be permanently removed. If you use automated processes for account management, we recommend updating your systems to use the State field before the deprecation date. For more information, see Updates to account status information in AWS Organizations [1] or visit our documentation [2]. If you have any questions, concerns, or require assistance, please do not hesitate to contact AWS Support [3]. [1] https://aws.amazon.com/blogs/mt/updates-to-account-status-information-in-aws-organizations/[2] https://docs.aws.amazon.com/organizations/latest/userguide/orgs_manage_accounts_account_state.html[3] https://console.aws.amazon.com/support æè¿°æ˜¯ä»€ä¹ˆè¿™æ˜¯ AWS Organizations å®˜æ–¹å‘å¸ƒçš„å˜æ›´é€šçŸ¥ï¼Œå‘Šè¯‰ä½  AWS å°†æŠŠ Status å­—æ®µå¼ƒç”¨ï¼ˆDeprecatedï¼‰ï¼Œæ”¹ä¸ºä½¿ç”¨æ–°çš„ã€æ›´ç»†ç²’åº¦çš„ State å­—æ®µæ¥è¡¨ç¤º AWS è´¦æˆ·çš„ç”Ÿå‘½å‘¨æœŸçŠ¶æ€ã€‚ å®ƒå±äº API å˜æ›´å…¬å‘Š &#x2F; Deprecation Noticeï¼Œå½±å“æ‰€æœ‰ä½¿ç”¨ Organizations API çš„è‡ªåŠ¨åŒ–ã€è„šæœ¬ã€ç›‘æ§ã€IAM æƒé™ç®¡ç†ã€è´¦æˆ·ç”Ÿå‘½å‘¨æœŸç®¡ç†ç³»ç»Ÿã€‚ è¦å¹²å˜› æ–°å­—æ®µï¼šStateAWS Organizations å¼•å…¥äº†æ–°çš„å­—æ®µ Stateï¼Œæ¯”æ—§å­—æ®µ Status æ›´ç»†è‡´ã€‚æ–°çš„ State å€¼åŒ…æ‹¬ï¼šPENDING_ACTIVATIONåˆ›å»ºè´¦æˆ·åã€æœªæ¿€æ´»å‰çš„çŠ¶æ€ ACTIVEæ­£å¸¸ä½¿ç”¨ SUSPENDEDè¢«æš‚åœ PENDING_CLOSUREè¯·æ±‚å…³é—­åï¼Œå…³é—­æµç¨‹ä¸­ CLOSEDè´¦æˆ·å·²å®Œå…¨å…³é—­ æ—§å­—æ®µï¼šStatus å°†è¢«åºŸå¼ƒ Status åªæœ‰ï¼š ACTIVE SUSPENDED ç²’åº¦å¤ªç²—ï¼Œæ‰€ä»¥è¦è¢«æ·˜æ±°ã€‚ å½±å“åŠè§£å†³æ–¹æ¡ˆè¿™é‡Œæˆ‘ä»¬éœ€è¦çœ‹ä¸€ä¸‹æˆ‘ä»¬çš„é¡¹ç›®ä¸­æœ‰æ²¡æœ‰åœ°æ–¹ç”¨åˆ°äº†è¿™ä¸ªå­—æ®µï¼Œå¦‚æœæœ‰çš„è¯éœ€è¦æ›´æ”¹å­—æ®µæ‰€å¹¸AWSæŠŠæ‰€æœ‰èƒ½è¿”å›è¿™ä¸ªå­—æ®µçš„APIéƒ½åˆ—å‡ºæ¥äº† DescribeAccount ListAccounts ListAccountsForParent ListDelegatedAdministratorsæˆ‘ä»¬åªéœ€è¦é€šè¿‡CloudTrailçœ‹ä¸€ä¸‹æœ‰æ²¡æœ‰å¯¹åº”çš„eventå³å¯å› æ­¤æˆ‘ä»¬éœ€è¦å»åˆ°CloudTrail -&gt; Event historyä¸­æŸ¥æ‰¾ï¼Œç­›é€‰æ¡ä»¶ä¸ºevent name &#x3D; ä¸Šé¢å››ä¸ªå¦‚æœæ²¡æœ‰æŸ¥åˆ°ç»“æœï¼Œæˆ–è€…æŸ¥åˆ°çš„Event sourceä¸ºsso.amazonaws.com,å°±ä¸éœ€è¦å†çœ‹äº†ï¼Œè¯´æ˜æ²¡æœ‰äººä¸ºçš„è°ƒç”¨","categories":[{"name":"è¿ç»´","slug":"è¿ç»´","permalink":"https://maydaychen.github.io/categories/%E8%BF%90%E7%BB%B4/"}],"tags":[{"name":"AWS","slug":"AWS","permalink":"https://maydaychen.github.io/tags/AWS/"}]},{"title":"AWSä½¿ç”¨æ—¥å¿—9--ä¸ºStorageGatewayåˆ›å»ºCacheReport","slug":"AWSä½¿ç”¨æ—¥å¿—9-ä¸ºStorageGatewayåˆ›å»ºCacheReport","date":"2025-11-11T02:52:13.000Z","updated":"2025-11-13T09:45:16.000Z","comments":true,"path":"2025/11/11/AWSä½¿ç”¨æ—¥å¿—9-ä¸ºStorageGatewayåˆ›å»ºCacheReport/","link":"","permalink":"https://maydaychen.github.io/2025/11/11/AWS%E4%BD%BF%E7%94%A8%E6%97%A5%E5%BF%979-%E4%B8%BAStorageGateway%E5%88%9B%E5%BB%BACacheReport/","excerpt":"","text":"èƒŒæ™¯å…¶å®æ¥è‡ªäºAWS health dashboardä¸­çš„è¿™ä¹ˆä¸€æ¡æŠ¥è­¦ 1234567891011121314StorageGateway security notificationWe identified an issue affecting S3 File Gateway versions 1.27.7-1.27.10, which may require your attention.We have identified that your gateway may have been impacted by this issue due to having large files written to your NFS shares. This issue affects the updating of file metadata for files larger than 6MB when copied to a NFS file share. Specifically, when copying large files (greater than 6MB) to a NFS file share and then updating the file metadata (e.g: permissions, owner, group, creation/modification timestamp), the updates are only applied to the gateway cache, not to S3. If the metadata in the gateway cache is evicted, updates that are not uploaded to S3 may be lost. If your workload is impacted by this issue, you may need to update the file metadata to the desired values.A list of your affected resource(s) can be found in the &#x27;Affected resources&#x27; tab.We have implemented a fix and recommend updating to version 1.27.11 [1]. After this update is applied, the issue will be resolved for future file copy operations.For questions or concerns, please contact AWS Support [2].[1] https://docs.aws.amazon.com/filegateway/latest/files3/MaintenanceManagingUpdate-common.html[2] https://aws.amazon.com/support è¡¨ç¤ºæˆ‘ç°åœ¨ç”¨çš„storage gatewayæœ‰ä¸€äº›æ–‡ä»¶ä¸Šä¼ å¤±è´¥äº†ï¼Œéœ€è¦æŸ¥çœ‹å¹¶è§£å†³ è§£å†³æ–¹æ¡ˆæŸ¥çœ‹storage gatewayé—®é¢˜ å¯ä»¥çœ‹åˆ°æœ‰ä¸ªæç¤ºè¯´ä¸Šä¼ æœ‰é—®é¢˜ï¼Œå»ºè®®åˆ›å»ºcache report S3 æ–‡ä»¶ç½‘å…³å¯ä»¥ä¸ºå½“å‰ä½äºç‰¹å®šæ–‡ä»¶å…±äº«çš„æœ¬åœ°ä¸Šä¼ ç¼“å­˜ä¸­çš„æ–‡ä»¶ç”Ÿæˆå…ƒæ•°æ®æŠ¥å‘Šã€‚æ‚¨å¯ä»¥åº”ç”¨ç­›é€‰å™¨å’Œå…¶ä»–æ ‡å‡†æ¥ç¡®å®šå“ªäº›ç‰¹å®šç±»å‹çš„ç¼“å­˜æ–‡ä»¶å‡ºç°åœ¨æŠ¥å‘Šä¸­ã€‚æ‚¨å¯ä»¥ä½¿ç”¨æ­¤æŠ¥å‘Šæ¥å¸®åŠ©è¯†åˆ«å’Œè§£å†³ç½‘å…³é—®é¢˜ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæ‚¨æ— æ³•å°†æ–‡ä»¶ä»ç½‘å…³ä¸Šä¼ åˆ° Amazon S3ï¼Œåˆ™å¯ä»¥ç”Ÿæˆä¸€ä»½æŠ¥å‘Šï¼Œåˆ—å‡ºä¸Šä¼ å¤±è´¥çš„å…·ä½“æ–‡ä»¶ä»¥åŠä¸Šä¼ å¤±è´¥çš„åŸå› ã€‚è¯¥æŠ¥å‘Šæ˜¯ä¸€ä¸ª CSV æ–‡ä»¶ï¼Œå…¶ä¸­åŒ…å«ä¸æ‚¨æŒ‡å®šçš„ç­›é€‰å‚æ•°é›†åŒ¹é…çš„æ–‡ä»¶åˆ—è¡¨ã€‚è¾“å‡ºæ–‡ä»¶ä½œä¸º Amazon S3 å¯¹è±¡å­˜å‚¨åœ¨æ‚¨åœ¨é…ç½®æŠ¥å‘Šæ—¶æŒ‡å®šçš„å­˜å‚¨æ¡¶ä½ç½®ã€‚ åˆ›å»ºcache report å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªIAM roleä»¥åŠä¸€ä¸ªS3 bucketæ¥å­˜æ”¾report IAM Roleroleéœ€è¦é…ç½®ä»¥ä¸‹trust relationship 123456789101112&#123; &quot;Version&quot;: &quot;2012-10-17&quot;, &quot;Statement&quot;: [ &#123; &quot;Effect&quot;: &quot;Allow&quot;, &quot;Principal&quot;: &#123; &quot;Service&quot;: &quot;storagegateway.amazonaws.com&quot; &#125;, &quot;Action&quot;: &quot;sts:AssumeRole&quot; &#125; ]&#125; ä»¥åŠä»¥ä¸‹æƒé™ç­–ç•¥ 12345678910111213141516171819&#123; &quot;Version&quot;: &quot;2012-10-17&quot;, &quot;Statement&quot;: [ &#123; &quot;Sid&quot;: &quot;VisualEditor0&quot;, &quot;Effect&quot;: &quot;Allow&quot;, &quot;Action&quot;: [ &quot;s3:PutObject&quot;, &quot;s3:AbortMultipartUpload&quot;, &quot;s3:GetBucketLocation&quot;, &quot;s3:ListBucket&quot; ], &quot;Resource&quot;: [ &quot;arn:aws:s3:::storagegatewaygachereporttemporary&quot;, &quot;arn:aws:s3:::storagegatewaygachereporttemporary/*&quot; ] &#125; ]&#125; Report Filterfilterè¿™è¾¹æœ‰ä¸¤ä¸ªé€‰é¡¹ é€‰é¡¹ å«ä¹‰ é€‚ç”¨åœºæ™¯ All failing uploads åŒ…å«æ‰€æœ‰ä¸Šä¼ å¤±è´¥çš„æ–‡ä»¶ï¼ˆä¸è®ºå¤±è´¥åŸå› ï¼‰ é€‚ç”¨äºä½ è¦å…¨é¢æ’æŸ¥ä¸Šä¼ å¼‚å¸¸çš„æƒ…å†µï¼ˆæ¨èç¬¬ä¸€æ¬¡æ’æŸ¥æ—¶ä½¿ç”¨ï¼‰ Subset by specific reasons ä»…åŒ…å«æŒ‡å®šå¤±è´¥åŸå› çš„æ–‡ä»¶ é€‚ç”¨äºä½ æƒ³èšç„¦æŸç±»é—®é¢˜ï¼ˆä¾‹å¦‚åªçœ‹ InvalidObjectState æˆ– AccessDeniedï¼‰æ—¶ä½¿ç”¨ å››ç§é”™è¯¯è§£é‡ŠåŠå¯èƒ½åŸå›  å¤±è´¥åŸå›  å«ä¹‰ å¯èƒ½åŸå›  Inaccessible storage class ç½‘å…³æ— æ³•è®¿é—®å¯¹è±¡çš„å­˜å‚¨ç±»åˆ« ç›®æ ‡å¯¹è±¡åœ¨ Glacier &#x2F; Glacier Deep Archiveï¼Œéœ€è¦æ¢å¤åæ‰èƒ½è®¿é—® Invalid object state æ–‡ä»¶åœ¨æœ¬åœ°å’Œ S3 ä¸Šçš„çŠ¶æ€ä¸ä¸€è‡´ å¯¹è±¡å¯èƒ½è¢«å†»ç»“ã€è¢«æ›¿æ¢ã€è¢«éƒ¨åˆ†ä¸Šä¼ æˆ–å…ƒæ•°æ®ä¸åŒæ­¥ Object missing å¯¹è±¡åœ¨ S3 ä¸Šè¢«åˆ é™¤æˆ–ç§»åŠ¨ å¯èƒ½æœ‰äººåœ¨ S3 æ§åˆ¶å°æˆ– CLI ä¸­æ‰‹åŠ¨åˆ é™¤äº†å¯¹è±¡ S3 Access Denied ç½‘å…³çš„ IAM è§’è‰²æ²¡æœ‰ä¸Šä¼ æƒé™ å¯èƒ½æ˜¯ IAM Role ç¼ºå°‘ s3:PutObject æˆ– s3:ListBucketMultipartUploads æƒé™ é€‰æ‹©å»ºè®® ç›®çš„ æ¨è Filter æƒ³å…¨é¢äº†è§£æœ‰å“ªäº›ä¸Šä¼ å¤±è´¥çš„æ–‡ä»¶ All failing uploads åªæƒ³æ’æŸ¥â€œInvalidObjectStateâ€ç±»é—®é¢˜ï¼ˆæœ€å¸¸è§ï¼‰ é€‰æ‹© Subset â†’ Invalid object state åªæƒ³ç¡®è®¤æƒé™é—®é¢˜ é€‰æ‹© Subset â†’ S3 Access Denied åˆ›å»ºä¹‹åå¤§çº¦1-5åˆ†é’Ÿå°±å¯ä»¥åœ¨S3ä¸­çœ‹åˆ°ä¸€ä¸ªcsvæ–‡ä»¶ï¼Œé‚£ä¸ªå°±æ˜¯report cache reportè§£è¯» å­—æ®µè¯¦è§£ å­—æ®µå å«ä¹‰ å…¸å‹å–å€¼ è¯´æ˜ä¸é‡ç‚¹ Bucket ç›®æ ‡ S3 Bucket åç§° xxx-s3 è¡¨ç¤ºè¯¥æ–‡ä»¶æœ€ç»ˆåº”å†™å…¥çš„ S3 bucketã€‚ S3ObjectKey åœ¨ S3 ä¸­çš„å¯¹è±¡è·¯å¾„ï¼ˆKeyï¼‰ aaa/bbb/cb/... å¯¹åº” S3 ä¸­çš„å¯¹è±¡é”®ã€‚å¯ç›´æ¥åœ¨ S3 æ§åˆ¶å°æœç´¢æ­¤ Key éªŒè¯æ–‡ä»¶æ˜¯å¦å­˜åœ¨ã€‚ FilePath Gateway æœ¬åœ°æŒ‚è½½ç‚¹ä¸­çš„æ–‡ä»¶è·¯å¾„ /mnt/share/aaa/bbb/cb/... æŒ‡æ–‡ä»¶åœ¨æœ¬åœ°ç½‘å…³ä¸­çš„è·¯å¾„ã€‚ç”¨äºå®šä½æœ¬åœ°ç¼“å­˜çš„æ–‡ä»¶ã€‚ Type æ–‡ä»¶æˆ–ç›®å½•ç±»å‹ File &#x2F; Directory é€šå¸¸ä¸º Fileã€‚å¦‚æœæ˜¯ Directoryï¼Œå°±ä»£è¡¨ç›®å½•é¡¹ï¼ˆä¸ä¼šä¸Šä¼ ï¼‰ã€‚ IsDirty æ–‡ä»¶æ˜¯å¦æœ‰å°šæœªä¸Šä¼ åˆ° S3 çš„æ›´æ”¹ï¼ˆæ•°æ®æˆ–å…ƒæ•°æ®ï¼‰ true &#x2F; false å¦‚æœä¸º trueï¼Œè¯´æ˜è¯¥æ–‡ä»¶åœ¨æœ¬åœ°æœ‰ä¿®æ”¹ä½†è¿˜æ²¡å®Œå…¨åŒæ­¥åˆ° S3ã€‚ IsDataDirty æ–‡ä»¶æ•°æ®éƒ¨åˆ†æ˜¯å¦æœªä¸Šä¼ å®Œæˆ true &#x2F; false æ¯” IsDirty æ›´å…·ä½“ï¼Œåªè¡¨ç¤ºæ–‡ä»¶å†…å®¹ï¼ˆæ•°æ®å—ï¼‰æœªåŒæ­¥ã€‚ IsDeleted æ–‡ä»¶æ˜¯å¦å·²åœ¨æœ¬åœ°åˆ é™¤ä½†è¿˜æ²¡åŒæ­¥åˆ° S3 true &#x2F; false è‹¥ä¸º trueï¼ŒS3 ä¸Šå¯èƒ½è¿˜ä¿ç•™æ—§æ–‡ä»¶ã€‚ IsFailingToUpload æ˜¯å¦åœ¨ä¸Šä¼ è‡³ S3 æ—¶å‘ç”Ÿé”™è¯¯ true &#x2F; false ğŸš¨ å¦‚æœä¸º trueï¼Œå°±æ˜¯å…³é”®å­—æ®µ â€”â€” è¡¨ç¤ºè¯¥æ–‡ä»¶ä¸Šä¼ å¤±è´¥ã€‚ UploadError ä¸Šä¼ å¤±è´¥çš„å…·ä½“é”™è¯¯ç±»å‹ ä¾‹å¦‚ï¼šInvalidObjectState, AccessDenied, EntityTooLarge å¯ç›´æ¥ç”¨æ¥åˆ¤æ–­åŸå› ã€‚å’Œä½  CloudWatch Log ä¸­çš„é”™è¯¯å­—æ®µä¸€è‡´ã€‚ SizeInBytes æ–‡ä»¶å¤§å° ä¾‹å¦‚ 6345721 å¯å¸®åŠ©ç¡®è®¤æ˜¯å¦å±äº â€œ&gt;6MB metadata update bugâ€ èŒƒå›´ã€‚ IsWholeFileInCache æ–‡ä»¶æ˜¯å¦å®Œæ•´ä¿å­˜åœ¨ gateway cache ä¸­ true &#x2F; false å¦‚æœä¸º falseï¼Œè¯´æ˜åªç¼“å­˜äº†éƒ¨åˆ†æ–‡ä»¶å†…å®¹ã€‚é‡æ–°ä¸Šä¼ æ—¶å¯èƒ½éœ€è¦é‡æ–°æ‹‰å–ã€‚ è§£æIsDirty &#x3D; TRUE ä¸” IsDataDirty &#x3D; FALSEè¡¨ç¤ºæ–‡ä»¶çš„â€œå…ƒæ•°æ®â€ï¼ˆå¦‚æ—¶é—´æˆ³ã€æƒé™ï¼‰åœ¨æœ¬åœ°å·²æ›´æ–°ï¼Œä½†æ–‡ä»¶å†…å®¹æ²¡æœ‰å˜åŒ–ã€‚ğŸ”¹è¯´æ˜è¯¥æ–‡ä»¶çš„å†…å®¹æ²¡é—®é¢˜ï¼Œä½†å…ƒæ•°æ®æ›´æ–°æ²¡èƒ½ä¸Šä¼ æˆåŠŸã€‚å…·ä½“é”™è¯¯å¯å‚è€ƒï¼š https://docs.aws.amazon.com/filegateway/latest/files3/troubleshooting-file-gateway-issues.html#troubleshoot-logging-errors-invalidobjectstate","categories":[{"name":"è¿ç»´","slug":"è¿ç»´","permalink":"https://maydaychen.github.io/categories/%E8%BF%90%E7%BB%B4/"}],"tags":[{"name":"AWS","slug":"AWS","permalink":"https://maydaychen.github.io/tags/AWS/"}]},{"title":"AWSä½¿ç”¨æ—¥å¿—8--æ€ä¹ˆé€šè¿‡AWS ConfigæŸ¥æ‰¾é…ç½®äº†Lifecycleçš„S3","slug":"AWSä½¿ç”¨æ—¥å¿—8-æ€ä¹ˆé€šè¿‡AWS-ConfigæŸ¥æ‰¾é…ç½®äº†Lifecycleçš„S3","date":"2025-10-28T06:19:48.000Z","updated":"2025-11-13T02:51:08.567Z","comments":true,"path":"2025/10/28/AWSä½¿ç”¨æ—¥å¿—8-æ€ä¹ˆé€šè¿‡AWS-ConfigæŸ¥æ‰¾é…ç½®äº†Lifecycleçš„S3/","link":"","permalink":"https://maydaychen.github.io/2025/10/28/AWS%E4%BD%BF%E7%94%A8%E6%97%A5%E5%BF%978-%E6%80%8E%E4%B9%88%E9%80%9A%E8%BF%87AWS-Config%E6%9F%A5%E6%89%BE%E9%85%8D%E7%BD%AE%E4%BA%86Lifecycle%E7%9A%84S3/","excerpt":"","text":"èƒŒæ™¯å¦‚æœä½ æ˜¯ä¸€ä¸ªorganizationï¼Œè€Œä¸”è¿˜æƒ³è·å–åˆ°æ‰€æœ‰å·²ç»é…ç½®äº†lifecycleè·Ÿreplicationçš„bucketï¼Œé‚£ä¹ˆé€šè¿‡AWS Configå¯èƒ½æ˜¯æœ€å¿«é€Ÿçš„åŠæ³• å®ç°è€åŠæ³•ï¼Œè¿™é‡Œæˆ‘ä»¬ä½¿ç”¨AWS Configçš„advanced queryåŠŸèƒ½ 12345678SELECT resourceId, resourceType, supplementaryConfiguration.BucketReplicationConfiguration, supplementaryConfiguration.BucketLifecycleConfigurationWHERE resourceType = &#x27;AWS::S3::Bucket&#x27; AND supplementaryConfiguration.BucketReplicationConfiguration.roleARN LIKE &#x27;arn:aws:iam::%&#x27; supplementaryConfigurationæ˜¯ä¸€äº›è¾…åŠ©çš„å‚æ•°ï¼Œå¯ä»¥å±•ç¤ºä¸€äº›å¦‚æœä¸ç¡®å®šä½ è¦ç”¨å“ªä¸ªå‚æ•°ï¼Œå¯ä»¥ç›´æ¥å†™supplementaryConfigurationï¼Œå…ˆå±•ç¤ºæ•´ä¸ªjson","categories":[{"name":"è¿ç»´","slug":"è¿ç»´","permalink":"https://maydaychen.github.io/categories/%E8%BF%90%E7%BB%B4/"}],"tags":[{"name":"AWS","slug":"AWS","permalink":"https://maydaychen.github.io/tags/AWS/"}]},{"title":"Zabbixè¿›é˜¶13--å¦‚ä½•ä½¿ç”¨ZabbixSender","slug":"Zabbixè¿›é˜¶13-å¦‚ä½•ä½¿ç”¨ZabbixSender","date":"2025-10-22T02:45:23.000Z","updated":"2025-10-22T02:45:23.794Z","comments":true,"path":"2025/10/22/Zabbixè¿›é˜¶13-å¦‚ä½•ä½¿ç”¨ZabbixSender/","link":"","permalink":"https://maydaychen.github.io/2025/10/22/Zabbix%E8%BF%9B%E9%98%B613-%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8ZabbixSender/","excerpt":"","text":"","categories":[],"tags":[]},{"title":"AWSä½¿ç”¨æ—¥å¿—7--ä½¿ç”¨Data Exportsç”ŸæˆcostæŠ¥å‘Š","slug":"AWSä½¿ç”¨æ—¥å¿—7-ä½¿ç”¨DataExportsç”ŸæˆcostæŠ¥å‘Š","date":"2025-10-21T09:34:11.000Z","updated":"2025-10-22T03:33:33.639Z","comments":true,"path":"2025/10/21/AWSä½¿ç”¨æ—¥å¿—7-ä½¿ç”¨DataExportsç”ŸæˆcostæŠ¥å‘Š/","link":"","permalink":"https://maydaychen.github.io/2025/10/21/AWS%E4%BD%BF%E7%94%A8%E6%97%A5%E5%BF%977-%E4%BD%BF%E7%94%A8DataExports%E7%94%9F%E6%88%90cost%E6%8A%A5%E5%91%8A/","excerpt":"","text":"èƒŒæ™¯financeå›¢é˜Ÿæ¯ä¸ªæœˆéœ€è¦åœ¨AWSä¸Šä¸‹è½½billingçš„csvï¼Œä½†æ˜¯ä»11æœˆå¼€å§‹ï¼ŒDownload all to CSVè¿™ä¸ªåŠŸèƒ½å°±è¦ä¸‹çº¿äº†ï¼ŒAWSå®˜æ–¹æ¨èä½¿ç”¨Data ExportsåŠŸèƒ½ç”Ÿæˆæ¯ä¸ªæœˆçš„csvæ–‡ä»¶å¹¶ä¸”ä¿å­˜åœ¨S3ä¸­ è´¹ç”¨è¿™ä¸ªåŠŸèƒ½æœ¬èº«æ˜¯ä¸è¦é’±çš„ï¼Œä½†æ˜¯ç”±äºéœ€è¦ä¿å­˜æ–‡ä»¶åˆ°S3ä¸­ï¼Œæ‰€ä»¥ä¼šäº§ç”Ÿä¸€äº›é—´æ¥çš„è´¹ç”¨åŒ…æ‹¬ S3çš„å­˜å‚¨å’Œæµé‡è´¹ å¦‚æœç”¨Athenaè¿›è¡ŒæŸ¥è¯¢çš„è¯ï¼ŒAthenaéœ€è¦ä»˜è´¹å…¶ä»–æ²¡ä»€ä¹ˆè´¹ç”¨é—®é¢˜ å®è·µä¸è¯´æ˜å¯¼å‡ºç±»å‹AWSç°åœ¨çš„è´¦å•å¯¼å‡ºä½“ç³»æœ‰ä¸‰ç§ç±»å‹ ç±»å‹ åç§°ï¼ˆè‹±æ–‡ï¼‰ æ ¸å¿ƒç›®æ ‡ 1ï¸âƒ£ Standard data export ç°ä»£åŒ–ã€çµæ´»ã€é€‚åˆ BI &#x2F; ETL &#x2F; åˆ†æç³»ç»Ÿ 2ï¸âƒ£ Cost and usage dashboard (QuickSight) ä¸€é”®éƒ¨ç½²å¯è§†åŒ–çœ‹æ¿ 3ï¸âƒ£ Legacy CUR export æ—§ç‰ˆå¯¼å‡ºæ–¹å¼ï¼ˆå³ä½ ä¹‹å‰è¯´çš„ â€œeCSV æŠ¥è¡¨â€ï¼‰ æ€»ç»“å¯¹æ¯” åŠŸèƒ½ç‚¹ Standard Data Export Cost &amp; Usage Dashboard Legacy CUR Export æŠ€æœ¯åº•å±‚ CUR 2.0 (SQL-based) CUR 2.0 + QuickSight Legacy CUR (æ—§) å¯å®šåˆ¶åˆ— âœ… å¯è‡ªé€‰åˆ— &#x2F; è¿‡æ»¤ âŒ å›ºå®šæ¨¡æ¿ âŒ å›ºå®šæ‰€æœ‰åˆ— è¾“å‡ºæ ¼å¼ Parquet &#x2F; CSV Parquet CSV.gz &#x2F; Parquet è¾“å‡ºç›®æ ‡ S3 S3 + QuickSight S3 Athena æŸ¥è¯¢ âœ… ç›´æ¥æ”¯æŒ âŒ ä¸æ”¯æŒ âœ… æ”¯æŒ å¯è§†åŒ– è‡ªè¡Œæ„å»º (BI å·¥å…·) âœ… é¢„åˆ¶çœ‹æ¿ è‡ªè¡Œæ„å»º æˆæœ¬è¶‹åŠ¿ âœ… æ”¯æŒ âœ… æ”¯æŒ âœ… æ”¯æŒ æ¨èç¨‹åº¦ â­â­â­â­ï¼ˆæ–°æ¶æ„ï¼‰ â­â­ï¼ˆå¿«é€Ÿå±•ç¤ºï¼‰ â­ï¼ˆå…¼å®¹æ—§ç³»ç»Ÿï¼‰ è¡¨å†…å®¹è®¾å®šâš ï¸é™å®šStandard data exportæ‰æœ‰çš„è®¾å®š é¦–å…ˆæˆ‘ä»¬ä¼šçœ‹åˆ°å››ä¸ªç±»å‹ï¼Œè¿™æ˜¯æ¯ä¸ªç±»å‹å¯¹åº”çš„åº”ç”¨åœºæ™¯ åœºæ™¯ æ¨èè¡¨ æˆæœ¬åˆ†æ&#x2F;é¢„ç®— CUR 2.0 æˆæœ¬ä¼˜åŒ– Cost Optimization Recommendations å¤šäº‘&#x2F;FinOps æ ‡å‡†åŒ– FOCUS 1.0 with AWS columns ESG&#x2F;å¯æŒç»­å‘å±•æŠ¥å‘Š Carbon Emissions è¿™æ˜¯æ¯ä¸€ä¸ªç±»å‹çš„æŠ¥å‘Šæ‰€åŒ…å«çš„æ—¶é—´èŒƒå›´ é€‰æ‹© æ¯æ—¥æ–‡ä»¶å†…å®¹åŒ…å«çš„æ—¶é—´èŒƒå›´ CUR 2.0 å½“æœˆ1å·åˆ°å½“å¤©ï¼ˆç´¯ç§¯æ•°æ®ï¼‰ FOCUS 1.0 å½“æœˆ1å·åˆ°å½“å¤©ï¼ˆç´¯ç§¯æ•°æ®ï¼‰ Cost Optimization Recommendations å½“å¤©å¿«ç…§ Carbon Emissions å½“æœˆæˆ–ä¸Šæœˆç´¯è®¡æ•°æ®ï¼ˆæ›´æ–°é¢‘ç‡ä½ï¼‰ æ–‡ä»¶ç±»å‹ ç›®æ ‡ æ¨èé…ç½® æƒ³ä¸‹è½½ CSV æ–‡ä»¶æŸ¥çœ‹ Format: CSV + Compression: GZIP æƒ³ç”¨ Athena æŸ¥è¯¢ Format: Parquetï¼ˆæ€§èƒ½æ›´å¥½ï¼Œè´¹ç”¨æ›´ä½ï¼‰ æƒ³å…¼å®¹æ—§è„šæœ¬æˆ–è´¦å•ç³»ç»Ÿ é€‰ GZIPï¼ˆå³æ—§çš„ eCSV æ›¿ä»£ï¼‰ âš ï¸ æ–‡ä»¶ç±»å‹ä»Šåä¸å¯ä¿®æ”¹ï¼Œå¦‚æœæƒ³è¦æ”¹æ ¼å¼å°±è¦é‡æ–°åˆ›å»ºä¸€ä¸ªæ–°çš„exportæ‰è¡Œ å¯¼å‡ºæ ¼å¼ ç›®æ ‡ æ¨èé…ç½® æƒ³ä¸‹è½½ CSV æ–‡ä»¶æŸ¥çœ‹ Format: CSV + Compression: GZIP æƒ³ç”¨ Athena æŸ¥è¯¢ Format: Parquetï¼ˆæ€§èƒ½æ›´å¥½ï¼Œè´¹ç”¨æ›´ä½ï¼‰ æƒ³å…¼å®¹æ—§è„šæœ¬æˆ–è´¦å•ç³»ç»Ÿ é€‰ GZIPï¼ˆå³æ—§çš„ eCSV æ›¿ä»£ï¼‰ æ–‡ä»¶ç‰ˆæœ¬æ§åˆ¶è¿™é‡Œå…¶å®æœ‰ä¸¤ä¸ªé€‰é¡¹ï¼Œä¸€ä¸ªæ˜¯æ¯æ¬¡éƒ½åˆ›å»ºæ–°æ–‡ä»¶ï¼Œä¸€ä¸ªæ˜¯åœ¨ä¹‹å‰çš„æ–‡ä»¶ä¸Šæ›´æ–°ä¸ªäººè®¤ä¸ºä¸ç®¡ä»€ä¹ˆæƒ…å†µï¼Œåœ¨ä¹‹å‰çš„æ–‡æ¡£ä¸Šæ›´æ–°å°±å¥½å•¦ é€‰é¡¹ å®é™…ç»“æœ æ˜¯å¦æœ‰é¢å¤–ä¿¡æ¯ å­˜å‚¨æˆæœ¬ Overwrite existing data export file æ¯å¤©ä¿ç•™æœ€æ–°çš„å®Œæ•´æœˆåº¦æ–‡ä»¶ âŒ æ²¡æœ‰ ğŸ’°ä½ Create new data export file æ¯å¤©å¤šç”Ÿæˆä¸€ä»½å‡ ä¹é‡å¤çš„æ–‡ä»¶ âŒ æ²¡æœ‰ï¼ˆä»…æ–‡ä»¶åä¸åŒï¼‰ ğŸ’°é«˜ ğŸ§  ä»€ä¹ˆæ—¶å€™ Create new data export file æ‰æœ‰æ„ä¹‰ï¼š å¸Œæœ›ä¿ç•™æ¯æ—¥å¿«ç…§ï¼Œç”¨äºè¿½è¸ªè®¡è´¹ä¿®æ­£å˜åŒ– AWS æœ‰æ—¶ä¼šå›è¡¥æˆ–è°ƒæ•´å‰å‡ å¤©çš„è´¦å•ï¼ˆä¾‹å¦‚é€€æ¬¾ã€Savings Plan æŠµæ‰£é‡ç®—ï¼‰ã€‚ å¦‚æœä½ æƒ³ç ”ç©¶ â€œAWS è´¦å•æ¯æ—¥æ³¢åŠ¨â€ï¼Œé‚£ä¹ˆä¿ç•™æ¯æ—¥æŠ¥å‘Šä¼šæœ‰ä»·å€¼ã€‚ è‡ªåŠ¨åŒ–ç³»ç»Ÿéœ€è¦æ£€æµ‹â€œæ–°å¢æ–‡ä»¶â€æ¥è§¦å‘ä»»åŠ¡ ä¾‹å¦‚ï¼Œç”¨ Lambda æ£€æµ‹æ–°å¯¹è±¡ä¸Šä¼  â†’ è‡ªåŠ¨æ‰§è¡Œ Athena æŸ¥è¯¢ &#x2F; Glue ETLã€‚ å¦‚æœä½ ç”¨ Overwrite æ¨¡å¼ï¼Œæ–°æ–‡ä»¶ key ä¸å˜ï¼ŒS3 äº‹ä»¶è§¦å‘ä¼šæ›´éº»çƒ¦ã€‚ å¤šç§Ÿæˆ·æˆ–å®¡è®¡éœ€æ±‚ æŸäº›ä¼ä¸šåˆè§„åœºæ™¯è¦æ±‚â€œè´¦å•åŸå§‹ç‰ˆæœ¬ç•™å­˜â€ï¼Œä¸èƒ½è¦†ç›–æ—§æ•°æ®ã€‚ ç›®æ ‡S3é…ç½® æŠ¥å‘ŠæŸ¥çœ‹å½“ä½ é…ç½®å®Œexportä¹‹åï¼Œéœ€è¦24å°æ—¶æ‰èƒ½ç”Ÿæˆç¬¬ä¸€ä»½æŠ¥å‘Šï¼Œä¼šåœ¨é¡¶éƒ¨å‘ŠçŸ¥ä½  24å°æ—¶åï¼Œå°±å¯ä»¥å»å¯¹åº”çš„S3 BucketæŸ¥çœ‹åˆ°reportå•¦","categories":[{"name":"è¿ç»´","slug":"è¿ç»´","permalink":"https://maydaychen.github.io/categories/%E8%BF%90%E7%BB%B4/"}],"tags":[{"name":"AWS","slug":"AWS","permalink":"https://maydaychen.github.io/tags/AWS/"}]},{"title":"AWSä½¿ç”¨æ—¥å¿—6--ä½¿ç”¨TransferFamilyæ›¿ä»£SFTPæœåŠ¡å™¨","slug":"AWSä½¿ç”¨æ—¥å¿—6-ä½¿ç”¨TransferFamilyæ›¿ä»£SFTPæœåŠ¡å™¨","date":"2025-10-20T09:32:55.000Z","updated":"2025-10-22T01:46:17.296Z","comments":true,"path":"2025/10/20/AWSä½¿ç”¨æ—¥å¿—6-ä½¿ç”¨TransferFamilyæ›¿ä»£SFTPæœåŠ¡å™¨/","link":"","permalink":"https://maydaychen.github.io/2025/10/20/AWS%E4%BD%BF%E7%94%A8%E6%97%A5%E5%BF%976-%E4%BD%BF%E7%94%A8TransferFamily%E6%9B%BF%E4%BB%A3SFTP%E6%9C%8D%E5%8A%A1%E5%99%A8/","excerpt":"","text":"AWS Transfer Family æ˜¯ä¸€ä¸ªæ‰˜ç®¡çš„ SFTP&#x2F;FTPS&#x2F;FTP æœåŠ¡ï¼Œå¯è®©å¤–éƒ¨ç”¨æˆ·å®‰å…¨è®¿é—®ä½ çš„ S3 bucket æˆ– EFS æ–‡ä»¶ç³»ç»Ÿã€‚å®ƒä¸éœ€è¦ä½ å†ç»´æŠ¤ EC2ã€Nginxã€sshd ç­‰ï¼Œåªè¦å®šä¹‰ç”¨æˆ·èº«ä»½æ˜ å°„å³å¯ ç›®æ ‡ ä¸ºæ¯ä¸ªç³»ç»Ÿç”¨æˆ·åˆ›å»ºä¸€ä¸ª Transfer Family ç”¨æˆ·ï¼ˆService-managed æ¨¡å¼ï¼‰ ä½¿ç”¨ SSH å…¬é’¥ç™»å½•ï¼Œè€Œéå¯†ç  å°†æ¯ä¸ªç”¨æˆ·çš„ &#x2F;home&#x2F; æ•°æ®åŒæ­¥åˆ°å„è‡ªçš„ S3 å‰ç¼€ç›®å½• å®è·µç”±äºåŸSFTPæœåŠ¡å™¨ä½¿ç”¨å¯†ç ç™»å½•ï¼Œç°åœ¨éœ€è¦æ”¹ä¸ºkeyç™»å½•ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦åœ¨åŸSFTPæœåŠ¡å™¨ä¸Šä¸ºæ¯ä¸€ä¸ªç”¨æˆ·åˆ›å»ºæ–°çš„keyå¹¶ç»‘å®šåˆ°transerä¸Šï¼ŒåŒæ—¶éœ€è¦ä¸ºæ¯ä¸€ä¸ªç”¨æˆ·éƒ½è®¾ç½®ä¸€ä¸ªIAM Role ä¸ºEC2åˆ›å»ºIAM Roleä¿¡ä»»å®ä½“ï¼šec2.amazonaws.coméœ€è¦æƒé™ï¼štransfer:CreateUsers3:ListBucket ä¸ºç”¨æˆ·åˆ›å»ºIAM Role(TransferAccessRole)ä¿¡ä»»å®ä½“ï¼štransfer.amazonaws.comåœ¨åˆ›å»ºtransfer serverçš„ç”¨æˆ·æ—¶ï¼Œæˆ‘ä»¬éœ€è¦ä¸ºæ¯ä¸€ä¸ªç”¨æˆ·ç»‘å®šä¸€ä¸ªIAM role 123456789101112131415161718192021&#123; &quot;Version&quot;: &quot;2012-10-17&quot;, &quot;Statement&quot;: [ &#123; &quot;Effect&quot;: &quot;Allow&quot;, &quot;Action&quot;: [ &quot;s3:ListBucket&quot; ], &quot;Resource&quot;: &quot;arn:aws:s3:::transfer-test&quot; &#125;, &#123; &quot;Effect&quot;: &quot;Allow&quot;, &quot;Action&quot;: [ &quot;s3:GetObject&quot;, &quot;s3:PutObject&quot;, &quot;s3:DeleteObject&quot; ], &quot;Resource&quot;: &quot;arn:aws:s3:::transfer-test/*&quot; &#125; ]&#125; æˆ–è€…å¦‚æœæƒé™æƒ³è®¾ç½®çš„ä¸¥æ ¼ä¸€ç‚¹ï¼Œå¯ä»¥ç”¨è¿™ä¸ª 123456789101112131415161718&#123; &quot;Version&quot;: &quot;2012-10-17&quot;, &quot;Statement&quot;: [ &#123; &quot;Effect&quot;: &quot;Allow&quot;, &quot;Action&quot;: [&quot;s3:ListBucket&quot;], &quot;Resource&quot;: &quot;arn:aws:s3:::my-sftp-bucket&quot;, &quot;Condition&quot;: &#123; &quot;StringLike&quot;: &#123;&quot;s3:prefix&quot;: [&quot;$&#123;transfer:UserName&#125;/*&quot;]&#125; &#125; &#125;, &#123; &quot;Effect&quot;: &quot;Allow&quot;, &quot;Action&quot;: [&quot;s3:GetObject&quot;, &quot;s3:PutObject&quot;, &quot;s3:DeleteObject&quot;], &quot;Resource&quot;: &quot;arn:aws:s3:::my-sftp-bucket/$&#123;transfer:UserName&#125;/*&quot; &#125; ]&#125; åˆ›å»ºtransfer server AWS Transfer Family æä¾› ä¸‰ç§ä¸»è¦è®¤è¯æ–¹å¼ï¼š æ¨¡å¼ ç”¨æˆ·ç®¡ç†æ–¹å¼ ç™»å½•æ–¹å¼ ä¼˜ç‚¹ ç¼ºç‚¹ Service managed åœ¨ AWS æ§åˆ¶å°&#x2F;CLI åˆ›å»ºç”¨æˆ·ï¼Œå¯†ç å­˜ Secrets Manager ç”¨æˆ·å + å¯†ç  &#x2F; SSH key æœ€ç®€å•ã€å®˜æ–¹æ‰˜ç®¡ å¯†ç éœ€ä½ é‡æ–°è®¾ç½®ï¼Œæ— æ³•è¿ç§»ç³»ç»Ÿå¯†ç  Custom identity provider è‡ªå®šä¹‰ï¼ˆLambda + API Gatewayï¼‰ ç”¨æˆ·å + å¯†ç  &#x2F; SSH key å¯å®Œå…¨æ§åˆ¶ç”¨æˆ·éªŒè¯é€»è¾‘ å®ç°æˆæœ¬é«˜ï¼ˆéœ€å¼€å‘ï¼‰ Directory Service (AD) ä½¿ç”¨ AWS Managed AD åŸŸè´¦å· + å¯†ç  ä¸ä¼ä¸š AD é›†æˆ é€‚åˆä¼ä¸šç¯å¢ƒï¼Œä¸é€‚åˆä½ è¿™ç§æœ¬åœ°è´¦å·åœºæ™¯ ä¸‰ç§ Endpoint ç±»å‹ ç±»å‹ è¯´æ˜ ç½‘ç»œè®¿é—® å…¸å‹ä½¿ç”¨åœºæ™¯ Publicly accessible (Public endpoint) AWS æ‰˜ç®¡å…¬ç½‘ç«¯ç‚¹ï¼ˆè‡ªåŠ¨åˆ†é…åŸŸåï¼‰ ğŸŒ äº’è”ç½‘ä¸Šä»»ä½•åœ°æ–¹å¯è®¿é—® å¤–éƒ¨åˆä½œä¼™ä¼´ã€å®¢æˆ·ä¸Šä¼ æ–‡ä»¶ VPC hosted (VPC endpoint) åœ¨ä½ æŒ‡å®šçš„ VPC&#x2F;Subnet å†…è¿è¡Œ ğŸ”’ ä»…é™ VPC å†…æˆ–é€šè¿‡ VPN&#x2F;Direct Connect è®¿é—® å†…éƒ¨ç³»ç»Ÿä½¿ç”¨ã€åˆè§„éš”ç¦»è¦æ±‚ VPC endpoint with custom hostname åŒä¸Šï¼Œä½†ç»‘å®šè‡ªå®šä¹‰åŸŸåï¼ˆä¾‹å¦‚ sftp.company.comï¼‰ ğŸ”’ + ğŸŒï¼ˆå–å†³äºä½ DNSé…ç½®ï¼‰ å¯¹å¤–ç»Ÿä¸€å“ç‰ŒåŸŸåæˆ–æ··åˆäº‘åœºæ™¯ âœ… 1ï¸âƒ£ Public endpointï¼ˆæœ€å¸¸ç”¨ï¼‰ä¼˜ç‚¹ï¼šæœ€ç®€å•çš„éƒ¨ç½²ï¼›AWS è‡ªåŠ¨ç”ŸæˆåŸŸåï¼šs-xxxxxxxxx.server.transfer.ap-southeast-1.amazonaws.comæ— éœ€é…ç½® VPCã€å®‰å…¨ç»„ã€å­ç½‘ï¼›ç›´æ¥æ”¯æŒ SFTP&#x2F;FTPSã€‚ é€‚åˆåœºæ™¯ï¼šä½ ç°åœ¨çš„è€ SFTP æœåŠ¡å™¨æ˜¯å…¬ç½‘è®¿é—®çš„ï¼›ç”¨æˆ·åˆ†å¸ƒåœ¨äº’è”ç½‘ï¼›æ²¡æœ‰åˆè§„è¦æ±‚å¿…é¡»åœ¨ç§ç½‘ä¸­è¿è¡Œã€‚ âš™ï¸ æ¨èé…ç½®ï¼šEndpoint typeï¼šPublicly accessibleProtocolsï¼šSFTPï¼ˆå¦‚æœ‰å®‰å…¨è¦æ±‚å†å¼€ FTPSï¼‰AZsï¼š3ä¸ªï¼ˆå…è´¹ï¼‰Loggingï¼šå¯ç”¨ CloudWatch Logsï¼ˆæ–¹ä¾¿å®¡è®¡ï¼‰ âœ… 2ï¸âƒ£ VPC hosted endpointï¼ˆç§æœ‰éƒ¨ç½²ï¼‰ ç‰¹ç‚¹ï¼š SFTP æœåŠ¡å™¨è¿è¡Œåœ¨ä½ çš„ VPC å†…ï¼›åªèƒ½é€šè¿‡ï¼šVPC å†… EC2ï¼›VPNï¼›æˆ– Direct Connect è®¿é—®ï¼›ä½ å¯ä»¥ç²¾ç¡®æ§åˆ¶å®‰å…¨ç»„ã€NACLã€å­ç½‘ã€‚ é€‚åˆåœºæ™¯ï¼šä¼ä¸šå†…éƒ¨æ–‡ä»¶ä¼ è¾“ï¼›å¿…é¡»èµ°ä¸“çº¿ &#x2F; VPNï¼›ä¸èƒ½æš´éœ²åœ¨å…¬ç½‘ï¼ˆä¾‹å¦‚é‡‘èæœºæ„ï¼‰ã€‚ âš™ï¸ æ¨èé…ç½®ï¼šEndpoint typeï¼šVPC hostedVPCï¼šé€‰æ‹©ä½ å½“å‰çš„ VPCSubnetsï¼šå»ºè®®é€‰ 3 ä¸ªä¸åŒ AZSecurity groupï¼šå…è®¸ 22ï¼ˆSFTPï¼‰æˆ– 990&#x2F;21ï¼ˆFTPSï¼‰ç«¯å£Routeï¼šç¡®ä¿èƒ½è®¿é—® S3ï¼ˆé€šè¿‡ Gateway Endpoint æˆ– NATï¼‰ âœ… 3ï¸âƒ£ VPC endpoint + Custom hostnameï¼ˆå“ç‰ŒåŸŸåï¼‰ç‰¹ç‚¹ï¼šåŠŸèƒ½ä¸ VPC endpoint ç›¸åŒï¼›é¢å¤–å…è®¸ä½ ç»‘å®šè‡ªå®šä¹‰åŸŸåï¼ˆä¾‹å¦‚ sftp.company.comï¼‰ï¼›éœ€åœ¨ Route53 æˆ–å¤–éƒ¨ DNS è®¾ç½® CNAMEï¼›æ”¯æŒ TLS è¯ä¹¦ï¼ˆACM ç®¡ç†ï¼‰ã€‚ é€‚åˆåœºæ™¯ï¼šå¸Œæœ›ç”¨æˆ·ä½¿ç”¨å“ç‰ŒåŸŸåï¼›æœ‰è‡ªå·±çš„ TLS è¯ä¹¦ï¼›æ··åˆäº‘æˆ–å¤šåŒºåŸŸéƒ¨ç½²ã€‚ âš™ï¸ æ¨èé…ç½®ï¼šEndpoint typeï¼šVPC endpointCustom hostnameï¼šsftp.company.comACM Certificateï¼šé€‰ä½ çš„è‡ªå®šä¹‰è¯ä¹¦DNS è®°å½•ï¼šåœ¨å¤–éƒ¨æˆ– Route53 å»ºç«‹ CNAME â†’ Transfer endpoint Security PolicySecurity Policyï¼ˆå®‰å…¨ç­–ç•¥ï¼‰å†³å®šäº†å½“å®¢æˆ·ç«¯ï¼ˆä¾‹å¦‚ FileZillaã€WinSCPã€ç¨‹åºé‡Œçš„ SFTP æ¨¡å—ï¼‰è¿æ¥åˆ°ä½ çš„ AWS Transfer æœåŠ¡å™¨æ—¶ï¼ŒåŒæ–¹åœ¨æ¡æ‰‹è¿‡ç¨‹ä¸­å¯ä»¥ä½¿ç”¨å“ªäº›ï¼š Kexï¼ˆKey Exchangeï¼‰ï¼šå¯†é’¥äº¤æ¢ç®—æ³•MACï¼ˆMessage Authentication Codeï¼‰ï¼šæ¶ˆæ¯å®Œæ•´æ€§éªŒè¯ç®—æ³•SSH Ciphers &#x2F; TLS Ciphersï¼šåŠ å¯†ç®—æ³•ç®€å•æ¥è¯´ï¼Œå°±æ˜¯è¶Šæ–°çš„è§„åˆ™è¶Šä¸¥æ ¼ï¼Œå¦‚æœè¦å…¼å®¹è€ç³»ç»Ÿï¼Œé‚£ä¹ˆå°±å¯ä»¥è®¾ç½®çš„ä¸æ˜¯é‚£ä¹ˆæ–° Logical Directoriesè¿™æ˜¯ä¸€ä¸ªè™šæ‹Ÿç›®å½•æ˜ å°„åŠŸèƒ½ï¼Œè®©ä½ çš„ S3 bucket çœ‹èµ·æ¥åƒä¼ ç»ŸæœåŠ¡å™¨çš„æ–‡ä»¶ç»“æ„ã€‚AWS Transfer Family æœ¬è´¨ä¸Šæ˜¯æŠŠç”¨æˆ·æ“ä½œçš„è·¯å¾„ï¼ˆ&#x2F;home&#x2F;alice&#x2F;data.txtï¼‰æ˜ å°„åˆ° S3 ä¸Šçš„å¯¹è±¡è·¯å¾„ï¼ˆs3:&#x2F;&#x2F;my-bucket&#x2F;users&#x2F;alice&#x2F;data.txtï¼‰ã€‚å¦‚æœä¸ç”¨ Logical Directoryï¼Œä½ çš„ç”¨æˆ·ç™»å½•åçœ‹åˆ°çš„æ˜¯å®é™… S3 è·¯å¾„ç»“æ„ï¼›ä½†ç”¨å®ƒä¹‹åï¼Œä½ å¯ä»¥äººä¸ºå®šä¹‰â€œå‹å¥½çš„è·¯å¾„â€ã€‚è¿™å¯¹äºï¼š å¤šç”¨æˆ·å…±äº«ä¸€ä¸ª bucket ç”¨æˆ·ç›®å½•æ¯”è¾ƒæ·±æˆ–å¤æ‚ éœ€è¦éšè—çœŸå® bucket ç»“æ„éƒ½éå¸¸æœ‰ç”¨ã€‚ Optimized Directoriesè¿™æ˜¯ AWS åœ¨ 2024 å¹´æ¨å‡ºçš„æ–°åŠŸèƒ½ï¼Œä¸“é—¨æå‡ SFTP åˆ—ç›®å½•ï¼ˆls å‘½ä»¤ï¼‰æ€§èƒ½çš„ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒTransfer Family åœ¨åˆ—å‡º S3 æ–‡ä»¶å¤¹å†…å®¹æ—¶ï¼Œåº•å±‚å…¶å®æ˜¯åœ¨è°ƒç”¨ï¼šListObjectsV2 APIï¼ˆS3 åŸç”Ÿæ¥å£ï¼‰ è¿™ä¸ªæ¥å£åœ¨æ–‡ä»¶å¾ˆå¤šæ—¶ï¼ˆæ¯”å¦‚ä¸€ä¸ªç›®å½•é‡Œä¸Šä¸‡æ–‡ä»¶ï¼‰ä¼šéå¸¸æ…¢ã€‚å¼€å¯ Optimized directories åï¼ŒAWS ä¼šè‡ªåŠ¨ä¸ºä½ çš„ S3 ç›®å½•æ„å»ºç´¢å¼•ï¼ˆmetadata indexï¼‰ï¼ŒåŠ å¿«æŸ¥è¯¢ã€‚ç»“æœå°±æ˜¯ï¼šlsã€dir å‘½ä»¤å“åº”å‡ ä¹æ˜¯ç§’çº§å¤§ç›®å½•åˆ—å‡ºæ€§èƒ½æå‡ 10~100 å€ä¸éœ€è¦æ”¹å˜ç°æœ‰ S3 ç»“æ„ âœ… æ³¨æ„äº‹é¡¹åªé€‚ç”¨äº S3 backendï¼ˆä¸æ˜¯ EFSï¼‰AWS åœ¨åå°è‡ªåŠ¨ç»´æŠ¤ç´¢å¼•ï¼ˆä½ ä¸ç”¨æ‰‹åŠ¨å¹²é¢„ï¼‰ä¸ä¼šé¢å¤–æ”¶è´¹ï¼Œä½†ä¼šç•¥å¾®å¢åŠ  S3 API è°ƒç”¨é¢‘ç‡ SetStat optionAWS ç»™ä½ ä¸¤ä¸ªé€‰æ‹©ï¼š è®¾ç½® å«ä¹‰ è¡Œä¸º Ignore SetStat &#x3D; true å¿½ç•¥ SETSTAT å‘½ä»¤ï¼ˆæ¨èï¼‰ å®¢æˆ·ç«¯æ‰§è¡Œä¿®æ”¹å±æ€§æ—¶ä¸ä¼šæŠ¥é”™ï¼Œåªä¼šåœ¨ CloudWatch æ—¥å¿—ä¸­è®°å½• Ignore SetStat &#x3D; false ä¸å¿½ç•¥ï¼ˆé»˜è®¤ï¼‰ å½“å®¢æˆ·ç«¯å°è¯•ä¿®æ”¹å±æ€§æ—¶ï¼Œè¿”å›â€œOperation not supportedâ€é”™è¯¯ âœ… å»ºè®®åšæ³•ï¼šå¦‚æœä½ ç”¨çš„æ˜¯ S3 ä½œä¸ºå­˜å‚¨åç«¯ï¼Œè¯·å¯ç”¨ â€œIgnore SetStatâ€ã€‚ åŸå› ï¼šç»å¤§å¤šæ•° SFTP å®¢æˆ·ç«¯éƒ½ä¼šè‡ªåŠ¨å°è¯•æ‰§è¡Œ SETSTATï¼ˆä¾‹å¦‚ WinSCP ä¸Šä¼ åè‡ªåŠ¨è®¾ç½®æ—¶é—´æˆ³ï¼‰ã€‚å¦‚æœä¸å¿½ç•¥ï¼Œå®ƒä¼šåœ¨æ¯æ¬¡ä¸Šä¼ åæŠ¥é”™ï¼ˆè™½ç„¶æ–‡ä»¶å…¶å®ä¸Šä¼ æˆåŠŸäº†ï¼Œä½†ç”¨æˆ·ä¼šçœ‹åˆ°çº¢è‰²é”™è¯¯ä¿¡æ¯ï¼‰ã€‚å¯ç”¨å¿½ç•¥åï¼Œç”¨æˆ·ä½“éªŒæ›´å¥½ï¼Œæ—¥å¿—ä»ç„¶ä¼šåœ¨ CloudWatch ä¸­ä¿ç•™ã€‚ åˆ›å»ºä¸€ä¸ªæ–°çš„S3 Bucketè¿™ä¸ªä¸å¿…å¤šè¯´ï¼Œç›´æ¥åˆ›å»ºä¸€ä¸ªgeneral purpose bucketå³å¯ (å¯é€‰)åœ¨EC2ä¸Šé€šè¿‡è„šæœ¬åˆ›å»ºæµ‹è¯•ç”¨æˆ·åŠæ–‡ä»¶12345678910111213141516171819202122232425262728293031323334353637#!/bin/bash# æ‰¹é‡åˆ›å»º SFTP æµ‹è¯•ç”¨æˆ·å¹¶ç”Ÿæˆéšæœºæ–‡ä»¶# é€‚ç”¨äº Amazon Linux / CentOS / UbuntuUSER_COUNT=5 # è¦åˆ›å»ºçš„ç”¨æˆ·æ•°é‡BASE_NAME=&quot;sftpuser&quot; # ç”¨æˆ·åå‰ç¼€PASSWORD_FILE=&quot;./user_passwords.txt&quot;# æ¸…ç©ºæ—§çš„å¯†ç è®°å½•echo &quot;ç”Ÿæˆæ—¥æœŸ: $(date)&quot; &gt; $PASSWORD_FILEfor i in $(seq 1 $USER_COUNT); do USERNAME=&quot;$&#123;BASE_NAME&#125;$&#123;i&#125;&quot; PASSWORD=$(openssl rand -base64 12) # åˆ›å»ºç”¨æˆ·ï¼ˆå¸¦ home ç›®å½•ï¼‰ï¼Œç¦æ­¢ SSH ç™»å½•ï¼Œä»…ç”¨äº SFTP useradd -m -s /sbin/nologin &quot;$USERNAME&quot; # è®¾ç½®å¯†ç ï¼ˆå¯é€‰ï¼‰ echo &quot;$&#123;USERNAME&#125;:$&#123;PASSWORD&#125;&quot; | chpasswd # åœ¨ home ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªéšæœºæ–‡ä»¶ HOME_DIR=&quot;/home/$&#123;USERNAME&#125;&quot; FILE_PATH=&quot;$&#123;HOME_DIR&#125;/file_$(date +%s)_$RANDOM.txt&quot; echo &quot;This is a random test file for $&#123;USERNAME&#125;&quot; &gt; &quot;$FILE_PATH&quot; echo &quot;Random content: $(openssl rand -hex 8)&quot; &gt;&gt; &quot;$FILE_PATH&quot; # ä¿®æ”¹æ–‡ä»¶æ‰€æœ‰æƒ chown $&#123;USERNAME&#125;:$&#123;USERNAME&#125; &quot;$FILE_PATH&quot; # è¾“å‡ºç»“æœ echo &quot;âœ… Created user: $&#123;USERNAME&#125;, password: $&#123;PASSWORD&#125;, file: $(basename $FILE_PATH)&quot; | tee -a $PASSWORD_FILEdoneechoecho &quot;âœ… æ‰€æœ‰ç”¨æˆ·å·²åˆ›å»ºå®Œæˆï¼Œå¯†ç å·²ä¿å­˜åˆ°: $PASSWORD_FILE&quot; åœ¨EC2ä¸Šè¿è¡Œè¿ç§»è„šæœ¬12345678910111213141516171819202122232425262728293031323334353637383940#!/bin/bash# === Configuration ===SERVER_ID=&quot;s-xxxxxxxxxxxx&quot; # æ›¿æ¢ä¸ºä½ çš„ Transfer Family server IDROLE_ARN=&quot;arn:aws:iam::123456789012:role/TransferAccessRole&quot;BUCKET=&quot;my-sftp-bucket&quot;OUTPUT_CSV=&quot;transfer_users.csv&quot;KEY_DIR=&quot;./sftp_keys&quot;mkdir -p $KEY_DIRecho &quot;username,private_key_path,s3_path&quot; &gt; $OUTPUT_CSV# === Iterate system users ===for user in $(ls /home); do HOME_DIR=&quot;/home/$user&quot; if [ ! -d &quot;$HOME_DIR&quot; ]; then continue fi echo &quot;Processing user: $user&quot; # Generate SSH key pair ssh-keygen -t rsa -b 2048 -N &quot;&quot; -f &quot;$KEY_DIR/$user&quot; &gt;/dev/null 2&gt;&amp;1 PUB_KEY=$(cat &quot;$KEY_DIR/$user.pub&quot;) # Create Transfer user aws transfer create-user \\ --server-id $SERVER_ID \\ --user-name &quot;$user&quot; \\ --role &quot;$ROLE_ARN&quot; \\ --home-directory &quot;/$BUCKET/$user&quot; \\ --ssh-public-key-body &quot;$PUB_KEY&quot; # Sync user data to S3 aws s3 sync &quot;$HOME_DIR&quot; &quot;s3://$BUCKET/$user&quot; --exclude &quot;.ssh/*&quot; # Save record echo &quot;$user,$KEY_DIR/$user,s3://$BUCKET/$user&quot; &gt;&gt; $OUTPUT_CSVdoneecho &quot;âœ… Migration complete. Keys saved in $KEY_DIR, summary in $OUTPUT_CSV.&quot; è„šæœ¬åŠŸèƒ½ï¼š åˆ›å»ºtransfer userï¼Œå¹¶ä¸ºæ¯ä¸ªç”¨æˆ·åˆ›å»ºssh key å°†userä¸S3 Bucketå¯¹åº”çš„è·¯å¾„åŒ¹é…ä¸Š å°†&#x2F;home&#x2F;userä¸‹çš„æ–‡ä»¶åŒæ­¥åˆ°S3 é€šè¿‡csvæ–‡ä»¶è®°å½•æ¯ä¸€ä¸ªç”¨æˆ·çš„keyï¼Œä»¥ä¾¿åˆ°æ—¶å€™åˆ†å‘ å¦‚ä½•ç™»å½•12345678é€šè¿‡winscpæˆ–å…¶ä»–å·¥å…·ç™»å½•æ—¶ï¼Œhostå°±ä¸æ˜¯ipåœ°å€ï¼Œè€Œæ˜¯transfer serverçš„DNSäº†æ ¼å¼å¦‚ä¸‹ï¼šs-xxxxxxxxx.server.transfer.ap-southeast-1.amazonaws.comusername: åˆšæ‰ç”Ÿæˆçš„ç”¨æˆ·åssh key: ç”Ÿæˆçš„ç”¨æˆ·ç§é’¥ç”¨å‘½ä»¤è¡Œçš„è¯ï¼Œå‘½ä»¤å¦‚ä¸‹sftp -i ./alice alice@s-xxxxxxxxx.server.transfer.ap-southeast-1.amazonaws.com ä»·æ ¼ æ”¶è´¹ç±»åˆ« æ”¶è´¹è¯´æ˜ å¤‡æ³¨ Endpoint æ¯å°æ—¶å¯ç”¨è´¹ å½“ä½ å»ºç«‹ä¸€ä¸ª SFTPï¼ˆæˆ– FTPS&#x2F;FTPï¼AS2ï¼‰â€œæœåŠ¡å™¨ç«¯ç‚¹â€ï¼ˆserver endpointï¼‰æ—¶ï¼Œæ¯å°æ—¶æŒ‰åè®®è®¡è´¹ã€‚ä¾‹å¦‚ SFTP æ¯å°æ—¶çº¦ $0.30ï¼ˆç¾ä¸œåŒºåŸŸç¤ºä¾‹ï¼‰Amazon Web Services, Inc. æ— è®ºæœ‰å¤šå°‘ç”¨æˆ·ï¼Œåªè¦ç«¯ç‚¹å¯ç”¨ï¼Œéƒ½åœ¨è®¡è´¹ã€‚ æ•°æ®ä¸Šä¼ &#x2F;ä¸‹è½½é‡ï¼ˆæŒ‰ GBï¼‰ ç”¨æˆ·é€šè¿‡è¯¥ SFTP ä¸Šä¼ æˆ–ä¸‹è½½çš„æ•°æ®é‡ï¼ŒæŒ‰ GB æ”¶è´¹ã€‚ä¾‹å¦‚ SFTP ä¸Šä¼  + ä¸‹è½½æŒ‰ $0.04&#x2F;GBï¼ˆç¾ä¸œç¤ºä¾‹ï¼‰Amazon Web Services, Inc. åªè®¡ç®—é€šè¿‡è¯¥æœåŠ¡åè®®ä¼ è¾“çš„æ•°æ®ï¼Œä¸æ˜¯ S3 é‡Œå·²æœ‰æ•°æ®æœ¬èº«çš„å­˜å‚¨è´¹ç”¨ã€‚ å…¶ä»–åè®®&#x2F;åŠŸèƒ½æ”¶è´¹ æ¯”å¦‚ AS2 æ¶ˆæ¯æ¯æ¡ã€SFTP è¿æ¥å™¨è°ƒç”¨ã€å·¥ä½œæµå¤„ç†ç­‰æœ‰é¢å¤–è´¹ç”¨ã€‚Amazon Web Services, Inc. è‹¥ä½ åªç”¨ç®€å•çš„ â€œç”¨æˆ·é€šè¿‡ SFTP ç™»å…¥ï¼ŒæŠŠæ•°æ®æ”¾åˆ° S3â€ æƒ…å†µï¼Œå¯èƒ½æš‚æ—¶ä¸ç”¨è¿™äº›é¢å¤–åŠŸèƒ½ã€‚ å­˜å‚¨ &amp; è¯·æ±‚ è™½ç„¶ä¸æ˜¯ Transfer Family æœ¬èº«çš„â€œä¸»æ”¶è´¹â€ï¼Œä½†ä½ å°†æ•°æ®å­˜åˆ° Amazon S3ï¼æˆ– Amazon EFS åï¼Œè¦æ”¯ä»˜ S3 çš„å­˜å‚¨è´¹ç”¨ã€è¯·æ±‚ï¼ˆGETï¼PUTï¼‰è´¹ç”¨ã€è·¨åŒºæˆ–è·¨ç½‘ä¼ è¾“è´¹ç”¨ç­‰ã€‚ è¿™æ˜¯è¿ç§»ä¹‹åä½ é¢å¤–éœ€è¦é¢„ç®—çš„ã€‚","categories":[{"name":"è¿ç»´","slug":"è¿ç»´","permalink":"https://maydaychen.github.io/categories/%E8%BF%90%E7%BB%B4/"}],"tags":[{"name":"AWS","slug":"AWS","permalink":"https://maydaychen.github.io/tags/AWS/"}]},{"title":"AWSä½¿ç”¨æ—¥å¿—5--ä½¿ç”¨ç¬¬ä¸‰æ–¹æœåŠ¡è·å–æ‰€æœ‰æœåŠ¡ä¿¡æ¯","slug":"AWSä½¿ç”¨æ—¥å¿—5-ä½¿ç”¨ç¬¬ä¸‰æ–¹æœåŠ¡è·å–æ‰€æœ‰æœåŠ¡ä¿¡æ¯","date":"2025-10-19T03:26:07.000Z","updated":"2025-10-22T01:56:59.785Z","comments":true,"path":"2025/10/19/AWSä½¿ç”¨æ—¥å¿—5-ä½¿ç”¨ç¬¬ä¸‰æ–¹æœåŠ¡è·å–æ‰€æœ‰æœåŠ¡ä¿¡æ¯/","link":"","permalink":"https://maydaychen.github.io/2025/10/19/AWS%E4%BD%BF%E7%94%A8%E6%97%A5%E5%BF%975-%E4%BD%BF%E7%94%A8%E7%AC%AC%E4%B8%89%E6%96%B9%E6%9C%8D%E5%8A%A1%E8%8E%B7%E5%8F%96%E6%89%80%E6%9C%89%E6%9C%8D%E5%8A%A1%E4%BF%A1%E6%81%AF/","excerpt":"","text":"èƒŒæ™¯é¡¹ç›®é“¾æ¥ï¼š https://github.com/aws-samples/aws-auto-inventoryé¡¹ç›®ç›®æ ‡ï¼š å¿«é€Ÿæ‰«æè´¦å·ä¸­çš„èµ„äº§ä¿¡æ¯ï¼Œæ”¯æŒç»„ç»‡çº§æŸ¥æ‰¾ å…·ä½“æ­¥éª¤å®‰è£…AWS cli212345sudo yum remove awsclicurl &quot;https://awscli.amazonaws.com/awscli-exe-linux-x86_64.zip&quot; -o &quot;awscliv2.zip&quot;unzip awscliv2.zipsudo ./aws/install å®‰è£…ç›¸å…³ä¾èµ–123456789dnf install python3-devel gcc makednf install -y autoconf automake libtooldnf install python3-pip# å»ºè®®ä½¿ç”¨érootè´¦å·æ“ä½œpip3 install wheelcd aws-auto-inventorypip3 install -e . AWSç«¯æ“ä½œç”±äºä»£ç çš„é€»è¾‘ï¼Œæˆ‘ä»¬éœ€è¦ç»™ç®¡ç†è´¦å·è·Ÿå­è´¦å·åˆ›å»ºä¸€ä¸ªç›¸åŒçš„roleï¼Œä½†æ˜¯å†…å®¹å¯èƒ½ä¸å¤ªä¸€æ · å­è´¦å·æ·»åŠ trust policy 123456789101112&#123; &quot;Version&quot;: &quot;2012-10-17&quot;, &quot;Statement&quot;: [ &#123; &quot;Effect&quot;: &quot;Allow&quot;, &quot;Principal&quot;: &#123; &quot;AWS&quot;: &quot;arn:aws:iam::&lt;management account ID&gt;:role/OrganizationAccountAccessRole&quot; &#125;, &quot;Action&quot;: &quot;sts:AssumeRole&quot; &#125; ]&#125; æ·»åŠ æƒé™è¿™é‡Œçš„æƒé™æ ¹æ®ä½ è¦æ‰«æä»€ä¹ˆå†…å®¹è€Œå®šï¼Œç”±äºæˆ‘éœ€è¦çŸ¥é“EC2ï¼ŒEBSè¿˜æœ‰Fleet manageré‡Œé¢çš„ç›¸å…³å†…å®¹ï¼Œå› æ­¤æ‰é…ç½®å¦‚ä¸‹ 123456789101112131415161718192021&#123; &quot;Version&quot;: &quot;2012-10-17&quot;, &quot;Statement&quot;: [ &#123; &quot;Sid&quot;: &quot;AllowEC2ReadOnly&quot;, &quot;Effect&quot;: &quot;Allow&quot;, &quot;Action&quot;: [ &quot;ec2:Describe*&quot; ], &quot;Resource&quot;: &quot;*&quot; &#125;, &#123; &quot;Sid&quot;: &quot;AllowSSMDescribe&quot;, &quot;Effect&quot;: &quot;Allow&quot;, &quot;Action&quot;: [ &quot;ssm:Describe*&quot; ], &quot;Resource&quot;: &quot;*&quot; &#125; ]&#125; ç®¡ç†è´¦å·ç®¡ç†è´¦å·éœ€è¦åˆ›å»ºä¸€ä¸ªåŒåroleï¼Œæ³¨æ„å¿…é¡»åŒåï¼Œä¸ç„¶è¿™ä¸ªä»£ç ä¸è®¤ã€‚ã€‚ã€‚ 1234567891011121314151617181920&#123; &quot;Version&quot;: &quot;2012-10-17&quot;, &quot;Statement&quot;: [ &#123; &quot;Sid&quot;: &quot;AllowOrganizationList&quot;, &quot;Effect&quot;: &quot;Allow&quot;, &quot;Action&quot;: [ &quot;organizations:ListAccounts&quot; ], &quot;Resource&quot;: &quot;*&quot; &#125;, &#123; &quot;Sid&quot;: &quot;AllowAssumeInventoryRoleInAllAccounts&quot;, &quot;Effect&quot;: &quot;Allow&quot;, &quot;Action&quot;: &quot;sts:AssumeRole&quot;, &quot;Resource&quot;: &quot;arn:aws:iam::*:role/OrganizationAccountAccessRole&quot; &#125; ]&#125; æŠŠè¿™ä¸ªRoleç»‘å®šç»™æ‰§è¡Œä»£ç çš„EC2 yamlæ–‡ä»¶é…ç½®12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849# AWS Auto Inventory - Example YAML Configurationinventories: - name: my-aws-inventory aws: # AWS profile to use (optional, uses default credentials if not specified)# profile: default # AWS regions to scan region: - ap-southeast-1 # Set to true to scan across all accounts in the organization organization: false # Role name to assume in each account (only used if organization is true) role_name: OrganizationAccountAccessRole # Excel output configuration excel: # Whether to transpose data in Excel output transpose: true # Additional formatting options formatting: header_style: bold: true bg_color: &quot;#4F81BD&quot; font_color: &quot;#FFFFFF&quot; # Sheets to include in the inventory sheets: # EC2 Instances - name: EC2Instances service: ec2 function: describe_instances result_key: Reservations parameters: Filters: - Name: instance-state-name Values: - running - name: SSMInstances service: ssm function: describe_instance_information - name: Volumes service: ec2 function: describe_volumes åœ¨EC2ä¸Šæ‰§è¡Œå‘½ä»¤12cd aws-auto-inventoryaws-auto-inventory --config examples/config_example.yaml --output-dir output --format both å‘ å¯¼å‡ºæ¨¡å—ç¼ºå¤±è¿™ä¸ªä»£ç é‡Œï¼Œç”¨åˆ°äº†ä¸€ä¸ªfrom .output.processor import OutputProcessorï¼Œä½†æ˜¯å®é™…ä¸Šå¯èƒ½æ˜¯ä½œè€…æ ¹æœ¬æ²¡æœ‰ä¸Šä¼ è¿™ä¸ªæ¨¡å—ï¼Œå¯¼è‡´ä»£ç æ ¹æœ¬è¿è¡Œä¸èµ·æ¥è§£å†³æ–¹æ¡ˆï¼š æ³¨é‡Šæ‰cli.pyä¸­çš„ç›¸å…³ä»£ç ï¼Œè‡ªå·±åŠ ä¸Šå¯¼å‡ºåŠŸèƒ½","categories":[{"name":"è¿ç»´","slug":"è¿ç»´","permalink":"https://maydaychen.github.io/categories/%E8%BF%90%E7%BB%B4/"}],"tags":[{"name":"AWS","slug":"AWS","permalink":"https://maydaychen.github.io/tags/AWS/"}]},{"title":"Grafanaä½¿ç”¨æ—¥å¿—12--åœ¨Grafanaç«¯é…ç½®https","slug":"Grafanaä½¿ç”¨æ—¥å¿—12-åœ¨Grafanaç«¯é…ç½®https","date":"2025-09-18T03:21:29.000Z","updated":"2025-09-18T06:19:36.695Z","comments":true,"path":"2025/09/18/Grafanaä½¿ç”¨æ—¥å¿—12-åœ¨Grafanaç«¯é…ç½®https/","link":"","permalink":"https://maydaychen.github.io/2025/09/18/Grafana%E4%BD%BF%E7%94%A8%E6%97%A5%E5%BF%9712-%E5%9C%A8Grafana%E7%AB%AF%E9%85%8D%E7%BD%AEhttps/","excerpt":"","text":"ç”±äºæœ‰ä¸ªé¡¹ç›®ä¸­ä¸éœ€è¦å†ä½¿ç”¨nginxäº†ï¼Œæ‰€ä»¥ä¼šæ”¹æˆç”±AWSç›´æ¥Route53 -&gt; ALB -&gt; Target Group -&gt; Grafanaç«¯å£ä½†æ˜¯è¿‡ç¨‹ä¸­å‘ç°ï¼Œç”±äºGrafanaé»˜è®¤æ˜¯httpåè®®çš„ï¼Œå¯¼è‡´å¦‚æœhttpsçš„æµé‡å‘é€åˆ°Grafanaçš„ç«¯å£åï¼Œä¼šæŠ¥é”™åè®®ä¸æ”¯æŒè¿™æ—¶å€™éœ€è¦æŠŠGrafanaä¹Ÿæ”¹æˆhttpsåè®®çš„ï¼Œè¿™å°±æ˜¯è¿™ç¯‡æ–‡ç« çš„ç”±æ¥ å…¶å®ä¹Ÿå¾ˆç®€å•ï¼Œåªéœ€è¦æ”¹å‡ ä¸ªé…ç½®é¡¹å°±å¯ä»¥äº† ç”Ÿæˆè‡ªç­¾åè¯ä¹¦è¿™ä¸€æ­¥å°±å¾ˆåŸºç¡€äº†ï¼Œè¿™é‡Œä¸å†èµ˜è¿°äº†ï¼Œæœ‰é—®é¢˜çš„å°ä¼™ä¼´ç›´æ¥è¯„è®ºåŒºé—®æˆ‘å°±å¯ä»¥äº†æˆ‘æ˜¯æ”¾åœ¨äº†&#x2F;etc&#x2F;grafana&#x2F;sslè¿™ä¸ªè·¯å¾„ä¸‹çš„ï¼Œå…¶å®æ”¾å“ªé‡Œéƒ½å¯ä»¥ ä¿®æ”¹Grafanaé…ç½®ä¿®æ”¹Grafanaé…ç½®æ–‡ä»¶ï¼Œé»˜è®¤&#x2F;etc&#x2F;grafana&#x2F;grafana.iniä¿®æ”¹æˆå¦‚ä¸‹æ ¼å¼ 123456protocol = httpsroot_url = %(protocol)s://%(domain)s/# ä¸‹é¢ä¸¤ä¸ªæ–‡ä»¶å°±æ˜¯ä¸Šä¸€æ­¥ç”Ÿæˆçš„è‡ªç­¾åè¯ä¹¦cert_file = /etc/grafana/ssl/10.0.128.173.crtcert_key = /etc/grafana/ssl/10.0.128.173.key é‡å¯Grafana1systemctl restart grafana-server ç„¶åå°±å¯ä»¥æ­£å¸¸è®¿é—®äº†","categories":[{"name":"è¿ç»´","slug":"è¿ç»´","permalink":"https://maydaychen.github.io/categories/%E8%BF%90%E7%BB%B4/"}],"tags":[{"name":"ç›‘æ§","slug":"ç›‘æ§","permalink":"https://maydaychen.github.io/tags/%E7%9B%91%E6%8E%A7/"},{"name":"Grafana","slug":"Grafana","permalink":"https://maydaychen.github.io/tags/Grafana/"}]},{"title":"Linuxæ“ä½œè®°å½•11--éšè—OpenSSHç‰ˆæœ¬","slug":"Linuxæ“ä½œè®°å½•11-éšè—OpenSSHç‰ˆæœ¬","date":"2025-09-15T03:16:25.000Z","updated":"2025-09-18T07:03:07.229Z","comments":true,"path":"2025/09/15/Linuxæ“ä½œè®°å½•11-éšè—OpenSSHç‰ˆæœ¬/","link":"","permalink":"https://maydaychen.github.io/2025/09/15/Linux%E6%93%8D%E4%BD%9C%E8%AE%B0%E5%BD%9511-%E9%9A%90%E8%97%8FOpenSSH%E7%89%88%E6%9C%AC/","excerpt":"","text":"æŸ¥çœ‹ç°æœ‰ç‰ˆæœ¬12345678sshd -V[root@ec2-sftp-2 ec2-user]# sshd -vsshd: illegal option -- vOpenSSH_5.3p1, OpenSSL 1.0.1e-fips 11 Feb 2013usage: sshd [-46DdeiqTt] [-b bits] [-C connection_spec] [-c host_cert_file][-f config_file] [-g login_grace_time] [-h host_key_file][-k key_gen_time] [-o option] [-p port] [-u len] è™½ç„¶åœ¨æ—§ç‰ˆæœ¬ä¸­ï¼Œè¿™ä¸ªå‘½ä»¤ä¼šæŠ¥ä¸æ”¯æŒï¼Œä½†æ˜¯è¿˜æ˜¯ä¼šæ˜¾ç¤ºç°åœ¨çš„OpenSSHç‰ˆæœ¬OpenSSH_5.3p1ç°åœ¨æˆ‘ä»¬éœ€è¦æŠŠè¿™ä¸ªç‰ˆæœ¬ä¿®æ”¹æˆä¸€ä¸ªæ›´æ–°çš„ç‰ˆæœ¬ æ€ä¹ˆæ“ä½œ1234567891011121314# å¤‡ä»½åŸæ¥çš„sshdæ–‡ä»¶cp /usr/sbin/sshd /usr/sbin/sshd.bak# ä½¿ç”¨sedå‘½ä»¤å°†æ–‡ä»¶ä¸­çš„5.3æ”¹æˆ9.9sed -i &#x27;s/OpenSSH_5.3/OpenSSH_9.9/g&#x27; `which sshd`# ä¿®æ”¹å®Œæˆåéœ€è¦é‡å¯sshdservice sshd restart# æ£€æŸ¥ç°æœ‰ç‰ˆæœ¬å·sshd -V# æ˜¾ç¤º9.9p1ï¼Œè¯´æ˜ä¿®æ”¹æˆåŠŸ# OpenSSH_9.9p1, OpenSSL 1.0.1e-fips 11 Feb 2013","categories":[{"name":"è¿ç»´","slug":"è¿ç»´","permalink":"https://maydaychen.github.io/categories/%E8%BF%90%E7%BB%B4/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"https://maydaychen.github.io/tags/Linux/"}]},{"title":"AWSä½¿ç”¨æ—¥å¿—4--ä½¿ç”¨EventBridge+Lambda+Config+SNSç›‘æ§ACMè¯ä¹¦è¿‡æœŸ","slug":"AWSä½¿ç”¨æ—¥å¿—4-ä½¿ç”¨EventBridge-Lambda-Config-SNSç›‘æ§ACMè¯ä¹¦è¿‡æœŸ","date":"2025-08-25T07:15:45.000Z","updated":"2025-10-22T02:28:27.755Z","comments":true,"path":"2025/08/25/AWSä½¿ç”¨æ—¥å¿—4-ä½¿ç”¨EventBridge-Lambda-Config-SNSç›‘æ§ACMè¯ä¹¦è¿‡æœŸ/","link":"","permalink":"https://maydaychen.github.io/2025/08/25/AWS%E4%BD%BF%E7%94%A8%E6%97%A5%E5%BF%974-%E4%BD%BF%E7%94%A8EventBridge-Lambda-Config-SNS%E7%9B%91%E6%8E%A7ACM%E8%AF%81%E4%B9%A6%E8%BF%87%E6%9C%9F/","excerpt":"","text":"èƒŒæ™¯é€šå¸¸åœ¨AWSä¸­ï¼Œå¦‚æœæˆ‘ä»¬éœ€è¦ç›‘æ§å•ä¸ªsslè¯ä¹¦çš„è¿‡æœŸæ—¶é—´ï¼Œæˆ‘ä»¬ç›´æ¥ç”¨cloudwatchå³å¯ï¼Œä½†æ˜¯å¦‚æœæˆ‘ä»¬æ˜¯control toweræ§åˆ¶çš„ï¼Œæ‹¥æœ‰å‡ ç™¾ä¸ªè´¦å·ï¼Œé‚£ä¹ˆè¿™æ—¶å€™ä¸€ä¸ªä¸ªæ‰‹åŠ¨åˆ›å»ºcloudwatchå°±æ˜¾å¾—éå¸¸è´¹æ—¶è´¹åŠ›äº†ï¼Œé‚£ä¹ˆæœ‰æ²¡æœ‰åŠæ³•ç›´æ¥ä¸€æ¬¡æ€§ç›‘æ§è¯ä¹¦çš„æœ‰æ•ˆæœŸå‘¢ï¼Ÿæ–¹æ³•è‡ªç„¶æ˜¯æœ‰çš„ï¼Œè¿™é‡Œæ¨èä¸€ç§éå¸¸ç®€å•çš„æ–¹æ³•ï¼Œå³ä½¿ç”¨configæŸ¥è¯¢æ‰€æœ‰è´¦å·çš„æœ‰æ•ˆæœŸ åŸç†åŸç†å…¶å®éå¸¸ç®€å•ï¼Œä¼—æ‰€å‘¨çŸ¥auditè´¦å·ä¸ä»…èƒ½æŸ¥çœ‹è‡ªå·±çš„AWS Configé…ç½®ï¼ŒåŒæ ·ä¹Ÿèƒ½å¤Ÿé€šè¿‡èšåˆå™¨æŸ¥çœ‹å…¶ä»–è´¦å·çš„Configåˆè§„æ€§ï¼Œè¿™é‡Œæˆ‘ä»¬ä½¿ç”¨é»˜è®¤çš„aws-controltower-GuardrailsComplianceAggregatorå³å¯æŸ¥è¯¢åˆ°æ‰€æœ‰çš„è´¦å·çš„ACMåˆè§„æ€§ä¹Ÿå¯ä»¥åœ¨Configä¸­å…ˆç”¨advanced querieså»éªŒè¯æŸ¥è¯¢è¯­å¥çš„æ­£ç¡®æ€§ å®ç°123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960import boto3import datetimeimport jsonimport osAGGREGATOR_NAME = &quot;aws-controltower-GuardrailsComplianceAggregator&quot;SNS_TOPIC_ARN = os.environ.get(&quot;SNS_TOPIC_ARN&quot;) # å»ºè®®ç”¨ç¯å¢ƒå˜é‡é…ç½® SNSdef lambda_handler(event, context): config_client = boto3.client(&quot;config&quot;) sns_client = boto3.client(&quot;sns&quot;) # è®¡ç®— 30 å¤©åçš„æ—¥æœŸï¼Œæ ¼å¼ YYYY-MM-DD date_limit = (datetime.datetime.utcnow() + datetime.timedelta(days=30)).date().isoformat() # æŸ¥è¯¢è¡¨è¾¾å¼ expression = f&quot;&quot;&quot; SELECT accountId, arn, resourceName, configuration.domainName, configuration.notAfter, configuration.type WHERE resourceType = &#x27;AWS::ACM::Certificate&#x27; AND configuration.notAfter &lt;= &#x27;&#123;date_limit&#125;&#x27; AND configuration.type = &#x27;IMPORTED&#x27; ORDER BY configuration.notAfter ASC &quot;&quot;&quot; try: response = config_client.select_aggregate_resource_config( Expression=expression, ConfigurationAggregatorName=AGGREGATOR_NAME ) results = [json.loads(record) for record in response.get(&quot;Results&quot;, [])] print(&quot;æŸ¥è¯¢ç»“æœ:&quot;) for item in results: print(item) # å¦‚æœæ•°é‡å¤§äº 1ï¼Œå°±å‘ SNS if len(results) &gt; 1: message = &quot;ä»¥ä¸‹ ACM è¯ä¹¦å°†åœ¨ 30 å¤©å†…è¿‡æœŸï¼ˆä»…é™ IMPORTED ç±»å‹ï¼‰:\\n&quot; for cert in results: message += f&quot;- Account: &#123;cert[&#x27;accountId&#x27;]&#125;, Domain: &#123;cert.get(&#x27;configuration.domainName&#x27;)&#125;, Expire: &#123;cert[&#x27;configuration.notAfter&#x27;]&#125;\\n&quot; sns_client.publish( TopicArn=SNS_TOPIC_ARN, Subject=&quot;ACM è¯ä¹¦è¿‡æœŸæé†’&quot;, Message=message ) print(&quot;SNS å·²å‘é€&quot;) return &#123; &quot;statusCode&quot;: 200, &quot;body&quot;: results &#125; except Exception as e: print(f&quot;æŸ¥è¯¢å¤±è´¥: &#123;e&#125;&quot;) return &#123; &quot;statusCode&quot;: 500, &quot;body&quot;: str(e) &#125; æ³¨æ„äº‹é¡¹ä¸Šæ–‡ä¹Ÿè¯´å•¦ï¼Œæˆ‘ä»¬ç”¨çš„æ˜¯aws-controltower-GuardrailsComplianceAggregatorè¿™ä¸ªï¼Œä½†æ˜¯éœ€è¦æ³¨æ„è¿™ä¸ªèšåˆå™¨çš„è´¦å·èŒƒå›´ï¼Œå› ä¸ºé»˜è®¤ä¼šæŠŠæ‰€æœ‰çš„è´¦å·éƒ½åŒ…æ‹¬è¿›æ¥ï¼ŒåŒ…æ‹¬UATç­‰ç¯å¢ƒï¼Œæ‰€ä»¥å¦‚æœæˆ‘ä»¬åªéœ€è¦ç›‘æ§Prodç¯å¢ƒï¼Œé‚£ä¹ˆæœ€å¥½çš„åŠæ³•å°±æ˜¯æ–°å»ºä¸€ä¸ªèšåˆå™¨ï¼Œç„¶ååœ¨Source Accountsé‡Œé¢é™å®šè´¦å·èŒƒå›´","categories":[{"name":"è¿ç»´","slug":"è¿ç»´","permalink":"https://maydaychen.github.io/categories/%E8%BF%90%E7%BB%B4/"}],"tags":[{"name":"AWS","slug":"AWS","permalink":"https://maydaychen.github.io/tags/AWS/"}]},{"title":"Prometheusé—®é¢˜è®°å½•1--ArgocdClusterConnectionDownè¯¯æŠ¥","slug":"Prometheusé—®é¢˜è®°å½•1-ArgocdClusterConnectionDownè¯¯æŠ¥","date":"2025-08-25T02:22:39.000Z","updated":"2025-08-25T02:51:03.509Z","comments":true,"path":"2025/08/25/Prometheusé—®é¢˜è®°å½•1-ArgocdClusterConnectionDownè¯¯æŠ¥/","link":"","permalink":"https://maydaychen.github.io/2025/08/25/Prometheus%E9%97%AE%E9%A2%98%E8%AE%B0%E5%BD%951-ArgocdClusterConnectionDown%E8%AF%AF%E6%8A%A5/","excerpt":"","text":"èƒŒæ™¯æœ€è¿‘å‘ç°é›†æˆçš„zabbix&#x2F;prometheusä¸€ç›´åœ¨æŠ¥Argocdé›†ç¾¤è¿æ¥é—®é¢˜ï¼Œä½†æ˜¯åœ¨Argocdé¡µé¢ä¸Šçœ‹åˆæ˜¯æ­£å¸¸çš„ï¼ŒåŸè¡¨è¾¾å¼ 12345678- alert: &quot;Argocd Cluster Connection Down&quot; expr: argocd_cluster_connection_status&#123;status=&quot;down&quot;&#125; &gt; 0 for: 5m labels: severity: warning annotations: summary: Argocd Cluster Connection Unhealthy (instance &#123;&#123; $labels.instance &#125;&#125;) description: &quot;Service &#123;&#123; $labels.name &#125;&#125; Argocd Cluster Connection is down.\\n VALUE = &#123;&#123; $value &#125;&#125;\\n LABELS = &#123;&#123; $labels &#125;&#125;&quot; è§£å†³åŠæ³•å‚è€ƒMR: https://github.com/argoproj/argo-cd/pull/7419è§£æï¼šargocd_cluster_connection_statusä»¥å‰è¿”å›0è¡¨ç¤ºæ²¡é—®é¢˜ï¼Œåæ¥å€’äº†ä¸€ä¸‹ï¼Œå¦‚æœè¿”å›1è¯´æ˜æ²¡é—®é¢˜ï¼Œæ‰€ä»¥å¯¼è‡´äº†argocdå‡çº§ä¹‹åä¸€ç›´è¿”å›0ï¼Œè€ŒPrometheusçš„ruleæ²¡æœ‰å¯¹åº”çš„å‡çº§ï¼Œå¯¼è‡´äº†è¯¯æŠ¥ ä¿®æ”¹ä»¥å12345678910name: Argocd Cluster Connection Downexpr: argocd_cluster_connection_status &lt; 1for: 5mlabels:severity: warningannotations:description: Service &#123;&#123; $labels.name &#125;&#125; Argocd Cluster Connection is down. VALUE = &#123;&#123; $value &#125;&#125; LABELS = &#123;&#123; $labels &#125;&#125;summary: Argocd Cluster Connection Unhealthy (instance &#123;&#123; $labels.instance &#125;&#125;) é—®é¢˜è§£å†³","categories":[{"name":"è¿ç»´","slug":"è¿ç»´","permalink":"https://maydaychen.github.io/categories/%E8%BF%90%E7%BB%B4/"}],"tags":[{"name":"ç›‘æ§","slug":"ç›‘æ§","permalink":"https://maydaychen.github.io/tags/%E7%9B%91%E6%8E%A7/"},{"name":"Prometheus","slug":"Prometheus","permalink":"https://maydaychen.github.io/tags/Prometheus/"}]},{"title":"AWSä½¿ç”¨æ—¥å¿—3--HTTPCode_ELB_4XX_Countå’ŒHTTPCode_Target_4XX_Countçš„åŒºåˆ«","slug":"AWSä½¿ç”¨æ—¥å¿—3--HTTPCode-ELB-4XX-Countå’ŒHTTPCode-Target-4XX-Countçš„åŒºåˆ«","date":"2025-08-24T09:27:53.000Z","updated":"2025-08-25T07:14:53.347Z","comments":true,"path":"2025/08/24/AWSä½¿ç”¨æ—¥å¿—3--HTTPCode-ELB-4XX-Countå’ŒHTTPCode-Target-4XX-Countçš„åŒºåˆ«/","link":"","permalink":"https://maydaychen.github.io/2025/08/24/AWS%E4%BD%BF%E7%94%A8%E6%97%A5%E5%BF%973--HTTPCode-ELB-4XX-Count%E5%92%8CHTTPCode-Target-4XX-Count%E7%9A%84%E5%8C%BA%E5%88%AB/","excerpt":"","text":"æé—®è¿™ä¸¤ä¸ªmetricåœ¨AWSä¸­åˆ°åº•ä»£è¡¨äº†ä»€ä¹ˆï¼Ÿ å›ç­”è¿™æ˜¯ç”¨äºå¸®åŠ©è¯Šæ–­é”™è¯¯æ‰€åœ¨çš„2ç§åº¦é‡æ ‡å‡†ï¼Œç”¨äºè¯Šæ–­4XXé”™è¯¯ã€‚ HTTPCode_ELB_4XX_Count â€“ è¿™æ˜¯ä»ELBè¿”å›çš„4XXä¸ªé”™è¯¯çš„æ•°é‡ã€‚HTTPCode_Target_4XX_Count â€“ è¿™åªæ˜¯ä»åº”ç”¨æœåŠ¡å™¨è¿”å›çš„4XXé”™è¯¯ã€‚ ä¹Ÿå°±æ˜¯è¯´ï¼ŒHTTPCode_ELB_4XX_Countæ˜¯æ¥è‡ªè´Ÿè½½å‡è¡¡å™¨çš„4xxå“åº”ä»£ç çš„è®¡æ•°ï¼Œè€Œä¸æ˜¯ç›®æ ‡çš„è®¡æ•°ï¼Œä¾‹å¦‚ï¼Œåœ¨è´Ÿè½½å‡è¡¡å™¨ä¹Ÿä¸çŸ¥é“åœ¨å“ªé‡Œè½¬å‘è¯·æ±‚çš„æƒ…å†µä¸‹,ELBä¼šç›´æ¥æŠ¥é”™4XXç±»ä¼¼åœ°ï¼ŒHTTPCode_Target_4XX_Countåªè¡¨ç¤ºæ¥è‡ªç›®æ ‡ç»„çš„4xxå“åº”çš„è®¡æ•°ï¼Œè€Œä¸æ˜¯è´Ÿè½½å‡è¡¡å™¨ï¼Œä¾‹å¦‚è®¿é—®applicationè¢«æ‹’ç»ï¼Œæ­¤æ—¶çˆ†å‡ºçš„403ç­‰é”™è¯¯å°±å±äºHTTPCode_Target_4XX_Count å‚è€ƒé“¾æ¥ï¼š https://docs.aws.amazon.com/elasticloadbalancing/latest/application/load-balancer-cloudwatch-metrics.html","categories":[{"name":"è¿ç»´","slug":"è¿ç»´","permalink":"https://maydaychen.github.io/categories/%E8%BF%90%E7%BB%B4/"}],"tags":[{"name":"AWS","slug":"AWS","permalink":"https://maydaychen.github.io/tags/AWS/"}]},{"title":"n8nä½¿ç”¨ç¬”è®°1--JSONè½¬HTMLè¸©å‘","slug":"n8nä½¿ç”¨ç¬”è®°1-JSONè½¬HTMLè¸©å‘","date":"2025-08-21T07:11:50.000Z","updated":"2025-08-21T07:11:50.685Z","comments":true,"path":"2025/08/21/n8nä½¿ç”¨ç¬”è®°1-JSONè½¬HTMLè¸©å‘/","link":"","permalink":"https://maydaychen.github.io/2025/08/21/n8n%E4%BD%BF%E7%94%A8%E7%AC%94%E8%AE%B01-JSON%E8%BD%ACHTML%E8%B8%A9%E5%9D%91/","excerpt":"","text":"","categories":[],"tags":[]},{"title":"Linuxæ“ä½œè®°å½•10--Gitå‡çº§ç¬”è®°","slug":"Linuxæ“ä½œè®°å½•10-Gitå‡çº§ç¬”è®°","date":"2025-08-21T05:42:20.000Z","updated":"2025-08-21T05:47:40.659Z","comments":true,"path":"2025/08/21/Linuxæ“ä½œè®°å½•10-Gitå‡çº§ç¬”è®°/","link":"","permalink":"https://maydaychen.github.io/2025/08/21/Linux%E6%93%8D%E4%BD%9C%E8%AE%B0%E5%BD%9510-Git%E5%8D%87%E7%BA%A7%E7%AC%94%E8%AE%B0/","excerpt":"","text":"ä¸‹è½½Gitå¦‚æœå·²ç»æœ‰Gitäº†ï¼Œå¯ä»¥ç›´æ¥é€šè¿‡gitå‘½ä»¤ä¸‹è½½ 1git clone https://github.com/git/git å¦‚æœæ²¡æœ‰gitï¼Œé‚£å¯ä»¥ç›´æ¥ä¸‹è½½taråŒ… è§£å‹ç¼©æ–‡ä»¶12tar -zxvf git-2.34.1.tar.gz å®‰è£…å¿…è¦å·¥å…·tar -zxvf git-2.34.1.tar.gz 12yum install curl-devel expat-devel gettext-devel openssl-devel zlib-devel gcc perl-ExtUtils-MakeMakertar -zxvf git-2.34.1.tar.gz å¸è½½è€ç‰ˆæœ¬gitå¦‚æœæˆ‘ä»¬ä¹‹å‰å·²ç»å®‰è£…è¿‡gitäº†ï¼Œé‚£ä¹ˆéœ€è¦å…ˆå¸è½½æ—§ç‰ˆæœ¬ 1yum remove git é€šè¿‡makeå®‰è£…1234make prefix=/opt/git allmake prefix=/opt/git install æ£€æŸ¥å®‰è£…æˆæœé€šè¿‡gitå‘½ä»¤æ£€æŸ¥ç‰ˆæœ¬å³å¯ï¼Œå¦‚æœæ˜¯æœ€æ–°ç‰ˆçš„å°±è¯´æ˜å®‰è£…æ²¡æœ‰é—®é¢˜","categories":[{"name":"è¿ç»´","slug":"è¿ç»´","permalink":"https://maydaychen.github.io/categories/%E8%BF%90%E7%BB%B4/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"https://maydaychen.github.io/tags/Linux/"}]},{"title":"Grafanaä½¿ç”¨æ—¥å¿—11--å°†dashboardå¯¼å‡ºä¸ºpdf","slug":"Grafanaä½¿ç”¨æ—¥å¿—11-å°†dashboardå¯¼å‡ºä¸ºpdf","date":"2025-08-21T03:18:11.000Z","updated":"2025-08-21T05:16:05.299Z","comments":true,"path":"2025/08/21/Grafanaä½¿ç”¨æ—¥å¿—11-å°†dashboardå¯¼å‡ºä¸ºpdf/","link":"","permalink":"https://maydaychen.github.io/2025/08/21/Grafana%E4%BD%BF%E7%94%A8%E6%97%A5%E5%BF%9711-%E5%B0%86dashboard%E5%AF%BC%E5%87%BA%E4%B8%BApdf/","excerpt":"","text":"èƒŒæ™¯åœ¨QAå›¢é˜Ÿåšè´Ÿè½½æµ‹è¯•çš„æ—¶å€™ï¼Œéœ€è¦äº§å‡ºè´Ÿè½½æŠ¥å‘Šï¼Œè¿™æ—¶å€™ä»–ä»¬è¦æ±‚ç›´æ¥ä»Grafanaå¯¼å‡ºæŠ¥å‘Šï¼Œå› æ­¤æ‰æœ‰äº†è¿™ç¯‡æ–‡ç«  å®ç°ä½¿ç”¨ç¬¬ä¸‰æ–¹ï¼š https://github.com/IzakMarais/reporter å®‰è£…grafana-reporter123456sudo yum install go -ysudo yum install -y gitsudo yum install -y texlive-latexsudo yum install texlive texlive-science -y/usr/local/go/bin/go install -v github.com/IzakMarais/reporter/cmd/grafana-reporter@latestnohup go/bin/grafana-reporter &amp; é…ç½®nginxæˆ‘ä»¬éœ€è¦é…ç½® nginx ä»¥å…è®¸è®¿é—® 8686 ç«¯å£ã€‚åŒæ—¶ï¼Œæˆ‘ä»¬éœ€è¦è®¾ç½®è¶…æ—¶æ—¶é—´ï¼Œå› ä¸ºæ­¤åŠŸèƒ½å°†è€—æ—¶è¾ƒé•¿ã€‚ 123sudo vi /etc/nginx/conf.d/grafana.confsudo nginx -s reload å®‰è£…å¿…è¦è½¯ä»¶åŒ…12sudo yum -y install libX11 libXcomposite libXcursor libXdamage libXext libXi libXtst cups-libs libXScrnSaver libXrandr alsa-lib pango atk at-spi2-atk gtk3sudo yum install alsa-lib-devel -y å®‰è£…Grafanaæ’ä»¶12sudo grafana-cli plugins install grafana-image-renderersudo systemctl restart grafana-server ç”ŸæˆAPI Keyæˆ‘ä»¬éœ€è¦ä¸€ä¸ªå¯†é’¥æ¥è®¿é—®å¯ä»¥ç”ŸæˆPDFçš„ç½‘å€ï¼Œå¦‚æœä¸ä½¿ç”¨æ­¤å¯†é’¥ï¼ŒAPIå°†è¿”å›401é”™è¯¯ 401çš„å¦ä¸€ç§è§£å†³æ–¹æ¡ˆæˆ‘ä»¬å¯ä»¥æ›´æ”¹Grafanaçš„é…ç½®ï¼Œæ­¤æ“ä½œå°†å…è®¸ä»»ä½•äººæ— éœ€ç™»å½•å³å¯è®¿é—®Grafanaï¼Œå› æ­¤ä¸å»ºè®®è¿™æ ·åšã€‚ 1234567[auth.anonymous]# enable anonymous accessenabled = true# specify organization name that should be used for unauthenticated usersorg_name = Main Org.# specify role for unauthenticated usersorg_role = Viewer ä¿®æ”¹ALB timeoutä¸è¦å¿˜è®°è¿™ä¸€éƒ¨åˆ†ï¼è¯·å°†è¶…æ—¶æ—¶é—´æ”¹ä¸º300ç§’ï¼ˆä¸nginxé…ç½®ç›¸åŒï¼‰ï¼Œä¸ç„¶ä¼šåœ¨ALBç«¯æŠ¥è¶…æ—¶å¹¶æ–­å¼€è¿æ¥** è¿™ä¸ªæ˜¯é’ˆå¯¹AWSçš„è¯´æ³•ï¼Œå¯¹äºå…¶ä»–äº‘å¹³å°å¯èƒ½åå­—ä¸ä¸€æ · ä¸ºdashboardæ·»åŠ link ç‚¹å‡»æ­¤æŒ‰é’®åï¼Œç­‰å¾…å¤§çº¦2åˆ†é’Ÿï¼ˆå–å†³äºé¢æ¿æ•°é‡ï¼Œé¢æ¿è¶Šå¤šï¼Œæ‰€éœ€ç­‰å¾…æ—¶é—´è¶Šé•¿ï¼‰ã€‚ ç„¶åæˆ‘ä»¬å°†åœ¨æµè§ˆå™¨ä¸­çœ‹åˆ°PDFæ–‡ä»¶ï¼Œå¦‚æœæƒ³è¦ä¸‹è½½ï¼Œå¯ä»¥ç‚¹å‡»é¡¶éƒ¨çš„â€œä¸‹è½½â€æŒ‰é’®ï¼ˆåœ¨Microsoft Edgeä¸­è¯¥æŒ‰é’®å¯èƒ½æ˜¾ç¤ºä¸ºâ€œä¿å­˜â€ï¼‰ã€‚ é—®é¢˜è®°å½•Error obtaining render:500 Internal Server ErroråŸå› æ ¹æ®Grafanaçš„é…ç½®ï¼ŒGrafanaå®é™…ä¸Šå·²ç»è¶…æ—¶ï¼Œä½†è¯¥åŠŸèƒ½å¹¶æœªè¶…æ—¶ï¼Œè¿™å°†å¯¼è‡´è¯¥åŠŸèƒ½æ— æ³•è¿æ¥åˆ°Grafanaï¼Œå› æ­¤ä¼šå‡ºç°ç±»ä¼¼çš„é”™è¯¯æŠ¥å‘Šã€‚ è§£å†³æ–¹æ¡ˆæˆ‘ä»¬éœ€è¦åœ¨è°ƒç”¨ç”Ÿæˆ PDF åŠŸèƒ½çš„ Grafana é“¾æ¥æœ«å°¾æ·»åŠ å‚æ•° timeout&#x3D;600ã€‚è¿™å°†æŠŠ Grafana çš„è¶…æ—¶æ—¶é—´è®¾ç½®ä¸º 600 ç§’ï¼Œä¸å®¹æ˜“å¯¼è‡´è¶…æ—¶ï¼Œå¹¶ä¸”å°†æœ‰è¶³å¤Ÿçš„æ—¶é—´ç”Ÿæˆ PDFã€‚ å¤‡æ³¨æ­¤åŠŸèƒ½å°†ä½¿ç”¨å¤§é‡å†…å­˜ï¼Œå› æ­¤å¦‚æœæˆ‘ä»¬çš„GrafanaæœåŠ¡å™¨ä»…æœ‰2Gå†…å­˜ï¼Œæ­¤åŠŸèƒ½å°†å¯¼è‡´OOMï¼ˆå†…å­˜æº¢å‡ºï¼‰ã€‚å› æ­¤ï¼Œå¦‚æœæˆ‘ä»¬æƒ³è¦ä½¿ç”¨æ­¤åŠŸèƒ½ï¼Œå¿…é¡»å°†å†…å­˜æ‰©å®¹è‡³è‡³å°‘4Gã€‚","categories":[{"name":"è¿ç»´","slug":"è¿ç»´","permalink":"https://maydaychen.github.io/categories/%E8%BF%90%E7%BB%B4/"}],"tags":[{"name":"ç›‘æ§","slug":"ç›‘æ§","permalink":"https://maydaychen.github.io/tags/%E7%9B%91%E6%8E%A7/"},{"name":"Grafana","slug":"Grafana","permalink":"https://maydaychen.github.io/tags/Grafana/"}]},{"title":"Grafanaä½¿ç”¨æ—¥å¿—10--æ¥å…¥keycloakéªŒè¯","slug":"Grafanaä½¿ç”¨æ—¥å¿—10--æ¥å…¥keycloakéªŒè¯","date":"2025-08-18T02:40:34.000Z","updated":"2025-08-21T03:15:46.656Z","comments":true,"path":"2025/08/18/Grafanaä½¿ç”¨æ—¥å¿—10--æ¥å…¥keycloakéªŒè¯/","link":"","permalink":"https://maydaychen.github.io/2025/08/18/Grafana%E4%BD%BF%E7%94%A8%E6%97%A5%E5%BF%9710--%E6%8E%A5%E5%85%A5keycloak%E9%AA%8C%E8%AF%81/","excerpt":"","text":"èƒŒæ™¯ä¼—æ‰€å‘¨çŸ¥ï¼Œåœ¨Grafanaä¸­è‡ªå¸¦çš„è´¦å·ä½“ç³»æ˜¯æ²¡æœ‰åŠæ³•æ”¯æŒMFAçš„ï¼Œåªèƒ½é€šè¿‡ç¬¬ä¸‰æ–¹æ¥æ”¯æŒMFAï¼Œè€Œå…¶ä»–çš„MFAå·¥å…·å› ä¸ºå„ç§åŸå› éƒ½ä¸å¤ªå¥½ç”¨ï¼Œæ‰€ä»¥è¿™é‡Œé€‰æ‹©äº†keycloakä½œä¸ºç¬¬ä¸‰æ–¹çš„å·¥å…·ä¸‹é¢å°±æ¥ä»‹ç»ä¸€ä¸‹å¦‚ä½•å¯¹æ¥keycloakä½œä¸ºç¬¬ä¸‰æ–¹ç™»å½•å·¥å…· å®ç°æ€»ç»“","categories":[{"name":"è¿ç»´","slug":"è¿ç»´","permalink":"https://maydaychen.github.io/categories/%E8%BF%90%E7%BB%B4/"}],"tags":[{"name":"ç›‘æ§","slug":"ç›‘æ§","permalink":"https://maydaychen.github.io/tags/%E7%9B%91%E6%8E%A7/"},{"name":"Grafana","slug":"Grafana","permalink":"https://maydaychen.github.io/tags/Grafana/"}]},{"title":"AIå°è¯•ç¬”è®°4--é€šè¿‡n8nå‘é€ä¿¡æ¯","slug":"AIå°è¯•ç¬”è®°4-é€šè¿‡n8nå‘é€ä¿¡æ¯","date":"2025-08-16T06:48:30.000Z","updated":"2025-08-16T08:09:05.166Z","comments":true,"path":"2025/08/16/AIå°è¯•ç¬”è®°4-é€šè¿‡n8nå‘é€ä¿¡æ¯/","link":"","permalink":"https://maydaychen.github.io/2025/08/16/AI%E5%B0%9D%E8%AF%95%E7%AC%94%E8%AE%B04-%E9%80%9A%E8%BF%87n8n%E5%8F%91%E9%80%81%E4%BF%A1%E6%81%AF/","excerpt":"","text":"ä»æ¥æ²¡æƒ³è¿‡é€šè¿‡TGå‘é€æ¶ˆæ¯ç«Ÿç„¶è¿™ä¹ˆç®€å•,ä¸‹é¢è®°å½•ä¸€ä¸‹é€šè¿‡TGå‘é€æ¶ˆæ¯çš„è¯¦ç»†æ­¥éª¤ åˆ›å»ºæœºå™¨äººæˆ‘ä»¬åªéœ€è¦æ‰¾åˆ°ä¸€ä¸ªå«åšBotFatherçš„è´¦å·ï¼Œç„¶åè¾“å…¥&#x2F;newbotä»–ä¼šè¦æ±‚ä½ è¾“å…¥ä»¥ä¸‹å†…å®¹ æœºå™¨äººçš„åå­— æœºå™¨äººçš„ç”¨æˆ·åï¼ˆå¿…é¡»ä»¥_botç»“å°¾ï¼‰ ä¹‹åå¦‚æœåˆ›å»ºæˆåŠŸï¼Œä¼šç»™ä½ è¿”å›ä¸€ä¸ªtokenï¼Œè¯·åŠ¡å¿…è®°ä½è¿™ä¸ªtokenï¼Œå› ä¸ºn8nä¸­éœ€è¦ n8nè®¾ç½®Credentialåœ¨n8nä¸­åˆ›å»ºä¸€ä¸ªcredentialï¼Œé€‰æ‹©telegramï¼Œç„¶åä¼šè¦æ±‚ä½ è¾“å…¥ä¸€ä¸ªAccess Tokenå°†åˆšæ‰BotFatherç»™ä½ çš„tokenè¾“å…¥å³å¯ å‘é€æ¶ˆæ¯åˆ°ç¾¤èŠå¦‚æœæƒ³è¦è®©è¿™ä¸ªBotè‡ªåŠ¨å‘é€æ¶ˆæ¯ï¼Œéœ€è¦é…ç½®ä¸€ä¸ªchatidåˆ›å»ºç¾¤èŠçš„æ“ä½œè¿™é‡Œå°±ä¸å¤šè¯´ï¼Œ è·Ÿå¾®ä¿¡ä»€ä¹ˆçš„éƒ½æ˜¯ä¸€æ ·çš„åœ¨åˆ›å»ºç¾¤èŠä¹‹åï¼Œæˆ‘ä»¬åœ¨æµè§ˆå™¨ç«¯è®¿é—®APIhttps://api.telegram.org/bot[token]/getUpdateså°†[token]æ¢æˆåˆšæ‰æˆ‘ä»¬è·å–åˆ°çš„Tokenï¼ŒAPIä¼šè¿”å›ä¸€ä¸ªJSONå…¶ä¸­â€idâ€è¿™ä¸ªå­—æ®µå°±æ˜¯æˆ‘ä»¬æƒ³è¦çš„ï¼Œå¦‚æœæ˜¯ç¾¤èŠçš„è¯ä¼šä»¥â€˜-â€™å¼€å¤´åˆ‡è®°åœ¨n8nä¸­å°†è¿™ä¸ªâ€˜-â€™ä¹Ÿç²˜è´´è¿›å»ï¼Œä¸ç„¶ä¼šæŠ¥æ‰¾ä¸åˆ°chatid","categories":[{"name":"AI","slug":"AI","permalink":"https://maydaychen.github.io/categories/AI/"}],"tags":[]},{"title":"Macä¼˜åŒ–è®°å½•4--ä¿®æ”¹ç³»ç»Ÿè·¯ç”±è¡¨","slug":"Macä¼˜åŒ–è®°å½•4-ä¿®æ”¹ç³»ç»Ÿè·¯ç”±è¡¨","date":"2025-08-15T09:16:36.000Z","updated":"2025-08-15T09:58:24.000Z","comments":true,"path":"2025/08/15/Macä¼˜åŒ–è®°å½•4-ä¿®æ”¹ç³»ç»Ÿè·¯ç”±è¡¨/","link":"","permalink":"https://maydaychen.github.io/2025/08/15/Mac%E4%BC%98%E5%8C%96%E8%AE%B0%E5%BD%954-%E4%BF%AE%E6%94%B9%E7%B3%BB%E7%BB%9F%E8%B7%AF%E7%94%B1%E8%A1%A8/","excerpt":"","text":"èƒŒæ™¯ç”±äºé¡¹ç›®éœ€è¦ä½¿ç”¨VPNè½¯ä»¶æ‰èƒ½è¿æ¥åˆ°ç‰¹å®šçš„ç¯å¢ƒï¼Œä½†æ˜¯è¿æ¥VPNä¹‹åï¼Œå†…ç½‘çš„æœåŠ¡å°±è¿ä¸ä¸Šäº†ï¼Œå°±å¯¼è‡´äº†æ²¡æ³•è¿æ¥æ‰“å°æœºæˆ–è€…æ˜¯å†…ç½‘çš„æœåŠ¡å™¨ï¼Œæ•…è€Œäº§ç”Ÿäº†è¿™ä¸ªæ–‡ç« ï¼Œç ”ç©¶äº†æ€ä¹ˆåœ¨è¿æ¥VPNçš„åŒæ—¶è¿˜èƒ½å¤Ÿè¿æ¥åˆ°æœ¬åœ°çš„æœåŠ¡å™¨ å®ç°æ–¹æ¡ˆè¿™é‡Œæˆ‘æ‰ç”¨çš„æ˜¯ä¿®æ”¹è·¯ç”±è¡¨çš„æ–¹å¼ï¼Œå°†éœ€è¦è¿æ¥çš„å†…ç½‘ipå¼ºåˆ¶è½¬æˆèµ°æœ¬åœ°è·¯ç”± æŸ¥è¯¢å½“å‰è·¯ç”±è¡¨1netstat -rn å¯ä»¥çœ‹åˆ°è¿™æ ·çš„ç»“æœ,æˆ‘å·²ç»è®©GPTç»™æˆ‘è§£æäº†ä¸€ä¸‹ å¯ä»¥çœ‹åˆ°ï¼Œç°åœ¨é»˜è®¤æ‰€æœ‰çš„ç›®æ ‡ç½‘æ®µéƒ½èµ°äº†VPNäº†ï¼Œè¿™å°±å¯¼è‡´äº†æ— æ³•è¿æ¥å†…ç½‘ å…³é”®ç‚¹ç¬¬ä¸€æ¡ defaultï¼ˆVPNï¼‰ï¼šç½‘å…³ï¼š10.11.11.6ï¼ˆVPN æœåŠ¡å™¨åˆ†é…çš„è™šæ‹Ÿç½‘å…³ï¼‰ã€‚æ¥å£ï¼šutun23ï¼ˆVPN è™šæ‹Ÿæ¥å£ï¼‰ã€‚Flagsï¼šUGScgï¼ˆU&#x3D;å¯ç”¨ï¼ŒG&#x3D;ç½‘å…³ï¼ŒS&#x3D;é™æ€ï¼Œc&#x3D;å…‹éš†ï¼Œg&#x3D;ç½‘å…³ç¼“å­˜ï¼‰ã€‚ä¼˜å…ˆçº§æ›´é«˜ï¼šå› ä¸º gï¼ˆç½‘å…³ç¼“å­˜ï¼‰æ ‡å¿—è¡¨ç¤ºå®ƒæ˜¯ç³»ç»Ÿå½“å‰ç”Ÿæ•ˆçš„é»˜è®¤è·¯ç”±ã€‚ ç¬¬äºŒæ¡ defaultï¼ˆæœ¬åœ°ï¼‰ï¼šç½‘å…³ï¼š10.0.95.254ï¼ˆæœ¬åœ°è·¯ç”±å™¨æˆ–å…‰çŒ«çš„ IPï¼‰ã€‚æ¥å£ï¼šen0ï¼ˆç‰©ç†ç½‘å¡ï¼Œå¦‚ Wi-Fi&#x2F;ä»¥å¤ªç½‘ï¼‰ã€‚Flagsï¼šUGScIgï¼ˆI&#x3D;é—´æ¥è·¯ç”±ï¼Œé€šå¸¸è¡¨ç¤ºå¤‡ç”¨è·¯ç”±ï¼‰ã€‚ä¼˜å…ˆçº§æ›´ä½ï¼šI æ ‡å¿—è¡¨æ˜å®ƒæ˜¯å¤‡é€‰è·¯ç”±ï¼Œä»…åœ¨ä¸»è·¯ç”±å¤±æ•ˆæ—¶ä½¿ç”¨ã€‚ é…ç½®æ–°è·¯ç”±è§„åˆ™ä»¥10.0.199.111ä¸ºä¾‹ 1sudo route -n add 10.0.199.111/32 10.0.95.254 &#x2F;32 è¡¨ç¤ºç²¾ç¡®åŒ¹é…å•ä¸ª IPã€‚10.0.95.254 éœ€æ›¿æ¢ä¸ºä½ çš„å®é™…æœ¬åœ°ç½‘å…³ï¼ˆé€šè¿‡ netstat -rn | grep default ç¡®è®¤ï¼‰ã€‚ éªŒè¯è·¯ç”±æ˜¯å¦ç”Ÿæ•ˆç»§ç»­ä½¿ç”¨å‘½ä»¤ 1netstat -rn å¯ä»¥çœ‹åˆ°å¦‚ä¸‹ä¸€æ¡ 110.0.199.111/32 10.0.95.254 UGSc en0 è¡¨ç¤ºéªŒè¯é€šè¿‡ é‡å¯åè·¯ç”±è¢«è¦†ç›–å½“ç”µè„‘é‡å¯ä¹‹åï¼Œå†æ¬¡æ— æ³•è¿æ¥ï¼ŒåŸå› åœ¨äºè·¯ç”±è¡¨è¢«é‡æ–°è¦†ç›–è¿™æ—¶å€™åªéœ€è¦åˆ›å»ºä¸€ä¸ªè„šæœ¬ï¼Œåœ¨é‡å¯ä¹‹åè¿è¡Œå³å¯ 123456#!/bin/bash# åˆ é™¤å¯èƒ½å†²çªçš„è·¯ç”±sudo route -n delete 10.0.199.111/32 10.11.11.1 2&gt;/dev/null# æ·»åŠ æœ¬åœ°è·¯ç”±sudo route -n add 10.0.199.111/32 10.0.95.254echo &quot;å·²å¼ºåˆ¶ 10.0.199.111 èµ°æœ¬åœ°ç½‘ç»œ&quot; å°†è„šæœ¬ä¿å­˜ä¸ºfix_route.shå¹¶è¿è¡Œå³å¯ 12chmod +x fix_route.sh./fix_route.sh å¼€æœºè‡ªåŠ¨ä¿®æ”¹è·¯ç”±è¡¨å¦‚æœæƒ³å¼€æœºè‡ªåŠ¨ä¿®æ”¹çš„è¯ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨cron 1234crontab -e# æ·»åŠ ä¸€è¡Œ@reboot /path/fix_route.sh","categories":[{"name":"Tools","slug":"Tools","permalink":"https://maydaychen.github.io/categories/Tools/"}],"tags":[{"name":"MacOS","slug":"MacOS","permalink":"https://maydaychen.github.io/tags/MacOS/"}]},{"title":"AWSä½¿ç”¨æ—¥å¿—2--Configä½¿ç”¨ç›¸å…³","slug":"AWSä½¿ç”¨æ—¥å¿—2-Configä½¿ç”¨ç›¸å…³","date":"2025-08-14T09:50:46.000Z","updated":"2025-08-18T02:23:08.715Z","comments":true,"path":"2025/08/14/AWSä½¿ç”¨æ—¥å¿—2-Configä½¿ç”¨ç›¸å…³/","link":"","permalink":"https://maydaychen.github.io/2025/08/14/AWS%E4%BD%BF%E7%94%A8%E6%97%A5%E5%BF%972-Config%E4%BD%BF%E7%94%A8%E7%9B%B8%E5%85%B3/","excerpt":"","text":"ä»€ä¹ˆæ˜¯Configèµ„æºç®¡ç†ä¸ºäº†æ›´å¥½åœ°ç®¡ç†æ‚¨çš„èµ„æºé…ç½®å¹¶æ£€æµ‹èµ„æºçš„é”™è¯¯é…ç½®ï¼Œæ‚¨éœ€éšæ—¶è¯¦ç»†äº†è§£å­˜åœ¨å“ªäº›èµ„æºä»¥åŠè¿™äº›èµ„æºçš„é…ç½®æ–¹å¼ã€‚æ— è®ºä½•æ—¶åˆ›å»ºã€ä¿®æ”¹æˆ–åˆ é™¤èµ„æºï¼Œæ‚¨éƒ½å¯ä»¥ä½¿ç”¨ AWS Config é€šçŸ¥æ‚¨ï¼Œè€Œä¸å¿…é€šè¿‡è½®è¯¢å¯¹æ¯ä¸ªèµ„æºçš„è°ƒç”¨æ¥ç›‘æ§è¿™äº›æ›´æ”¹ã€‚æ‚¨å¯ä»¥ä½¿ç”¨ AWS Config è§„åˆ™æ¥è¯„ä¼° AWS èµ„æºçš„é…ç½®è®¾ç½®ã€‚å½“ AWS Config æ£€æµ‹åˆ°æŸä¸ªèµ„æºè¿åäº†æ‚¨çš„æŸæ¡è§„åˆ™ä¸­çš„æ¡ä»¶æ—¶ï¼Œä¼šå°†è¯¥èµ„æº AWS Config æ ‡è®°ä¸ºä¸åˆè§„å¹¶å‘é€é€šçŸ¥ã€‚ AWS Config åœ¨åˆ›å»ºã€æ›´æ”¹æˆ–åˆ é™¤æ‚¨çš„èµ„æºæ—¶æŒç»­å¯¹å…¶è¿›è¡Œè¯„ä¼°ã€‚ å®¡è®¡ä¸åˆè§„æ€§æ‚¨ä½¿ç”¨çš„æ•°æ®å¯èƒ½éœ€è¦é¢‘ç¹å®¡è®¡ï¼Œä»¥ç¡®ä¿å…¶ç¬¦åˆå†…éƒ¨ç­–ç•¥ä¸æœ€ä½³å®è·µã€‚ä¸ºäº†è¯å®åˆè§„æ€§ï¼Œæ‚¨éœ€è¦äº†è§£èµ„æºçš„å†å²é…ç½®ã€‚æ­¤ä¿¡æ¯ç”±æä¾› AWS Configã€‚ æ³¨æ„äº‹é¡¹ AWS è´¦æˆ·: ä½ éœ€è¦ä¸€ä¸ªæ´»è·ƒ AWS è´¦æˆ·çš„ã€‚æœ‰å…³æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…æ³¨å†Œ AWSã€‚ Amazon S3 å­˜å‚¨æ¡¶ï¼šæ‚¨éœ€è¦ä¸€ä¸ª S3 å­˜å‚¨æ¡¶æ¥æ¥æ”¶é…ç½®å¿«ç…§å’Œå†å²è®°å½•çš„æ•°æ®ã€‚æœ‰å…³æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜… Amazon S3 å­˜å‚¨æ¡¶çš„æƒé™ã€‚ Amazon SNS ä¸»é¢˜ï¼šå½“æ‚¨çš„é…ç½®å¿«ç…§å’Œå†å²è®°å½•å‘ç”Ÿå˜åŒ–æ—¶ï¼Œæ‚¨éœ€è¦ Amazon SNS æ‰èƒ½æ”¶åˆ°é€šçŸ¥ã€‚æœ‰å…³æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜… Amazon SNS ä¸»é¢˜çš„æƒé™ã€‚ IAM è§’è‰²ï¼šæ‚¨éœ€è¦ä¸€ä¸ª IAM è§’è‰²ï¼Œè¯¥è§’è‰²æœ‰æƒè®¿é—® AWS Configã€‚æœ‰å…³æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜… IAM è§’è‰²çš„æƒé™ã€‚ èµ„æºç±»å‹ï¼šæ‚¨å¯ä»¥å†³å®š AWS Config è¦è®°å½•å“ªäº›èµ„æºç±»å‹ã€‚æœ‰å…³æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…å½•åˆ¶ AWS èµ„æºã€‚ å¦‚ä½•ä½¿ç”¨é…ç½®Configé»˜è®¤æƒ…å†µä¸‹ï¼ŒConfigä¼šè®°å½•å½“å‰è´¦å·çš„æ‰€æœ‰regionä¸‹çš„æ‰€æœ‰èµ„æºï¼Œå¦‚æœä½ è§‰å¾—å¤ªå¤šçš„è¯ï¼Œå¯ä»¥è¿›è¡Œä¿®æ”¹ï¼Œé…ç½®é¡¹åœ¨Settingsè¿™ä¸ªtabä¸­ å¯ä»¥çœ‹åˆ°ï¼Œsettingåˆ†ä¸ºä¸Šä¸‹ä¸¤éƒ¨åˆ† data and deliveryï¼Œæ˜¯æ•°æ®çš„ä¿å­˜æ—¶é•¿ä»¥åŠå­˜å‚¨çš„S3 bucketï¼Œä»¥åŠäº‹ä»¶å‘é€åˆ°å“ªä¸€ä¸ªSNS Recorderï¼Œ ç”¨æ¥è®¾ç½®æˆ‘ä»¬è¦è®¾ç½®å“ªäº›äº‹ä»¶ Data and delivery è¿™é‡Œé¢è®¾ç½®è¿™ä¹ˆå‡ é¡¹ æ•°æ®çš„ä¿å­˜æ—¶é—´ï¼Œé»˜è®¤7å¹´ï¼Œä¹Ÿå¯ä»¥è®¾ç½®è‡ªå®šä¹‰,ä»¥å¤©ä¸ºå•ä½ S3 bucket,å³æ—¥å¿—çš„ä¿å­˜ä½ç½®ï¼Œå¯ä»¥é€‰æ‹©å…¶ä»–è´¦å· SNS topicï¼Œå³å¦‚æœæœ‰äº‹ä»¶ç”Ÿæˆï¼Œè¦å‘é€åˆ°å“ªä¸€ä¸ªSNSï¼Œä¹Ÿå¯ä»¥é€‰æ‹©å…¶ä»–è´¦å· Recorder åœ¨è¿™é‡Œå¯ä»¥é…ç½®éœ€è¦è®°å½•å“ªäº›èµ„æºå¯ä»¥é€‰æ‹©å…¨éƒ¨èµ„æºï¼Œä¹Ÿå¯ä»¥é€‰æ‹©æŒ‡å®šèµ„æºå¦å¤–è¿˜éœ€è¦é€‰æ‹©èµ„æºè®°å½•çš„é¢‘ç‡ Dailyï¼Œæ¯å¤©åªè®°å½•ä¸€æ¬¡ Continuous,æŒç»­è®°å½•ï¼Œæ²¡æœ‰é—´éš”å¦å¤–ï¼Œé»˜è®¤æ‰€æœ‰èµ„æºçš„æ‰€æœ‰é¢‘ç‡éƒ½æ˜¯Continuous æŸ¥çœ‹Resourceç‚¹å‡»å·¦ä¸Šæ–¹çš„Resourcesï¼Œå°±å¯ä»¥çœ‹åˆ°è¿™ä¸ªè´¦å·ä¸‹æ‰€æœ‰çš„Resourceså•¦ï¼Œå¯ä»¥æ ¹æ®categoryè·Ÿtypeä»¥åŠcomplianceè¿›è¡Œæ£€ç´¢ä»¥S3 bucketèµ„æºä¸ºä¾‹ ç‚¹å‡»å³å¯è¿›å…¥è¯¦æƒ…åœ¨è¯¦æƒ…ä¸­å°±å¯ä»¥çœ‹åˆ°å¾ˆå¤šè¯¦ç»†çš„ä¿¡æ¯,å¦‚åˆ›å»ºæ—¶é—´ç­‰ å¦‚æœä¸‹æ‹‰çš„è¯ï¼Œè¿˜èƒ½çœ‹åˆ°è¿™ä¸ªèµ„æºçš„ç›¸å…³åˆè§„æ€§æ£€æµ‹ï¼Œä¾‹å¦‚å›¾ä¸­å°±å¯ä»¥çœ‹åˆ°å¾ˆå¤šçš„ä¸åˆè§„ å¦‚æœç‚¹å‡»å³ä¸Šè§’çš„Resource Timelineï¼Œå°±èƒ½çœ‹åˆ°é’ˆå¯¹è¯¥èµ„æºçš„æ‰€æœ‰eventï¼Œä¾‹å¦‚ä¿®æ”¹äº†é…ç½®ä¹‹ç±»çš„ é«˜çº§æœç´¢é«˜çº§æŸ¥è¯¢åŠŸèƒ½æä¾›äº†å•ä¸€æŸ¥è¯¢ç»ˆç«¯èŠ‚ç‚¹å’Œå¼ºå¤§çš„æŸ¥è¯¢è¯­è¨€ä»¥è·å¾—å½“å‰èµ„æºçŠ¶æ€å…ƒæ•°æ®ï¼Œè€Œæ— éœ€æ‰§è¡Œç‰¹å®šäºæœåŠ¡çš„æè¿° API è°ƒç”¨ã€‚å¯ä»¥ä½¿ç”¨é…ç½®Aggregatorè·¨å¤šä¸ªè´¦æˆ·å’ŒAWSåŒºåŸŸä»ä¸­å¤®è´¦æˆ·è¿è¡Œç›¸åŒçš„æŸ¥è¯¢ åˆ›å»ºqueryå…¶å®ä¹Ÿå¾ˆç®€å•ï¼Œå¦‚æœéœ€è¦æŸ¥è¯¢aggregatorä¸­çš„æ‰€æœ‰æ•°æ®ï¼Œå°±é€‰æ‹©å¯¹åº”çš„aggregatorå³å¯ç„¶åå†™å…¥å…·ä½“çš„æŸ¥è¯¢è¯­å¥ï¼Œå³å¯æŸ¥è¯¢åˆ°ç›¸å…³ä¿¡æ¯ AWS Config ä¸æ ‡ç­¾çš„å…³è” æ ‡ç­¾ä½œä¸ºè§„åˆ™æ¡ä»¶: æ‚¨å¯ä»¥åœ¨ AWS Config è§„åˆ™ä¸­ä½¿ç”¨æ ‡ç­¾ä½œä¸ºæ¡ä»¶ï¼Œä¾‹å¦‚ï¼š æ£€æŸ¥ç‰¹å®šèµ„æºæ˜¯å¦å…·æœ‰ç‰¹å®šæ ‡ç­¾ã€‚ æ£€æŸ¥ç‰¹å®šèµ„æºæ˜¯å¦å…·æœ‰ç‰¹å®šçš„æ ‡ç­¾å€¼ã€‚ æ£€æŸ¥èµ„æºæ ‡ç­¾æ˜¯å¦ç¬¦åˆæ‚¨çš„é¢„å®šä¹‰ç­–ç•¥ã€‚ æ ‡ç­¾ç”¨äºä¿®å¤æ“ä½œ: åœ¨æŸäº›æƒ…å†µä¸‹ï¼ŒAWS Config è§„åˆ™å¯ä»¥åˆ©ç”¨æ ‡ç­¾æ¥æ‰§è¡Œä¿®å¤æ“ä½œã€‚ä¾‹å¦‚ï¼Œå¦‚æœä¸€ä¸ªèµ„æºæ²¡æœ‰å¿…è¦çš„æ ‡ç­¾ï¼ŒAWS Config è§„åˆ™å¯ä»¥è‡ªåŠ¨æ·»åŠ æ ‡ç­¾åˆ°è¯¥èµ„æºã€‚ æ ‡ç­¾ç”¨äºèµ„æºè¿‡æ»¤: æ‚¨å¯ä»¥ä½¿ç”¨æ ‡ç­¾æ¥è¿‡æ»¤æ‚¨çš„èµ„æºï¼Œä¾‹å¦‚ï¼Œåœ¨ AWS æ§åˆ¶å°ä¸­æŸ¥çœ‹æ‰€æœ‰å¸¦æœ‰ç‰¹å®šæ ‡ç­¾çš„ EC2 å®ä¾‹ï¼Œæˆ–è€…åœ¨ AWS Config ä¸­æŸ¥çœ‹æ‰€æœ‰å¸¦æœ‰ç‰¹å®šæ ‡ç­¾çš„èµ„æºé…ç½®å†å²è®°å½•ã€‚ æ ‡ç­¾ç”¨äºè®¿é—®æ§åˆ¶: æ‚¨å¯ä»¥åˆ©ç”¨æ ‡ç­¾æ¥å®ç°åŸºäºæ ‡ç­¾çš„è®¿é—®æ§åˆ¶ï¼Œä¾‹å¦‚ï¼Œåªå…è®¸ç‰¹å®šç”¨æˆ·æˆ–ç»„è®¿é—®å¸¦æœ‰ç‰¹å®šæ ‡ç­¾çš„èµ„æºã€‚ ä¾‹å­: å‡è®¾æ‚¨å¸Œæœ›ç¡®ä¿æ‰€æœ‰ EC2 å®ä¾‹éƒ½å…·æœ‰ â€œEnvironmentâ€ æ ‡ç­¾ï¼Œå¹¶ä¸”å…¶å€¼ä¸º â€œProductionâ€ æˆ–â€œDevelopmentâ€ã€‚æ‚¨å¯ä»¥åˆ›å»ºä¸€ä¸ª AWS Config è§„åˆ™ï¼Œæ£€æŸ¥æ‰€æœ‰ EC2 å®ä¾‹æ˜¯å¦å…·æœ‰ â€œEnvironmentâ€æ ‡ç­¾ï¼Œå¹¶ä¸”å…¶å€¼ä¸º â€œProductionâ€ æˆ–â€œDevelopmentâ€ã€‚å¦‚æœæŸä¸ªå®ä¾‹æ²¡æœ‰æ ‡ç­¾æˆ–æ ‡ç­¾å€¼ä¸ç¬¦åˆè¦æ±‚ï¼Œè¯¥è§„åˆ™å¯ä»¥è§¦å‘ä¸€ä¸ªä¿®å¤æ“ä½œï¼Œè‡ªåŠ¨æ·»åŠ æˆ–ä¿®æ”¹æ ‡ç­¾ã€‚ Config ä¸­çš„aggregatorèšåˆå™¨æ˜¯ä¸€ç§ AWS Config èµ„æºç±»å‹ï¼Œç”¨äºä»ä»¥ä¸‹å†…å®¹æ”¶é›† AWS Config é…ç½®å’Œåˆè§„æ€§æ•°æ®ï¼š å¤šä¸ªè´¦æˆ·å’Œå¤šä¸ªåŒºåŸŸã€‚ å•ä¸ªè´¦æˆ·å’Œå¤šä¸ªåŒºåŸŸã€‚ AWS Organizations ä¸­çš„æ‰€æœ‰è´¦æˆ·ã€‚å¦‚æœæˆ‘ä»¬æ˜¯å•ä¸€è´¦å·ï¼Œé‚£ä¹ˆè¿™ä¸ªåŠŸèƒ½å¯èƒ½æ²¡ä»€ä¹ˆç”¨ï¼Œä½†æ˜¯å¦‚æœæˆ‘ä»¬ä½¿ç”¨äº†control toweræˆ–è€…å­˜åœ¨å¤šä¸ªè´¦å·ç»Ÿä¸€ç®¡ç†ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨Aggregatorè¿™ä¸ªåŠŸèƒ½ï¼Œå°†æ‰€æœ‰çš„è´¦å·çš„config ruleèšåˆè¿‡æ¥é›†ä¸­æŸ¥çœ‹ï¼Œè€Œä¸éœ€è¦æ¯ä¸ªè´¦å·æŸ¥çœ‹ä½†æ˜¯éœ€è¦æ³¨æ„ï¼Œåœ¨eventbridgeä¸­æ— æ³•è§¦å‘aggregatorä¸­çš„complaintå˜åŒ–ï¼Œåªèƒ½è§¦å‘å½“å‰è´¦å·çš„rule åœ¨è¿™é‡Œä¹Ÿèƒ½çœ‹åˆ°å…¶ä»–è´¦å·ä¸‹çš„æ‰€æœ‰çš„resourceï¼Œå¦‚ä¸‹å›¾æ‰€ç¤º åˆ›å»ºaggregator åœ¨Aggregatorè¯•å›¾ä¸­ï¼Œç‚¹å‡»å³ä¸Šè§’çš„Create Aggregatorå³å¯è¿›å…¥åˆ›å»ºç¯èŠ‚åŒæ—¶ï¼Œåœ¨è¯¥é¡µé¢ä¸‹é¢ä¼šåˆ—å‡ºå½“å‰çš„æ‰€æœ‰çš„Aggregatorä»¥åŠæ¯ä¸€ä¸ªæ‰€åŒ…å«çš„è´¦å·æ•°é‡ï¼Œè®©ä½ æœ‰ä¸ªç›´è§‚å°è±¡ç‚¹å‡»Create Aggregatorï¼Œè¿›å…¥å¦‚ä¸‹é¡µé¢ é¦–å…ˆå¿…é¡»è¦å‹¾é€‰æœ€ä¸Šæ–¹çš„å‹¾é€‰æ¡†ä¹‹åï¼Œæ‰èƒ½è®©ä½ è¿›è¡Œåç»­æ“ä½œåœ¨è¿™ä¸ªé¡µé¢ä½ å¯ä»¥é€‰æ‹©ä¸¤ä¸ªå±æ€§ account ä½ éœ€è¦èšåˆå“ªäº›è´¦å·ï¼Œä¾‹å¦‚ä½ åªæƒ³åŒ…å«ç”Ÿäº§è´¦å·ï¼Œé‚£å°±é€‰æ‹©ç”Ÿäº§çš„accountå³å¯ region è¿™ä¸ªå¾ˆå¥½ç†è§£ï¼Œå°±æ˜¯éœ€è¦åŒ…å«å“ªä¸ªregionï¼Œç”±äºæ¯ä¸€ä¸ªaccountéƒ½å¯ä»¥åœ¨ä»»æ„regionåˆ›å»ºèµ„æºï¼Œæ‰€ä»¥è¿™ä¸ªå¯ä»¥é™åˆ¶ä½ çš„æ•°æ®çš„æ¥æº","categories":[{"name":"è¿ç»´","slug":"è¿ç»´","permalink":"https://maydaychen.github.io/categories/%E8%BF%90%E7%BB%B4/"}],"tags":[{"name":"AWS","slug":"AWS","permalink":"https://maydaychen.github.io/tags/AWS/"}]},{"title":"AWSä½¿ç”¨æ—¥å¿—1--å¦‚ä½•ä¸€ä¸ªæµè§ˆå™¨å¤šè´¦æˆ·åŒæ—¶ç™»å½•","slug":"AWSä½¿ç”¨æ—¥å¿—1-å¦‚ä½•ä¸€ä¸ªæµè§ˆå™¨å¤šè´¦æˆ·åŒæ—¶ç™»å½•","date":"2025-08-14T07:08:57.000Z","updated":"2025-08-16T08:09:05.161Z","comments":true,"path":"2025/08/14/AWSä½¿ç”¨æ—¥å¿—1-å¦‚ä½•ä¸€ä¸ªæµè§ˆå™¨å¤šè´¦æˆ·åŒæ—¶ç™»å½•/","link":"","permalink":"https://maydaychen.github.io/2025/08/14/AWS%E4%BD%BF%E7%94%A8%E6%97%A5%E5%BF%971-%E5%A6%82%E4%BD%95%E4%B8%80%E4%B8%AA%E6%B5%8F%E8%A7%88%E5%99%A8%E5%A4%9A%E8%B4%A6%E6%88%B7%E5%90%8C%E6%97%B6%E7%99%BB%E5%BD%95/","excerpt":"","text":"èƒŒæ™¯ç”±äºç°åœ¨æ‰€æœ‰çš„è´¦å·éƒ½åœ¨åŒä¸€ä¸ªcontrol towerä¸‹ï¼Œå¯¼è‡´äº†ä¸€ä¸ªè´¦å·ç™»å½•åï¼Œå¦ä¸€ä¸ªè´¦å·çš„é¡µé¢å°±å…¨éƒ¨è¿‡æœŸäº†ï¼Œéå¸¸å½±å“æ•ˆç‡è¿™æ—¶å€™æˆ‘å‘ç°å¯ä»¥å¯ç”¨AWSçš„multi-session supportï¼Œå°±å¯ä»¥åŒæ—¶ç™»å½•å¤šä¸ªè´¦æˆ·æˆ–è€…è§’è‰²ä½†æ˜¯é™åˆ¶ä¸Šé™ä¸º5 å‚è€ƒæ–‡ç« ï¼šhttps://docs.aws.amazon.com/zh_cn/awsconsolehelpdocs/latest/gsg/multisession.html æ­¥éª¤ ç‚¹å‡»é‚£ä¸ªturn on multi-session supportï¼Œå¾…é¡µé¢åˆ·æ–°åå³å¯å¤šè´¦æˆ·åˆ‡æ¢","categories":[{"name":"è¿ç»´","slug":"è¿ç»´","permalink":"https://maydaychen.github.io/categories/%E8%BF%90%E7%BB%B4/"}],"tags":[{"name":"AWS","slug":"AWS","permalink":"https://maydaychen.github.io/tags/AWS/"}]},{"title":"Zabbixè¿›é˜¶12--å¦‚ä½•ä½¿ç”¨ZabbixAPI","slug":"Zabbixè¿›é˜¶12--å¦‚ä½•ä½¿ç”¨ZabbixAPI","date":"2025-08-13T03:32:42.000Z","updated":"2025-10-22T02:47:54.685Z","comments":true,"path":"2025/08/13/Zabbixè¿›é˜¶12--å¦‚ä½•ä½¿ç”¨ZabbixAPI/","link":"","permalink":"https://maydaychen.github.io/2025/08/13/Zabbix%E8%BF%9B%E9%98%B612--%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8ZabbixAPI/","excerpt":"","text":"ä¸€æ—¦æ‚¨è®¾ç½®äº†å‰ç«¯ï¼Œå°±å¯ä»¥ä½¿ç”¨è¿œç¨‹ HTTP è¯·æ±‚æ¥è°ƒç”¨ APIã€‚ä¸ºæ­¤ï¼Œæ‚¨éœ€è¦å‘é€ HTTP POST è¯·æ±‚åˆ°å‰ç«¯ç›®å½•ä¸­çš„ api_jsonrpc.php æ–‡ä»¶ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæ‚¨çš„ Zabbix å‰ç«¯å®‰è£…åœ¨ https://example.com/zabbix ä¸‹ï¼Œè°ƒç”¨ apiinfo.version æ–¹æ³•çš„ HTTP è¯·æ±‚å¯èƒ½çœ‹èµ·æ¥åƒè¿™æ ·ï¼š ::: 1234curl --request POST \\--url &#x27;https://example.com/zabbix/api_jsonrpc.php&#x27; \\--header &#x27;Content-Type: application/json-rpc&#x27; \\--data &#x27;&#123;&quot;jsonrpc&quot;:&quot;2.0&quot;,&quot;method&quot;:&quot;apiinfo.version&quot;,&quot;params&quot;:&#123;&#125;,&quot;id&quot;:1&#125;&#x27; è¯·æ±‚å¿…é¡»å°† Content-Type å¤´éƒ¨è®¾ç½®ä¸ºä»¥ä¸‹å€¼ä¹‹ä¸€ï¼šapplication&#x2F;json-rpcã€application&#x2F;json æˆ– application&#x2F;jsonrequestã€‚ è·å–tokenæœ‰ä¸¤ç§æ–¹å¼æ¥è·å–tokenï¼Œä¸€ç§æ˜¯é€šè¿‡ç”¨æˆ·åå¯†ç ç™»é™†ï¼Œå¦ä¸€ç§æ˜¯ç›´æ¥åˆ›å»ºä¸€ä¸ªapi ä½¿ç”¨è´¦å·å¯†ç è·å–tokené€šè¿‡æ¥å£è°ƒç”¨çš„æ–¹å¼æ¥è·å– 1234curl --request POST \\ --url &#x27;https://example.com/zabbix/api_jsonrpc.php&#x27; \\ --header &#x27;Content-Type: application/json-rpc&#x27; \\ --data &#x27;&#123;&quot;jsonrpc&quot;:&quot;2.0&quot;,&quot;method&quot;:&quot;user.login&quot;,&quot;params&quot;:&#123;&quot;username&quot;:&quot;Admin&quot;,&quot;password&quot;:&quot;zabbix&quot;&#125;,&quot;id&quot;:1&#125;&#x27; ç›´æ¥åˆ›å»º åœ¨Zabbix consoleçš„å·¦ä¸‹è§’æœ‰ä¸€ä¸ªUser settings, é€‰ç¬¬äºŒä¸ªAPI tokens ç„¶ååœ¨å³ä¸Šè§’ç‚¹å‡» Create API tokenå¯ä»¥ç›´æ¥åˆ›å»ºtoken,è¿˜èƒ½è®¾ç½®tokençš„æœ‰æ•ˆæœŸ å¦‚ä½•é€šè¿‡tokenè°ƒç”¨APIå…¶å®å¾ˆç®€å•ï¼Œåªè¦åœ¨è¯·æ±‚APIçš„æ—¶å€™ï¼ŒåŠ ä¸€ä¸ªheader 12345# å‡å®štokençš„å†…å®¹æ˜¯12345ï¼Œé‚£ä¹ˆè¯·æ±‚ä¸ªæ ¼å¼å°±æ˜¯è¿™æ ·curl --request POST \\ --url &#x27;https://example.com/zabbix/api_jsonrpc.php&#x27; \\ --header &#x27;Authorization: Bearer 12345&#x27; å³å¯è¿”å›ä½ æ‰€éœ€è¦çš„ä¿¡æ¯å•¦","categories":[{"name":"è¿ç»´","slug":"è¿ç»´","permalink":"https://maydaychen.github.io/categories/%E8%BF%90%E7%BB%B4/"}],"tags":[{"name":"ç›‘æ§","slug":"ç›‘æ§","permalink":"https://maydaychen.github.io/tags/%E7%9B%91%E6%8E%A7/"},{"name":"Zabbix","slug":"Zabbix","permalink":"https://maydaychen.github.io/tags/Zabbix/"}]},{"title":"çæŠ˜è…¾1--Glanceå®‰è£…åŠä¼˜é›…åœ°ä½¿ç”¨é¢æ¿","slug":"çæŠ˜è…¾1-Glanceå®‰è£…åŠä¼˜é›…åœ°ä½¿ç”¨é¢æ¿","date":"2025-08-09T06:42:59.000Z","updated":"2025-08-09T06:52:57.000Z","comments":true,"path":"2025/08/09/çæŠ˜è…¾1-Glanceå®‰è£…åŠä¼˜é›…åœ°ä½¿ç”¨é¢æ¿/","link":"","permalink":"https://maydaychen.github.io/2025/08/09/%E7%9E%8E%E6%8A%98%E8%85%BE1-Glance%E5%AE%89%E8%A3%85%E5%8F%8A%E4%BC%98%E9%9B%85%E5%9C%B0%E4%BD%BF%E7%94%A8%E9%9D%A2%E6%9D%BF/","excerpt":"","text":"åŠŸèƒ½è®°å½•ç™»å½•éªŒè¯é¦–å…ˆéœ€è¦åˆ›å»ºä¸€ä¸ªsecret keyï¼Œå¦‚æœæ˜¯dockeråˆ›å»ºçš„ï¼Œé‚£å°±è¿è¡Œè¿™ä¸ªå‘½ä»¤ 1docker run --rm glanceapp/glance secret:make ä¼šç”Ÿæˆä¸€ä¸ªkeyï¼Œéœ€è¦å¡«å†™åœ¨é…ç½®æ–‡ä»¶ä¸­ç„¶åå°±é…ç½®æˆ‘ä»¬çš„è´¦å·å¯†ç ,å¯ä»¥ç›´æ¥é…ç½®åœ¨glance.ymlçš„ç¬¬ä¸€è¡Œ 1234567auth: secret-key: &#123;åˆšæ‰ç”Ÿæˆçš„secret key&#125;# this must be set to a random value generated using the secret:make CLI command users: admin: password: 123456 svilen: password: 123456 ä¹‹ååœ¨ç™»å½•çš„æ—¶å€™ï¼Œå°±ä¼šè¦æ±‚è¾“å…¥ç”¨æˆ·åå¯†ç ","categories":[{"name":"Tools","slug":"Tools","permalink":"https://maydaychen.github.io/categories/Tools/"}],"tags":[{"name":"NAS","slug":"NAS","permalink":"https://maydaychen.github.io/tags/NAS/"}]},{"title":"Linuxæ“ä½œè®°å½•9--MariaDBå‡çº§ç¬”è®°","slug":"Linuxæ“ä½œè®°å½•9--MariaDBå‡çº§ç¬”è®°","date":"2025-07-26T09:30:09.000Z","updated":"2025-07-26T09:33:44.715Z","comments":true,"path":"2025/07/26/Linuxæ“ä½œè®°å½•9--MariaDBå‡çº§ç¬”è®°/","link":"","permalink":"https://maydaychen.github.io/2025/07/26/Linux%E6%93%8D%E4%BD%9C%E8%AE%B0%E5%BD%959--MariaDB%E5%8D%87%E7%BA%A7%E7%AC%94%E8%AE%B0/","excerpt":"","text":"è¿™ç¯‡æ–‡ç« å‘Šè¯‰ä½ æ€ä¹ˆä»Amazon Linux2023è‡ªå¸¦çš„ä»“åº“é‡Œçš„è€æ—§10.5å‡çº§åˆ°æ–°çš„å®˜æ–¹åº“çš„10.11 ä»10.5åˆ°10.11å¤‡ä»½å¤‡ä»½æ•°æ®åº“æ•°æ®1mysqldump -u root -p --all-databases &gt; all_databases.sql å¤‡ä»½æ•°æ®åº“é…ç½®æ–‡ä»¶å¦‚ &#x2F;etc&#x2F;my.cnfã€&#x2F;etc&#x2F;my.cnf.d&#x2F; å¤‡ä»½æ•°æ®ç›®å½•å¦‚cd &#x2F;var&#x2F;lib&#x2F;mysql&#x2F; æ›´æ¢MariaDBä»“åº“åˆ›å»º&#x2F;etc&#x2F;yum.repos.d&#x2F;MariaDB.repoï¼Œ å†…å®¹å¦‚ä¸‹ 12345678910# MariaDB 10.11 RedHatEnterpriseLinux repository list - created 2025-06-30 09:25 UTC# https://mariadb.org/download/[mariadb]name = MariaDB# rpm.mariadb.org is a dynamic mirror if your preferred mirror goes offline. See https://mariadb.org/mirrorbits/ for details.# baseurl = https://rpm.mariadb.org/10.11/rhel/$releasever/$basearchbaseurl = https://mirrors.neusoft.edu.cn/mariadb/yum/10.11/rhel/$releasever/$basearch# gpgkey = https://rpm.mariadb.org/RPM-GPG-KEY-MariaDBgpgkey = https://mirrors.neusoft.edu.cn/mariadb/yum/RPM-GPG-KEY-MariaDBgpgcheck = 1 åœæ­¢ç›¸å…³åº”ç”¨12systemctl stop zabbix-serversystemctl stop mysql å‡çº§123sudo dnf clean allsudo dnf makecachesudo dnf upgrade è¿è¡Œå‡çº§è„šæœ¬12systemctl start mysqlsudo mysql_upgrade è¿™ä¸ªå‘½ä»¤æ˜¯ä»€ä¹ˆsudo mysql_upgrade å‘½ä»¤ç”¨äºå‡çº§ MySQL æˆ– MariaDB æ•°æ®åº“çš„ç³»ç»Ÿè¡¨å’Œæ•°æ®ç»“æ„ï¼Œä»¥ç¡®ä¿å®ƒä»¬ä¸æ–°å®‰è£…çš„æ•°æ®åº“æœåŠ¡å™¨ç‰ˆæœ¬å…¼å®¹ã€‚ ä¸»è¦ä½œç”¨æ£€æŸ¥å¹¶ä¿®å¤ç³»ç»Ÿè¡¨ï¼ˆå¦‚ mysql åº“ä¸­çš„æƒé™è¡¨ï¼‰å‡çº§ç³»ç»Ÿè¡¨ç»“æ„åˆ°æ–°ç‰ˆæœ¬è¦æ±‚æ£€æŸ¥å’Œä¿®å¤æ‰€æœ‰æ•°æ®åº“è¡¨çš„å…¼å®¹æ€§ä»€ä¹ˆæ—¶å€™éœ€è¦ç”¨ï¼Ÿæ•°æ®åº“ä¸»ç‰ˆæœ¬å‡çº§åï¼ˆå¦‚ 10.5 â†’ 10.11ï¼‰é‡å¤§å°ç‰ˆæœ¬å‡çº§å æ€»ç»“ï¼šmysql_upgrade æ˜¯æ•°æ®åº“å‡çº§åå¿…åšçš„ä¸€æ­¥ï¼Œç¡®ä¿æ•°æ®å’Œæƒé™è¡¨ä¸æ–°ç‰ˆæœ¬å…¼å®¹ã€æ­£å¸¸è¿è¡Œ 10.11å‡çº§11.4https://mariadb.com/docs/server/server-management/install-and-upgrade-mariadb/upgrading/upgrading-from-to-specific-versions/upgrading-from-mariadb-10-11-to-mariadb-11-4 å¤‡ä»½å¤‡ä»½æ•°æ®åº“æ•°æ®1mysqldump -u root -p --all-databases &gt; all_databases.sql å¤‡ä»½æ•°æ®åº“é…ç½®æ–‡ä»¶å¦‚ &#x2F;etc&#x2F;my.cnfã€&#x2F;etc&#x2F;my.cnf.d&#x2F; å¤‡ä»½æ•°æ®ç›®å½•å¦‚cd &#x2F;var&#x2F;lib&#x2F;mysql&#x2F; æ›´æ¢MariaDBä»“åº“åˆ›å»º&#x2F;etc&#x2F;yum.repos.d&#x2F;MariaDB.repoï¼Œ å†…å®¹å¦‚ä¸‹ 12345678910# MariaDB 11.4 RedHatEnterpriseLinux repository list - created 2025-07-01 06:13 UTC# https://mariadb.org/download/[mariadb]name = MariaDB# rpm.mariadb.org is a dynamic mirror if your preferred mirror goes offline. See https://mariadb.org/mirrorbits/ for details.baseurl = https://rpm.mariadb.org/11.4/rhel/$releasever/$basearch# baseurl = https://mirrors.neusoft.edu.cn/mariadb/yum/11.4/rhel/$releasever/$basearchgpgkey = https://rpm.mariadb.org/RPM-GPG-KEY-MariaDB# gpgkey = https://mirrors.neusoft.edu.cn/mariadb/yum/RPM-GPG-KEY-MariaDBgpgcheck = 1 åœæ­¢ç›¸å…³åº”ç”¨12systemctl stop zabbix-serversystemctl stop mysql å‡çº§123sudo dnf clean allsudo dnf makecachesudo dnf upgrade è¿è¡Œå‡çº§è„šæœ¬12systemctl start mysqlsudo mariadb-upgrade é‡åˆ°çš„é—®é¢˜æš‚æ—¶éå¸¸é¡ºåˆ©","categories":[{"name":"è¿ç»´","slug":"è¿ç»´","permalink":"https://maydaychen.github.io/categories/%E8%BF%90%E7%BB%B4/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"https://maydaychen.github.io/tags/Linux/"}]},{"title":"NASæ‚è®°5--ç¾¤æ™–NASå®‰è£…GitLabåŠé—®é¢˜è®°å½•","slug":"NASæ‚è®°5--ç¾¤æ™–NASå®‰è£…GitLabåŠé—®é¢˜è®°å½•","date":"2025-07-26T09:23:28.000Z","updated":"2025-07-26T09:49:17.335Z","comments":true,"path":"2025/07/26/NASæ‚è®°5--ç¾¤æ™–NASå®‰è£…GitLabåŠé—®é¢˜è®°å½•/","link":"","permalink":"https://maydaychen.github.io/2025/07/26/NAS%E6%9D%82%E8%AE%B05--%E7%BE%A4%E6%99%96NAS%E5%AE%89%E8%A3%85GitLab%E5%8F%8A%E9%97%AE%E9%A2%98%E8%AE%B0%E5%BD%95/","excerpt":"","text":"èƒŒæ™¯éœ€è¦åœ¨ç¾¤æ™–NASä¸Šæ­å»ºGitLabï¼Œä»¥ä¾¿ä¸Šä¼ è‡ªå·±çš„ä»£ç ï¼ŒåŒæ—¶å¯ä»¥é€šè¿‡å¤–ç½‘è®¿é—®ï¼Œè€Œä¸æ˜¯å±€é™äºæœ¬åœ°ç½‘ç»œ å®è·µä¸‹è½½é•œåƒæ­£å¥½ç¾¤æ™–çš„é•œåƒä»“åº“é‡Œå°±æœ‰è¿™ä¸ªgitlabï¼Œæ‰€ä»¥ç›´æ¥ä¸‹è½½å°±å¥½å•¦ é…ç½®ç¯å¢ƒå˜é‡ é…ç½®é¡¹ å€¼ external_url https://&#123;domain&#125;:&#123;port&#125; gitlab_rails[&#39;gitlab_shell_ssh_port&#39;] 18778 nginx[&#39;redirect_http_to_https&#39;] true nginx[&#39;redirect_http_to_https_port&#39;] 80 nginx[&#39;ssl_certificate&#39;] /etc/gitlab/ssl/&#123;domain&#125;.crt nginx[&#39;ssl_certificate_key&#39;] /etc/gitlab/ssl/&#123;domain&#125;.key nginx[&#39;listen_port&#39;] 443 å¯åŠ¨å®¹å™¨ç”±äºGitLabé¡¹ç›®è¾ƒä¸ºåºå¤§ï¼Œå› æ­¤å¯èƒ½éœ€è¦ç­‰å¾ˆä¹…ï¼Œå»ºè®®è€å¿ƒç­‰å¾… é…ç½®ç«¯å£è½¬å‘å¦‚æœä½ è·Ÿæˆ‘ä¸€æ ·éœ€è¦ç”¨Nginxåšç«¯å£è½¬å‘ï¼Œé‚£å»ºè®®ä½ çœ‹ä¸€ä¸‹æˆ‘ä¸‹é¢çš„ä¸€ä¸ªé—®é¢˜ï¼Œè¯´ä¸å®šä½ ä¹Ÿä¼šé‡åˆ°å“¦ é—®é¢˜è®°å½•å¯†ç åœ¨å“ªåˆå§‹ç”¨æˆ·åä¸ºrootï¼Œå¯†ç åœ¨&#x2F;etc&#x2F;gitlab&#x2F;initial_root_passwordæ–‡ä»¶ä¸‹é¢ï¼Œåœ¨æ–‡ä»¶ç®¡ç†é‡Œé¢ 1Password: xxxxx åˆ‡è®°å¯†ç åªæœ‰24å°æ—¶æœ‰æ•ˆï¼Œä½¿ç”¨åéœ€è¦é‡æ–°ä¿®æ”¹å¯†ç  GitLabæ­»æ´»è·³ä¸åˆ°:portæ ¼å¼éœ€è¦ä¿®æ”¹å‰ç½®NginxæœåŠ¡å™¨çš„ä¸€ä¸ªé…ç½®ï¼ŒæŠŠportä¿¡æ¯å·®UNè¿‡å» 1proxy_set_header Host $host:$server_port; æ— æ³•ç”ŸæˆAccess Tokenéœ€è¦å¯ç”¨HTTPSï¼Œå•çº¯çš„HTTTPä¼šæ˜¾ç¤º 1An error occurred while fetching the tokens.","categories":[{"name":"Tools","slug":"Tools","permalink":"https://maydaychen.github.io/categories/Tools/"}],"tags":[{"name":"NAS","slug":"NAS","permalink":"https://maydaychen.github.io/tags/NAS/"}]},{"title":"NASæ‚è®°4--ç¾¤æ™–NASå®‰è£…N8NåŠé—®é¢˜è®°å½•","slug":"NASæ‚è®°4--ç¾¤æ™–NASå®‰è£…N8NåŠé—®é¢˜è®°å½•","date":"2025-07-25T14:34:17.000Z","updated":"2025-07-26T09:33:20.762Z","comments":true,"path":"2025/07/25/NASæ‚è®°4--ç¾¤æ™–NASå®‰è£…N8NåŠé—®é¢˜è®°å½•/","link":"","permalink":"https://maydaychen.github.io/2025/07/25/NAS%E6%9D%82%E8%AE%B04--%E7%BE%A4%E6%99%96NAS%E5%AE%89%E8%A3%85N8N%E5%8F%8A%E9%97%AE%E9%A2%98%E8%AE%B0%E5%BD%95/","excerpt":"","text":"ç¯å¢ƒå‡†å¤‡ ç¾¤æ™–NASï¼ˆå·²å®‰è£…Dockerå¥—ä»¶ï¼‰ ç½‘ç»œç¯å¢ƒï¼šæœ¬åœ°å±€åŸŸç½‘ å­˜å‚¨ç©ºé—´ï¼šè‡³å°‘1GBå¯ç”¨ç©ºé—´ æ­å»ºN8Nåˆ›å»ºæŒä¹…åŒ–æ–‡ä»¶å¤¹é¦–å…ˆï¼Œåœ¨ç¾¤æ™–çš„File Stationä¸­ï¼Œå‰å¾€dockeræ–‡ä»¶å¤¹ï¼Œåˆ›å»ºä¸€ä¸ªåä¸ºn8nçš„æ–‡ä»¶å¤¹ï¼Œå¹¶åœ¨å…¶ä¸‹æ–°å»ºä¸€ä¸ªåä¸ºn8n_dataçš„å­æ–‡ä»¶å¤¹ è®¾ç½®è¯»å–æƒé™éœ€è¦è®¾ç½®everyoneå¯ä»¥å†™å…¥ ä¸‹è½½é•œåƒç›´æ¥åœ¨container managerä¸­æœç´¢n8nï¼Œç›´æ¥ä¸‹è½½å³å¯ è®¾ç½®ç«¯å£æ˜ å°„è¿™é‡Œå·¦è¾¹éœ€è¦è®¾ç½®æ˜ å°„åˆ°ä½ è‡ªå·±æƒ³è¦ç”¨çš„ç«¯å£ï¼Œå³è¾¹æ˜¯n8nè‡ªèº«ç”¨çš„ç«¯å£å»ºè®®éƒ½è®¾æˆä¸€ä¸ªå€¼ï¼Œæ–¹ä¾¿ä»¥åè®¾ç½®webhookè®¿é—® æŒ‚è½½æŒä¹…åŒ–æ–‡ä»¶å¤¹å°†æˆ‘ä»¬åˆšæ‰è®¾ç½®çš„n8n_dataæ–‡ä»¶å¤¹æ˜ å°„åˆ°&#x2F;home&#x2F;node&#x2F;.n8nè·¯å¾„ ç¯å¢ƒå˜é‡é…ç½® å˜é‡å å€¼ GENERIC_TIMEZONE Asia&#x2F;Shanghai N8N_HOST domain N8N_SECURE_COOKIE false N8N_PROTOCOL https N8N_PORT 15678 ç›´æ¥å¯åŠ¨å³å¯ç„¶åè®¿é—®NASçš„IPåŠ ä¸Šå¯¹åº”çš„ç«¯å£ï¼Œå³å¯è®¿é—®n8nä¸»é¡µ é—®é¢˜è®°å½•Error: Command â€œstartâ€ not foundå°±æ˜¯dockeræŒä¹…åŒ–çš„é‚£ä¸ªæ–‡ä»¶æ²¡æœ‰æƒé™ï¼Œå‚è€ƒè¿™ä¸ªç½‘ç«™éœ€è¦è®¾ç½®everyoneéƒ½å¯ä»¥å†™å…¥ï¼Œç„¶åå°±ä¸ä¼šå¯åŠ¨å¤±è´¥äº† Lost connection to the serverå‚è€ƒï¼š https://community.n8n.io/t/connection-lost-using-nginx-reverse-proxy-n8n-1-16/32962 è¦ä¿®æ”¹ä¸€ä¸‹Nginxé…ç½® 12proxy_set_header Connection &#x27;Upgrade&#x27;;proxy_set_header Upgrade $http_upgrade; é‡Šä¹‰ï¼šproxy_set_header Connection â€˜Upgradeâ€™; å‘Šè¯‰ä¸Šæ¸¸æœåŠ¡å™¨ï¼šâ€œæˆ‘è¿™ä¸ªè¯·æ±‚å¸Œæœ›å‡çº§è¿æ¥ï¼ˆæ¯”å¦‚ä» HTTP å‡çº§ä¸º WebSocketï¼‰â€ã€‚proxy_set_header Upgrade $http_upgrade; å°†å®¢æˆ·ç«¯è¯·æ±‚ä¸­çš„ Upgrade å¤´ï¼ˆå¦‚ websocketï¼‰è½¬å‘ç»™åç«¯æœåŠ¡ã€‚","categories":[{"name":"Tools","slug":"Tools","permalink":"https://maydaychen.github.io/categories/Tools/"}],"tags":[{"name":"NAS","slug":"NAS","permalink":"https://maydaychen.github.io/tags/NAS/"}]},{"title":"Zabbixè¿›é˜¶11--åœ¨ARMä¸‹å®‰è£…Zabbix server","slug":"Zabbixè¿›é˜¶11--åœ¨ARMä¸‹å®‰è£…Zabbix-server","date":"2025-06-27T05:58:48.000Z","updated":"2025-07-26T09:56:08.524Z","comments":true,"path":"2025/06/27/Zabbixè¿›é˜¶11--åœ¨ARMä¸‹å®‰è£…Zabbix-server/","link":"","permalink":"https://maydaychen.github.io/2025/06/27/Zabbix%E8%BF%9B%E9%98%B611--%E5%9C%A8ARM%E4%B8%8B%E5%AE%89%E8%A3%85Zabbix-server/","excerpt":"","text":"å®‰è£…nginxå®‰è£…yum-utils1sudo yum install yum-utils åˆ›å»ºnginxå®˜æ–¹é•œåƒæº1234567891011121314151617/etc/yum.repos.d/nginx.repo[nginx-stable]name=nginx stable repobaseurl=http://nginx.org/packages/centos/$releasever/$basearch/gpgcheck=1enabled=1gpgkey=https://nginx.org/keys/nginx_signing.keymodule_hotfixes=true[nginx-mainline]name=nginx mainline repobaseurl=http://nginx.org/packages/mainline/centos/$releasever/$basearch/gpgcheck=1enabled=0gpgkey=https://nginx.org/keys/nginx_signing.keymodule_hotfixes=true å®‰è£…nginx1yum install nginx å®‰è£…PostgreSQL+TimescaleDBPostgreSQLå®‰è£…Install the repository RPM: 1sudo dnf install -y https://download.postgresql.org/pub/repos/yum/reporpms/EL-8-x86_64/pgdg-redhat-repo-latest.noarch.rpm Disable the built-in PostgreSQL module: 1sudo dnf -qy module disable postgresql Install PostgreSQL: 1sudo dnf install -y postgresql17-server Optionally initialize the database and enable automatic start: 1234sudo /usr/pgsql-17/bin/postgresql-17-setup initdbsudo systemctl enable postgresql-17sudo systemctl start postgresql-17sudo systemctl status postgresql-17 TimescaleDBå®‰è£…ï¼šæ·»åŠ  TimescaleDB å­˜å‚¨åº“ 123456789101112sudo tee /etc/yum.repos.d/timescale_timescaledb.repo &lt;&lt;EOL[timescale_timescaledb]name=timescale_timescaledbbaseurl=https://packagecloud.io/timescale/timescaledb/el/$(rpm -E %&#123;rhel&#125;)/\\$basearchrepo_gpgcheck=1gpgcheck=0enabled=1gpgkey=https://packagecloud.io/timescale/timescaledb/gpgkeysslverify=1sslcacert=/etc/pki/tls/certs/ca-bundle.crtmetadata_expire=300EOL æ›´æ–°æœ¬åœ°ä»“åº“åˆ—è¡¨ 1sudo yum update å®‰è£… TimescaleDB 1sudo yum install timescaledb-2-postgresql-17 ä¸º TimescaleDB ä¼˜åŒ– PostgreSQL å®ä¾‹ è¿™ä¸ªå‘½ä»¤æ‰§è¡Œåå…¨éƒ¨è¾“å…¥Yesä¼šå°†é…ç½®ä¿®æ”¹ä¸ºæ¨èçš„è®¾ç½® 1sudo timescaledb-tune --pg-config=/usr/pgsql-17/bin/pg_config é‡å¯Postgresqlï¼š 12sudo systemctl restart postgresql-17sudo systemctl status postgresql-17 ä»¥ postgres èº«ä»½ç™»å½• PostgreSQL 1sudo -u postgres psql è®¾ç½® postgres çš„å¯†ç  1\\password postgres è®¾ç½®å¯†ç åï¼Œé”®å…¥ \\q é€€å‡º å¼ºåˆ¶ä½¿ç”¨å¯†ç ç™»å½• é…ç½®è®¤è¯æ–¹æ³•ï¼š åœ¨ pg_hba.conf æ–‡ä»¶ä¸­é…ç½®è®¤è¯æ–¹æ³•ã€‚ è¿™ä¸ªæ–‡ä»¶é€šå¸¸ä½äº PostgreSQL æ•°æ®ç›®å½•ä¸­ ä¾‹å¦‚ 1/var/lib/pgsql/17/data/pg_hba.conf ä½ éœ€è¦ä¸ºç›¸åº”çš„ç”¨æˆ·å’Œæ•°æ®åº“é…ç½®ä½¿ç”¨å¯†ç è®¤è¯çš„æ–¹æ³•ã€‚ ä¾‹å¦‚ï¼Œè¦å…è®¸æ‰€æœ‰ç”¨æˆ·ä½¿ç”¨å¯†ç è®¤è¯ç™»å½•ï¼Œå¯ä»¥æ·»åŠ æˆ–ä¿®æ”¹ä»¥ä¸‹è¡Œï¼š 1host all all 0.0.0.0/0 md5 è¿™é‡Œ md5 è¡¨ç¤ºä½¿ç”¨ MD5 åŠ å¯†çš„å¯†ç è¿›è¡Œè®¤è¯ã€‚ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ scram-sha-256ï¼Œè¿™æ˜¯ PostgreSQL 17 æ¨èçš„è®¤è¯æ–¹æ³• ã€‚ é‡å¯ PostgreSQL æœåŠ¡ï¼š ä¿®æ”¹ pg_hba.conf æ–‡ä»¶åï¼Œéœ€è¦é‡å¯ PostgreSQL æœåŠ¡ä»¥ä½¿æ›´æ”¹ç”Ÿæ•ˆã€‚ åœ¨å¤§å¤šæ•°ç³»ç»Ÿä¸Šï¼Œä½ å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ¥é‡å¯æœåŠ¡ï¼š 1sudo systemctl restart postgresql-17 æˆ–è€…æ ¹æ®ä½ çš„ç³»ç»Ÿç¯å¢ƒä½¿ç”¨ç›¸åº”çš„å‘½ä»¤ã€‚ æµ‹è¯•è¿æ¥ï¼šä½¿ç”¨æ–°è®¾ç½®çš„å¯†ç æµ‹è¯•è¿æ¥ï¼Œä»¥ç¡®ä¿é…ç½®æ­£ç¡®ã€‚ å¯ä»¥ä½¿ç”¨ psql å‘½ä»¤è¡Œå·¥å…·è¿æ¥åˆ°æ•°æ®åº“ï¼š 12sudo -u postgres psqlpsql -U postgres -h localhost -d postgres ç³»ç»Ÿä¼šæç¤ºä½ è¾“å…¥å¯†ç ï¼Œè¿™æ—¶åº”è¯¥è¾“å…¥ä½ ä¸º postgres ç”¨æˆ·è®¾ç½®çš„å¯†ç ã€‚ è¯·æ³¨æ„ï¼Œå‡ºäºå®‰å…¨è€ƒè™‘ï¼Œä¸å»ºè®®åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä½¿ç”¨ trust æ–¹æ³•ï¼Œå› ä¸ºå®ƒå…è®¸ä»»ä½•ç”¨æˆ·æ— éœ€å¯†ç å³å¯è¿æ¥åˆ°æ•°æ®åº“ã€‚å§‹ç»ˆä½¿ç”¨å¯†ç è®¤è¯ï¼Œå¹¶ç¡®ä¿å¯†ç è¶³å¤Ÿå¤æ‚ï¼Œä»¥é˜²æ­¢æœªç»æˆæƒçš„è®¿é—® ã€‚ åˆ›å»ºåˆå§‹æ•°æ®åº“ åœ¨æ•°æ®åº“ä¸»æœºä¸Šè¿è¡Œä»¥ä¸‹ä»£ç ã€‚ 12sudo -u postgres createuser --pwprompt zabbixsudo -u postgres createdb -O zabbix zabbix_db åˆ‡æ¢åˆ°zabbix_db 1\\c zabbix_db å°† TimescaleDB æ·»åŠ åˆ°æ•°æ®åº“ 1CREATE EXTENSION IF NOT EXISTS timescaledb; æ£€æŸ¥æ˜¯å¦å·²å®‰è£… TimescaleDB 1\\dx æ‚¨å°†çœ‹åˆ°å·²å®‰è£…æ‰©å±•çš„åˆ—è¡¨ï¼š 12345List of installed extensionsName | Version | Schema | Description -------------+---------+------------+---------------------------------------------------------------------------------------plpgsql | 1.0 | pg_catalog | PL/pgSQL procedural languagetimescaledb | 2.17.2 | public | Enables scalable inserts and complex queries for time-series data (Community Edition) æŸ¥çœ‹åˆ†åŒºæƒ…å†µ æŸ¥çœ‹åˆ†åŒºè¡¨çš„æ¦‚è§ˆä¿¡æ¯ï¼Œå¯ä»¥æŸ¥è¯¢timescaledb_information.hypertablesè§†å›¾ã€‚è¿™å°†æ˜¾ç¤ºæ‰€æœ‰å·²åˆ›å»ºçš„è¶…è¡¨ï¼ˆå³è¢«è½¬æ¢ä¸ºæ”¯æŒæ—¶é—´åºåˆ—æ•°æ®å­˜å‚¨çš„è¡¨ï¼‰çš„å…ƒæ•°æ®ã€‚ 1SELECT * FROM timescaledb_information.hypertables; postgresqlå¯ç”¨socketè¿æ¥ï¼š 1234/var/lib/pgsql/17/data/postgresql.confå–æ¶ˆæ³¨é‡Šä»¥ä¸‹é€‰é¡¹å¹¶é‡å¯ï¼šunix_socket_directories = &#x27;/run/postgresql&#x27; # comma-separated list of directories å®‰è£…zabbixå®‰è£…Zabbixæº12rpm -Uvh https://repo.zabbix.com/zabbix/7.0/rhel/8/x86_64/zabbix-release-latest-7.0.el8.noarch.rpmdnf clean all åˆ‡æ¢PHPçš„DNFæ¨¡å—ç‰ˆæœ¬ 1dnf module switch-to php:8.2 å®‰è£…Zabbix server, frontend, agent2 1dnf install zabbix-server-pgsql zabbix-web-pgsql zabbix-nginx-conf zabbix-sql-scripts zabbix-selinux-policy zabbix-agent2 å®‰è£…Zabbix agent 2æ’ä»¶ 123dnf install zabbix-agent2-plugin-mongodb zabbix-agent2-plugin-mssql zabbix-agent2-plugin-postgresqlyum install zabbix-agent2-plugin-* å¯¼å…¥åˆå§‹æ¶æ„å’Œæ•°æ®ï¼Œç³»ç»Ÿå°†æç¤ºæ‚¨è¾“å…¥æ–°åˆ›å»ºçš„å¯†ç ã€‚ 1zcat /usr/share/zabbix-sql-scripts/postgresql/server.sql.gz | sudo -u zabbix psql zabbix_db æºç å®‰è£…zabbixå¯¼å…¥åˆå§‹æ¶æ„å’Œæ•°æ®ï¼š 12345cd database/postgresqlcat schema.sql | sudo -u zabbix psql zabbix_db# å¦‚æœæ‚¨æ­£åœ¨ä¸º Zabbix ä»£ç†åˆ›å»ºæ•°æ®åº“ï¼Œè¯·åœ¨æ­¤å¤„åœæ­¢cat images.sql | sudo -u zabbix psql zabbix_dbcat data.sql | sudo -u zabbix psql zabbix_db å¯¹äºæ–°å®‰è£…ï¼Œè¿è¡Œ postgresql&#x2F;timescaledb&#x2F;schema.sql è„šæœ¬ã€‚ è¯¥è„šæœ¬å¿…é¡»åœ¨ä½¿ç”¨åˆå§‹æ¨¡å¼&#x2F;æ•°æ®åˆ›å»ºå¸¸è§„ PostgreSQL æ•°æ®åº“ä¹‹åè¿è¡Œã€‚ 1cat /usr/share/zabbix-sql-scripts/postgresql/timescaledb/schema.sql | sudo -u zabbix psql zabbix_db ä¸ºZabbix serveré…ç½®æ•°æ®åº“ç¼–è¾‘é…ç½®æ–‡ä»¶ 123/etc/zabbix/zabbix_server.confDBPassword=password å¯åŠ¨Zabbix serverå’Œagentè¿›ç¨‹ å¯åŠ¨Zabbix serverå’Œagentè¿›ç¨‹ï¼Œå¹¶ä¸ºå®ƒä»¬è®¾ç½®å¼€æœºè‡ªå¯ï¼š 123systemctl restart zabbix-server zabbix-agent2 nginx php-fpmsystemctl enable zabbix-server zabbix-agent2 nginx php-fpmsystemctl status zabbix-server zabbix-agent2 nginx php-fpm æŠ¥é”™è§£å†³ï¼š 12æŠ¥é”™ä¿¡æ¯/usr/sbin/zabbix_server: /lib64/libpq.so.5: no version information available (required by /usr/sbin/zabbix_server)","categories":[{"name":"è¿ç»´","slug":"è¿ç»´","permalink":"https://maydaychen.github.io/categories/%E8%BF%90%E7%BB%B4/"}],"tags":[{"name":"ç›‘æ§","slug":"ç›‘æ§","permalink":"https://maydaychen.github.io/tags/%E7%9B%91%E6%8E%A7/"},{"name":"Zabbix","slug":"Zabbix","permalink":"https://maydaychen.github.io/tags/Zabbix/"}]},{"title":"Linuxæ“ä½œè®°å½•8--ä¸ºAmazonLinux2åšOSPatch","slug":"Linuxæ“ä½œè®°å½•8--ä¸ºAmazonLinux2åšOSPatch","date":"2025-06-21T06:08:48.000Z","updated":"2025-07-01T05:49:07.000Z","comments":true,"path":"2025/06/21/Linuxæ“ä½œè®°å½•8--ä¸ºAmazonLinux2åšOSPatch/","link":"","permalink":"https://maydaychen.github.io/2025/06/21/Linux%E6%93%8D%E4%BD%9C%E8%AE%B0%E5%BD%958--%E4%B8%BAAmazonLinux2%E5%81%9AOSPatch/","excerpt":"","text":"åœ¨æ¯æ¬¡æ¼æ´æ‰«æä¹‹åï¼Œæ¯ä¸€ä¸ªè¿ç»´äººéƒ½ä¼šæ€€ç€æ¿€åŠ¨è€Œåˆç´§å¼ çš„å¿ƒæƒ…æ¥çœ‹è¿™ä¸€ä»½æŠ¥å‘Šï¼Œæ¯•ç«Ÿè¿™å†³å®šäº†ä»–ä»¬çš„å·¥ä½œé‡é‚£ä¹ˆï¼Œæˆ‘ä»¬ä¼šæ€ä¹ˆç»™æ¯ä¸€å°æœåŠ¡å™¨æ‰“è¡¥ä¸å‘¢ï¼Ÿè¿™è¾¹è®°å½•ä¸€ä¸‹å·¥ä½œä¸­ç”¨åˆ°çš„ä¸¤ç§æ–¹æ³• æ‰‹åŠ¨Patch1234567891011121314151617# é™¤äº†Amazon Linux2023sudo yum update# Amazon Linux2023dnf upgrade --releasever=2023.7.20250623# 2. reboot# 3. execute the 3 command belowuname -rrpm -q kernelsudo package-cleanup --oldkernels --count=1 -y## For Amazon Linux2023sudo dnf remove --oldinstallonly --setopt installonly_limit=2 kernel -y# 4. check the running status of each service(fail2ban/xxx)# 5. test to login to other servers AWS è‡ªåŠ¨Patchhttps://ap-southeast-1.console.aws.amazon.com/systems-manager/home?region=ap-southeast-1#welcomeå‚è€ƒè¿™ä¸ªç½‘å€ä¸Šçš„å†…å®¹ï¼Œä½¿ç”¨AWS Patch manager","categories":[{"name":"è¿ç»´","slug":"è¿ç»´","permalink":"https://maydaychen.github.io/categories/%E8%BF%90%E7%BB%B4/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"https://maydaychen.github.io/tags/Linux/"}]},{"title":"Zabbixè¿›é˜¶10--è®¾ç½®MFAç™»å½•","slug":"Zabbixè¿›é˜¶10--è®¾ç½®MFAç™»å½•","date":"2025-06-20T02:42:54.000Z","updated":"2025-07-26T09:51:10.189Z","comments":true,"path":"2025/06/20/Zabbixè¿›é˜¶10--è®¾ç½®MFAç™»å½•/","link":"","permalink":"https://maydaychen.github.io/2025/06/20/Zabbix%E8%BF%9B%E9%98%B610--%E8%AE%BE%E7%BD%AEMFA%E7%99%BB%E5%BD%95/","excerpt":"","text":"å½“æˆ‘ä»¬éœ€è¦å°†Zabbixæˆ–è€…Grafanaæš´éœ²åœ¨å…¬ç½‘ä¹‹æ—¶ï¼Œä¸ºè´¦å·è®¾ç½®MFAå°±å˜å¾—éå¸¸é‡è¦äº†ï¼Œæ¯•ç«Ÿç›¸æ¯”äºå¯†ç ï¼ŒMFAå¯ä»¥è¯´æ˜¯æ›´åŠ å®‰å…¨ä¸€äº›ä¸Šä¸€ç¯‡æˆ‘ä»¬è¯´äº†æ€ä¹ˆä¸ºGrafanaè®¾ç½®MFAï¼Œè¿™ä¸€ç¯‡æˆ‘ä»¬æ¥è¯´ä¸€ä¸‹å¦‚ä½•ä¸ºZabbixè®¾ç½®MFAä»Zabbix 6.0å¼€å§‹ï¼ŒMFAçš„åŠŸèƒ½å°±æˆäº†built-inåŠŸèƒ½ï¼Œæˆ‘ä»¬ä¹Ÿä¸éœ€è¦æ¥å…¥ä»»ä½•çš„ç¬¬ä¸‰æ–¹ï¼Œç›´æ¥ä½¿ç”¨å³å¯ æ·»åŠ MFAé€‰é¡¹ è¿›å…¥User-&gt; Authentication,å‹¾é€‰â€œEnable multi-factor authenticationâ€,å¹¶ä¸”æ·»åŠ ä¸€ä¸ªMethodå¦‚ä¸‹ åˆ›å»ºç”¨æˆ·ç»„æˆ‘ä»¬éœ€è¦åœ¨Zabbixä¸­åˆ›å»ºä¸€ä¸ªç”¨æˆ·ç»„ï¼Œå¹¶ä¸”åšå¦‚ä¸‹æ“ä½œï¼š æŠŠéœ€è¦è®¾ç½®MFAçš„ç”¨æˆ·éƒ½æ·»åŠ åˆ°è¯¥ç»„ä¸­ Multi-factor authenticationé€‰æ‹©åˆšæ‰æˆ‘ä»¬åˆ›å»ºçš„method ä¿å­˜è¿‡åï¼Œç”¨æˆ·çš„ä¸‹ä¸€æ¬¡ç™»å½•éœ€è¦å¯ç”¨MFAï¼Œå¹¶ä¸”åœ¨æ¯æ¬¡ç™»å½•æ—¶å¿…é¡»è¾“å…¥MFA ç™»å½•è®¾ç½®MFA","categories":[{"name":"è¿ç»´","slug":"è¿ç»´","permalink":"https://maydaychen.github.io/categories/%E8%BF%90%E7%BB%B4/"}],"tags":[{"name":"ç›‘æ§","slug":"ç›‘æ§","permalink":"https://maydaychen.github.io/tags/%E7%9B%91%E6%8E%A7/"},{"name":"Zabbix","slug":"Zabbix","permalink":"https://maydaychen.github.io/tags/Zabbix/"}]},{"title":"Zabbixè¸©å‘è®°å½•5--ç›‘æ§Windowsæ–‡ä»¶å¯¼è‡´IOè¿‡é«˜çš„ç»éªŒè®°å½•","slug":"Zabbixè¸©å‘è®°å½•5--ç›‘æ§Windowsæ–‡ä»¶å¯¼è‡´IOè¿‡é«˜çš„ç»éªŒè®°å½•","date":"2025-04-14T09:06:41.000Z","updated":"2025-07-26T10:03:32.074Z","comments":true,"path":"2025/04/14/Zabbixè¸©å‘è®°å½•5--ç›‘æ§Windowsæ–‡ä»¶å¯¼è‡´IOè¿‡é«˜çš„ç»éªŒè®°å½•/","link":"","permalink":"https://maydaychen.github.io/2025/04/14/Zabbix%E8%B8%A9%E5%9D%91%E8%AE%B0%E5%BD%955--%E7%9B%91%E6%8E%A7Windows%E6%96%87%E4%BB%B6%E5%AF%BC%E8%87%B4IO%E8%BF%87%E9%AB%98%E7%9A%84%E7%BB%8F%E9%AA%8C%E8%AE%B0%E5%BD%95/","excerpt":"","text":"åœ¨Windowsä¸­ï¼Œå¦‚æœå¢åŠ logrtä¹‹ç±»çš„ç›‘æ§ï¼Œä¼šå¯¼è‡´CPUä¸€åœºä¸Šå‡ï¼Œç»è¿‡äº†æ•°æ—¥çš„è°ƒæŸ¥ï¼Œç»ˆäºæ‰¾åˆ°äº†è§£å†³æ–¹æ¡ˆï¼Œåœ¨æ­¤è®°å½•ä¸€ä¸‹ èƒŒæ™¯ç”±äºéœ€è¦åœ¨windowsä¸­æ·»åŠ å¯¹transactionçš„ç›‘æ§ï¼Œè€Œtransactionçš„logæ˜¯è¢«è®°å½•åœ¨ä¸€ä¸ªæ€»çš„folderä¸­çš„ï¼Œç°åœ¨å¦‚æœåœ¨è¿™ä¸ªfolderä¸­åŠ å…¥äº†å¾ˆå¤šçš„monitoring itemï¼Œä¼šå¯¼è‡´IOä¸€åœºå‡é«˜ï¼Œæœ€ç»ˆå¯¼è‡´CPUçš„å¼‚å¸¸ä½¿ç”¨ è°ƒæŸ¥è°ƒæŸ¥ä¸­å‘ç°ï¼Œç”±äºåˆ›å»ºäº†å¾ˆå¤šçš„æ—¥å¿—ç›‘æ§ï¼Œä½†æ˜¯æ¯ä¸€ä¸ªæ—¥å¿—æ–‡ä»¶éƒ½åœ¨åŒä¸€ä¸ªæ–‡ä»¶å¤¹ä¸­ï¼Œæ¢å¥è¯è¯´ï¼Œé‚£ä¸ªæ–‡ä»¶å¤¹æœ‰å‡ ç™¾ä¸ªæ–‡ä»¶ï¼å³ä½¿ç”¨Windowsè‡ªå¸¦çš„æœç´¢åŠŸèƒ½æœç´¢æ–‡ä»¶ï¼Œéœ€è¦è€—è´¹å¾ˆä¹…ï¼Œè€Œæˆ‘ä»¬æœ‰å‡ ç™¾ä¸ªè¿™æ ·çš„ç›‘æ§é¡¹ï¼Œå¯¼è‡´äº†æ¯ä¸€ä¸ªiteméƒ½åœ¨ç–¯ç‹‚è€—è´¹èµ„æºæœç´¢ï¼Œä»è€Œå¯¼è‡´äº†CPUé£™å‡ ä¼˜åŒ–é¡¹ç»è¿‡è¿™ä»¶äº‹ä¹‹åï¼Œåœ¨WindowsæœåŠ¡å™¨ä¸­ï¼Œå¦‚æœæˆ‘ä»¬è¿˜æœ‰æ—¥å¿—ç›‘æ§ç›¸å…³çš„éœ€æ±‚ï¼Œæˆ‘ä»¬ä¼šè¦æ±‚developerå°†logå•ç‹¬å­˜æ”¾åœ¨ä¸€ä¸ªæ–‡ä»¶å¤¹ä¸­ï¼Œå¹¶å®šæ—¶æ¸…ç†ï¼Œä¿è¯æ–‡ä»¶å¤¹çš„æ–‡ä»¶æ•°é‡ä¸€å®šæ˜¯ç›¸å¯¹è¾ƒå°‘ï¼Œå¯¹ç³»ç»Ÿæœç´¢ä¸ä¼šäº§ç”Ÿä»€ä¹ˆå½±å“çš„è¿™æ—¶å€™å‘ç°ï¼Œç¡®å®CPUçš„ä½¿ç”¨ç‡ä¸‹é™äº†","categories":[{"name":"è¿ç»´","slug":"è¿ç»´","permalink":"https://maydaychen.github.io/categories/%E8%BF%90%E7%BB%B4/"}],"tags":[{"name":"ç›‘æ§","slug":"ç›‘æ§","permalink":"https://maydaychen.github.io/tags/%E7%9B%91%E6%8E%A7/"},{"name":"Zabbix","slug":"Zabbix","permalink":"https://maydaychen.github.io/tags/Zabbix/"}]},{"title":"Zabbixè¿›é˜¶9--å¤„ç†Prometheusè¡Œåè®®æ ¼å¼æ•°æ®","slug":"Zabbixè¿›é˜¶9--å¤„ç†Prometheusè¡Œåè®®æ ¼å¼æ•°æ®","date":"2025-04-01T02:43:48.000Z","updated":"2025-07-26T09:51:10.187Z","comments":true,"path":"2025/04/01/Zabbixè¿›é˜¶9--å¤„ç†Prometheusè¡Œåè®®æ ¼å¼æ•°æ®/","link":"","permalink":"https://maydaychen.github.io/2025/04/01/Zabbix%E8%BF%9B%E9%98%B69--%E5%A4%84%E7%90%86Prometheus%E8%A1%8C%E5%8D%8F%E8%AE%AE%E6%A0%BC%E5%BC%8F%E6%95%B0%E6%8D%AE/","excerpt":"","text":"èƒŒæ™¯åœ¨K8Sç¯å¢ƒä¸­ï¼Œæ‰€æœ‰çš„metricéƒ½æ˜¯é€šè¿‡&#x2F;metrics APIæ¥è·å–ï¼Œå¤§éƒ¨åˆ†çš„APIéƒ½è¿”å›äº†prometheusè¡Œåè®®æ ¼å¼çš„æ•°æ®ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦é’ˆå¯¹è¿”å›çš„æ ¼å¼åšè¿›ä¸€æ­¥å¤„ç† è¯¦ç»†æ“ä½œItemPreprocessingåœ¨è¿™ä¸€æ­¥æˆ‘ä»¬éœ€è¦é€‰æ‹©Prometheus patternï¼Œç„¶ååœ¨Parametersä¸­é€šè¿‡PromQLè¯­å¥å»æŸ¥è¯¢æœ€ååœ¨å³è¾¹æœ‰ä¸€äº›æ–¹æ³•å¯é€‰ï¼Œä¸‹é¢æ˜¯å…·ä½“çš„ åºå· åç§° ç”¨é€” 1 value è¿”å›æŒ‡æ ‡çš„å€¼ï¼ˆå½“åŒ¹é…åˆ°å¤šè¡Œè®°å½•æ—¶ï¼Œä¼šå¼•å‘é”™è¯¯ï¼‰ 2 label åœ¨æ ‡ç­¾å­—æ®µä¸­æŒ‡å®šçš„æ ‡ç­¾è¿”å›å€¼ï¼ˆå½“åŒ¹é…åˆ°å¤šä¸ªæŒ‡æ ‡æ—¶ï¼Œä¼šå¼•å‘é”™è¯¯ï¼‰ 3 sum è¿”å›å€¼çš„æ€»å’Œ 4 min è¿”å›æœ€å°å€¼ 5 max è¿”å›æœ€å¤§å€¼ 6 avg è¿”å›å¹³å‡å€¼ 7 count è¿”å›å€¼çš„è®¡æ•°","categories":[{"name":"è¿ç»´","slug":"è¿ç»´","permalink":"https://maydaychen.github.io/categories/%E8%BF%90%E7%BB%B4/"}],"tags":[{"name":"ç›‘æ§","slug":"ç›‘æ§","permalink":"https://maydaychen.github.io/tags/%E7%9B%91%E6%8E%A7/"},{"name":"Zabbix","slug":"Zabbix","permalink":"https://maydaychen.github.io/tags/Zabbix/"}]},{"title":"Macè½¯ä»¶æ¨è1--ProNotesè®©ä½ ç”¨ä¸Šæ›´å¥½ç”¨çš„è®°äº‹æœ¬","slug":"Macè½¯ä»¶æ¨è1--ProNotesè®©ä½ ç”¨ä¸Šæ›´å¥½ç”¨çš„è®°äº‹æœ¬","date":"2025-03-05T05:25:34.000Z","updated":"2025-03-05T05:27:27.737Z","comments":true,"path":"2025/03/05/Macè½¯ä»¶æ¨è1--ProNotesè®©ä½ ç”¨ä¸Šæ›´å¥½ç”¨çš„è®°äº‹æœ¬/","link":"","permalink":"https://maydaychen.github.io/2025/03/05/Mac%E8%BD%AF%E4%BB%B6%E6%8E%A8%E8%8D%901--ProNotes%E8%AE%A9%E4%BD%A0%E7%94%A8%E4%B8%8A%E6%9B%B4%E5%A5%BD%E7%94%A8%E7%9A%84%E8%AE%B0%E4%BA%8B%E6%9C%AC/","excerpt":"","text":"èƒŒæ™¯ä¸‹è½½åœ°å€https://www.pronotes.app/","categories":[{"name":"Tools","slug":"Tools","permalink":"https://maydaychen.github.io/categories/Tools/"}],"tags":[{"name":"MacOS","slug":"MacOS","permalink":"https://maydaychen.github.io/tags/MacOS/"}]},{"title":"Homebrewå¸¸ç”¨æ“ä½œè®°å½•","slug":"Homebrewå¸¸ç”¨æ“ä½œè®°å½•","date":"2025-03-01T01:57:52.000Z","updated":"2025-03-01T02:22:46.000Z","comments":true,"path":"2025/03/01/Homebrewå¸¸ç”¨æ“ä½œè®°å½•/","link":"","permalink":"https://maydaychen.github.io/2025/03/01/Homebrew%E5%B8%B8%E7%94%A8%E6%93%8D%E4%BD%9C%E8%AE%B0%E5%BD%95/","excerpt":"","text":"è‡ªèº«æ“ä½œHomebrewæ›´æ–°è‡ªèº«1brew update è½¯ä»¶åŒ…æ“ä½œåˆ—å‡ºæ‰€æœ‰çš„è½¯ä»¶åŒ…1brew list æŸ¥çœ‹å•ä¸ªè½¯ä»¶åŒ…ä¿¡æ¯1brew info python@3.12 åˆ—å‡ºæ‰€æœ‰å¯ä»¥æ›´æ–°çš„è½¯ä»¶åŒ…1brew outdated æ›´æ–°æ‰€æœ‰è½¯ä»¶åŒ…å¦‚æœä½ æƒ³ä¸€æ¬¡æ€§æ›´æ–°æ‰€æœ‰å·²å®‰è£…çš„è½¯ä»¶åŒ…ï¼š 1brew upgrade è¿™ä¸ªå‘½ä»¤ä¼šæ›´æ–°æ‰€æœ‰è½¯ä»¶åŒ… æ›´æ–°å•ä¸ªè½¯ä»¶åŒ…1brew upgrade python@3.12 æ¸…ç†æ—§ç‰ˆæœ¬æ³¨ï¼šæ–°ç‰ˆæœ¬çš„homebrewä»æ—¥å¿—æ¥çœ‹upgradeä¹‹åèƒ½å¤Ÿè‡ªåŠ¨è¿è¡Œcleanupå‘½ä»¤ï¼Œæ‰€ä»¥å¯ä»¥è‡ªåŠ¨æ¸…ç† 1brew cleanup è¿™ä¼šåˆ é™¤Homebrewä¸å†ä½¿ç”¨çš„æ—§ç‰ˆæœ¬è½¯ä»¶ï¼Œå¹¶èŠ‚çœç£ç›˜ç©ºé—´ã€‚å¦‚æœä½ æƒ³æ£€æŸ¥å¯ä»¥æ¸…ç†å¤šå°‘ç©ºé—´ï¼š 1brew cleanup -n","categories":[{"name":"å¼€å‘","slug":"å¼€å‘","permalink":"https://maydaychen.github.io/categories/%E5%BC%80%E5%8F%91/"}],"tags":[]},{"title":"Grafanaä½¿ç”¨æ—¥å¿—9--Zabbixæ’ä»¶å¯é…ç½®å‚æ•°å­¦ä¹ ","slug":"Grafanaä½¿ç”¨æ—¥å¿—9--Zabbixæ’ä»¶å¯é…ç½®å‚æ•°å­¦ä¹ ","date":"2025-02-25T08:54:29.000Z","updated":"2025-08-21T03:13:46.985Z","comments":true,"path":"2025/02/25/Grafanaä½¿ç”¨æ—¥å¿—9--Zabbixæ’ä»¶å¯é…ç½®å‚æ•°å­¦ä¹ /","link":"","permalink":"https://maydaychen.github.io/2025/02/25/Grafana%E4%BD%BF%E7%94%A8%E6%97%A5%E5%BF%979--Zabbix%E6%8F%92%E4%BB%B6%E5%8F%AF%E9%85%8D%E7%BD%AE%E5%8F%82%E6%95%B0%E5%AD%A6%E4%B9%A0/","excerpt":"","text":"è¯¦è§£å…¨å±€é…ç½® Max data pointsï¼ˆæœ€å¤§æ•°æ®ç‚¹æ•°ï¼‰å®šä¹‰ï¼šè¡¨ç¤ºåœ¨æŸ¥è¯¢æ—¶é—´èŒƒå›´å†…è¿”å›çš„æœ€å¤§æ•°æ®ç‚¹æ•°ã€‚ä½œç”¨ï¼šç”¨äºæ§åˆ¶æŸ¥è¯¢ç»“æœçš„ç²¾åº¦å’Œæ•°æ®é‡ã€‚å¦‚æœæ•°æ®ç‚¹è¿‡å¤šï¼ŒGrafanaä¼šè‡ªåŠ¨å¯¹æ•°æ®è¿›è¡Œé™é‡‡æ ·ï¼ˆdownsamplingï¼‰ï¼Œä»¥å‡å°‘æ•°æ®é‡å¹¶æé«˜æ€§èƒ½ã€‚ç¤ºä¾‹ï¼š å¦‚æœæ—¶é—´èŒƒå›´æ˜¯7å¤©ï¼ŒMax data pointsè®¾ç½®ä¸º1000ï¼Œåˆ™Grafanaä¼šå°è¯•å°†7å¤©çš„æ•°æ®å‹ç¼©ä¸ºæœ€å¤š1000ä¸ªç‚¹ã€‚ å¦‚æœåŸå§‹æ•°æ®ç‚¹è¶…è¿‡1000ï¼ŒGrafanaä¼šé€šè¿‡èšåˆï¼ˆå¦‚å¹³å‡å€¼ã€æœ€å¤§å€¼ç­‰ï¼‰æ¥å‡å°‘æ•°æ®ç‚¹æ•°é‡ã€‚ Min intervalï¼ˆæœ€å°é—´éš”ï¼‰å®šä¹‰ï¼šè¡¨ç¤ºæŸ¥è¯¢çš„æœ€å°æ—¶é—´é—´éš”ã€‚ä½œç”¨ï¼šç”¨äºé™åˆ¶æŸ¥è¯¢çš„æ—¶é—´ç²’åº¦ï¼Œé¿å…æŸ¥è¯¢è¿‡äºé¢‘ç¹æˆ–è¿”å›è¿‡å¤šæ•°æ®ã€‚ç¤ºä¾‹ï¼š å¦‚æœ Min interval è®¾ç½®ä¸º 1mï¼Œåˆ™æŸ¥è¯¢çš„æ—¶é—´é—´éš”ä¸ä¼šå°äº1åˆ†é’Ÿã€‚ å¦‚æœæ—¶é—´èŒƒå›´è¾ƒå¤§ï¼ˆå¦‚1å¹´ï¼‰ï¼ŒGrafanaä¼šæ ¹æ® Min interval è‡ªåŠ¨è°ƒæ•´æŸ¥è¯¢çš„æ—¶é—´é—´éš”ã€‚ Intervalï¼ˆé—´éš”ï¼‰å®šä¹‰ï¼šè¡¨ç¤ºæŸ¥è¯¢çš„æ—¶é—´é—´éš”ã€‚ä½œç”¨ï¼šç”¨äºæŒ‡å®šæŸ¥è¯¢çš„æ—¶é—´ç²’åº¦ã€‚è¾ƒå°çš„é—´éš”ä¼šè¿”å›æ›´å¤šçš„æ•°æ®ç‚¹ï¼Œè¾ƒå¤§çš„é—´éš”ä¼šè¿”å›è¾ƒå°‘çš„æ•°æ®ç‚¹ã€‚ç¤ºä¾‹ï¼š å¦‚æœ Interval è®¾ç½®ä¸º 5mï¼Œåˆ™æ¯5åˆ†é’ŸæŸ¥è¯¢ä¸€æ¬¡æ•°æ®ã€‚ å¦‚æœ Interval è®¾ç½®ä¸º 1hï¼Œåˆ™æ¯å°æ—¶æŸ¥è¯¢ä¸€æ¬¡æ•°æ®ã€‚ Relative timeï¼ˆç›¸å¯¹æ—¶é—´ï¼‰å®šä¹‰ï¼šè¡¨ç¤ºæŸ¥è¯¢çš„æ—¶é—´èŒƒå›´ï¼Œç›¸å¯¹äºå½“å‰æ—¶é—´ã€‚å¦‚æœè®¾ç½®äº†è¿™ä¸ªæ—¶é—´ï¼Œé‚£ä¹ˆè¿™ä¸ªpanelè·Ÿå³ä¸Šè§’çš„time rangeé€‰æ‹©å°±è„±èŠ‚äº†ï¼Œåªä¼šæ˜¾ç¤ºå›ºå®štime rangeçš„æ•°æ®ä½œç”¨ï¼šç”¨äºåŠ¨æ€è®¾ç½®æŸ¥è¯¢çš„æ—¶é—´èŒƒå›´ã€‚ç¤ºä¾‹ï¼š å¦‚æœ Relative time è®¾ç½®ä¸º now-7dï¼Œåˆ™æŸ¥è¯¢çš„æ—¶é—´èŒƒå›´æ˜¯ä»å½“å‰æ—¶é—´å¾€å‰æ¨7å¤©åˆ°å½“å‰æ—¶é—´ã€‚ å¦‚æœ Relative time è®¾ç½®ä¸º now-1hï¼Œåˆ™æŸ¥è¯¢çš„æ—¶é—´èŒƒå›´æ˜¯ä»å½“å‰æ—¶é—´å¾€å‰æ¨1å°æ—¶åˆ°å½“å‰æ—¶é—´ã€‚ Time shiftï¼ˆæ—¶é—´åç§»ï¼‰å®šä¹‰ï¼šè¡¨ç¤ºå°†æŸ¥è¯¢çš„æ—¶é—´èŒƒå›´æ•´ä½“åç§»ä¸€å®šçš„æ—¶é—´ã€‚ä½œç”¨ï¼šç”¨äºæ¯”è¾ƒä¸åŒæ—¶é—´æ®µçš„æ•°æ®ã€‚ç¤ºä¾‹ï¼š å¦‚æœ Time shift è®¾ç½®ä¸º 1dï¼Œåˆ™æŸ¥è¯¢çš„æ—¶é—´èŒƒå›´ä¼šæ•´ä½“å¾€å‰åç§»1å¤©ã€‚ ä¾‹å¦‚ï¼ŒåŸå§‹æ—¶é—´èŒƒå›´æ˜¯ now-7d åˆ° nowï¼ŒåŠ ä¸Š Time shift åï¼Œæ—¶é—´èŒƒå›´å˜ä¸º now-8d åˆ° now-1dã€‚ æ€»ç»“è¿™ä¸ªæ’ä»¶å¯ä»¥è¯´æ˜¯Grafanaå¯¹æ¥zabbixçš„æœ€ä¼˜è§£äº†ï¼Œè™½ç„¶è¿˜æœ‰ä¸€äº›å°ç‘•ç–µï¼Œä¾‹å¦‚æ—¶é—´èŒƒå›´é€‰æ‹©è¿‡å¤§çš„æƒ…å†µä¸‹intervalä¼šé»˜è®¤ç»™ä½ ä¿®æ”¹æˆå¾ˆå¤§çš„æ—¶é—´é—´éš”ï¼Œå¯¼è‡´æ•°æ®ä¸å‡†ç¡®ï¼Œä½†æ˜¯å¯¹äºå¤§éƒ¨åˆ†çš„æ•°æ®å±•ç¤ºå·²ç»éå¸¸å®Œå–„äº†","categories":[{"name":"è¿ç»´","slug":"è¿ç»´","permalink":"https://maydaychen.github.io/categories/%E8%BF%90%E7%BB%B4/"}],"tags":[{"name":"ç›‘æ§","slug":"ç›‘æ§","permalink":"https://maydaychen.github.io/tags/%E7%9B%91%E6%8E%A7/"},{"name":"Grafana","slug":"Grafana","permalink":"https://maydaychen.github.io/tags/Grafana/"}]},{"title":"Zabbixè¿›é˜¶8--ä½¿ç”¨history.pushæ¨é€æ•°æ®","slug":"Zabbixè¿›é˜¶8--ä½¿ç”¨history-pushæ¨é€æ•°æ®","date":"2025-02-25T07:12:02.000Z","updated":"2025-02-25T09:36:37.000Z","comments":true,"path":"2025/02/25/Zabbixè¿›é˜¶8--ä½¿ç”¨history-pushæ¨é€æ•°æ®/","link":"","permalink":"https://maydaychen.github.io/2025/02/25/Zabbix%E8%BF%9B%E9%98%B68--%E4%BD%BF%E7%94%A8history-push%E6%8E%A8%E9%80%81%E6%95%B0%E6%8D%AE/","excerpt":"","text":"","categories":[{"name":"è¿ç»´","slug":"è¿ç»´","permalink":"https://maydaychen.github.io/categories/%E8%BF%90%E7%BB%B4/"}],"tags":[{"name":"ç›‘æ§","slug":"ç›‘æ§","permalink":"https://maydaychen.github.io/tags/%E7%9B%91%E6%8E%A7/"},{"name":"Zabbix","slug":"Zabbix","permalink":"https://maydaychen.github.io/tags/Zabbix/"}]},{"title":"Zabbixç›‘æ§ä¸‡ç‰©6--ç›‘æ§Nginx","slug":"Zabbixç›‘æ§ä¸‡ç‰©6--ç›‘æ§Nginx","date":"2025-02-24T07:01:16.000Z","updated":"2025-02-24T15:34:20.628Z","comments":true,"path":"2025/02/24/Zabbixç›‘æ§ä¸‡ç‰©6--ç›‘æ§Nginx/","link":"","permalink":"https://maydaychen.github.io/2025/02/24/Zabbix%E7%9B%91%E6%8E%A7%E4%B8%87%E7%89%A96--%E7%9B%91%E6%8E%A7Nginx/","excerpt":"","text":"èƒŒæ™¯åœ¨é¡¹ç›®ä¸­ä½¿ç”¨Nginxä¹‹åï¼Œæœ‰æ—¶å€™æˆ‘ä»¬éœ€è¦çŸ¥é“Nginxå…·ä½“çš„å·¥ä½œæƒ…å†µï¼Œè¿™æ—¶å€™å°±éœ€è¦ä½¿ç”¨zabbixè¿›è¡ŒNginxçš„ç›¸å…³ç›‘æ§è¿™è¾¹æˆ‘ä»¬æœ‰ä¸¤ç§æ–¹æ³• ä½¿ç”¨æ™®é€šçš„httpè¯·æ±‚çš„æ–¹å¼è·å–åŸºæœ¬ä¿¡æ¯ å¦‚æœä½¿ç”¨äº†Nginx Plusï¼Œå°±å¯ä»¥é€šè¿‡Nginx Plusçš„æ¥å£è·å–æ›´å¤šçš„ä¿¡æ¯ æ™®é€šæ–¹å¼å‚è€ƒé“¾æ¥ï¼š https://www.zabbix.com/integrations/nginx#nginx_agent ç¡®è®¤nginxæ˜¯å¦å¼€å¯with-http_stub_status_moduleæ¨¡å—1nginx -V 2&gt;&amp;1 | grep -o with-http_stub_status_module å¦‚æœå‡ºç°with-http_stub_status_moduleï¼Œè¯´æ˜å·²ç»å¼€å¯äº†è¯¥moduleï¼Œå³å¯è¿›è¡Œä¸‹ä¸€æ­¥ é…ç½®nginxåœ¨80ç«¯å£å¯¹åº”çš„é…ç½®é¡¹é‡ŒåŠ å…¥å¦‚ä¸‹é…ç½® 123456location = /basic_status &#123; stub_status; allow 127.0.0.1; allow ::1; deny all;&#125; ä¿®æ”¹å®å˜é‡ï¼ˆå¯é€‰ï¼‰é»˜è®¤æƒ…å†µä¸‹ï¼Œä¸éœ€è¦ä¿®æ”¹ä»»ä½•å®å˜é‡ï¼Œå› ä¸ºä»–å°±æ˜¯æŒ‡å‘äº†localhost&#x2F;basic_statusä¸è¿‡å¦‚æœä¿®æ”¹äº†ç«¯å£æˆ–è€…locationçš„è¯ï¼Œéœ€è¦ä¿®æ”¹å¯¹åº”çš„é…ç½® Nginx Plusæ–¹å¼è¿™ä¸ªæ–¹å¼æ¯”è¾ƒå‰å®³ï¼Œèƒ½çœ‹åˆ°çš„ä¸œè¥¿éå¸¸å¤šï¼Œä½†æ˜¯æœ‰ä¸ªå·¨å¤§çš„é—®é¢˜ï¼Œå°±æ˜¯è¿™ä¸æ˜¯å…è´¹çš„ï¼å¦‚æœæ²¡æœ‰ç”¨è¿™ä¸ªçš„è¯ï¼Œå»ºè®®å¯ä»¥ç›´æ¥æ”¾å¼ƒå‚è€ƒé“¾æ¥ï¼š https://www.zabbix.com/integrations/nginx#nginx_plus_http é…ç½®&#x2F;é‡å¯nginxæ·»åŠ å¦‚ä¸‹é…ç½® ä¿å­˜å¹¶é‡å¯nginxrestart&#x2F;reload nginxä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥å°è¯•è®¿é—®å¦‚ä¸‹é¡µé¢ï¼Œå¯ä»¥çœ‹åˆ°æ˜¯æœ‰æ•°æ®ä¼ è¾“çš„ 1http://&lt;IP&gt;:8080/dashboard.html#upstreams ç»‘å®štemplateè¿™ä¸€æ­¥éå¸¸ç®€å•ï¼Œå°±æŠŠè¿™ä¸ªtemplateç»‘å®šåˆ°å¯¹åº”çš„hostä¸Šå»å³å¯ ä¿®æ”¹å®å˜é‡æˆ‘ä»¬éœ€è¦æŠŠtemplateä¸­çš„è¿™ä¸ªå®æ”¹æˆå¦‚ä¸‹æ ¼å¼ 1`&lt;scheme&gt;://&lt;host&gt;:&lt;port&gt;/&lt;location&gt;/`. åˆ·æ–°å³å¯èƒ½çœ‹åˆ°å·²ç»è‡ªåŠ¨æ·»åŠ äº†å¾ˆå¤šå¾ˆå¤šçš„ç›‘æ§é¡¹äº†ï¼ŒåŸºæœ¬ä¸Šæ¯ä¸€ä¸ªstreamï¼Œæ¯ä¸€ä¸ªzoneéƒ½æœ‰å¯¹åº”çš„ç›‘æ§ï¼ŒåŠŸèƒ½æ¯”å•çº¯çš„statusç›‘æ§å¤šå¾—å¤š","categories":[{"name":"è¿ç»´","slug":"è¿ç»´","permalink":"https://maydaychen.github.io/categories/%E8%BF%90%E7%BB%B4/"}],"tags":[{"name":"ç›‘æ§","slug":"ç›‘æ§","permalink":"https://maydaychen.github.io/tags/%E7%9B%91%E6%8E%A7/"},{"name":"Zabbix","slug":"Zabbix","permalink":"https://maydaychen.github.io/tags/Zabbix/"}]},{"title":"Zabbixè¿›é˜¶7--æ¥å…¥DeepSeekåˆ†æé—®é¢˜å¹¶æä¾›è§£å†³æ–¹æ¡ˆ","slug":"Zabbixè¿›é˜¶7--æ¥å…¥DeepSeekåˆ†æé—®é¢˜å¹¶æä¾›è§£å†³æ–¹æ¡ˆ","date":"2025-02-24T05:54:53.000Z","updated":"2025-02-25T03:08:23.469Z","comments":true,"path":"2025/02/24/Zabbixè¿›é˜¶7--æ¥å…¥DeepSeekåˆ†æé—®é¢˜å¹¶æä¾›è§£å†³æ–¹æ¡ˆ/","link":"","permalink":"https://maydaychen.github.io/2025/02/24/Zabbix%E8%BF%9B%E9%98%B67--%E6%8E%A5%E5%85%A5DeepSeek%E5%88%86%E6%9E%90%E9%97%AE%E9%A2%98%E5%B9%B6%E6%8F%90%E4%BE%9B%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/","excerpt":"","text":"èƒŒæ™¯ç”±äºç°åœ¨AIçš„çˆ†ç«ï¼Œæ€ä¹ˆæœ‰æ•ˆä½¿ç”¨AIæ¥æé«˜æˆ‘ä»¬çš„å·¥ä½œæˆäº†å¾ˆå…³é”®çš„ä¸€ç‚¹ï¼Œç”¨å¥½äº†ï¼Œå·¥ä½œéƒ½èƒ½å°‘åšå¾ˆå¤šï¼Œæ‰€ä»¥æˆ‘ä»¬å°è¯•åœ¨Zabbixä¸­æ¥å…¥DeepSeekæ¥è·å–æŠ¥è­¦çš„ç›¸å…³çŸ¥è¯†å‚è€ƒæ–‡ç« ï¼š https://blog.zabbix.com/creating-a-personal-assistant-in-zabbix-with-artificial-intelligence/29596/æ–‡ç« ä¸­ä½¿ç”¨äº†Gemini,è€Œæˆ‘ä»¬è¿™å›é€‰æ‹©æ”¹æˆDeepseekï¼Œçœ‹èƒ½ä¸èƒ½å®ç°ç›¸åŒçš„åŠŸèƒ½ æ­¥éª¤åˆ›å»ºscriptAlert -&gt; Scriptåˆ›å»ºä¸€ä¸ªæ‰‹åŠ¨æ‰§è¡Œçš„scriptï¼Œä¹Ÿå°±æ˜¯è¯´åªæœ‰å½“ä½ æ‰‹åŠ¨é€‰æ‹©æ‰§è¡Œscriptçš„æ—¶å€™æ‰èƒ½å¤Ÿè¿è¡Œè¯¥è„šæœ¬ ä¿®æ”¹timeouttimeoutå‚æ•°å¿…é¡»ä¿®æ”¹ï¼Œå°¤å…¶æ˜¯æ¨ç†æ¨¡å‹çš„æ—¶å€™ï¼Œå› ä¸ºå¯èƒ½ç½‘ç»œé—®é¢˜æˆ–è€…æ€§èƒ½é—®é¢˜ï¼Œé»˜è®¤çš„30s timeoutæ—¶é—´æ˜¯ä¸å¤Ÿçš„ï¼Œæ‰€ä»¥å’±ä»¬å°½å¯èƒ½æ”¹å¤§ä¸€ç‚¹ï¼Œ60sæœ€å¤§ ä¿®æ”¹Parameterså‚æ•°åœ¨Parametersä¸­è¾“å…¥ä»¥ä¸‹ä¸¤ä¸ªå‚æ•°ï¼š alert_subjectï¼Œ {TRIGGER.NAME}, å³alertçš„åç§°ï¼Œç”¨æ¥åˆ†ææŠ¥é”™åŸå› ï¼Œæ‰€ä»¥alertçš„åç§°éœ€è¦è®¾ç½®çš„æ­£ç¡® api_key: API tokenï¼Œ sk-xxxxx model: æ¨¡å‹åç§° ç¼–è¾‘è„šæœ¬å†…å®¹åœ¨Scriptä¸­è¾“å…¥ä»¥ä¸‹å†…å®¹å€¼å¾—ä¸€è¯´çš„æ˜¯ï¼Œè¿™ä¸ªæ˜¯æ¥å…¥äº†é˜¿é‡Œäº‘çš„deepseepï¼Œå¦‚æœä½ æ¥å…¥çš„æ˜¯å…¶ä»–çš„å¹³å°ï¼Œè®°å¾—ä¿®æ”¹APIåœ°å€ä»¥åŠæ¥å£æ ¼å¼ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475var DeepSeek = &#123; params: &#123;&#125;, setParams: function (params) &#123; if (typeof params !== &#x27;object&#x27;) &#123; return; &#125; DeepSeek.params = params; if (typeof DeepSeek.params.api_key !== &#x27;string&#x27; || DeepSeek.params.api_key === &#x27;&#x27;) &#123; throw &#x27;API key for DeepSeek is required.&#x27;; &#125; DeepSeek.params.url = &#x27;https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions&#x27;; &#125;, request: function (data) &#123; if (!DeepSeek.params.api_key) &#123; throw &#x27;API key is missing.&#x27;; &#125; var request = new HttpRequest(); request.addHeader(&#x27;Content-Type: application/json&#x27;); request.addHeader(&#x27;Authorization: Bearer &#x27; + DeepSeek.params.api_key); var response = request.post(DeepSeek.params.url, JSON.stringify(data)); if (request.getStatus() &lt; 200 || request.getStatus() &gt;= 300) &#123; throw &#x27;DeepSeek API request failed with status code &#x27; + request.getStatus() + &#x27;.&#x27;; &#125; try &#123; response = JSON.parse(response); &#125; catch (error) &#123; Zabbix.log(4, &#x27;[ DeepSeek Webhook ] Failed to parse response.&#x27;); response = null; &#125; return response; &#125;&#125;;try &#123; var params = JSON.parse(value), data = &#123;&#125;, result = &quot;&quot;, required_params = [&#x27;alert_subject&#x27;]; Object.keys(params).forEach(function (key) &#123; if (required_params.indexOf(key) !== -1 &amp;&amp; params[key] === &#x27;&#x27;) &#123; throw &#x27;Parameter &quot;&#x27; + key + &#x27;&quot; cannot be empty.&#x27;; &#125; &#125;); data = &#123; &quot;model&quot;: &quot;deepseek-v3&quot;, // æŒ‡å®šæ¨¡å‹ &quot;messages&quot;: [ &#123; &quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;Alert : &quot; + params.alert_subject + &quot; occurred on Zabbix. &quot; + &quot;Suggest possible causes and solutions to resolve this issue. &quot; + &quot;Provide concise points (10 lines max) including root causes, debug commands, and mitigation steps.&quot; &#125; ] &#125;; DeepSeek.setParams(&#123;api_key: params.api_key&#125;); Zabbix.log(3, &#x27;[ DeepSeek debug ] &#x27; + data); var response = DeepSeek.request(data); if (response &amp;&amp; response.choices &amp;&amp; response.choices.length &gt; 0) &#123; result = response.choices[0].message.content.trim(); &#125; else &#123; throw &#x27;No valid response from DeepSeek.&#x27;; &#125; return result;&#125; catch (error) &#123; Zabbix.log(3, &#x27;[ DeepSeek Webhook ] ERROR: &#x27; + error); throw &#x27;Sending failed: &#x27; + error;&#125; æµ‹è¯•è„šæœ¬æ˜¯å¦å·¥ä½œMonitoring -&gt; Problemsä¸­ï¼Œéšä¾¿æ‰¾ä¸€ä¸ªé—®é¢˜ï¼Œç‚¹å‡»é—®é¢˜ï¼Œä¼šå‡ºç°åˆšåˆšåˆ›å»ºçš„scripté€‰é¡¹ æ€»ç»“è¿™ä¸ªä¸ªäººæ„Ÿè§‰åªæ˜¯ä¸€ä¸ªåˆé˜¶ç‰ˆï¼Œåªèƒ½æ ¹æ®è¯¥é—®é¢˜çš„titleè¿›è¡Œåˆ†æå¹¶ç»™å‡ºå¯¹åº”çš„å»ºè®®ï¼Œæ— æ³•ç»“åˆå…¶ä»–ä¿¡æ¯è¿›ä¸€æ­¥åˆ†æè€Œä¸”ï¼Œç”±äºç½‘ç»œé—®é¢˜ï¼ŒAPIå¾ˆå®¹æ˜“è¶…æ—¶ï¼Œå¯¼è‡´æ— æ³•å±•ç¤ºç»“æœï¼Œå› æ­¤å¯¹APIçš„æ€§èƒ½å’Œç½‘ç»œæœ‰è¾ƒé«˜è¦æ±‚ ä¼˜åŒ–ç›®å‰åœ¨Zabbixç•Œé¢ä¸Šï¼ŒWebhookå¯é…ç½®çš„æœ€å¤§è¶…æ—¶æ—¶é—´ä¸º60sï¼Œä¸è¿‡ç”±äºDeepseekæ€è€ƒæ—¶é—´å¯èƒ½è¾ƒé•¿(å³ä¾¿é…ç½®æˆV3ä¾æ—§è¶…æ—¶)ï¼Œå†åŠ ä¸Šç¬¬ä¸‰æ–¹APIçš„ç½‘ç»œæ€§èƒ½é—®é¢˜ï¼Œå¾€å¾€60sä¹Ÿæ˜¯ä¸å¤Ÿçš„è¿™ç§æƒ…å†µä¸‹ï¼Œå¯é€šè¿‡æ•°æ®åº“æ–¹å¼ç›´æ¥é…ç½®ä¸º300s 1234# æ ¹æ®è„šæœ¬åç§°æ›´æ–°è„šæœ¬è¶…æ—¶æ—¶é—´ä¸º300smysql -uzabbix -puse zabbix;update scripts set timeout=&#x27;300s&#x27; where name =&#x27;&#123;&#123;Script Name&#125;&#125;&#x27;;","categories":[{"name":"è¿ç»´","slug":"è¿ç»´","permalink":"https://maydaychen.github.io/categories/%E8%BF%90%E7%BB%B4/"}],"tags":[{"name":"ç›‘æ§","slug":"ç›‘æ§","permalink":"https://maydaychen.github.io/tags/%E7%9B%91%E6%8E%A7/"},{"name":"Zabbix","slug":"Zabbix","permalink":"https://maydaychen.github.io/tags/Zabbix/"}]},{"title":"Zabbixè¸©å‘è®°å½•4--HttpRequestï¼Œheaderæ·»åŠ æ— æ•ˆ","slug":"Zabbixè¸©å‘è®°å½•4--HttpRequestï¼Œheaderæ·»åŠ æ— æ•ˆ","date":"2025-02-24T03:13:30.000Z","updated":"2025-02-24T15:04:10.082Z","comments":true,"path":"2025/02/24/Zabbixè¸©å‘è®°å½•4--HttpRequestï¼Œheaderæ·»åŠ æ— æ•ˆ/","link":"","permalink":"https://maydaychen.github.io/2025/02/24/Zabbix%E8%B8%A9%E5%9D%91%E8%AE%B0%E5%BD%954--HttpRequest%EF%BC%8Cheader%E6%B7%BB%E5%8A%A0%E6%97%A0%E6%95%88/","excerpt":"","text":"èƒŒæ™¯åœ¨è¯•å›¾å°è¯•é€šè¿‡Zabbixæ¥å…¥DeepSeek APIçš„æ—¶å€™ï¼Œç”±äºä½¿ç”¨äº†HTTPçš„æ–¹å¼ï¼Œæ‰€ä»¥éœ€è¦ä½¿ç”¨Zabbix è‡ªå¸¦çš„HttpRequeståº“è¿›è¡Œè¯·æ±‚ï¼Œäº§ç”Ÿäº†ä¸‹é¢çš„é—®é¢˜ é—®é¢˜12345678910111213curlcurl -X POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions \\-H &quot;Authorization: Bearer $DASHSCOPE_API_KEY&quot; \\-H &quot;Content-Type: application/json&quot; \\-d &#x27;&#123; &quot;model&quot;: &quot;deepseek-r1&quot;, &quot;messages&quot;: [ &#123; &quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;9.9å’Œ9.11è°å¤§&quot; &#125; ]&#125;&#x27; è¿™æ˜¯é˜¿é‡Œäº‘çš„DeepSeek APIçš„è¯·æ±‚ç¤ºä¾‹ï¼Œå¯ä»¥çœ‹åˆ°å¿…é¡»åŠ å…¥ä¸¤ä¸ªheaderï¼Œå³å¿…é¡»æŠŠAPI_KEYæ”¾è¿›å»ï¼Œæ‰€ä»¥æˆ‘å†™äº†å¦‚ä¸‹çš„ä»£ç  12request.addHeader(&#x27;Content-Type&#x27;,&#x27;application/json&#x27;);request.addHeader(&#x27;Authorization&#x27;,&#x27;Bearer xxx&#x27;); ä½†æ˜¯æ”¶è·äº†å¦‚ä¸‹çš„error 12250751:20250224:105524.139 [ DeepSeek Webhook ] Received response with status code 401&#123;&quot;error&quot;:&#123;&quot;message&quot;:&quot;You didn&#x27;t provide an API key. You need to provide your API key in an Authorization header using Bearer auth (i.e. Authorization: Bearer YOUR_KEY). &quot;,&quot;type&quot;:&quot;invalid_request_error&quot;,&quot;param&quot;:null,&quot;code&quot;:null&#125;,&quot;request_id&quot;:&quot;327c1ff0-1ec2-9a60-b95b-9516ab2d2745&quot;&#125; æ˜¾ç¤ºæ²¡æœ‰æ‰¾åˆ°å¯¹åº”çš„key è§£å†³æ–¹æ¡ˆä»ä¸­æ–‡æ–‡æ¡£ä¸­ï¼Œå¾ˆéš¾å‘ç°é—®é¢˜å‡ºåœ¨äº†å“ªé‡Œä½†æ˜¯ç›´åˆ°æˆ‘å»æŸ¥ä»–çš„ä»£ç ç¤ºä¾‹ 1req.addHeader(&#x27;Content-Type: application/json&#x27;); ä½œä¸ºå¯¹æ¯” 1request.addHeader(&#x27;Content-Type&#x27;,&#x27;application/json&#x27;); æœ‰æ²¡æœ‰å‘ç°å“ªé‡Œä¸å¤ªä¸€æ ·ï¼Ÿæ ¹æœ¬å°±ä¸æ˜¯key-valueçš„æ¨¡å¼ï¼ç„¶åæˆ‘å°±å»è½¬æˆäº†è‹±æ–‡çš„æ–‡æ¡£ï¼Œè‹±æ–‡æ–‡æ¡£å¾ˆæ˜æ˜¾çš„å†™äº†åªéœ€è¦è¾“å…¥valueï¼Œæ‰€ä»¥æ ¹æœ¬å°±ä¸æ˜¯key-valueçš„æ ¼å¼ äºæ˜¯ä¿®æ”¹ä»£ç ï¼Œè¯·æ±‚æˆåŠŸï¼ æ€»ç»“ä¸è¯´åˆ«çš„ï¼Œå°‘çœ‹ä¸­æ–‡æ–‡æ¡£ï¼Œèƒ½å¸®è‡ªå·±å‡å°‘å¾ˆå¤šå‘ï¼","categories":[{"name":"è¿ç»´","slug":"è¿ç»´","permalink":"https://maydaychen.github.io/categories/%E8%BF%90%E7%BB%B4/"}],"tags":[{"name":"ç›‘æ§","slug":"ç›‘æ§","permalink":"https://maydaychen.github.io/tags/%E7%9B%91%E6%8E%A7/"},{"name":"Zabbix","slug":"Zabbix","permalink":"https://maydaychen.github.io/tags/Zabbix/"}]},{"title":"Prometheuså‘é€æŠ¥è­¦1--å¦‚ä½•å‘é€æŠ¥è­¦åˆ°Teams","slug":"Prometheuså‘é€æŠ¥è­¦1--å¦‚ä½•å‘é€æŠ¥è­¦åˆ°Teams","date":"2025-02-15T06:20:49.000Z","updated":"2025-04-01T02:39:23.687Z","comments":true,"path":"2025/02/15/Prometheuså‘é€æŠ¥è­¦1--å¦‚ä½•å‘é€æŠ¥è­¦åˆ°Teams/","link":"","permalink":"https://maydaychen.github.io/2025/02/15/Prometheus%E5%8F%91%E9%80%81%E6%8A%A5%E8%AD%A61--%E5%A6%82%E4%BD%95%E5%8F%91%E9%80%81%E6%8A%A5%E8%AD%A6%E5%88%B0Teams/","excerpt":"","text":"MS Teamsä¸­åˆ›å»ºwebhookå‚è€ƒåœ°å€ï¼šhttps://learn.microsoft.com/en-us/microsoftteams/platform/webhooks-and-connectors/how-to/add-incoming-webhook?tabs=newteams%2Cdotnet é…ç½®AlertManageråˆ†ä¸ºä¸¤ä¸ªç‰ˆæœ¬ï¼Œæ—§ç‰ˆæœ¬å’Œæ–°ç‰ˆæœ¬ è€ç‰ˆæœ¬è€ç‰ˆæœ¬è¯·å‚è€ƒè¿™ä¸ªå·¥å…·https://github.com/prometheus-msteams/prometheus-msteams æ–°ç‰ˆæœ¬åœ¨æ–°ç‰ˆæœ¬ä¸­ï¼Œæˆ‘ä»¬å°±å¯ä»¥ç›´æ¥ä½¿ç”¨teamsé…ç½®æ¥https://prometheus.io/docs/alerting/latest/configuration/#msteams_config é…ç½®receiver12345678910111213141516171819 - name: &#x27;teams&#x27; msteams_configs: - webhook_url: &#x27;&#123;&#123; webhook_url &#125;&#125;&#x27; title: &#x27;&#123;&#123; template &quot;teams_alert_title&quot; . &#125;&#125;&#x27; text: &#x27;&#123;&#123; template &quot;teams_alert_message&quot; . &#125;&#125;&#x27;templateFiles:teams_alert_title.tmpl: |-&#123;&#123; define &quot;teams_alert_title&quot; &#125;&#125;[&#123;&#123; .Status | toUpper &#125;&#125;] &#123;&#123; .CommonLabels.alertname &#125;&#125;&#123;&#123;- end &#125;&#125;teams_alert_message.tmpl: |-&#123;&#123; define &quot;teams_alert_message&quot; &#125;&#125;&#123;&#123; range .Alerts &#125;&#125;*Environment:* megatron-dev-eks-cluster*Namespace:* &#123;&#123; .Labels.namespace &#125;&#125;*Pod:* &#123;&#123; .Labels.pod &#125;&#125;*Summary:* &#123;&#123; .Annotations.summary &#125;&#125;*Description:* &#123;&#123; .Annotations.description &#125;&#125;*Runbook_Url:* &#123;&#123; .Annotations.runbook_url &#125;&#125;&#123;&#123; end &#125;&#125;&#123;&#123;- end &#125;&#125; webhook_url ä¸ºåœ¨Teamsä¸­åˆ›å»ºçš„webhookæˆ‘ä»¬å¯ä»¥ç›´æ¥ä½¿ç”¨è¿™ä¸ªtemplateï¼Œä¹Ÿå¯ä»¥åŠ ä¸€äº›å…¶ä»–çš„å†…å®¹ é…ç½®route routes: - receiver: &#39;xxx&#39; continue: true - receiver: &#39;teams&#39; æµ‹è¯•æ˜¯å¦å¯è¡Œç»è¿‡ä¸Šé¢çš„é…ç½®ï¼Œåœ¨Teamsä¸­æˆ‘ä»¬ç¡®å®å¯ä»¥æ”¶åˆ°å¯¹åº”çš„alertï¼Œå› æ­¤é…ç½®æˆåŠŸ","categories":[{"name":"è¿ç»´","slug":"è¿ç»´","permalink":"https://maydaychen.github.io/categories/%E8%BF%90%E7%BB%B4/"}],"tags":[{"name":"ç›‘æ§","slug":"ç›‘æ§","permalink":"https://maydaychen.github.io/tags/%E7%9B%91%E6%8E%A7/"},{"name":"Prometheus","slug":"Prometheus","permalink":"https://maydaychen.github.io/tags/Prometheus/"}]},{"title":"Zabbixç›‘æ§ä¸‡ç‰©5--ç›‘æ§JAVA heap memoryç›¸å…³","slug":"Zabbixç›‘æ§ä¸‡ç‰©5--ç›‘æ§JAVA-heap-memoryç›¸å…³","date":"2025-02-14T03:29:36.000Z","updated":"2025-02-24T15:17:51.809Z","comments":true,"path":"2025/02/14/Zabbixç›‘æ§ä¸‡ç‰©5--ç›‘æ§JAVA-heap-memoryç›¸å…³/","link":"","permalink":"https://maydaychen.github.io/2025/02/14/Zabbix%E7%9B%91%E6%8E%A7%E4%B8%87%E7%89%A95--%E7%9B%91%E6%8E%A7JAVA-heap-memory%E7%9B%B8%E5%85%B3/","excerpt":"","text":"èƒŒæ™¯å®ç°åˆ›å»ºscriptsåœ¨scriptsï¼ˆ&#x2F;etc&#x2F;zabbix&#x2F;scriptsï¼‰ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªæ–°çš„shellè„šæœ¬ get_heap_memory.sh 123456789101112#!/bin/bashpid=`ps -aux | grep java | grep wildfly | grep -v &quot;grep&quot; | grep -v $0 | awk &#x27;&#123;print $2&#125;&#x27;`S0U=`jstat -gc $pid | awk &#x27;&#123;if(NR!=1) print int($3+0.5)&#125;&#x27;`S1U=`jstat -gc $pid | awk &#x27;&#123;if(NR!=1) print int($4+0.5)&#125;&#x27;`EU=`jstat -gc $pid | awk &#x27;&#123;if(NR!=1) print int($6+0.5)&#125;&#x27;`OU=`jstat -gc $pid | awk &#x27;&#123;if(NR!=1) print int($8+0.5)&#125;&#x27;`heap_memory_used=$((S0U+S1U+EU+OU))heap_memory_max=`jinfo -flag MaxHeapSize $pid | awk -F &quot;=&quot; &#x27;&#123;print $2&#125;&#x27;`echo $heap_memory_used &gt; /var/log/zabbix/heap_memory_used.txtecho $heap_memory_max &gt; /var/log/zabbix/heap_memory_max.txt é…ç½®å®šæ—¶ä»»åŠ¡ç”±äºzabbix agentæ²¡æœ‰æƒé™å»è¿è¡Œè¿™ä¸ªå‘½ä»¤ï¼Œå› æ­¤æˆ‘ä»¬é‡‡ç”¨å®šæ—¶ä»»åŠ¡çš„æ–¹å¼ 1* * * * * sudo bash /etc/zabbix/get_heap_memory.sh æ³¨ï¼šå…¶å®å¯ä»¥é€šè¿‡èµ‹äºˆagentè¿è¡Œè¿™ä¸ªè„šæœ¬çš„æƒé™æ¥çœç•¥è¿™ä¸€æ­¥ è·å¾—ä»»åŠ¡æ‰§è¡Œç»“æœåœ¨è„šæœ¬è¿è¡Œåï¼Œä¼šç”Ÿæˆä¸‹é¢ä¸¤ä¸ªæ–‡ä»¶ï¼Œæˆ‘ä»¬ç›‘æ§è¿™ä¸¤ä¸ªæ–‡ä»¶å³å¯ 12/var/log/zabbix/heap_memory_used.txt/var/log/zabbix/heap_memory_max.txt åœ¨consoleä¸­é…ç½®åˆ†åˆ«åˆ›å»ºä¸¤ä¸ªitemï¼Œç”¨æ¥ç›‘æ§æœ€å¤§å€¼å’Œå·²ä½¿ç”¨å€¼","categories":[{"name":"è¿ç»´","slug":"è¿ç»´","permalink":"https://maydaychen.github.io/categories/%E8%BF%90%E7%BB%B4/"}],"tags":[{"name":"ç›‘æ§","slug":"ç›‘æ§","permalink":"https://maydaychen.github.io/tags/%E7%9B%91%E6%8E%A7/"},{"name":"Zabbix","slug":"Zabbix","permalink":"https://maydaychen.github.io/tags/Zabbix/"}]},{"title":"AIå°è¯•æ—¥å¿—3--Ollamaå¸¸ç”¨å‘½ä»¤è®°å½•","slug":"AIå°è¯•æ—¥å¿—3--Ollamaå¸¸ç”¨å‘½ä»¤è®°å½•","date":"2025-02-13T14:15:37.000Z","updated":"2025-02-24T15:21:20.074Z","comments":true,"path":"2025/02/13/AIå°è¯•æ—¥å¿—3--Ollamaå¸¸ç”¨å‘½ä»¤è®°å½•/","link":"","permalink":"https://maydaychen.github.io/2025/02/13/AI%E5%B0%9D%E8%AF%95%E6%97%A5%E5%BF%973--Ollama%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E8%AE%B0%E5%BD%95/","excerpt":"","text":"æŸ¥çœ‹æ‰€æœ‰æ”¯æŒçš„æ¨¡å‹åœ¨è¿™ä¸ªåœ°æ–¹èƒ½çœ‹åˆ°æ‰€æœ‰æ”¯æŒçš„æ¨¡å‹ï¼Œå¹¶ä¸”ç‚¹å‡»å¯¹åº”çš„æ¨¡å‹åç§°å¯ä»¥æœ‰è¯¦ç»†çš„ä»‹ç»å’Œä¸‹è½½å‘½ä»¤ åˆ—å‡ºæ‰€æœ‰æ¨¡å‹ (list)åˆ—å‡ºæœ¬åœ°æ‰€æœ‰å¯ç”¨çš„æ¨¡å‹,å¯ä»¥åœ¨è¿™é‡ŒæŸ¥æ‰¾æ¨¡å‹åç§°ã€‚ 12ollama listollama ls è¿è¡Œæ¨¡å‹ (run)è¿è¡Œä¸€ä¸ªå·²å®‰è£…çš„æ¨¡å‹ï¼Œæ‰§è¡ŒæŸäº›ä»»åŠ¡ã€‚ 1ollama run model_name æ˜¾ç¤ºæ¨¡å‹ä¿¡æ¯ (show)æŸ¥çœ‹ç‰¹å®šæ¨¡å‹çš„è¯¦ç»†ä¿¡æ¯ï¼Œä¾‹å¦‚æ¨¡å‹åç§°ã€ç‰ˆæœ¬ç­‰ã€‚ 1ollama show model_name åˆ é™¤æ¨¡å‹ (rm)åˆ é™¤ä¸€ä¸ªå·²å®‰è£…çš„æ¨¡å‹ã€‚ 1ollama rm model_name æŸ¥çœ‹ç‰ˆæœ¬ (version)æ˜¾ç¤ºå½“å‰ ollama å·¥å…·çš„ç‰ˆæœ¬ä¿¡æ¯ã€‚ 12ollama -vollama --version","categories":[{"name":"AI","slug":"AI","permalink":"https://maydaychen.github.io/categories/AI/"}],"tags":[]},{"title":"Zabbixç›‘æ§ä¸‡ç‰©4--ç›‘æ§SSLè¯ä¹¦æœ‰æ•ˆæœŸ","slug":"Zabbixç›‘æ§ä¸‡ç‰©4--ç›‘æ§SSLè¯ä¹¦æœ‰æ•ˆæœŸ","date":"2025-02-13T03:28:15.000Z","updated":"2025-08-13T03:08:31.210Z","comments":true,"path":"2025/02/13/Zabbixç›‘æ§ä¸‡ç‰©4--ç›‘æ§SSLè¯ä¹¦æœ‰æ•ˆæœŸ/","link":"","permalink":"https://maydaychen.github.io/2025/02/13/Zabbix%E7%9B%91%E6%8E%A7%E4%B8%87%E7%89%A94--%E7%9B%91%E6%8E%A7SSL%E8%AF%81%E4%B9%A6%E6%9C%89%E6%95%88%E6%9C%9F/","excerpt":"","text":"èƒŒæ™¯é¡¹ç›®éœ€è¦ï¼Œéœ€è¦ç›‘æ§æ‰€æœ‰çš„SSLè¯ä¹¦çš„æœ‰æ•ˆæœŸï¼Œå› æ­¤éœ€è¦è‡ªå®šä¹‰ä¸€ä¸ªç›‘æ§é¡¹ å®ç°ä½¿ç”¨è‡ªå®šä¹‰è„šæœ¬åˆ›å»ºè‡ªå®šä¹‰è„šæœ¬åœ¨Zabbixçš„scriptsç›®å½•(&#x2F;etc&#x2F;zabbix&#x2F;scripts&#x2F;)ä¸‹åˆ›å»ºä¸€ä¸ªæ–°çš„shellè„šæœ¬check_ssl.shï¼Œå†…å®¹å¦‚ä¸‹ 1234#!/bin/bashtime=$(echo | openssl s_client -connect $1:443 2&gt;/dev/null | openssl x509 -noout -dates |awk -F&#x27;=&#x27; &#x27;NR==2&#123;print $2&#125;&#x27;)times=$((($(date +%s -d &quot;$time&quot;)-$(date +%s))/(60*60*24)))echo $times ä¿®æ”¹agenté…ç½®æ–‡ä»¶1UserParameter=check_ssl[*],/etc/zabbix/scripts/check_ssl.sh $1 åœ¨Zabbix consoleä¸­é…ç½®åˆ›å»ºå¦‚ä¸‹itemnameå€¼ä¸ºSSL certification expire date of keyå€¼ä¸ºcheck_ssl[domain]éƒ½éœ€è¦å¡«å…¥è‡ªå·±è¦ç›‘æ§çš„domain åœ¨latest dataä¸­å³å¯çœ‹åˆ°å…·ä½“çš„æœ‰æ•ˆæœŸ ä½¿ç”¨agent2è‡ªå¸¦çš„æ’ä»¶å‚è€ƒæ–‡ç« ï¼šhttps://www.zabbix.com/integrations/sslæˆ‘ä»¬éœ€è¦ä½¿ç”¨Website certificate by Zabbix agent 2è¿™ä¸€ä¸ªæ¨¡ç‰ˆ é…ç½®å®å˜é‡ æŸ¥çœ‹å…·ä½“çš„item ä¿®æ”¹itemä»¥é€‚åº”å¤šä¸ªdomainæœ‰æ—¶å€™æˆ‘ä»¬éœ€è¦ç›‘æ§ä¸æ­¢ä¸€ä¸ªdomainï¼Œè€Œæ˜¯å¾ˆå¤šä¸ªdomainï¼Œè¿™æ—¶å€™è¿™ä¸ªitemå°±æ˜¾å¾—æœ‰ç‚¹ä¸å¤Ÿäº†ï¼Œè¿™æ—¶å€™æˆ‘ä»¬å°±éœ€è¦ç”¨åˆ°LLDï¼ŒåŠ¨æ€åˆ›å»ºå¤šä¸ªdomainçš„ç›‘æ§å…·ä½“æ“ä½œå¦‚ä¸‹ æ›´æ–°é¢‘ç‡ä¸éœ€è¦å¤ªä¹…ï¼Œå› ä¸ºsslä¸å¯èƒ½ä¸€ç›´å˜ï¼Œè¿™ä¸ªkeyçš„è¯ï¼Œéœ€è¦åœ¨agentä¸­é…ç½®ä¸€ä¸ªè‡ªå®šä¹‰è„šæœ¬ï¼Œé€šè¿‡è„šæœ¬è¿”å›æ‰€æœ‰éœ€è¦ç›‘æ§çš„domain item propetypeçš„è¯ï¼Œè·Ÿä¹‹å‰åœ¨itemä¸­çš„ä¿æŒä¸€è‡´å³å¯è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥åœ¨zabbixä¸­åŠ¨æ€è·å–æ‰€æœ‰çš„domainå¹¶ä¸€æ¬¡æ€§ç›‘æ§ï¼Œä¸éœ€è¦åˆ›å»ºå¾ˆå¤šä¸ªitemäº†","categories":[{"name":"è¿ç»´","slug":"è¿ç»´","permalink":"https://maydaychen.github.io/categories/%E8%BF%90%E7%BB%B4/"}],"tags":[{"name":"ç›‘æ§","slug":"ç›‘æ§","permalink":"https://maydaychen.github.io/tags/%E7%9B%91%E6%8E%A7/"},{"name":"Zabbix","slug":"Zabbix","permalink":"https://maydaychen.github.io/tags/Zabbix/"}]},{"title":"Zabbixè¸©å‘è®°å½•3--Triggerä¸­çš„timeå‡½æ•°å‘","slug":"Zabbixè¸©å‘è®°å½•3--Triggerä¸­çš„timeå‡½æ•°å‘","date":"2025-02-12T07:52:56.000Z","updated":"2025-02-24T15:04:10.064Z","comments":true,"path":"2025/02/12/Zabbixè¸©å‘è®°å½•3--Triggerä¸­çš„timeå‡½æ•°å‘/","link":"","permalink":"https://maydaychen.github.io/2025/02/12/Zabbix%E8%B8%A9%E5%9D%91%E8%AE%B0%E5%BD%953--Trigger%E4%B8%AD%E7%9A%84time%E5%87%BD%E6%95%B0%E5%9D%91/","excerpt":"","text":"é—®é¢˜æè¿°ç”±äºåŠŸèƒ½éœ€æ±‚ï¼Œéœ€è¦é™åˆ¶triggerçš„æŠ¥è­¦æ—¶é—´ï¼Œæ‰€ä»¥åŠ äº†å¦‚ä¸‹çš„æŠ¥è­¦é™åˆ¶ 1and (time()&gt;010000 and time()&lt;045959) ä½†æ˜¯äº‹ä¸æ„¿è¿ï¼ŒæŠ¥è­¦çš„æ—¶é—´æ€»æ˜¯å¯¹ä¸ä¸Šä½†æ˜¯ï¼ŒZabbixè®¾ç½®çš„æ—¶åŒºå°±æ˜¯åŒ—äº¬æ—¶é—´ï¼Œåº”è¯¥æ˜¯æ²¡æœ‰é—®é¢˜çš„ é—®é¢˜ç ”ç©¶æ ¹æ®æŠ¥è­¦çš„æ—¶é—´ï¼Œä¸é¢„æœŸæ—¶é—´ç›¸å¯¹æ¯”ï¼Œå‘ç°æ€»æ˜¯å·®äº†8ä¸ªå°æ—¶ï¼Œæ‰€ä»¥æ€€ç–‘æ˜¯ä¸æ˜¯å“ªé‡Œçš„æ—¶åŒºè®¾ç½®ä¸æ­£ç¡®ï¼Œé‡‡ç”¨æ’é™¤æ³•ï¼Œæœ€ç»ˆç¡®å®šæ˜¯æœåŠ¡å™¨æœ¬èº«è®¾ç½®çš„æ—¶åŒºåœ¨UTCå¯¼è‡´ è§£å†³æ–¹æ¡ˆéœ€è¦ä¿®æ”¹æœåŠ¡å™¨å¯¹åº”çš„æ—¶åŒº æŸ¥çœ‹å½“å‰æ—¶åŒº123456timedatectlLocal time: Wed 2023-10-25 12:34:56 UTCUniversal time: Wed 2023-10-25 12:34:56 UTCRTC time: Wed 2023-10-25 12:34:56Time zone: UTC (UTC, +0000) åˆ—å‡ºæ‰€æœ‰çš„æ—¶åŒº1timedatectl list-timezones |grep Asia è®¾ç½®æ—¶åŒº1sudo timedatectl set-timezone &lt;æ—¶åŒºåç§°&gt; éªŒè¯æ—¶åŒºæ˜¯å¦ä¿®æ”¹æˆåŠŸ1timedatectl æ€»ç»“æ ¹æ®è¿™ä¸ªè§£å†³æ–¹æ¡ˆå¯ä»¥çœ‹å‡ºï¼Œzabbixçš„time()å‡½æ•°åº”è¯¥æ˜¯ç›´æ¥è°ƒç”¨äº†æœåŠ¡å™¨çš„timeå‘½ä»¤ï¼Œå› æ­¤ï¼Œè·ŸZabbixè¿™ä¸ªæœåŠ¡æ— å…³ï¼Œæˆ‘ä»¬éœ€è¦é’ˆå¯¹è¿è¡ŒæœåŠ¡å™¨åšé’ˆå¯¹æ€§ä¿®æ”¹","categories":[{"name":"è¿ç»´","slug":"è¿ç»´","permalink":"https://maydaychen.github.io/categories/%E8%BF%90%E7%BB%B4/"}],"tags":[{"name":"ç›‘æ§","slug":"ç›‘æ§","permalink":"https://maydaychen.github.io/tags/%E7%9B%91%E6%8E%A7/"},{"name":"Zabbix","slug":"Zabbix","permalink":"https://maydaychen.github.io/tags/Zabbix/"}]},{"title":"Grafanaä½¿ç”¨æ—¥å¿—8--å¦‚ä½•è¿ç§»Grafanaåˆ°ä¸€å°æ–°æœåŠ¡å™¨","slug":"Grafanaä½¿ç”¨æ—¥å¿—8--å¦‚ä½•è¿ç§»Grafanaåˆ°ä¸€å°æ–°æœåŠ¡å™¨","date":"2025-02-12T02:44:22.000Z","updated":"2025-02-24T15:25:25.424Z","comments":true,"path":"2025/02/12/Grafanaä½¿ç”¨æ—¥å¿—8--å¦‚ä½•è¿ç§»Grafanaåˆ°ä¸€å°æ–°æœåŠ¡å™¨/","link":"","permalink":"https://maydaychen.github.io/2025/02/12/Grafana%E4%BD%BF%E7%94%A8%E6%97%A5%E5%BF%978--%E5%A6%82%E4%BD%95%E8%BF%81%E7%A7%BBGrafana%E5%88%B0%E4%B8%80%E5%8F%B0%E6%96%B0%E6%9C%8D%E5%8A%A1%E5%99%A8/","excerpt":"","text":"æœ‰æ—¶å€™ç”±äºæœåŠ¡å™¨æ›´æ–°ä¹‹ç±»çš„ï¼Œæˆ‘ä»¬éœ€è¦è¿ç§»ä¸€æ•´å¥—Grafanaï¼Œè¿™æ—¶å€™è¯¥æ€ä¹ˆæ“ä½œå‘¢ï¼Ÿä¸‹é¢è®©æˆ‘ä¸€æ­¥æ­¥è¯´æ˜ä¸‹ å®‰è£…Grafanaåœ¨æ–°çš„æœåŠ¡å™¨ä¸Šå®‰è£…Grafanaè¿™ä¸ªä¸å†èµ˜è¿°ï¼Œå¯ä»¥çœ‹ä¸€ä¸‹æˆ‘ä¹‹å‰çš„æ–‡ç«  å¤‡ä»½åŠè¿ç§»è¿ç§»é…ç½®æ–‡ä»¶é…ç½®æ–‡ä»¶å³grafana.iniï¼Œä¸€èˆ¬å­˜æ”¾äº&#x2F;etc&#x2F;grafana&#x2F;grafana.iniä¸€èˆ¬æœ‰ä¸¤ç§è¿ç§»æ³•ï¼Œ ç›´æ¥è¦†ç›–é…ç½®æ–‡ä»¶ï¼Œä½†æ˜¯å¦‚æœç‰ˆæœ¬å·å·®å¼‚è¿‡å¤§ï¼Œä¼šæœ‰å¾ˆå¤šçš„æ–°çš„é…ç½®é¡¹ï¼Œç›´æ¥è¦†ç›–ä¼šæœ‰é£é™© å¯¹æ¯”é…ç½®æ–‡ä»¶ï¼Œé€ä¸ªä¿®æ”¹ï¼Œå¦‚æœé…ç½®é¡¹ä¸å¤šçš„è¯ï¼Œå»ºè®®ä½¿ç”¨æ­¤æ–¹å¼ è¿ç§»æ•°æ®åº“æ–‡ä»¶æ•°æ®åº“å’Œæ’ä»¶éƒ½åœ¨ &#x2F;var&#x2F;lib&#x2F;grafana æ–‡ä»¶å¤¹, æ‰€ä»¥æˆ‘ä»¬è¿ç§»è¿™æ•´ä¸ªæ–‡ä»¶å¤¹å°±è¡Œ å…¶ä¸­æœ€é‡è¦çš„å°±æ˜¯DBæ–‡ä»¶å’Œpluginæ–‡ä»¶ï¼Œå½“ç„¶ï¼Œå¦‚æœä¸æƒ³åŒæ­¥pluginï¼Œç›´æ¥è·³è¿‡å°±è¡Œ å¯åŠ¨åŠæŸ¥æ¼è¡¥ç¼ºå¯åŠ¨Grafana1sudo systemctl start grafana-server æ’ä»¶æ£€æŸ¥å¦‚æœæ’ä»¶ä¸å…¨æˆ–è€…å¤ªè€ï¼Œå»ºè®®åˆ é™¤æ’ä»¶é‡æ–°å®‰è£… 1grafana-cli plugins install [plugin-name]","categories":[{"name":"è¿ç»´","slug":"è¿ç»´","permalink":"https://maydaychen.github.io/categories/%E8%BF%90%E7%BB%B4/"}],"tags":[{"name":"ç›‘æ§","slug":"ç›‘æ§","permalink":"https://maydaychen.github.io/tags/%E7%9B%91%E6%8E%A7/"},{"name":"Grafana","slug":"Grafana","permalink":"https://maydaychen.github.io/tags/Grafana/"}]},{"title":"Grafanaä½¿ç”¨æ—¥å¿—7--æ¥å…¥OpenSearch","slug":"Grafanaä½¿ç”¨æ—¥å¿—7--æ¥å…¥OpenSearch","date":"2025-02-11T10:11:06.000Z","updated":"2025-02-24T15:25:25.441Z","comments":true,"path":"2025/02/11/Grafanaä½¿ç”¨æ—¥å¿—7--æ¥å…¥OpenSearch/","link":"","permalink":"https://maydaychen.github.io/2025/02/11/Grafana%E4%BD%BF%E7%94%A8%E6%97%A5%E5%BF%977--%E6%8E%A5%E5%85%A5OpenSearch/","excerpt":"","text":"æ·»åŠ OpenSearchæ•°æ®æº é…ç½®è¿æ¥ä¿¡æ¯ Name: ä»»æ„å¡«å†™å³å¯ URL: åœ¨AWS OpenSearchä¸­æ‰¾åˆ°ï¼Œendpointä¿¡æ¯ Accessï¼š é»˜è®¤Serverå³å¯å…¶ä»–å¯ä¸å¡« é…ç½®è®¤è¯ä¿¡æ¯Basicæ¨¡å¼é€‚åˆå¯ä»¥ç›´æ¥ç”¨è´¦å·å¯†ç ç™»å½•OpenSearchçš„æƒ…å†µä¸‹ä½¿ç”¨ ç›´æ¥åœ¨ä¸‹é¢çš„Basic Auth Detailsé‡Œé¢å¡«å…¥ç”¨æˆ·åå¯†ç å³å¯ sigv4æ¨¡å¼é€‚åˆåªæ¥å…¥äº†ç¬¬ä¸‰æ–¹ï¼Œå¹¶ä¸”å¯èƒ½è®¾ç½®äº†MFAå¯¼è‡´æ— æ³•ç›´æ¥ç™»å½•çš„æƒ…å†µä¸‹ è¿™è¾¹çš„Authentication Provideræœ‰ä¸‰ä¸ªé€‰é¡¹ï¼Œåˆ†åˆ«ä¸º Authentication Provider AWS SDK Default é»˜è®¤é€‰é¡¹ï¼Œä¼šä»ç¯å¢ƒå˜é‡ï¼Œé…ç½®æ–‡ä»¶ä»¥åŠEC2 IAM Roleä¸­è·å¾— Access &amp; Secrct Key è¯¥æ¨¡å¼é€‚åˆåœ¨Grafanaé…ç½®ä¸­ç›´æ¥æŒ‡å®šAWSå‡­è¯ Credentials file ä¼šä»æŒ‡å®šçš„AWSå‡­è¯æ–‡ä»¶ä¸­è¯»å–å‡­è¯,éœ€è¦æä¾›å‡­è¯æ–‡ä»¶çš„è·¯å¾„ Assume Role ARN éœ€è¦è®¾å®šä¸€ä¸ªIAM Roleçš„ARNï¼Œè¿™ä¸ªroleéœ€è¦æœ‰æŸ¥è¯¢OpenSearchçš„æƒé™ï¼Œé€šå¸¸å¯ä»¥ç›´æ¥è®¾ç½®æƒé™å¦‚ä¸‹1234567891011&#123; &quot;Effect&quot;: &quot;Allow&quot;, &quot;Action&quot;: &quot;es:*&quot;, &quot;Resource&quot;: &quot;arn:aws:es:region:account-id:domain/domain-name/*&quot;&#125;æˆ–è€…è¿™æ · &quot;Action&quot;: [ &quot;es:ESHttpGet&quot;, &quot;es:ESHttpPost&quot; ], å…¶ä»–çš„æ²¡æœ‰ä»€ä¹ˆè¦ç‰¹åˆ«è®¾ç½®çš„ï¼Œç›´æ¥save&amp;testå³å¯","categories":[{"name":"è¿ç»´","slug":"è¿ç»´","permalink":"https://maydaychen.github.io/categories/%E8%BF%90%E7%BB%B4/"}],"tags":[{"name":"ç›‘æ§","slug":"ç›‘æ§","permalink":"https://maydaychen.github.io/tags/%E7%9B%91%E6%8E%A7/"},{"name":"Grafana","slug":"Grafana","permalink":"https://maydaychen.github.io/tags/Grafana/"}]},{"title":"Linuxæ“ä½œè®°å½•7--ç”¨æˆ·å¢åˆ æ”¹æŸ¥ç›¸å…³æ“ä½œ","slug":"Linuxæ“ä½œè®°å½•7--ç”¨æˆ·å¢åˆ æ”¹æŸ¥ç›¸å…³æ“ä½œ","date":"2025-02-11T09:47:01.000Z","updated":"2025-02-24T14:50:48.244Z","comments":true,"path":"2025/02/11/Linuxæ“ä½œè®°å½•7--ç”¨æˆ·å¢åˆ æ”¹æŸ¥ç›¸å…³æ“ä½œ/","link":"","permalink":"https://maydaychen.github.io/2025/02/11/Linux%E6%93%8D%E4%BD%9C%E8%AE%B0%E5%BD%957--%E7%94%A8%E6%88%B7%E5%A2%9E%E5%88%A0%E6%94%B9%E6%9F%A5%E7%9B%B8%E5%85%B3%E6%93%8D%E4%BD%9C/","excerpt":"","text":"åˆ›å»ºï¼ˆç®¡ç†å‘˜ï¼‰ç”¨æˆ·123456789101112131415161718192021222324252627282930313233343536373839#!/bin/shUSERNAME=[username]# 1ä»£è¡¨æœ‰sudoæƒé™ï¼Œ0ä»£è¡¨æ™®é€šç”¨æˆ·SUDO_FLAG=1PUBKEY=&quot;ssh-rsa xxx&quot;if id &quot;$&#123;USERNAME&#125;&quot; &amp;&gt;/dev/null; then echo &#x27;adduser: user &#x27;$&#123;USERNAME&#125;&#x27; already exists&#x27; exit 0else adduser $&#123;USERNAME&#125; mkdir /home/$&#123;USERNAME&#125;/.ssh chmod 700 /home/$&#123;USERNAME&#125;/.ssha touch /home/$&#123;USERNAME&#125;/.ssh/authorized_keys chmod 600 /home/$&#123;USERNAME&#125;/.ssh/authorized_keys echo $&#123;PUBKEY&#125; &gt;&gt; /home/$&#123;USERNAME&#125;/.ssh/authorized_keys chown $&#123;USERNAME&#125;:$&#123;USERNAME&#125; /home/$&#123;USERNAME&#125;/.ssh/* chown $&#123;USERNAME&#125;:$&#123;USERNAME&#125; /home/$&#123;USERNAME&#125;/.ssh #depends whether sudo right is needed for the user if [ $SUDO_FLAG -eq 1 ]; then touch /etc/sudoers.d/$&#123;USERNAME&#125; echo $&#123;USERNAME&#125;&#x27; ALL=(ALL) NOPASSWD:ALL&#x27; &gt;&gt; /etc/sudoers.d/$&#123;USERNAME&#125; echo yi.chen&#x27; ALL=(ALL) NOPASSWD:ALL&#x27; &gt;&gt; /etc/sudoers.d/yi.chen chmod 640 /etc/sudoers.d/$&#123;USERNAME&#125; fifichage -I -1 -m 0 -M 99999 -E -1 $&#123;USERNAME&#125;if [ $? -eq 0 ]; then echo &#x27;Success! Created user &#x27;$&#123;USERNAME&#125;&#x27; &#x27;else echo &#x27;Failed! user:&#x27;$&#123;USERNAME&#125;&#x27;&#x27;fi åˆ é™¤ï¼ˆç®¡ç†å‘˜ï¼‰ç”¨æˆ·123456789# æŸ¥è¯¢æ™®é€šç”¨æˆ·å¹¶åˆ é™¤cat /etc/passwd | grep usernamesudo userdel -r username# æŸ¥çœ‹ç”¨æˆ·æœ‰æ²¡æœ‰è®¾å®šå®šæ—¶ä»»åŠ¡ï¼Œæœ‰çš„è¯è®°å¾—åˆ é™¤sudo crontab -u username -l# åˆ é™¤ä¸ç”¨æˆ·ç›¸å…³çš„sudoersæ–‡ä»¶sudo rm /etc/sudoers.d/username","categories":[{"name":"è¿ç»´","slug":"è¿ç»´","permalink":"https://maydaychen.github.io/categories/%E8%BF%90%E7%BB%B4/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"https://maydaychen.github.io/tags/Linux/"}]},{"title":"Zabbixè¸©å‘è®°å½•2--è¿è¡Œä¸€æ®µæ—¶é—´åIOè¿‡é«˜çš„é—®é¢˜è§£å†³","slug":"Zabbixè¸©å‘è®°å½•2--è¿è¡Œä¸€æ®µæ—¶é—´åIOè¿‡é«˜çš„é—®é¢˜è§£å†³","date":"2025-02-11T09:35:33.000Z","updated":"2025-02-24T15:03:38.814Z","comments":true,"path":"2025/02/11/Zabbixè¸©å‘è®°å½•2--è¿è¡Œä¸€æ®µæ—¶é—´åIOè¿‡é«˜çš„é—®é¢˜è§£å†³/","link":"","permalink":"https://maydaychen.github.io/2025/02/11/Zabbix%E8%B8%A9%E5%9D%91%E8%AE%B0%E5%BD%952--%E8%BF%90%E8%A1%8C%E4%B8%80%E6%AE%B5%E6%97%B6%E9%97%B4%E5%90%8EIO%E8%BF%87%E9%AB%98%E7%9A%84%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3/","excerpt":"","text":"é—®é¢˜æè¿°zabbix server æœåŠ¡å™¨è¿è¡Œä¸€æ®µæ—¶é—´åæœ‰ä¸¤ä¸ªè¿›ç¨‹ä¼šå‡ºç°cpuè´Ÿè½½å’Œioç“¶é¢ˆï¼Œä¸»è¦æ˜¯: 12zabbix busy housekeeper processes zabbix busy history syncer processes å‡ºç°è¿™ä¸¤ä¸ªé—®é¢˜ä¸»è¦æ˜¯è¡¨æ•°æ®å¤ªå¤§ history_uintï¼Œtrends_uintï¼Œhistoryä¸»è¦æ˜¯è¿™ä¸‰ä¸ªè¡¨ï¼Œ è§£å†³æ–¹æ³•12mysql&gt;show variables like &quot;%_buffer%&quot;;innodb_buffer_pool_size=8M é»˜è®¤mysqlåªæœ‰8Mè€Œå·²ï¼Œ å¯å°†æ­¤å€¼è°ƒå€¼ç‰©ç†å†…å­˜çš„70%ï¼Œæ¯”å¦‚innodb_buffer_pool_size&#x3D;4Gï¼Œmysqlçš„è¿™ä¸ªé…ç½®ä¸€èˆ¬æ˜¯åœ¨&#x2F;etc&#x2F;my.cnfï¼Œå¦‚æœæ¬¡é…ç½®æ–‡ä»¶é‡Œæ²¡æœ‰æ­¤å±æ€§ï¼Œç›´æ¥æ·»åŠ ï¼Œä¿å­˜ï¼Œé‡å¯mysqlå³å¯ã€‚ 1systemctl restart mysql","categories":[{"name":"è¿ç»´","slug":"è¿ç»´","permalink":"https://maydaychen.github.io/categories/%E8%BF%90%E7%BB%B4/"}],"tags":[{"name":"ç›‘æ§","slug":"ç›‘æ§","permalink":"https://maydaychen.github.io/tags/%E7%9B%91%E6%8E%A7/"},{"name":"Zabbix","slug":"Zabbix","permalink":"https://maydaychen.github.io/tags/Zabbix/"}]},{"title":"Zabbixç›‘æ§ä¸‡ç‰©3--ç›‘æ§Windowsä¸‹æŸä¸ªæ–‡ä»¶å¤¹çš„æ‰€æœ‰æ–‡ä»¶å˜åŒ–","slug":"Zabbixç›‘æ§ä¸‡ç‰©3--ç›‘æ§Windowsä¸‹æŸä¸ªæ–‡ä»¶å¤¹çš„æ‰€æœ‰æ–‡ä»¶å˜åŒ–","date":"2025-02-11T09:32:19.000Z","updated":"2025-02-24T15:16:43.682Z","comments":true,"path":"2025/02/11/Zabbixç›‘æ§ä¸‡ç‰©3--ç›‘æ§Windowsä¸‹æŸä¸ªæ–‡ä»¶å¤¹çš„æ‰€æœ‰æ–‡ä»¶å˜åŒ–/","link":"","permalink":"https://maydaychen.github.io/2025/02/11/Zabbix%E7%9B%91%E6%8E%A7%E4%B8%87%E7%89%A93--%E7%9B%91%E6%8E%A7Windows%E4%B8%8B%E6%9F%90%E4%B8%AA%E6%96%87%E4%BB%B6%E5%A4%B9%E7%9A%84%E6%89%80%E6%9C%89%E6%96%87%E4%BB%B6%E5%8F%98%E5%8C%96/","excerpt":"","text":"è·å–æ‰€æœ‰çš„æŒ‡å®šè·¯å¾„ä¸‹çš„æ–‡ä»¶åˆ—è¡¨ä»¥D:\\Appsè¿™ä¸ªæ–‡ä»¶å¤¹ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ä¸ºä¾‹ï¼Œæˆ‘éœ€è¦æ‰¾åˆ°è¿™ä¸ªæ–‡ä»¶å¤¹é‡Œé¢çš„å­æ–‡ä»¶å¤¹ä¸­çš„æ‰€æœ‰æ–‡ä»¶ï¼Œä½†æ˜¯æ’é™¤backupè¿™ä¸ªæ–‡ä»¶å¤¹ï¼Œä¸‹é¢æˆ‘ä»¬æ¥çœ‹æ€ä¹ˆæ“ä½œåœ¨scriptsç›®å½•ä¸‹åˆ›å»ºcheck_file_in_D_Apps.ps1æ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ 1234567891011$Path = &quot;D:\\Apps&quot;$files = Get-ChildItem -Path $Path -File -Recurse | Where-Object &#123; -not ($_.FullName -like &quot;*\\backup\\*&quot;)&#125; | ForEach-Object &#123; @&#123; &quot;&#123;#FULLPATH&#125;&quot; = $_.FullName &#125;&#125;$files | ConvertTo-Json -Depth 1 ä¿®æ”¹zabbix agent conf file1UserParameter=file_check_D_Apps,powershell -NoProfile -ExecutionPolicy Bypass -File &quot;C:\\Program Files\\zabbix\\scripts\\check_file_in_D_Apps.ps1&quot; é‡å¯zabbix agentç”±äºè¿™é‡Œæ˜¯windowsæœåŠ¡å™¨ï¼Œæ‰€ä»¥ç›´æ¥å»ä»»åŠ¡ç®¡ç†å™¨ä¸­serviceé‚£è¾¹é‡å¯å³å¯ é…ç½®LLD æŒ‰ç…§ä¸Šå›¾æ‰€ç¤ºï¼Œä½¿ç”¨vfs.dir.sizeæ¥ç›‘æ§æ¯ä¸€ä¸ªæ–‡ä»¶çš„å¤§å°ï¼Œä¸€æ—¦æœ‰æ–‡ä»¶å¤§å°å‘ç”Ÿå˜åŒ–å°±ç«‹å³è§¦å‘æŠ¥è­¦","categories":[{"name":"è¿ç»´","slug":"è¿ç»´","permalink":"https://maydaychen.github.io/categories/%E8%BF%90%E7%BB%B4/"}],"tags":[{"name":"ç›‘æ§","slug":"ç›‘æ§","permalink":"https://maydaychen.github.io/tags/%E7%9B%91%E6%8E%A7/"},{"name":"Zabbix","slug":"Zabbix","permalink":"https://maydaychen.github.io/tags/Zabbix/"}]},{"title":"Opensearché—®é¢˜è®°å½•1--ctxå†…å®¹ä¸å…¨çš„é—®é¢˜","slug":"Opensearché—®é¢˜è®°å½•1--ctxå†…å®¹ä¸å…¨çš„é—®é¢˜","date":"2025-02-11T09:25:51.000Z","updated":"2025-02-24T15:34:02.379Z","comments":true,"path":"2025/02/11/Opensearché—®é¢˜è®°å½•1--ctxå†…å®¹ä¸å…¨çš„é—®é¢˜/","link":"","permalink":"https://maydaychen.github.io/2025/02/11/Opensearch%E9%97%AE%E9%A2%98%E8%AE%B0%E5%BD%951--ctx%E5%86%85%E5%AE%B9%E4%B8%8D%E5%85%A8%E7%9A%84%E9%97%AE%E9%A2%98/","excerpt":"","text":"é—®é¢˜åœ¨OpenSearchä¸­ï¼Œæˆ‘å¸Œæœ›åœ¨actionä¸­æŠŠä¸€æ•´æ¡logä½œä¸ºæŠ¥è­¦å†…å®¹å‘é€å‡ºæ¥ï¼Œä½†æ˜¯æ ¹æ®æ–‡æ¡£ï¼Œé…ç½®ä¸ºctx.results.0.hits.hits.0._source.logï¼Œä½†æ˜¯å‘ç°æ ¹æœ¬æ‰¾ä¸åˆ°è¿™ä¸ªå€¼ ç»è¿‡æŸ¥è¯¢ï¼Œæˆ‘å‘ç°åœ¨è¿”å›çš„ctxä¸­ä»…å­˜åœ¨å¦‚ä¸‹çš„å€¼ 1results=[, hits=, max_score=null&#125;, took=13, timed_out=false&#125;], periodStart=2024-07-08T08:30:07.425Z, periodEnd=2024-07-08T08:31:07.425Z, error=null, trigger=&#123;id=GkWmgZABvp-0qNhTa6Rs, name=Test alarm, please ignore, severity=3, actions=[&#123;name=Test alarm, please ignore&#125;]&#125;, alert=&#123;acknowledged_time=null, id=sHdKkZABDnp5EchiGRFG, version=-1, end_time=null, error_message=null, execution_id=HEWmgZABvp-0qNhTa6R5_2024-07-08T07:41:09.151397924_6ca4e795-58a9-489d-85fe-74c4bbf2d9ab, workflow_id=, workflow_name=, associated_alert_ids=[], last_notification_time=1720426150054, severity=3, start_time=1720424470852, state=ACTIVE, bucket_keys=null, parent_bucket_path=null, finding_ids=, related_doc_ids=&#125;&#125; æ²¡æœ‰æˆ‘éœ€è¦çš„æŸ¥è¯¢è¯­å¥ä¸º 12345678910111213141516171819202122232425262728293031323334353637383940414243&#123; &quot;size&quot;: 0, &quot;query&quot;: &#123; &quot;bool&quot;: &#123; &quot;filter&quot;: [ &#123; &quot;range&quot;: &#123; &quot;@timestamp&quot;: &#123; &quot;from&quot;: &quot;&#123;&#123;period_end&#125;&#125;||-1d&quot;, &quot;to&quot;: &quot;&#123;&#123;period_end&#125;&#125;&quot;, &quot;include_lower&quot;: true, &quot;include_upper&quot;: true, &quot;format&quot;: &quot;epoch_millis&quot;, &quot;boost&quot;: 1 &#125; &#125; &#125;, &#123; &quot;query_string&quot;: &#123; &quot;query&quot;: &quot;*BATCHMONITORING*&quot;, &quot;default_field&quot;: &quot;log&quot;, &quot;fields&quot;: [], &quot;type&quot;: &quot;best_fields&quot;, &quot;default_operator&quot;: &quot;or&quot;, &quot;max_determinized_states&quot;: 10000, &quot;enable_position_increments&quot;: true, &quot;fuzziness&quot;: &quot;AUTO&quot;, &quot;fuzzy_prefix_length&quot;: 0, &quot;fuzzy_max_expansions&quot;: 50, &quot;phrase_slop&quot;: 0, &quot;escape&quot;: false, &quot;auto_generate_synonyms_phrase_query&quot;: true, &quot;fuzzy_transpositions&quot;: true, &quot;boost&quot;: 1 &#125; &#125; ], &quot;adjust_pure_negative&quot;: true, &quot;boost&quot;: 1 &#125; &#125;&#125; è§£å†³æ–¹æ¡ˆç»è¿‡æŸ¥è¯¢ï¼Œæˆ‘å‘ç°é—®é¢˜å­˜åœ¨äºsizeè¿™ä¸ªå‚æ•° size: è¿™æŒ‡å®šäº†è¿”å›çš„æ–‡æ¡£æ•°é‡ã€‚åœ¨è¿™é‡Œè®¾ä¸º 0 è¡¨ç¤ºåªè¿”å›åŒ¹é…çš„èšåˆç»“æœï¼Œè€Œä¸è¿”å›å®é™…çš„æ–‡æ¡£å†…å®¹ã€‚ æˆ‘è¿™è¾¹æŠŠsize:0ä»æŸ¥è¯¢è¯­å¥ä¸­åˆ é™¤åï¼Œè¿”å›çš„ç»“æœç»ˆäºåŒ…å«äº†æˆ‘éœ€è¦çš„å‚æ•° å…¶ä»–å‚æ•°è§£é‡Š query: è¿™æ˜¯æŸ¥è¯¢çš„ä¸»ä½“ï¼Œä½¿ç”¨å¸ƒå°”æŸ¥è¯¢ï¼ˆbool queryï¼‰ï¼Œå…è®¸å°†å¤šä¸ªè¿‡æ»¤æ¡ä»¶ç»„åˆåœ¨ä¸€èµ·ã€‚ bool: å¸ƒå°”æŸ¥è¯¢å…è®¸ç»„åˆå¤šä¸ªæŸ¥è¯¢å­å¥ï¼Œå¦‚ filterã€mustã€must_not ç­‰ã€‚ filter: è¿™æ˜¯ä¸€ä¸ªè¿‡æ»¤å™¨å­å¥ï¼Œå®ƒåŒ…å«äº†ä¸¤ä¸ªè¿‡æ»¤æ¡ä»¶ã€‚ range: èŒƒå›´æŸ¥è¯¢ï¼Œç”¨äºé™åˆ¶ @timestamp å­—æ®µçš„èŒƒå›´ã€‚å…·ä½“æ¥è¯´ï¼š &quot;from&quot;: &quot;&#123;&#123;period_end&#125;&#125;||-1d&quot;ï¼šè¡¨ç¤ºä» period_end å˜é‡æŒ‡å®šçš„æ—¶é—´å¼€å§‹ï¼Œå‘å‰æ¨ä¸€å¤©ã€‚&#123;&#123;period_end&#125;&#125; æ˜¯ä¸€ä¸ªæ¨¡æ¿å˜é‡ï¼Œåœ¨å®é™…æ‰§è¡Œæ—¶ä¼šè¢«å…·ä½“çš„æ—¶é—´å€¼æ›¿æ¢ã€‚ &quot;to&quot;: &quot;&#123;&#123;period_end&#125;&#125;&quot;ï¼šè¡¨ç¤ºåˆ° period_end å˜é‡æŒ‡å®šçš„æ—¶é—´ç»“æŸã€‚ &quot;format&quot;: &quot;epoch_millis&quot;ï¼šæŒ‡å®šæ—¶é—´æ ¼å¼ä¸ºæ¯«ç§’çº§æ—¶é—´æˆ³ã€‚ &quot;include_lower&quot;: true, &quot;include_upper&quot;: trueï¼šåŒ…æ‹¬ä¸Šä¸‹ç•Œå€¼ã€‚ query_string: æŸ¥è¯¢å­—ç¬¦ä¸²æŸ¥è¯¢ï¼Œç”¨äºæœç´¢åŒ…å«æŒ‡å®šå…³é”®å­—çš„æ–‡æ¡£ã€‚ &quot;query&quot;: &quot;*BATCHMONITORING*&quot;ï¼šè¿™é‡Œçš„æŸ¥è¯¢å­—ç¬¦ä¸²æ˜¯é€šé…ç¬¦å½¢å¼ï¼Œè¡¨ç¤ºæœç´¢åŒ…å« â€œBATCHMONITORINGâ€ å…³é”®å­—çš„æ–‡æ¡£ã€‚ &quot;default_field&quot;: &quot;log&quot;ï¼šæŒ‡å®šé»˜è®¤æœç´¢å­—æ®µä¸º â€œlogâ€ã€‚ &quot;default_operator&quot;: &quot;or&quot;ï¼šé»˜è®¤æ“ä½œç¬¦ä¸º OR æ“ä½œç¬¦ï¼Œè¡¨ç¤ºä»»ä½•ä¸€ä¸ªå…³é”®å­—åŒ¹é…å³å¯ã€‚ å…¶ä»–å‚æ•°å¦‚ fuzzinessã€phrase_slop ç­‰æ˜¯è°ƒæ•´æŸ¥è¯¢è¡Œä¸ºçš„å‚æ•°ï¼Œå¦‚è‡ªåŠ¨æ¨¡ç³ŠåŒ¹é…ã€çŸ­è¯­æœç´¢ç­‰ã€‚ adjust_pure_negative: è®¾ç½®ä¸º trueï¼Œè¡¨ç¤ºæŸ¥è¯¢ç»“æœä¸­ä¸åŒ…å«å…¨è´ŸåŒ¹é…çš„æ–‡æ¡£ã€‚ boost: è®¾ç½®ä¸º 1ï¼Œè¡¨ç¤ºé»˜è®¤çš„æŸ¥è¯¢æƒé‡ã€‚","categories":[{"name":"è¿ç»´","slug":"è¿ç»´","permalink":"https://maydaychen.github.io/categories/%E8%BF%90%E7%BB%B4/"}],"tags":[{"name":"ç›‘æ§","slug":"ç›‘æ§","permalink":"https://maydaychen.github.io/tags/%E7%9B%91%E6%8E%A7/"},{"name":"ELK","slug":"ELK","permalink":"https://maydaychen.github.io/tags/ELK/"}]},{"title":"Grafanaä½¿ç”¨æ—¥å¿—6--å¼€å¯Sigv4è®¤è¯","slug":"Grafanaä½¿ç”¨æ—¥å¿—6--å¼€å¯Sigv4è®¤è¯","date":"2025-02-11T09:15:08.000Z","updated":"2025-02-24T15:25:25.444Z","comments":true,"path":"2025/02/11/Grafanaä½¿ç”¨æ—¥å¿—6--å¼€å¯Sigv4è®¤è¯/","link":"","permalink":"https://maydaychen.github.io/2025/02/11/Grafana%E4%BD%BF%E7%94%A8%E6%97%A5%E5%BF%976--%E5%BC%80%E5%90%AFSigv4%E8%AE%A4%E8%AF%81/","excerpt":"","text":"èƒŒæ™¯åœ¨Grafanaä¸­ï¼Œæœ‰äº›data sourceæ˜¯éœ€è¦å¼€å¯sigv4è®¤è¯çš„ï¼Œä¾‹å¦‚OpenSearchï¼Œè¿™ä¸ªé…ç½®é¡¹é»˜è®¤æ˜¯å…³é—­çš„ï¼Œè¿™é‡Œæˆ‘ä»¬ä»‹ç»ä¸€ä¸‹æ€ä¹ˆå¼€å¯ æ­¥éª¤ä¼ ç»Ÿæ–¹å¼å¦‚æœæˆ‘ä»¬æƒ³åœ¨Grafanaä¸­å¼€å¯sigv4è®¤è¯ï¼Œæˆ‘ä»¬éœ€è¦åœ¨grafana.iniä¸­ä¿®æ”¹ä¸€ä¸ªå‚æ•° 1;sigv4_auth_enabled = false è¿™ä¸ªé…ç½®é»˜è®¤æ˜¯å…³é—­çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ä¿®æ”¹æˆtrueå¹¶é‡å¯grafana K8Sæ–¹å¼å¦‚æœæˆ‘ä»¬ä½¿ç”¨äº†helmfileï¼Œåœ¨kube-prometheus-stackä¸­ï¼Œå¹¶æ²¡æœ‰å…¨éƒ¨çš„grafanaé…ç½®ï¼Œé‚£ä¹ˆæˆ‘ä»¬è¯¥æ€ä¹ˆæ“ä½œå‘¢ï¼Ÿè¿™æ—¶å€™æˆ‘ä»¬éœ€è¦æ‰¾åˆ°prometheus-operator-values.yamlæ–‡ä»¶ 12345grafana:# grafana.ini å­—æ®µç”¨äºä¿®æ”¹ grafana é…ç½®æ–‡ä»¶å†…å®¹ï¼Œä½¿ç”¨ yaml æ ¼å¼å®šä¹‰ï¼Œä¼šè‡ªåŠ¨è½¬æˆ iniã€‚ grafana.ini: auth: sigv4_auth_enabled: false ç„¶åé€šè¿‡å‘½ä»¤ç”Ÿæ•ˆ 1helmfile apply","categories":[{"name":"è¿ç»´","slug":"è¿ç»´","permalink":"https://maydaychen.github.io/categories/%E8%BF%90%E7%BB%B4/"}],"tags":[{"name":"ç›‘æ§","slug":"ç›‘æ§","permalink":"https://maydaychen.github.io/tags/%E7%9B%91%E6%8E%A7/"},{"name":"Grafana","slug":"Grafana","permalink":"https://maydaychen.github.io/tags/Grafana/"}]},{"title":"AIå°è¯•æ—¥å¿—2--ä½¿ç”¨ChatBoxå·¥å…·å®ç°AIç•Œé¢åŒ–æ“ä½œ","slug":"AIå°è¯•æ—¥å¿—2--ä½¿ç”¨ChatBoxå·¥å…·å®ç°AIç•Œé¢åŒ–æ“ä½œ","date":"2025-02-11T02:38:05.000Z","updated":"2025-02-24T15:21:04.315Z","comments":true,"path":"2025/02/11/AIå°è¯•æ—¥å¿—2--ä½¿ç”¨ChatBoxå·¥å…·å®ç°AIç•Œé¢åŒ–æ“ä½œ/","link":"","permalink":"https://maydaychen.github.io/2025/02/11/AI%E5%B0%9D%E8%AF%95%E6%97%A5%E5%BF%972--%E4%BD%BF%E7%94%A8ChatBox%E5%B7%A5%E5%85%B7%E5%AE%9E%E7%8E%B0AI%E7%95%8C%E9%9D%A2%E5%8C%96%E6%93%8D%E4%BD%9C/","excerpt":"","text":"","categories":[{"name":"AI","slug":"AI","permalink":"https://maydaychen.github.io/categories/AI/"}],"tags":[]},{"title":"Grafanaä½¿ç”¨æ—¥å¿—5--é…ç½®SMTPä»¥å‘é€å¿˜è®°å¯†ç é‡ç½®é‚®ä»¶","slug":"Grafanaä½¿ç”¨æ—¥å¿—5--é…ç½®SMTPä»¥å‘é€å¿˜è®°å¯†ç é‡ç½®é‚®ä»¶","date":"2025-02-10T01:52:50.000Z","updated":"2025-02-24T15:25:25.446Z","comments":true,"path":"2025/02/10/Grafanaä½¿ç”¨æ—¥å¿—5--é…ç½®SMTPä»¥å‘é€å¿˜è®°å¯†ç é‡ç½®é‚®ä»¶/","link":"","permalink":"https://maydaychen.github.io/2025/02/10/Grafana%E4%BD%BF%E7%94%A8%E6%97%A5%E5%BF%975--%E9%85%8D%E7%BD%AESMTP%E4%BB%A5%E5%8F%91%E9%80%81%E5%BF%98%E8%AE%B0%E5%AF%86%E7%A0%81%E9%87%8D%E7%BD%AE%E9%82%AE%E4%BB%B6/","excerpt":"","text":"èƒŒæ™¯åœ¨é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬æ¯ä¸ªäººéƒ½ä¼šç”¨åˆ°å„ç§å„æ ·çš„å·¥å…·ï¼Œéšç€å·¥å…·çš„å¢å¤šï¼Œæ‹¥æœ‰çš„è´¦å·çš„æ•°é‡ä¹Ÿéšä¹‹é€’å¢ï¼Œè¿™æ—¶å€™å¦‚æœæ²¡æœ‰ä½¿ç”¨å¯†ç ç®¡ç†å·¥å…·ï¼Œå¾ˆå®¹æ˜“å°±å¿˜è®°äº†æŸä¸€ä¸ªå·¥å…·çš„è´¦å·å¯†ç è€Œæˆ‘ä»¬ç°åœ¨å°±è¦è®¨è®ºä¸€ä¸‹åœ¨Grafanaä¸­ï¼Œå¦‚æœå¿˜è®°äº†å¯†ç ï¼Œæ€ä¹ˆåœ¨ä¸è”ç³»ç®¡ç†å‘˜çš„æƒ…å†µä¸‹æ‰‹åŠ¨é‡ç½®å¯†ç  é…ç½®åœ¨Grafanaç™»å½•æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°åœ¨ç™»é™†æ¡†çš„ä¸‹é¢æœ‰ä¸€ä¸ªForget your password?ç‚¹å‡»è¯¥æŒ‰é’®ï¼Œä¼šè®©ä½ è¾“å…¥ç”¨æˆ·åæˆ–é‚®ç®±ï¼Œç„¶åGrafanaå°±ä¼šè‡ªåŠ¨å‘é€é‚®ä»¶åˆ°è¿™ä¸ªé‚®ç®±ï¼Œå¸®ä½ é‡ç½®å¯†ç ä½†æ˜¯å¦‚æœæ²¡æœ‰é…ç½®SMTPæœåŠ¡çš„è¯ï¼Œè¿™ä¸ªåŠŸèƒ½æ˜¯ä¸èµ·ä½œç”¨çš„ï¼Œæ‰€ä»¥æœ¬æ–‡å°±æ˜¯ç”¨æ¥è®²å¦‚ä½•é…ç½®SMTP æ‰“å¼€Grafanaé…ç½®æ–‡ä»¶ï¼ˆ&#x2F;etc&#x2F;grafana&#x2F;grafana.iniï¼‰ï¼Œæ‰¾åˆ°å¦‚ä¸‹è¿™ä¸€æ®µ 123456789101112131415161718192021222324#################################### SMTP / Emailing ##########################[smtp];enabled = falseenabled = true;host = localhost:25host = &#123;&#123;smtp-server:465&#125;&#125;;user =user = &#123;&#123;username&#125;&#125;# If the password contains # or ; you have to wrap it with triple quotes. Ex &quot;&quot;&quot;#password;&quot;&quot;&quot;;password =password = &#123;&#123;password&#125;&#125;;cert_file =;key_file =;skip_verify = false;from_address = admin@grafana.localhostfrom_address = &#123;&#123;aaa@example.com&#125;&#125;;from_name = Grafana# EHLO identity in SMTP dialog (defaults to instance_name);ehlo_identity = dashboard.example.comehlo_identity = &#123;&#123;ehlo&#125;&#125;# SMTP startTLS policy (defaults to &#x27;OpportunisticStartTLS&#x27;);startTLS_policy = NoStartTLS# Enable trace propagation in e-mail headers, using the &#x27;traceparent&#x27;, &#x27;tracestate&#x27; and (optionally) &#x27;baggage&#x27; fields (defaults to false);enable_tracing = false æŒ‰ç…§å¦‚ä¸Šé…ç½®,ä¿®æ”¹æ‹¬å·ä¸­çš„å†…å®¹ å†ä¹‹åé‡å¯grafana 1sudo systemctl restart grafana-server æµ‹è¯•ç»æµ‹è¯•å¯ä»¥æ­£å¸¸å‘é€ï¼Œé…ç½®æ­£ç¡® é¢˜å¤–è¯startTLS_policyå…³äºstartTLS_policyï¼Œæœ‰ä¸‰ä¸ªé€‰é¡¹ï¼Œä¸‹é¢ä»‹ç»ä¸€ä¸‹æ¯ä¸€ä¸ªé€‰é¡¹startTLS_policy ç”¨äºå®šä¹‰ Grafana åœ¨ä¸ SMTP æœåŠ¡å™¨é€šä¿¡æ—¶å¦‚ä½•å¤„ç† STARTTLSã€‚å®ƒæœ‰ä»¥ä¸‹å‡ ä¸ªå¯èƒ½çš„å–å€¼ï¼š OpportunisticStartTLSï¼ˆé»˜è®¤å€¼ï¼‰ï¼š Grafana ä¼šå°è¯•ä½¿ç”¨ STARTTLS å‡çº§ä¸ºåŠ å¯†é€šä¿¡ã€‚ å¦‚æœæœåŠ¡å™¨ä¸æ”¯æŒ STARTTLSï¼ŒGrafana ä¼šå›é€€åˆ°æ˜æ–‡é€šä¿¡ã€‚ è¿™æ˜¯ä¸€ç§çµæ´»çš„ç­–ç•¥ï¼Œé€‚ç”¨äºå¤§å¤šæ•°åœºæ™¯ã€‚ MandatoryStartTLSï¼šGrafana å¿…é¡»ä½¿ç”¨ STARTTLS åŠ å¯†é€šä¿¡ã€‚å¦‚æœæœåŠ¡å™¨ä¸æ”¯æŒ STARTTLSï¼ŒGrafana ä¼šæ‹’ç»è¿æ¥å¹¶æŠ¥é”™ã€‚è¿™ç§ç­–ç•¥é€‚åˆå¯¹å®‰å…¨æ€§è¦æ±‚è¾ƒé«˜çš„åœºæ™¯ã€‚ NoStartTLSï¼šGrafana ä¸ä¼šå°è¯•ä½¿ç”¨ STARTTLSã€‚æ‰€æœ‰é€šä¿¡éƒ½ä»¥æ˜æ–‡æ–¹å¼è¿›è¡Œã€‚è¿™ç§ç­–ç•¥ä»…é€‚ç”¨äºæµ‹è¯•æˆ–å†…éƒ¨ç½‘ç»œç¯å¢ƒï¼Œä¸æ¨èåœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä½¿ç”¨ã€‚","categories":[{"name":"è¿ç»´","slug":"è¿ç»´","permalink":"https://maydaychen.github.io/categories/%E8%BF%90%E7%BB%B4/"}],"tags":[{"name":"ç›‘æ§","slug":"ç›‘æ§","permalink":"https://maydaychen.github.io/tags/%E7%9B%91%E6%8E%A7/"},{"name":"Grafana","slug":"Grafana","permalink":"https://maydaychen.github.io/tags/Grafana/"}]},{"title":"Grafanaä½¿ç”¨æ—¥å¿—4--é‡ç½®å¯†ç æ–¹æ³•","slug":"Grafanaä½¿ç”¨æ—¥å¿—4--é‡ç½®å¯†ç æ–¹æ³•","date":"2025-02-09T15:39:36.000Z","updated":"2025-02-24T15:23:51.946Z","comments":true,"path":"2025/02/09/Grafanaä½¿ç”¨æ—¥å¿—4--é‡ç½®å¯†ç æ–¹æ³•/","link":"","permalink":"https://maydaychen.github.io/2025/02/09/Grafana%E4%BD%BF%E7%94%A8%E6%97%A5%E5%BF%974--%E9%87%8D%E7%BD%AE%E5%AF%86%E7%A0%81%E6%96%B9%E6%B3%95/","excerpt":"","text":"èƒŒæ™¯æœ‰æ—¶å€™å½“è´¦å·å¤ªå¤šçš„æ—¶å€™ï¼Œæ ¹æœ¬è®°ä¸ä½æ‰€æœ‰çš„è´¦å·å¯†ç ï¼Œè¿™æ—¶å€™å°±å¾ˆå®¹æ˜“ç™»å½•å¤±è´¥ï¼Œè¿™æ—¶å€™æ€ä¹ˆåŠå‘¢ï¼Ÿæ¥ä¸‹æ¥å°±è®©æˆ‘æ¥ç»™å¤§å®¶æ¼”ç¤ºä¸€ä¸‹Grafanaçš„è´¦å·å¦‚æœå¿˜è®°äº†çš„è¯ï¼Œè¯¥æ€ä¹ˆæ‰¾å›è‡ªå·±çš„è´¦å·å¯†ç  æ“ä½œè®©æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹å…·ä½“çš„å®æ“ç¯èŠ‚ï¼Œæœ‰ä¸¤ç§å®ç°æ–¹å¼ï¼Œå¦‚ä¸‹ æ–¹æ³•ä¸€ grafana-cliç›´æ¥ä½¿ç”¨grafana-cli 1234grafana-cli admin reset-admin-password admin## é‡å¯æœåŠ¡sudo systemctl restart grafana-server ä¹‹åå°±å¯ä»¥ç”¨admin,adminç™»å½•äº† æ–¹æ³•äºŒ æ•°æ®åº“ç›´æ¥ä¿®æ”¹æ•°æ®åº“ 1234567891011121314## ç›´æ¥ä½¿ç”¨å‘½ä»¤æ‰¾åˆ°Grafanaçš„æ•°æ®åº“æ–‡ä»¶find / -name &quot;grafana.db&quot;## æ‰“å¼€æ•°æ®åº“sqlite3 /var/lib/grafana/grafana.db## æŸ¥çœ‹æ•°æ®åº“ä¸­åŒ…å«çš„è¡¨.tables## æŸ¥çœ‹userè¡¨å†…å®¹select * from user;## é‡ç½®adminç”¨æˆ·çš„å¯†ç ä¸ºé»˜è®¤adminupdate user set password = &#x27;59acf18b94d7eb0694c61e60ce44c110c7a683ac6a8f09580d626f90f4a242000746579358d77dd9e570e83fa24faa88a8a6&#x27;, salt = &#x27;F3FAxVm33R&#x27; where login = &#x27;admin&#x27;;## é€€å‡ºsqlite3.exit ä¹‹åå°±å¯ä»¥ç”¨admin,adminç™»å½•äº† æ€»ç»“ä¸Šé¢å°±æ˜¯ä¸¤ç§æ–¹æ³•çš„å…·ä½“æ“ä½œå•¦ï¼Œä¸ªäººè®¤ä¸ºè‚¯å®šæ˜¯ç¬¬ä¸€ç§æ¯”è¾ƒç®€å•ä¸€ç‚¹å•¦ï¼Œä½ ä»¬è§‰å¾—å˜ï¼Ÿå¦å¤–ï¼Œå¦‚æœæœåŠ¡æ˜¯æ”¾åœ¨å…¬ç½‘ä¸Šçš„è¯ï¼Œå»ºè®®æŠŠadminè¿™ä¸ªè´¦å·disableä¸€ä¸‹æˆ–è€…è‡³å°‘æ˜¯ä¿®æ”¹ä¸€ä¸‹å¯†ç ï¼Œé˜²æ­¢è¢«åˆ«äººå…¥ä¾µå“¦","categories":[{"name":"è¿ç»´","slug":"è¿ç»´","permalink":"https://maydaychen.github.io/categories/%E8%BF%90%E7%BB%B4/"}],"tags":[{"name":"ç›‘æ§","slug":"ç›‘æ§","permalink":"https://maydaychen.github.io/tags/%E7%9B%91%E6%8E%A7/"},{"name":"Grafana","slug":"Grafana","permalink":"https://maydaychen.github.io/tags/Grafana/"}]},{"title":"Grafanaä½¿ç”¨æ—¥å¿—3--ä½¿ç”¨Buttonä¿®æ”¹MySQLæ•°æ®åº“","slug":"Grafanaä½¿ç”¨æ—¥å¿—3--ä½¿ç”¨Buttonä¿®æ”¹MySQLæ•°æ®åº“","date":"2025-02-08T09:25:36.000Z","updated":"2025-02-24T15:25:25.442Z","comments":true,"path":"2025/02/08/Grafanaä½¿ç”¨æ—¥å¿—3--ä½¿ç”¨Buttonä¿®æ”¹MySQLæ•°æ®åº“/","link":"","permalink":"https://maydaychen.github.io/2025/02/08/Grafana%E4%BD%BF%E7%94%A8%E6%97%A5%E5%BF%973--%E4%BD%BF%E7%94%A8Button%E4%BF%AE%E6%94%B9MySQL%E6%95%B0%E6%8D%AE%E5%BA%93/","excerpt":"","text":"èƒŒæ™¯ä¼—æ‰€å‘¨çŸ¥ï¼ŒGrafanaæ˜¯ä¸€ä¸ªç”¨æ¥å±•ç¤ºæ•°æ®çš„å¹³å°ï¼Œä½†æ˜¯æœ‰æ—¶å€™è¿˜æ˜¯ä¼šæœ‰éœ€æ±‚è¯´èƒ½ä¸èƒ½æœ‰ä¸€ä¸ªæŒ‰é’®ï¼Œç‚¹å‡»çš„æ—¶å€™å†å¯¹æ•°æ®åº“è¿›è¡Œä¿®æ”¹ï¼Œä»è€Œè¾¾åˆ°æ›´æ–°æ•°æ®çš„æ•ˆæœç»è¿‡å¤šæ–¹æŸ¥è¯ï¼Œç»ˆäºå®ç°äº†ä¸€ä¸ªç®€å•çš„ï¼Œç‚¹å‡»buttonæ‰§è¡Œsqlè¯­å¥çš„åŠŸèƒ½ï¼Œç‰¹æ­¤åˆ†äº« å®ç°å®‰è£…Buttonæ’ä»¶å¯ä»¥åœ¨Grafana Pluginsé‡Œç›´æ¥æ‰¾åˆ°ï¼Œå®‰è£…å³å¯ é…ç½®ButtonåŠŸèƒ½ OrientationæŒ‰é’®çš„æ–¹å‘ï¼Œåªæœ‰ä¸€ä¸ªæŒ‰é’®çš„æ—¶å€™æ²¡æœ‰æ•ˆæœï¼Œå½“è®¾ç½®ä¸¤ä¸ªæˆ–ä¸¤ä¸ªä»¥ä¸Šæ—¶ï¼Œå¯ä»¥è®¾ç½®æŒ‰é’®æ˜¯æ°´å¹³æ”¾ç½®è¿˜æ˜¯å‚ç›´æ”¾ç½® Button Configurationè¿™è¾¹å°±æ˜¯é‡å¤´æˆäº†ï¼Œå¯ä»¥åˆ†åˆ«å¯¹æ¯ä¸€ä¸ªæŒ‰é’®è¿›è¡Œè®¾ç½®å¯ä»¥çœ‹åˆ°è¿™è¾¹æœ‰ä¸‰ä¸ªé€‰é¡¹ï¼Œä¸‹é¢æ¥ä¸€ä¸€è§£é‡Š Textï¼š å³æŒ‰é’®ä¸Šæ˜¾ç¤ºçš„æ–‡å­— Datasourceï¼š å¯¹å“ªä¸€ä¸ªdatasourceè¿›è¡Œæ“ä½œï¼Œé€‰æ‹©é¡¹ Queryï¼š æŒ‰ä¸‹è¿™ä¸ªbuttonåè¦æ‰§è¡Œçš„è¯­å¥ å¯ä»¥çœ‹åˆ°ï¼ŒåŠŸèƒ½å…¶å®æ˜¯éå¸¸ç®€å•çš„ï¼Œåªä¸è¿‡ä¸€å¼€å§‹ç”¨çš„æ—¶å€™ï¼Œå¯¹äºè¿™ä¸ªQueryå¯èƒ½ä¼šæœ‰ç‚¹æ‡µé€¼ é‚£ä¹ˆï¼Œåˆ°åº•è¯¥æ€ä¹ˆé…ç½®è¿™äº›ä¸ªå‚æ•°å‘¢ï¼Ÿæ’ä»¶ä½œè€…å¹¶æ²¡æœ‰å†™ï¼Œä½†æ˜¯æˆ‘å°è¯•ä¹‹åç»ˆäºæ‘¸ç´¢å‡ºæ¥äº† æˆ‘ä»¬å»ºç«‹ä¸€ä¸ªæ–°çš„tableæ§ä»¶ï¼Œå¹¶ä½¿ç”¨query inspectoråŠŸèƒ½æ¥æŸ¥çœ‹å®ƒçš„æŸ¥è¯¢è¯­å¥å¯ä»¥çœ‹åˆ°ï¼Œåœ¨queriesä¸­æœ‰ä¸€æ¡æ•°æ®ï¼Œå¹¶ä¸”è¿™è¾¹æœ‰rawSqlå‚æ•°å’Œformatå‚æ•°æ¯”è¾ƒé™Œç”Ÿï¼Œäºæ˜¯æŠŠè¿™ä¸¤ä¸ªå‚æ•°æ”¾åˆ°Queryä¸­å°è¯•ä¸€ä¸‹ï¼Œå‘ç°ç¡®å®å¯ä»¥ä½¿ç”¨ å¹¶ä¸”ï¼Œåœ¨é¡µé¢çš„å³ä¸Šè§’ä¹Ÿä¼šæœ‰æ¶ˆæ¯æ¨é€ï¼Œè¡¨ç¤ºæ‰§è¡ŒæˆåŠŸï¼Œè‡³æ­¤ï¼ŒåŠŸèƒ½å·²è¢«æˆ‘ä»¬å®ç° [Todo]é—®é¢˜å¾…è§£å†³ å¦‚ä½•è§£å†³åŠŸèƒ½å®ç°åçš„åˆ·æ–°é—®é¢˜ å¦‚ä½•åŠ¨æ€åœ°ç¼–è¾‘æˆ‘ä»¬çš„æ•°æ®ï¼Œæ¯”å¦‚è¾“å…¥ä¸€ä¸ªå€¼ï¼Œå¹¶é€šè¿‡ç‚¹å‡»æŠŠè¿™ä¸ªå€¼æ’å…¥æ•°æ®åº“ -&gt; ç›®å‰æ²¡æœ‰æ‰¾åˆ°ä¸€ä¸ªå¾ˆå¥½çš„è¾“å…¥æ¡†æ§ä»¶~~","categories":[{"name":"è¿ç»´","slug":"è¿ç»´","permalink":"https://maydaychen.github.io/categories/%E8%BF%90%E7%BB%B4/"}],"tags":[{"name":"ç›‘æ§","slug":"ç›‘æ§","permalink":"https://maydaychen.github.io/tags/%E7%9B%91%E6%8E%A7/"},{"name":"Grafana","slug":"Grafana","permalink":"https://maydaychen.github.io/tags/Grafana/"}]},{"title":"AIå°è¯•æ—¥å¿—1--å°è¯•ä½¿ç”¨Ollamaæœ¬åœ°éƒ¨ç½²DeepSeek-R1","slug":"AIå°è¯•æ—¥å¿—1--å°è¯•ä½¿ç”¨Ollamaæœ¬åœ°éƒ¨ç½²DeepSeek-R1","date":"2025-02-03T14:16:11.000Z","updated":"2025-02-24T15:21:04.320Z","comments":true,"path":"2025/02/03/AIå°è¯•æ—¥å¿—1--å°è¯•ä½¿ç”¨Ollamaæœ¬åœ°éƒ¨ç½²DeepSeek-R1/","link":"","permalink":"https://maydaychen.github.io/2025/02/03/AI%E5%B0%9D%E8%AF%95%E6%97%A5%E5%BF%971--%E5%B0%9D%E8%AF%95%E4%BD%BF%E7%94%A8Ollama%E6%9C%AC%E5%9C%B0%E9%83%A8%E7%BD%B2DeepSeek-R1/","excerpt":"","text":"å…¶å®ç±»ä¼¼çš„æ–‡ç« å¥½å¤šäººéƒ½å†™è¿‡äº†ï¼Œä¸è¿‡ä¸ºäº†å›¾ä»¥åæŸ¥è¯¢æ–¹ä¾¿ï¼Œè¿˜æ˜¯è‡ªå·±å†™ä¸€ä¸ªå§ Ollamaä¸‹è½½å®˜ç½‘åœ°å€ï¼š https://ollama.com/ ï¼Œåœ¨ä¸Šé¢æ ¹æ®è‡ªå·±æ“ä½œç³»ç»Ÿä¸‹è½½å¯¹åº”å¹³å°ä¸‹è½½æˆåŠŸåç›´æ¥å®‰è£…ï¼Œå®‰è£…åº”è¯¥ä¹Ÿæ˜¯å‚»ç“œä¼¼çš„ï¼Œå®‰è£…å®Œæˆåï¼Œä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤æŸ¥çœ‹æ˜¯å¦å®‰è£…æˆåŠŸ 1ollama -v å¦‚æœè¿”å›ç»™ä½ ç‰ˆæœ¬å·äº†ï¼Œé‚£å°±æ˜¯å®‰è£…æˆåŠŸäº† AIæ¨¡å‹ä¸‹è½½è®¿é—®ä¸‹é¢çš„è¿™ä¸ªåœ°å€ï¼šhttps://ollama.com/search å¯ä»¥çœ‹åˆ°æœ‰å¾ˆå¤šä¸ªæ¨¡å‹å¯ä»¥é€‰æ‹©ï¼Œæˆ‘ä»¬è¿™å›é€‰æ‹©ç¬¬ä¸€ä¸ªï¼ŒDeepSeek-R1ï¼Œç›´æ¥ç‚¹å‡»æ ‡é¢˜ï¼Œè¿›å…¥è¯¦æƒ…é¡µ åœ¨è¯¦æƒ…é¡µä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€‰æ‹©ä¸åŒçš„tagï¼Œå³ä¸åŒçš„æ¨¡å‹å¤§å°ï¼Œè¿™è¾¹å»ºè®®æ ¹æ®è‡ªå·±çš„ç”µè„‘è§„æ ¼é‡åŠ›è€Œä¸ºï¼Œä¸è¦ä¸‹è½½å¤ªå¤§çš„æ¨¡å‹ï¼Œä¼šå¯¼è‡´å¡æ­»é€‰æ‹©å®Œå¯¹åº”çš„æ¨¡å‹åï¼Œå³æ‰‹è¾¹ä¼šç›´æ¥æ˜¾ç¤ºå¯¹åº”çš„å‘½ä»¤ï¼Œç›´æ¥å¤åˆ¶ï¼Œåœ¨å‘½ä»¤è¡Œä¸­æ‰§è¡Œå°±å¥½ 1234567891011ollama run deepseek-r1:8bpulling manifest pulling 6340dc3229b0... 100% â–•â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ– 4.9 GB pulling 369ca498f347... 100% â–•â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ– 387 B pulling 6e4c38e1172f... 100% â–•â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ– 1.1 KB pulling f4d24e9138dd... 100% â–•â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ– 148 B pulling 0cb05c6e4e02... 100% â–•â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ– 487 B verifying sha256 digest writing manifest success &gt;&gt;&gt; ç›´åˆ°çœ‹åˆ°successä¸ºæ­¢ï¼Œæ¨¡å‹å°±å·²ç»ä¸‹è½½å®Œæˆå¹¶ä¸”å·²ç»è·‘èµ·æ¥äº†æ¥ä¸‹æ¥å°±å¯ä»¥ç›´æ¥é—®ä»–é—®é¢˜äº†ï¼Œå¦‚æœè§‰å¾—æœ‰ç‚¹å¡å¯ä»¥æ¢å°ä¸€ç‚¹è§„æ¨¡çš„æ¨¡å‹ å¾…ç»­ä¸‹ä¸€ç¯‡æˆ‘ä»¬è®²ä¸€ä¸‹å¦‚ä½•ä½¿ç”¨ä¸€äº›ç¬¬ä¸‰æ–¹å·¥å…·è¿›è¡Œç•Œé¢åŒ–æ“ä½œï¼Œçœçš„æ¯æ¬¡éƒ½ç”¨å‘½ä»¤è¡Œè¿›è¡ŒèŠå¤©","categories":[{"name":"AI","slug":"AI","permalink":"https://maydaychen.github.io/categories/AI/"}],"tags":[]},{"title":"Zabbix Media Type(1)--é…ç½®AWS-SESä»¥å‘é€é‚®ä»¶","slug":"Zabbix-Media-Typeç›¸å…³è®°å½•1--é…ç½®AWS-SESä»¥å‘é€é‚®ä»¶","date":"2025-01-22T07:47:16.000Z","updated":"2025-02-24T09:17:21.000Z","comments":true,"path":"2025/01/22/Zabbix-Media-Typeç›¸å…³è®°å½•1--é…ç½®AWS-SESä»¥å‘é€é‚®ä»¶/","link":"","permalink":"https://maydaychen.github.io/2025/01/22/Zabbix-Media-Type%E7%9B%B8%E5%85%B3%E8%AE%B0%E5%BD%951--%E9%85%8D%E7%BD%AEAWS-SES%E4%BB%A5%E5%8F%91%E9%80%81%E9%82%AE%E4%BB%B6/","excerpt":"","text":"é…ç½®SES12345SMTP endpoint: //å¯ä»¥ä»AWSç›´æ¥è·å–SMTP port: 465SMTP user name: //å¯ä»¥ä»AWSç›´æ¥è·å–SMTP password: //å¯ä»¥ä»AWSç›´æ¥è·å–SMTP domain: //AWS SESä¸Šæœ‰domainï¼Œå‰ç¼€xxx@å¯ä»¥ä»»æ„é…ç½® é—®é¢˜è§£å†³Protocol â€œsmtpsâ€ not supported or disabled in libcurlåœ¨Zabbixä¸Šé…ç½®å®ŒSESä»¥åï¼Œåœ¨Testçš„æ—¶å€™å‡ºç°ä¸Šè¿°é”™è¯¯åœ¨check curlç‰ˆæœ¬çš„æ—¶å€™ï¼Œå‘ç°å¹¶ä¸æ”¯æŒsmtps 1curl --version æ‰€ä»¥æ€€ç–‘è¦å‡çº§curlä»¥åŠå®ƒçš„ç±»åº“ é‡æ–°å®‰è£…curl1dnf install curl --allowerasing é‡æ–°å®‰è£…libcurl1dnf install libcurl --allowerasing ä¹‹åå†å°è¯•ä¸€ä¸‹ï¼Œå‘ç°å·²ç»æ”¯æŒsmtp&#x2F;smtpsäº†ï¼Œç¡®å®æ˜¯ç‰ˆæœ¬çš„é—®é¢˜ é‡æ–°æµ‹è¯•é‚®ä»¶å‘é€åŠŸèƒ½","categories":[{"name":"è¿ç»´","slug":"è¿ç»´","permalink":"https://maydaychen.github.io/categories/%E8%BF%90%E7%BB%B4/"}],"tags":[{"name":"ç›‘æ§","slug":"ç›‘æ§","permalink":"https://maydaychen.github.io/tags/%E7%9B%91%E6%8E%A7/"},{"name":"Zabbix","slug":"Zabbix","permalink":"https://maydaychen.github.io/tags/Zabbix/"}]},{"title":"Grafanaä½¿ç”¨æ—¥å¿—2--å¯¹æ¥MySQLæ•°æ®åº“çš„ä¸€äº›æ³¨æ„ç‚¹","slug":"Grafanaä½¿ç”¨æ—¥å¿—2--å¯¹æ¥MySQLæ•°æ®åº“çš„ä¸€äº›æ³¨æ„ç‚¹","date":"2025-01-02T08:02:23.000Z","updated":"2025-02-24T15:25:25.438Z","comments":true,"path":"2025/01/02/Grafanaä½¿ç”¨æ—¥å¿—2--å¯¹æ¥MySQLæ•°æ®åº“çš„ä¸€äº›æ³¨æ„ç‚¹/","link":"","permalink":"https://maydaychen.github.io/2025/01/02/Grafana%E4%BD%BF%E7%94%A8%E6%97%A5%E5%BF%972--%E5%AF%B9%E6%8E%A5MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E4%B8%80%E4%BA%9B%E6%B3%A8%E6%84%8F%E7%82%B9/","excerpt":"","text":"èƒŒæ™¯ä¹‹å‰zabbixæœ‰ä¸€ä¸ªéœ€æ±‚æ˜¯ç›‘æ§æ¯ä¸€ç¬”äº¤æ˜“çš„è€—æ—¶ï¼Œå³ç»“æŸæ—¶é—´-å¼€å§‹æ—¶é—´ï¼Œç°åœ¨ç”±äºä¸šåŠ¡éœ€æ±‚ï¼Œéœ€è¦åœ¨Grafanaä¸­ç»Ÿè®¡æ‰€æœ‰äº¤æ˜“æ—¶é—´çš„å æ¯”ï¼Œåˆ†ç»„å¹¶å±•ç¤ºä½†æ˜¯æ¥å…¥çš„zabbixæ’ä»¶å¹¶ä¸æ”¯æŒè¯¥åŠŸèƒ½ï¼Œzabbixæ’ä»¶åªèƒ½å¤ŸæŸ¥è¯¢å‡ºæ¯ä¸ªintervalé—´éš”å†…çš„æ•°æ®å¹¶å±•ç¤ºï¼Œå¹¶ä¸èƒ½å°†æ‰€æœ‰æ—¶é—´å†…çš„æ•°æ®æ±‡æ€»å¹¶åˆ†æï¼Œæ‰€ä»¥å†¥æ€è‹¦æƒ³ä¹‹ä¸‹ï¼Œåªèƒ½æ¥å…¥zabbixçš„mysqlï¼Œç”¨sqlè„šæœ¬çš„å½¢å¼è·å–æ•°æ® è®¾è®¡æ€è·¯æ€è·¯å°±æ˜¯ï¼ŒæŠŠå¯¹åº”çš„host groupä¸­çš„æ‰€æœ‰çš„hostå¯¹åº”çš„æ¯ä¸€ä¸ªitemï¼Œä»itemè¡¨ä¸­å–å‡ºå¹¶åœ¨historyè¡¨ä¸­æŸ¥è¯¢ä¸€æ®µæ—¶é—´å†…çš„æ‰€æœ‰æ•°æ®ï¼Œå¹¶æŒ‰ç…§å¤§å°è¿›è¡Œåˆ†ç»„ æ¥å…¥Zabbixæ•°æ®æºdata sourceé€‰æ‹©mysqlï¼Œç„¶ååªéœ€è¦å¡«å…¥APIä¿¡æ¯ä»¥åŠç”¨æˆ·åå¯†ç ï¼Œç‚¹å‡»æœ€ä¸‹é¢çš„save&amp;testå°±å¯ä»¥çœ‹è¿æ¥æ˜¯å¦æˆåŠŸäº† æœ€ç»ˆå®ç°1234567891011121314151617181920212223242526272829SELECT i.name AS item_name, -- Item åç§° CASE WHEN hu.value BETWEEN 0 AND 1000 THEN &#x27;[0s-1s]&#x27; WHEN hu.value BETWEEN 1000 AND 2000 THEN &#x27;[1s-2s]&#x27; WHEN hu.value BETWEEN 2000 AND 3000 THEN &#x27;[2s-3s]&#x27; WHEN hu.value BETWEEN 3000 AND 4000 THEN &#x27;[3s-4s]&#x27; WHEN hu.value BETWEEN 4000 AND 5000 THEN &#x27;[4s-5s]&#x27; ELSE &#x27;Other&#x27; END AS value_range, COUNT(*) AS countFROM history huJOIN items i ON hu.itemid = i.itemidJOIN hosts h ON i.hostid = h.hostidJOIN hosts_groups hg ON h.hostid = hg.hostidJOIN hstgrp g ON hg.groupid = g.groupidWHERE g.name IN (&#x27;host group name&#x27;) AND i.name REGEXP &#x27;^transaction time \\\\[$TXN_TYPE\\\\]&#x27; AND hu.clock BETWEEN &#x27;$__unixEpochFrom()&#x27; AND &#x27;$__unixEpochTo()&#x27;GROUP BY value_rangeORDER BY value_range; é—®é¢˜è®°å½•^transaction time [$TXN_TYPE] æ— æ³•è·å–åˆ°æ•°æ®è§£å†³æ–¹æ¡ˆåœ¨ MySQL ä¸­ï¼Œä½¿ç”¨ REGEXP æ—¶ï¼Œç‰¹æ®Šå­—ç¬¦ï¼ˆå¦‚æ–¹æ‹¬å· [ ]ï¼‰å…·æœ‰ç‰¹å®šçš„å«ä¹‰ã€‚ä¾‹å¦‚ï¼Œ[ ] é€šå¸¸ç”¨äºå®šä¹‰å­—ç¬¦é›†ï¼ˆä¾‹å¦‚ï¼Œ[a-z] åŒ¹é…æ‰€æœ‰å°å†™å­—æ¯ï¼‰ã€‚å› æ­¤ï¼Œæ‚¨çš„æ­£åˆ™è¡¨è¾¾å¼ ^Transaction Time of type [Sale] ä¸­çš„æ–¹æ‹¬å·è¢«è§£é‡Šä¸ºå­—ç¬¦é›†åŒ¹é…ï¼Œè€Œä¸æ˜¯å­—é¢åŒ¹é…ã€‚ä¸ºäº†è®© MySQL å°†æ–¹æ‹¬å·è§†ä¸ºæ™®é€šå­—ç¬¦ï¼Œè€Œä¸æ˜¯æ­£åˆ™è¡¨è¾¾å¼çš„ç‰¹æ®Šç¬¦å·ï¼Œéœ€è¦å¯¹å®ƒä»¬è¿›è¡Œ è½¬ä¹‰ã€‚ æ­£ç¡®å†™æ³•å¦‚ä¸‹ï¼š 1i.name REGEXP &#x27;^transaction time \\\\[$TXN_TYPE\\\\]&#x27; $__timeFilter(hu.clock)æ²¡æœ‰ä½œç”¨æœ¬æ¥æ²¡æœ‰å®šä¹‰æŸ¥è¯¢çš„æ—¶é—´èŒƒå›´ï¼Œåæ¥æƒ³è¦æ ¹æ®Grafanaä¸Šçš„æ—¶é—´è‡ªåŠ¨ä¿®æ”¹æ—¶é—´ï¼Œäºæ˜¯æƒ³ç€ç”¨ä¸Š$__timeFilter(hu.clock)è¿™ä¸ªæ–¹æ³•ï¼Œä½†æ˜¯å§‹ç»ˆæ£€ç´¢ä¸å‡ºæ¥ä»»ä½•ç»“æœï¼Œäºæ˜¯çœ‹äº†ä¸‹å®ƒçš„æŸ¥è¯¢ è°ƒæŸ¥å‘ç°ä»–ä¼šæŠŠè¿™ä¸ªæ–¹æ³•è½¬æ¢æˆå¦‚ä¸‹çš„è¯­å¥ 1AND hu.clock BETWEEN FROM_UNIXTIME(1704179643) AND FROM_UNIXTIME(1735802043) from_unixtimeæ˜¯MySQLé‡Œçš„æ—¶é—´å‡½æ•°dateä¸ºéœ€è¦å¤„ç†çš„å‚æ•°ï¼ˆè¯¥å‚æ•°æ˜¯Unix æ—¶é—´æˆ³ï¼‰ï¼Œå¯ä»¥æ˜¯å­—æ®µåï¼Œä¹Ÿå¯ä»¥ç›´æ¥æ˜¯Unix æ—¶é—´æˆ³å­—ç¬¦ä¸²åé¢çš„ &#39;%Y%m%d&#39; ä¸»è¦æ˜¯å°†è¿”å›å€¼æ ¼å¼åŒ–ã€‚ç™¾åº¦ç™¾ç§‘é™„ä¸Šï¼š https://baike.baidu.com/item/from_unixtime/1801387?fr=ge_ala ä½†æ˜¯åœ¨æ•°æ®åº“ä¸­ï¼Œè¯¥clockå­—æ®µå°±æ˜¯æŒ‰ç…§æ—¶é—´æˆ³æ¥ä¿å­˜çš„ï¼Œæ‰€ä»¥è¯´æ ¹æœ¬å°±ä¸éœ€è¦è½¬æ¢æˆå­—ç¬¦ä¸²æ ¼å¼ ä¿®æ”¹sqlè¯­å¥1AND hu.clock BETWEEN &#x27;$__timeFrom()&#x27; AND &#x27;$__timeTo()&#x27; ä¾æ—§æ— æ•ˆ,äºæ˜¯æŸ¥çœ‹å®˜ç½‘ä¸Šçš„è¯´æ˜ï¼Œå‘ç°$__timeFrom()å…¶å®è¿˜æ˜¯ä¼šè½¬æ¢æˆFROM_UNIXTIME(1494410783)è¿™è¾¹æˆ‘ä»¬åº”è¯¥ç”¨çš„æ˜¯$__unixEpochFrom()å’Œ$__unixEpochTo() æœ€ç»ˆè§£å†³æ–¹æ¡ˆ1AND hu.clock BETWEEN &#x27;$__unixEpochFrom()&#x27; AND &#x27;$__unixEpochTo()&#x27;","categories":[{"name":"è¿ç»´","slug":"è¿ç»´","permalink":"https://maydaychen.github.io/categories/%E8%BF%90%E7%BB%B4/"}],"tags":[{"name":"ç›‘æ§","slug":"ç›‘æ§","permalink":"https://maydaychen.github.io/tags/%E7%9B%91%E6%8E%A7/"},{"name":"Grafana","slug":"Grafana","permalink":"https://maydaychen.github.io/tags/Grafana/"}]},{"title":"Dockerå®æ“1-æŠŠimageä¸Šä¼ åˆ°é˜¿é‡Œäº‘ä»“åº“å¹¶åœ¨å›½å†…æœåŠ¡å™¨ä¸‹è½½","slug":"Dockerå®æ“1--æŠŠimageä¸Šä¼ åˆ°é˜¿é‡Œäº‘ä»“åº“å¹¶åœ¨å›½å†…æœåŠ¡å™¨ä¸‹è½½","date":"2024-12-31T03:17:02.000Z","updated":"2025-02-24T15:34:02.385Z","comments":true,"path":"2024/12/31/Dockerå®æ“1--æŠŠimageä¸Šä¼ åˆ°é˜¿é‡Œäº‘ä»“åº“å¹¶åœ¨å›½å†…æœåŠ¡å™¨ä¸‹è½½/","link":"","permalink":"https://maydaychen.github.io/2024/12/31/Docker%E5%AE%9E%E6%93%8D1--%E6%8A%8Aimage%E4%B8%8A%E4%BC%A0%E5%88%B0%E9%98%BF%E9%87%8C%E4%BA%91%E4%BB%93%E5%BA%93%E5%B9%B6%E5%9C%A8%E5%9B%BD%E5%86%85%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%8B%E8%BD%BD/","excerpt":"","text":"èƒŒæ™¯ç”±äºä¼—æ‰€å‘¨çŸ¥çš„åŸå› ï¼Œç›®å‰å›½å†…çš„æœåŠ¡å™¨æ‹‰dockeré•œåƒéå¸¸å›°éš¾ï¼ŒåŸºæœ¬å¯ä»¥è¯´æ˜¯å®Œå…¨æ²¡æ³•ç”¨å› æ­¤ï¼Œæ€ä¹ˆæŠŠimageä¸‹è½½ä¸‹æ¥æˆäº†å¾ˆå¤šäººå¤´ç–¼çš„é—®é¢˜ï¼Œè¿™é‡Œåˆ†äº«ä¸€ä¸‹ä¸€ç§è§£å†³åŠæ³•ï¼Œå°±æ˜¯åœ¨å·²æœ‰è¯¥é•œåƒçš„æœåŠ¡å™¨ä¸ŠæŠŠé•œåƒæ¨ç»™é˜¿é‡Œäº‘ï¼Œç„¶åå†ä»é˜¿é‡Œäº‘ä¸Šä¸‹è½½è¯¥é•œåƒ æ­¥éª¤è¿›å…¥å®¹å™¨é•œåƒæœåŠ¡åœ¨é˜¿é‡Œäº‘çš„æ§åˆ¶å°æ‰¾åˆ°å®¹å™¨é•œåƒæœåŠ¡ åˆ›å»ºä¸ªäººå®ä¾‹è¿›å…¥ä»¥åå¯ä»¥çœ‹åˆ°æœ‰ä¸ªäººå®ä¾‹è·Ÿä¼ä¸šå®ä¾‹é€‰é¡¹ï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬é€‰æ‹©ä¸ªäººå®ä¾‹ æ³¨æ„ï¼Œåœ¨è¿™è¾¹åº”è¯¥ä¼šé€‰åŒºåŸŸï¼Œè¯·åŠ¡å¿…é€‰æ‹©è·Ÿä½ æœåŠ¡å™¨æ‰€åœ¨åœ°ä¸€æ ·çš„åŒºåŸŸï¼Œå¦åˆ™æ— æ³•è¿æ¥ çœ‹äº†ä¸€ä¸‹ï¼Œä¸ªäººå®ä¾‹æœ‰å‘½åç©ºé—´å’Œé•œåƒæ•°é‡é™åˆ¶ï¼Œä½†æ˜¯å¯¹æˆ‘ä»¬ä¸ªäººè€Œè¨€å·²ç»ç»°ç»°æœ‰ä½™ åˆ›å»ºå‘½åç©ºé—´ åˆ›å»ºé•œåƒä»“åº“ é•œåƒä»“åº“ -&gt; åˆ›å»ºé•œåƒä»“åº“ -&gt; å¡«å†™ç›¸å…³å†…å®¹ä»“åº“åç§°ï¼šå¯ä»¥æ˜¯image nameä»“åº“ç±»å‹ï¼šå…¬æœ‰æˆ–è€…ç§æœ‰å¡«å†™å®Œæˆåç‚¹å‡»ä¸‹ä¸€æ­¥ åœ¨è¿™è¾¹ä½ å¯ä»¥é€‰æ‹©é•œåƒçš„æ¥æºï¼Œæ¯”å¦‚GitHubæˆ–è€…æœ¬åœ°ï¼Œç”±äºæˆ‘åœ¨å…¶ä»–æœåŠ¡å™¨ä¸Šå·²ç»ä¸‹è½½è¿‡äº†ï¼Œæ‰€ä»¥æˆ‘é€‰æ‹©æœ¬åœ°ä»“åº“ ä¸Šä¼ &#x2F;ä¸‹è½½é•œåƒè¿™ä¸€æ®µæˆ‘ç›´æ¥å¤åˆ¶å®˜ç½‘çš„è¯´æ³• ç™»å½•é˜¿é‡Œäº‘Docker Registry 1$ docker login --username=xxxx*****@xx.com [å…¬ç½‘åœ°å€] ç”¨äºç™»å½•çš„ç”¨æˆ·åä¸ºé˜¿é‡Œäº‘è´¦å·å…¨åï¼Œå¯†ç ä¸ºå¼€é€šæœåŠ¡æ—¶è®¾ç½®çš„å¯†ç ã€‚(æ‚¨å¯ä»¥åœ¨è®¿é—®å‡­è¯é¡µé¢ä¿®æ”¹å‡­è¯å¯†ç ) ä»Registryä¸­æ‹‰å–é•œåƒ 1$ docker pull [å…¬ç½‘åœ°å€]/maydaychen/postgres:[é•œåƒç‰ˆæœ¬å·] å°†é•œåƒæ¨é€åˆ°Registry 1234$ docker login --username=2458*****@qq.com [å…¬ç½‘åœ°å€]$ docker tag [ImageId] [å…¬ç½‘åœ°å€]/maydaychen/postgres:[é•œåƒç‰ˆæœ¬å·]$ docker push [å…¬ç½‘åœ°å€]/maydaychen/postgres:[é•œåƒç‰ˆæœ¬å·]è¯·æ ¹æ®å®é™…é•œåƒä¿¡æ¯æ›¿æ¢ç¤ºä¾‹ä¸­çš„[ImageId]å’Œ[é•œåƒç‰ˆæœ¬å·]å‚æ•°ã€‚ é€‰æ‹©åˆé€‚çš„é•œåƒä»“åº“åœ°å€ä»ECSæ¨é€é•œåƒæ—¶ï¼Œå¯ä»¥é€‰æ‹©ä½¿ç”¨é•œåƒä»“åº“å†…ç½‘åœ°å€ã€‚æ¨é€é€Ÿåº¦å°†å¾—åˆ°æå‡å¹¶ä¸”å°†ä¸ä¼šæŸè€—æ‚¨çš„å…¬ç½‘æµé‡ã€‚ å¦‚æœæ‚¨ä½¿ç”¨çš„æœºå™¨ä½äºVPCç½‘ç»œï¼Œè¯·ä½¿ç”¨ [ä¸“æœ‰ç½‘ç»œ] ä½œä¸ºRegistryçš„åŸŸåç™»å½•ã€‚ ç¤ºä¾‹ä½¿ç”¨â€docker tagâ€å‘½ä»¤é‡å‘½åé•œåƒï¼Œå¹¶å°†å®ƒé€šè¿‡ä¸“æœ‰ç½‘ç»œåœ°å€æ¨é€è‡³Registryã€‚ 1234$ docker imagesREPOSITORY TAG IMAGE ID CREATED VIRTUAL SIZEregistry.aliyuncs.com/acs/agent 0.7-dfb6816 37bb9c63c8b2 7 days ago 37.89 MB$ docker tag 37bb9c63c8b2 [ä¸“æœ‰åœ°å€]/acs/agent:0.7-dfb6816 ä½¿ç”¨ â€œdocker pushâ€ å‘½ä»¤å°†è¯¥é•œåƒæ¨é€è‡³è¿œç¨‹ã€‚ 1$ docker push [ä¸“æœ‰åœ°å€]/acs/agent:0.7-dfb6816","categories":[{"name":"è¿ç»´","slug":"è¿ç»´","permalink":"https://maydaychen.github.io/categories/%E8%BF%90%E7%BB%B4/"}],"tags":[{"name":"Docker","slug":"Docker","permalink":"https://maydaychen.github.io/tags/Docker/"}]},{"title":"Linuxæ“ä½œè®°å½•6--RockyLinux9å®‰è£…dockeråŠdocker-compose","slug":"Linuxæ“ä½œè®°å½•6--RockyLinux9å®‰è£…dockeråŠdocker-compose","date":"2024-12-31T01:34:38.000Z","updated":"2025-02-24T14:49:28.247Z","comments":true,"path":"2024/12/31/Linuxæ“ä½œè®°å½•6--RockyLinux9å®‰è£…dockeråŠdocker-compose/","link":"","permalink":"https://maydaychen.github.io/2024/12/31/Linux%E6%93%8D%E4%BD%9C%E8%AE%B0%E5%BD%956--RockyLinux9%E5%AE%89%E8%A3%85docker%E5%8F%8Adocker-compose/","excerpt":"","text":"Dockerçš„å®‰è£…å¦‚æœæ˜¯Rocky Linux9çš„è¯ï¼Œç›®å‰ä½¿ç”¨podmanè€Œä¸æ˜¯dockerï¼Œæ‰€ä»¥å‘½ä»¤å˜æˆäº† 1dnf install podman å¦‚æœä¸æ˜¯ç”¨çš„Rockyè€Œæ˜¯åˆ«çš„æ“ä½œç³»ç»Ÿçš„è¯ï¼Œå‘½ä»¤ä¼šæœ‰äº›è®¸çš„ä¸åŒï¼Œå¦‚ä¸‹å›¾ å¯åŠ¨å¹¶è®¾ç½®å¼€æœºè‡ªå¯å¯åŠ¨ Docker æœåŠ¡å¹¶è®¾ç½® Docker æœåŠ¡å¼€æœºè‡ªå¯ï¼š 12systemctl start dockersystemctl enable docker Docker-composeæ£€æŸ¥æœ€æ–°ç‰ˆæœ¬å·å‰å¾€ https://github.com/docker/compose/releasesï¼Œ æŸ¥çœ‹æœ€æ–°çš„releaseä¿¡æ¯ ä¸‹è½½æœ€æ–°çš„releaseåŒ…æ–¹æ³•ä¸€1sudo curl -L &quot;https://github.com/docker/compose/releases/download/v[ç‰ˆæœ¬å·]/docker-compose-$(uname -s)-$(uname -m)&quot; -o /usr/local/bin/docker-compose æ–¹æ³•äºŒ12cd /usr/local/bin/wget https://github.com/docker/compose/releases/download/v[ç‰ˆæœ¬å·]/docker-compose-linux-x86_64 æ–¹æ³•ä¸‰æ‰‹åŠ¨ä¸‹è½½ï¼Œé€šè¿‡SFTPå‘é€åˆ°æœåŠ¡å™¨ è®¾ç½®å¯æ‰§è¡Œæƒé™1sudo chmod +x /usr/local/bin/docker-compose éªŒè¯1docker-compose --version å¦‚æœé…ç½®ç”Ÿæ•ˆï¼Œå°±ä¼šæ˜¾ç¤ºdocker composeçš„ç‰ˆæœ¬å·","categories":[{"name":"è¿ç»´","slug":"è¿ç»´","permalink":"https://maydaychen.github.io/categories/%E8%BF%90%E7%BB%B4/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"https://maydaychen.github.io/tags/Linux/"}]},{"title":"é£Ÿè°±1--é±¼é¦™è‚‰ä¸éæ ‡å‡†ç‰ˆ","slug":"é£Ÿè°±1--é±¼é¦™è‚‰ä¸éæ ‡å‡†ç‰ˆ","date":"2024-12-30T15:33:33.000Z","updated":"2025-02-24T15:34:02.375Z","comments":true,"path":"2024/12/30/é£Ÿè°±1--é±¼é¦™è‚‰ä¸éæ ‡å‡†ç‰ˆ/","link":"","permalink":"https://maydaychen.github.io/2024/12/30/%E9%A3%9F%E8%B0%B11--%E9%B1%BC%E9%A6%99%E8%82%89%E4%B8%9D%E9%9D%9E%E6%A0%87%E5%87%86%E7%89%88/","excerpt":"","text":"é£Ÿæ çŒªé€šè„Šè‚‰ 250gï¼ˆä¸‰ä¸ªäººæ„Ÿè§‰åƒä¸å®Œï¼‰ ç¬‹ä¸ï¼ˆä¹Ÿå¯ä»¥ç›´æ¥ä¹°ç¬‹ï¼‰ æœ¨è€³ è‘±å§œè’œ ç¾äººè•‰ æ·€ç²‰ æ²¹ ç•ªèŒ„é…± ç™½ç³–&#x2F;å‘³ç²¾&#x2F;é†‹&#x2F;é…±æ²¹ èšæ²¹(éå¿…é¡») å°è‹æ‰“(éå¿…é¡») æ­¥éª¤ å°†çŒªé€šè„Šè‚‰åˆ‡ä¸ï¼Œæ¸…æ°´æ´—ï¼Œæ§å®Œæ°´ä¹‹ååŠ ç›+å‘³ç²¾ï¼Œæ…æ‹Œï¼ŒåŠ æ°´å†æ…æ‹Œ ç›´åˆ°æ°´è¿›åˆ°è‚‰é‡Œäº†ï¼Œè‚‰æœ‰ç²˜æ»‘æ„Ÿçš„æ—¶å€™ï¼Œover (éå¿…é¡») å¯ä»¥åŠ ç‚¹å°è‹æ‰“ï¼Œ ä¸€ä¸¢ä¸¢çš„é‡å°±è¡Œï¼Œç„¶åé™ç½®ä¸€å°æ—¶ åŠ æ·€ç²‰ï¼Œç”¨æ‰‹æŒå¿ƒæ‰è‚‰ä¸ï¼Œä¿è¯æ¯ä¸€æ ¹è‚‰ä¸éƒ½æœ‰æ·€ç²‰ å€’å…¥é€‚é‡æ²¹ï¼Œé˜²æ­¢è‚‰ä¸å‘å¹²ï¼Œä¹Ÿå¯ä¿è¯æ»‘æ²¹æ—¶ä¸ä¼šæ•£å¼€ é”…é‡ŒåŠ ä¸€å‹ºæ²¹ï¼Œçƒ­é”…å‡‰æ²¹ï¼ˆé”…ä¸­æ²¹çƒ§çƒ­è‡³å†’çƒŸï¼Œå†åŠ ä¸€å‹ºå‡‰æ²¹ï¼‰ å…³å°ç«ï¼Œå€’å…¥è‚‰ä¸ï¼Œå®šå‹åå¼€å¤§ç«ï¼Œå¾…è‚‰ä¸å˜è‰²åæŠŠè‚‰ä¸æ‹¨åˆ°ä¸€è¾¹ï¼Œå€’å…¥ç¾äººè•‰&#x2F;è‘±å§œè’œæœ«ï¼Œç…¸ç‚’åå€’å…¥ç•ªèŒ„é…±ä¸Šè‰² ç¿»ç‚’å‡åŒ€åå€’å…¥ç„¯æ°´ä¹‹åçš„ç¬‹ä¸å’Œæœ¨è€³ï¼Œå…³å°ç«ï¼ŒåŠ å…¥é…±æ²¹å’Œé†‹ï¼ˆæ¯”ä¾‹çº¦1:1ï¼Œçˆ±åƒé…¸çš„äººå¯ä»¥1:1.5ï¼‰ åŠ å…¥ç™½ç³–&#x2F;å‘³ç²¾&#x2F;ç›&#x2F;èƒ¡æ¤’ç²‰ï¼Œï¼ˆéå¿…é¡»ï¼‰ä¹Ÿå¯åŠ å…¥é€‚é‡èšæ²¹æé²œï¼Œç¿»ç‚’å‡åŒ€ å¤§ä¼™å‹¾èŠ¡ï¼Œå¯ä»¥å†åŠ ä¸€ä¸¢ä¸¢æ²¹ï¼Œç„¶åç‚’ä¸¤ä¸‹å°±å¯ä»¥å‡ºé”…äº† æ€»ç»“ ç¬‹ä¸è·Ÿæœ¨è€³è®°å¾—å…ˆç„¯æ°´ ç„¯æ°´çš„æ—¶å€™å¯ä»¥æŠŠè‘±å§œè’œå’Œç¾äººè•‰éƒ½åˆ‡äº†ï¼Œåæ­£æ²¡äº‹å¹² åˆ«å¿˜è®°å‹¾èŠ¡ï¼ä¸ç„¶å¤ªå¹²äº† å¦‚æœæ²¡æœ‰ç¾äººè•‰ï¼Œæˆ‘ç”¨çš„ä¸€æ ¹å°ç±³è¾£+ä¸€ç‚¹çº¢æ¤’ï¼Œæ„Ÿè§‰å‘³é“ä¹Ÿä¸å·® ç¬‹ä¸å¯çœŸä¸å¥½ä¹°å•Š","categories":[{"name":"ç”Ÿæ´»","slug":"ç”Ÿæ´»","permalink":"https://maydaychen.github.io/categories/%E7%94%9F%E6%B4%BB/"}],"tags":[{"name":"é£Ÿè°±","slug":"é£Ÿè°±","permalink":"https://maydaychen.github.io/tags/%E9%A3%9F%E8%B0%B1/"}]},{"title":"Hexoå­¦ä¹ æ—¥å¿—2--å¦‚ä½•ä½¿ç”¨æœ¬åœ°å›¾ç‰‡è¿›è¡Œå±•ç¤º","slug":"Hexoå­¦ä¹ æ—¥å¿—2--å¦‚ä½•ä½¿ç”¨æœ¬åœ°å›¾ç‰‡è¿›è¡Œå±•ç¤º","date":"2024-12-29T06:45:54.000Z","updated":"2025-02-24T15:34:02.390Z","comments":true,"path":"2024/12/29/Hexoå­¦ä¹ æ—¥å¿—2--å¦‚ä½•ä½¿ç”¨æœ¬åœ°å›¾ç‰‡è¿›è¡Œå±•ç¤º/","link":"","permalink":"https://maydaychen.github.io/2024/12/29/Hexo%E5%AD%A6%E4%B9%A0%E6%97%A5%E5%BF%972--%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8%E6%9C%AC%E5%9C%B0%E5%9B%BE%E7%89%87%E8%BF%9B%E8%A1%8C%E5%B1%95%E7%A4%BA/","excerpt":"","text":"èƒŒæ™¯ç”±äºå›¾åºŠçš„ä½¿ç”¨å¯èƒ½ä¼šå¯¼è‡´ä¸€å®šçš„é£é™©ï¼Œå†åŠ ä¸Šè«åå…¶å¦™çš„è£‚å›¾é—®é¢˜ï¼Œå› ä¸ºè¿‘æœŸå†…æ²¡æœ‰æ—¶é—´å»æŸ¥çœ‹è¿™ä¸ªé—®é¢˜ï¼Œæ‰€ä»¥ä¸å¾—ä¸é‡‡ç”¨æœ¬åœ°å›¾ç‰‡æ–‡ä»¶çš„æ–¹æ¡ˆï¼Œæ‰€å¹¸ç›®å‰çœ‹æ¥é—®é¢˜ä¸å¤§ å…·ä½“æ“ä½œä¿®æ”¹hexoé…ç½®ä¿®æ”¹_config.ymlæ–‡ä»¶ï¼Œæ‰¾åˆ°è¿™ä¸ªå‚æ•°å¹¶ä¸”ä¿®æ”¹ä¸ºtrue 1post_asset_folder: true åœ¨ä¿®æ”¹å®Œä¸Šè¿°é…ç½®åï¼Œæ¯æ¬¡é€šè¿‡å‘½ä»¤hexo new xxxéƒ½ä¼šç”Ÿæˆä¸€ä¸ªxxxæ–‡ä»¶å¤¹ï¼Œè¯¥æ–‡ä»¶å¤¹ç”¨æ¥å­˜æ”¾å¯¹åº”çš„èµ„æºæ–‡ä»¶ å®‰è£…æ’ä»¶æ’ä»¶åœ°å€ï¼š https://github.com/yiyungent/hexo-asset-img/blob/main/README_zh.mdåœ¨readmeä¸­å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬åªéœ€è¦æŠŠå›¾ç‰‡æ”¾åˆ°å¯¹åº”çš„èµ„æºæ–‡ä»¶ä¸­ï¼Œç„¶ååœ¨mdå†…å®¹ä¸­é€šè¿‡è¿™æ ·çš„æ–¹å¼è¿›è¡Œé¥®ç”¨ 1![æè¿°](Hexo-å¦‚ä½•ä½¿ç”¨æœ¬åœ°å›¾ç‰‡è¿›è¡Œå±•ç¤º/xxx.png)","categories":[{"name":"åšå®¢ç›¸å…³","slug":"åšå®¢ç›¸å…³","permalink":"https://maydaychen.github.io/categories/%E5%8D%9A%E5%AE%A2%E7%9B%B8%E5%85%B3/"}],"tags":[{"name":"Hexo","slug":"Hexo","permalink":"https://maydaychen.github.io/tags/Hexo/"}]},{"title":"ZabbixåŸºç¡€7--å°çŸ¥è¯†ç‚¹è®°å½•(æŒç»­æ›´æ–°)","slug":"ZabbixåŸºç¡€7--å°çŸ¥è¯†ç‚¹è®°å½•-æŒç»­æ›´æ–°","date":"2024-12-27T08:27:15.000Z","updated":"2025-02-24T15:15:57.111Z","comments":true,"path":"2024/12/27/ZabbixåŸºç¡€7--å°çŸ¥è¯†ç‚¹è®°å½•-æŒç»­æ›´æ–°/","link":"","permalink":"https://maydaychen.github.io/2024/12/27/Zabbix%E5%9F%BA%E7%A1%807--%E5%B0%8F%E7%9F%A5%E8%AF%86%E7%82%B9%E8%AE%B0%E5%BD%95-%E6%8C%81%E7%BB%AD%E6%9B%B4%E6%96%B0/","excerpt":"","text":"User typeåŒºåˆ« Zabbix User å¯ä»¥è®¿é—®â€œMonitoringâ€ï¼Œé»˜è®¤æƒ…å†µä¸‹æ— æƒè®¿é—®ä»»ä½•èµ„æº Zabbix Admin å¯ä»¥è®¿é—®â€œMonitoringâ€å’Œâ€œConfigurationâ€ï¼Œé»˜è®¤æƒ…å†µä¸‹æ— æƒè®¿é—®ä»»ä½•èµ„æº Zabbix Super Admin å¯ä»¥è®¿é—®æ‰€æœ‰å†…å®¹ï¼Œå¯¹æ‰€æœ‰ä¸»æœºå…·æœ‰è¯»å†™è®¿é—®æƒé™ Zabbix Alerté™åˆ¶Zabbixåªä¼šæŠŠæŠ¥è­¦å‘é€ç»™å¯¹è¿™ä¸ªHostè‡³å°‘æœ‰â€œReadâ€æƒé™çš„ç”¨æˆ· Discovery actionsè·ŸAutoregistration actionsauto-registration can only find the servers installed agent or proxy, but network discovery can find not only servers, but also VM or othersauto-registration can configure some actions after it find and add the servers, such as link template or others, but network discovery canâ€™t å…¬ç¤ºè®¡ç®—æœ€å¥½æ˜¯è®¡ç®—å…·æœ‰ç›¸åŒupdate timeçš„itemï¼Œä¸ç„¶çš„è¯å¦‚æœéƒ¨åˆ†itemæ•°æ®å·²æ›´æ–°ä½†å¦ä¸€éƒ¨åˆ†æ²¡æœ‰ï¼Œå®¹æ˜“å¯¼è‡´è®¡ç®—é”™è¯¯ é»˜è®¤è´¦å·Account: AdminPass: zabbix Zabbixç»„ä»¶ Zabbix Server æ ¹æ®ç›‘æ§è§„æ¨¡å’Œæ•°æ®é‡ç¡®å®šæœåŠ¡å™¨é…ç½®ï¼Œå»ºè®®æ•°æ®åº“ä½¿ç”¨SSDå­˜å‚¨ï¼Œå¹¶åˆç†è°ƒæ•´ç›¸å…³å‚æ•°ï¼Œå¦‚MySQLçš„â€œinnodb buffer pool sizeâ€å¤§å°ï¼Œä¸€èˆ¬ä¸ºä¸»æœºå†…å­˜çš„75% - 80%ã€‚ Zabbix Proxy é…ç½®éœ€è€ƒè™‘ç›‘æ§ä¸»æœºæ•°é‡å’ŒNVPSï¼ˆæ¯ç§’æ–°å€¼æ•°é‡ï¼‰ï¼Œå»ºè®®ä¸€ä¸ªproxyä¸Šçš„NVPSä¸è¦è¶…è¿‡2000ã€‚ Zabbix Agent ç‰ˆæœ¬åº”ä¸Zabbix Serveræˆ–Proxyå…¼å®¹ï¼Œå¤§ç‰ˆæœ¬ä¸èƒ½é«˜äºServer","categories":[{"name":"è¿ç»´","slug":"è¿ç»´","permalink":"https://maydaychen.github.io/categories/%E8%BF%90%E7%BB%B4/"}],"tags":[{"name":"ç›‘æ§","slug":"ç›‘æ§","permalink":"https://maydaychen.github.io/tags/%E7%9B%91%E6%8E%A7/"},{"name":"Zabbix","slug":"Zabbix","permalink":"https://maydaychen.github.io/tags/Zabbix/"}]},{"title":"Zabbixç›‘æ§ä¸‡ç‰©2--ç›‘æ§K8S","slug":"Zabbixç›‘æ§ä¸‡ç‰©2--ç›‘æ§K8S","date":"2024-12-26T08:41:05.000Z","updated":"2025-04-01T02:39:23.665Z","comments":true,"path":"2024/12/26/Zabbixç›‘æ§ä¸‡ç‰©2--ç›‘æ§K8S/","link":"","permalink":"https://maydaychen.github.io/2024/12/26/Zabbix%E7%9B%91%E6%8E%A7%E4%B8%87%E7%89%A92--%E7%9B%91%E6%8E%A7K8S/","excerpt":"","text":"èƒŒæ™¯ç”±äºé¡¹ç›®ä¸­éœ€è¦ä½¿ç”¨AWS EKSè¿›è¡Œéƒ¨ç½²ï¼Œä¼ ç»Ÿçš„åœ¨æœåŠ¡å™¨ä¸Šå®‰è£…zabbix agentçš„æ–¹æ³•å˜å¾—ä¸å†ä½¿ç”¨ï¼Œè¿˜å¥½Zabbixä»6.0LTSå¼€å§‹å°±å¼€å§‹é€‚é…K8Sï¼Œæ‰€ä»¥æ­£å¥½å°è¯•ä¸€ä¸‹ ä¸ºä»€ä¹ˆä¸ç”¨Prometheusè¯šç„¶ï¼Œåœ¨K8Sç›‘æ§é¢†åŸŸï¼ŒPrometheuså¯ä»¥è¯´æ˜¯ç»å¯¹çš„ä¸»æµï¼Œä½†æ˜¯æˆ‘ä¸»è¦æœ‰ä»¥ä¸‹å‡ ç‚¹é¡¾è™‘ï¼Œä»…ä¸ºä¸ªäººè§‚ç‚¹ï¼Œæ¬¢è¿è®¨è®º ç›‘æ§äººå‘˜æ²¡æœ‰EKS manageræœåŠ¡å™¨çš„æƒé™ï¼Œè¿™å°±æ„å‘³ç€ï¼Œæ²¡æ³•ä¸ŠæœåŠ¡å™¨ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼Œæ¯æ¬¡æœ‰é…ç½®å˜æ›´ä¼šå¾ˆè¢«åŠ¨ ç›‘æ§äººå‘˜éœ€è¦æœ‰è¾ƒå¼ºçš„K8SçŸ¥è¯†æ‰èƒ½ä¿®æ”¹ç›¸å…³çš„é…ç½®ï¼Œæ¯”å¦‚alertmanagerï¼Œè€ŒZabbixä»ç•Œé¢ä¸Šè¿›è¡Œé…ç½®ï¼Œä¼šç®€å•å¾ˆå¤š Zabbixå¯¹å„ç§è‡ªå®šä¹‰ç›‘æ§é¡¹çš„æ”¯æŒæ¯”è¾ƒå¥½ï¼Œä¾‹å¦‚è‡ªå®šä¹‰shellï¼Œå„ç§API health checkç­‰ï¼Œè€Œåœ¨prometheusä¸­è¿™äº›éƒ½éœ€è¦è‡ªå®šä¹‰exporterï¼Œç•¥æ˜¾ç¹çç»¼ä¸Šæ‰€è¿°ï¼Œå¯¼è‡´äº†æˆ‘å¸Œæœ›å¯ä»¥å°è¯•ç”¨Zabbixå»ç›‘æ§K8Sä¸­çš„å„é¡¹æŒ‡æ ‡ï¼Œæ‰æœ‰äº†è¿™ä¸€æ¬¡çš„å°è¯• å°è¯•è¿‡ç¨‹321ä¸Šé“¾æ¥ https://git.zabbix.com/projects/ZBX/repos/zabbix/browse/templates/app/kubernetes_httpè¿™ä¸ªå°±æ˜¯å®˜æ–¹çš„æ­¥éª¤ï¼Œè·Ÿç€æœ€ä¸‹é¢çš„setupä¸€æ­¥æ­¥åšå°±è¡Œæ³¨ï¼š è¿™ä¸ªåªä¼šåœ¨K8Sä¸­å®‰è£…proxyè·Ÿagentï¼Œserverç«¯è¿˜æ˜¯å®‰è£…åœ¨æœºç¾¤å¤– å®‰è£…Install the kubectl and helm tools following the instructions. Clone the repository: 123cd ~git clone https://git.zabbix.com/scm/zt/kubernetes-helm.gitcd kubernetes-helm Export the default values of the chart helm-zabbix to the file $HOME&#x2F;zabbix_values.yaml: 1helm show values . &gt; $HOME/zabbix_values.yaml Change the zabbixProxy.env.ZBX_SERVER_HOST environment variable value in the file $HOME&#x2F;zabbix_values.yaml to the address of the Zabbix server that is used for monitoring and which is reachable by the Zabbix proxy. Other values can be changed according to the environment if needed. List the namespaces of the cluster. 1kubectl get namespaces Create the namespace monitoring if it does not exist in the cluster. 1kubectl create namespace monitoring Deploy the chart in the Kubernetes cluster (update the YAML files paths if necessary). 1helm install zabbix . --dependency-update -f $HOME/zabbix_values.yaml -n monitoring Get the token automatically created for the service account. 1kubectl get secret zabbix-service-account -n monitoring -o jsonpath=&#123;.data.token&#125; | base64 -d å¯¼å…¥æ¨¡ç‰ˆè¿™ä¸€æ­¥å…¶å®æ²¡å¿…è¦ï¼Œæ–°çš„zabbixéƒ½ä¼šè‡ªå¸¦è¿™äº›æ¨¡ç‰ˆï¼Œå¦‚æœæ²¡æœ‰å†ä¸‹è½½å¯¼å…¥å³å¯ è·å–tokenå°±æ˜¯ä¸Šé¢çš„æœ€åä¸€æ­¥ åˆ›å»ºä¸€ä¸ªproxyæˆ‘ä»¬å°†è½¬åˆ°Administration -&gt; Proxiesæ¥æ·»åŠ Proxy å› ä¸ºè¿™é»˜è®¤æ˜¯ä¸»åŠ¨Proxyï¼Œæ‰€ä»¥æˆ‘ä»¬åªéœ€è¦æ ¹æ®zabbix_values.yamlæ–‡ä»¶ä¸­çš„- name: ZBX_HOSTNAMEå­—æ®µå¡«å…¥å¯¹åº”çš„Proxy nameï¼Œå…¶ä»–çš„ä¿æŒé»˜è®¤å³å¯(é»˜è®¤åç§°ä¸ºzabbix-proxy) åˆ›å»ºä¸€ä¸ªç›‘æ§nodeçš„hostæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªä¸»æœºï¼Œç”¨æ¥é‡‡é›†ä¸ç›‘æ§KubernetesèŠ‚ç‚¹ç›¸å…³çš„æŒ‡æ ‡ï¼Œå¹¶ä¸”æˆ‘ä»¬å°†ä½¿ç”¨Zabbixä½çº§åˆ«è‡ªåŠ¨å‘ç°æ¥å‘ç°èŠ‚ç‚¹å¹¶åˆ›å»ºæ–°ä¸»æœº ç»™æ­¤ä¸»æœºå‘½åKubernetes Nodes,å¹¶å…³è”æ¨¡æ¿kubernetes nodes by HTTP.åœ¨è¿™ä¸ªæ¨¡ç‰ˆé‡Œï¼Œæœ‰ä¸¤ä¸ªå®éœ€è¦è¢«ä¿®æ”¹ {KUBE.API.ENDPOINT.URL}, åº”è¯¥è®¾ç½®ä¸ºKubernetes API endpoint, ä¾‹å¦‚https://kubernetes.default.svc.cluster.local:443 {$KUBE.API.TOKEN}, åº”è¯¥è®¾ç½®ä¸ºæˆ‘ä»¬ä¹‹å‰è·å–çš„tokenæ·»åŠ å®Œä¸»æœºå‡ åˆ†é’Ÿåï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨hosté¡µé¢çœ‹åˆ°å¾ˆå¤šæ–°çš„hostï¼Œæ¯ä¸ªhostéƒ½ä»£è¡¨ä¸€ä¸ªnode åˆ›å»ºä¸€ä¸ªç›‘æ§clusterçš„hoståˆ›å»ºä¸€ä¸ªæ–°çš„hostï¼Œè¯¥hostå°†ä»£è¡¨é€šè¿‡Kubernetes APIå’Œkube-state-metricsç«¯ç‚¹å¯ç”¨çš„æŒ‡æ ‡ å†æ¬¡å•å‡»Create HostæŒ‰é’®ï¼Œå°†æ­¤ä¸»æœºå‘½åä¸ºk8s-cluster-hostã€‚ åŒæ ·é€‰æ‹©ä¹‹å‰åˆ›å»ºçš„proxy ä¸ºè¯¥ä¸»æœºå…³è”æ¨¡æ¿Kubernetes cluster state by HTTP åœ¨Macroéƒ¨åˆ†ä¸­ï¼Œå°†kube.api.urlæ›´æ”¹ä¸ºæˆ‘ä»¬ä¹‹å‰ä½¿ç”¨çš„ç›¸åŒå†…å®¹ï¼Œä½†è¿™æ¬¡åœ¨æœ«å°¾çœç•¥&#x2F;apiã€‚ç®€å•åœ°ï¼šdefault.svc.cluster.local:443ã€‚ {$KUBE.API.TOKEN} è®¾ç½®ä¸ºåŒæ ·çš„å†…å®¹ é—®é¢˜Todo Agentæ— æ³•è¿æ¥çš„é—®é¢˜ Agentç…§ç†æ¥è¯´åº”è¯¥æ˜¯DaemonSetè‡ªåŠ¨åˆ›å»ºçš„ï¼Œä½†æ˜¯ç°åœ¨åªæœ‰proxyæœåŠ¡å™¨çš„ä¸€ä¸ªagentï¼Œå…¶ä»–nodeæ²¡æœ‰agentï¼Œå¾ˆå¥‡æ€ª Prometheusæ•°æ®æ¥å…¥ï¼Œæ€ä¹ˆå¯¹æ¥prometheusçš„exporter","categories":[{"name":"è¿ç»´","slug":"è¿ç»´","permalink":"https://maydaychen.github.io/categories/%E8%BF%90%E7%BB%B4/"}],"tags":[{"name":"ç›‘æ§","slug":"ç›‘æ§","permalink":"https://maydaychen.github.io/tags/%E7%9B%91%E6%8E%A7/"},{"name":"Zabbix","slug":"Zabbix","permalink":"https://maydaychen.github.io/tags/Zabbix/"}]},{"title":"Zabbixè¿›é˜¶6--è¿›ç¨‹é€ä¸ªç†è§£","slug":"Zabbixè¿›é˜¶6--è¿›ç¨‹é€ä¸ªç†è§£","date":"2024-12-25T07:39:59.000Z","updated":"2025-02-24T15:11:36.015Z","comments":true,"path":"2024/12/25/Zabbixè¿›é˜¶6--è¿›ç¨‹é€ä¸ªç†è§£/","link":"","permalink":"https://maydaychen.github.io/2024/12/25/Zabbix%E8%BF%9B%E9%98%B66--%E8%BF%9B%E7%A8%8B%E9%80%90%E4%B8%AA%E7%90%86%E8%A7%A3/","excerpt":"","text":"ZabbixæœåŠ¡ç«¯è¿›ç¨‹è¢«åˆ†ä¸ºä¸åŒçš„ç§ç±»ï¼Œæ¯ä¸€ç§è¿›ç¨‹è´Ÿè´£ç›¸åº”çš„ä»»åŠ¡ï¼ŒåŒ…æ‹¬æ”¶é›†åŸå§‹ç›‘æ§æ•°æ®ã€å¯¹åŸå§‹ç›‘æ§æ•°æ®è¿›è¡Œé¢„å¤„ç†ã€å°†é¢„å¤„ç†åçš„ç›‘æ§æ•°æ®åŒæ­¥åˆ°æ•°æ®åº“ã€å¯¹ç›‘æ§æ•°æ®è¿›è¡Œè®¡ç®—ä»¥ç”Ÿæˆäº‹ä»¶ã€è®¡ç®—å’Œè·å–å†…éƒ¨ç›‘æ§æ•°æ®ï¼Œä»¥åŠå¯¹æ•°æ®åº“ä¸­çš„æ•°æ®è¿›è¡Œæ¸…ç†ç­‰ã€‚ zabbix_agentdå®¢æˆ·ç«¯å®ˆæŠ¤è¿›ç¨‹ï¼Œæ­¤è¿›ç¨‹æ”¶é›†å®¢æˆ·ç«¯æ•°æ®ï¼Œä¾‹å¦‚cpuè´Ÿè½½ã€å†…å­˜ã€ç¡¬ç›˜ä½¿ç”¨æƒ…å†µç­‰ zabbix_getzabbixå·¥å…·ï¼Œå•ç‹¬ä½¿ç”¨çš„å‘½ä»¤ï¼Œé€šå¸¸åœ¨serveræˆ–è€…proxyç«¯æ‰§è¡Œè·å–è¿œç¨‹å®¢æˆ·ç«¯ä¿¡æ¯çš„å‘½ä»¤ã€‚é€šå¸¸ç”¨æˆ·æ’é”™ã€‚ä¾‹å¦‚åœ¨serverç«¯è·å–ä¸åˆ°å®¢æˆ·ç«¯çš„å†…å­˜æ•°æ®ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨zabbix_getè·å–å®¢æˆ·ç«¯çš„å†…å®¹çš„æ–¹å¼æ¥åšæ•…éšœæ’æŸ¥ã€‚ zabbix_senderzabbixå·¥å…·ï¼Œç”¨äºå‘é€æ•°æ®ç»™serveræˆ–è€…proxyï¼Œé€šå¸¸ç”¨äºè€—æ—¶æ¯”è¾ƒé•¿çš„æ£€æŸ¥ã€‚å¾ˆå¤šæ£€æŸ¥éå¸¸è€—æ—¶é—´ï¼Œå¯¼è‡´zabbixè¶…æ—¶ã€‚äºæ˜¯æˆ‘ä»¬åœ¨è„šæœ¬æ‰§è¡Œå®Œæ¯•ä¹‹åï¼Œä½¿ç”¨senderä¸»åŠ¨æäº¤æ•°æ®ã€‚ zabbix_serverzabbixæœåŠ¡ç«¯å®ˆæŠ¤è¿›ç¨‹ã€‚zabbix_agentdã€zabbix_getã€zabbix_senderã€zabbix_proxyã€zabbix_java_gatewayçš„æ•°æ®æœ€ç»ˆéƒ½æ˜¯æäº¤åˆ°serverå¤‡æ³¨ï¼šå½“ç„¶ä¸æ˜¯æ•°æ®éƒ½æ˜¯ä¸»åŠ¨æäº¤ç»™zabbix_server,ä¹Ÿæœ‰çš„æ˜¯serverä¸»åŠ¨å»å–æ•°æ®ã€‚ zabbix_proxyzabbixä»£ç†å®ˆæŠ¤è¿›ç¨‹ã€‚åŠŸèƒ½ç±»ä¼¼serverï¼Œå”¯ä¸€ä¸åŒçš„æ˜¯å®ƒåªæ˜¯ä¸€ä¸ªä¸­è½¬ç«™ï¼Œå®ƒéœ€è¦æŠŠæ”¶é›†åˆ°çš„æ•°æ®æäº¤&#x2F;è¢«æäº¤åˆ°serveré‡Œã€‚ä¸ºä»€ä¹ˆè¦ç”¨ä»£ç†ï¼Ÿä»£ç†æ˜¯åšä»€ä¹ˆçš„ï¼Ÿå–ä¸ªå…³å­ï¼Œè¯·ç»§ç»­å…³æ³¨è¿ç»´ç”Ÿå­˜æ—¶é—´zabbixæ•™ç¨‹ç³»åˆ—ã€‚ zabbix_java_gatewayzabbix2.0ä¹‹åå¼•å…¥çš„ä¸€ä¸ªåŠŸèƒ½ã€‚é¡¾åæ€ä¹‰ï¼šJavaç½‘å…³ï¼Œç±»ä¼¼agentdï¼Œä½†æ˜¯åªç”¨äºJavaæ–¹é¢ã€‚éœ€è¦ç‰¹åˆ«æ³¨æ„çš„æ˜¯ï¼Œå®ƒåªèƒ½ä¸»åŠ¨å»è·å–æ•°æ®ï¼Œè€Œä¸èƒ½è¢«åŠ¨è·å–æ•°æ®ã€‚å®ƒçš„æ•°æ®æœ€ç»ˆä¼šç»™åˆ°serveræˆ–è€…proxyã€‚ ç›‘æ§æ•°æ®çš„æ”¶é›†è¿›ç¨‹ZabbixæœåŠ¡å™¨çš„é‡è¦ä»»åŠ¡ä¹‹ä¸€å°±æ˜¯è¢«åŠ¨æ¥æ”¶ç”±Zabbixä»£ç†å’Œå„ç§Zabbixå®¢æˆ·ç«¯å‘é€çš„ç›‘æ§æ•°æ®ï¼Œä»¥åŠä¸»åŠ¨å‘Zabbixä»£ç†ã€Zabbix java gatewayå’ŒZabbixå®¢æˆ·ç«¯ç­‰æ•°æ®æºè¯·æ±‚æ•°æ®ï¼Œå…¶ä¸­è¢«åŠ¨æ¥æ”¶æ•°æ®ç”±trapperç±»è¿›ç¨‹å®ç°ï¼Œä¸»åŠ¨è¯·æ±‚æ•°æ®åˆ™ç”±pollerç±»è¿›ç¨‹å®ç°ã€‚ trapperç±»è¿›ç¨‹é€šè¿‡ç›‘å¬TCPå¥—æ¥å­—æ¥æ•è·ç¬¦åˆé€šä¿¡åè®®çš„åŸå§‹ç›‘æ§æ•°æ®ï¼Œpollerç±»è¿›ç¨‹åˆ™ä½¿ç”¨ConfigCacheä½œä¸ºè¾“å…¥ï¼Œæ ¹æ®ç¼“å­˜ä¿¡æ¯å®ç°å®Œå–„çš„ä»»åŠ¡è°ƒåº¦ã€‚trapperç±»å’Œpollerç±»è¿›ç¨‹çš„ä¸‹æ¸¸æ˜¯é¢„å¤„ç†è¿›ç¨‹ï¼Œè¿™ä¸¤ç±»è¿›ç¨‹éœ€è¦å°†æ”¶é›†åˆ°çš„åŸå§‹ç›‘æ§æ•°æ®å‘é€åˆ°é¢„å¤„ç†è¿›ç¨‹ã€‚trapperç±»è¿›ç¨‹å’Œpollerç±»è¿›ç¨‹éƒ½ä¼šåœ¨è¿›ç¨‹å†…éƒ¨ç»´æŠ¤ä¸€ä¸ªé™æ€å˜é‡cached_messageï¼Œç”¨äºæš‚å­˜å¾…å‘é€çš„ç›‘æ§æ•°æ®ï¼Œå¹¶åœ¨å„ç§å¿…è¦çš„æ—¶æœºå°†è¯¥å˜é‡ä¸­çš„æ¶ˆæ¯å‘é€åˆ°é¢„å¤„ç†è¿›ç¨‹ã€‚ trapperç±»è¿›ç¨‹ZabbixæœåŠ¡å™¨ç«¯çš„trapperè¿›ç¨‹è´Ÿè´£æ¥æ”¶æ¥è‡ªZabbix Agentã€Zabbix Proxyã€zabbix_senderåŠå…¶ä»–å¤–éƒ¨è¿›ç¨‹å‘æ¥çš„è¯·æ±‚å¹¶è¿›è¡Œå¤„ç†ï¼ŒæŒ‰ç…§Zabbix 5.0çš„é€šä¿¡åè®®è§„èŒƒï¼Œtrapperè¿›ç¨‹åªèƒ½æ¥æ”¶JSONæ ¼å¼å­—ç¬¦ä¸²çš„è¯·æ±‚ã€‚ trapperè¿›ç¨‹ç”±é…ç½®æ–‡ä»¶ä¸­çš„StartTrapperså‚æ•°å†³å®šå…¶å¯åŠ¨æ•°é‡ï¼ˆå…è®¸å¯åŠ¨0ï½1000ä¸ªè¿›ç¨‹ï¼Œé»˜è®¤ä¸º5ä¸ªï¼‰ æ³¨æ„ï¼šè‡³å°‘è¦è¿è¡Œä¸€ä¸ªtrapperè¿›ç¨‹ç”¨äºåœ¨webå‰ç«¯å±•ç¤ºæœåŠ¡å™¨å¯ç”¨æ€§å’Œé˜Ÿåˆ—è§†å›¾ æ€»ä½“è€Œè¨€ï¼Œtrapperè¿›ç¨‹æ‰€åšçš„äº‹æƒ…å°±æ˜¯å¾ªç¯ä»TCP å¥—æ¥å­—è¯»å–è¯·æ±‚æ¶ˆæ¯ï¼Œç„¶åæ ¹æ®æ¶ˆæ¯ç±»å‹è°ƒç”¨ä¸åŒçš„å‡½æ•°è¿›è¡Œå¤„ç†ï¼Œå¤„ç†å®Œæ¯•åå…³é—­è¯¥å¥—æ¥å­—è¿æ¥ã€‚å³æ¯ä¸ªå¾ªç¯å¤„ç†ä¸€ä¸ªè¯·æ±‚ï¼Œæ¯ä¸ªè¯·æ±‚çš„å¤„ç†éƒ½æ˜¯åœ¨æ–°çš„è¿æ¥ä¸­è¿›è¡Œé€šä¿¡çš„ã€‚ æ•°æ®å¤„ç†ï¼š å¤„ç†agent dataå’Œsender dataè¯·æ±‚ï¼šä¸¤è€…å¤„ç†è¿‡ç¨‹ç±»ä¼¼ï¼Œå”¯ä¸€åŒºåˆ«æ˜¯éªŒè¯è¿‡ç¨‹ï¼Œagent dataè¦æ±‚ç›‘æ§é¡¹å±äºä¸»åŠ¨å®¢æˆ·ç«¯ï¼ˆactive agentï¼‰ç±»å‹ï¼Œè€Œå‘é€è€…æ•°æ®ï¼ˆsender dataï¼‰è¦æ±‚ç›‘æ§é¡¹å±äºZabbix trapperç±»å‹ã€‚è¯·æ±‚çš„è¿‡ç¨‹ä¸­ï¼Œtrapperè¿›ç¨‹çš„ä½œç”¨åœ¨äºéªŒè¯æ•°æ®çš„æœ‰æ•ˆæ€§ï¼ŒåŒ…æ‹¬ç›‘æ§é¡¹çŠ¶æ€ã€ç›‘æ§é¡¹ç±»å‹å’Œä¸»æœºçŠ¶æ€ç­‰ã€‚ å¤„ç†proxy configè¯·æ±‚ï¼šå°†ZabbixæœåŠ¡å™¨çš„é…ç½®ä¿¡æ¯ä¼ è¾“åˆ°Zabbixä»£ç†ã€‚å¯ä»¥ç”±Zabbixä»£ç†å‘é€åˆ°ZabbixæœåŠ¡å™¨(ä¸»åŠ¨æ¨¡å¼ï¼Œé»˜è®¤)ï¼Œä¹Ÿå¯ä»¥ç”±ZabbixæœåŠ¡å™¨å‘é€åˆ°Zabbixä»£ç†ï¼ˆè¢«åŠ¨æ¨¡å¼ï¼‰ã€‚ å¤„ç†proxy dataè¯·æ±‚ï¼šå¯èƒ½ç”±ZabbixæœåŠ¡å™¨æˆ–è€…è¢«åŠ¨æ¨¡å¼ä¸‹çš„Zabbixä»£ç†æ¥å¤„ç†ã€‚å¦‚æœæ˜¯ZabbixæœåŠ¡å™¨ï¼Œè¯´æ˜å®ƒæ¥æ”¶äº†ä¸€æ‰¹æ¥è‡ªZabbixä»£ç†çš„ç›‘æ§å€¼ï¼Œæ­¤æ—¶éœ€è¦å°†æ•°æ®å†™å…¥ç¼“å­˜æˆ–è€…è¿›è¡ŒLLD(Low-level discoveryï¼Œè‡ªåŠ¨å‘ç°)å¤„ç†ï¼›å¦‚æœæ˜¯è¢«åŠ¨ä»£ç†ï¼Œè¯´æ˜å®ƒæ¥æ”¶äº†ZabbixæœåŠ¡å™¨å‘é€çš„æ•°æ®è¯·æ±‚ï¼Œæ­¤æ—¶éœ€è¦åšçš„æ˜¯å°†ç›‘æ§æ•°æ®å›å¤ç»™ZabbixæœåŠ¡å™¨ã€‚ä»Zabbix 5.0å¼€å§‹ï¼ŒZabbixä»£ç†å…·æœ‰äº†é¢„å¤„ç†çš„èƒ½åŠ›ï¼Œæ‰€ä»¥proxy dataä¸­çš„ç›‘æ§å€¼å…¶å®æ˜¯å·²ç»é¢„å¤„ç†è¿‡çš„ï¼Œä¸éœ€è¦åœ¨ZabbixæœåŠ¡å™¨ç«¯å†æ¬¡é¢„å¤„ç†ã€‚ snmp trapperè¿›ç¨‹snmp trapperè¿›ç¨‹ç”±é…ç½®å‚æ•°StartSNMPTrapperå†³å®šå…¶å¯åŠ¨æ•°é‡ï¼ˆå…è®¸0æˆ–1ä¸ªè¿›ç¨‹ï¼‰ï¼Œé»˜è®¤ä¸º0ã€‚è¯¥è¿›ç¨‹çš„å·¥ä½œæ–¹å¼æ˜¯å¾ªç¯è°ƒç”¨get_latest_data()å’Œread_traps()å‡½æ•°ï¼Œä»trapæ–‡ä»¶ï¼ˆæ–‡ä»¶è·¯å¾„ç”±SNMPTrapperFileé…ç½®å‚æ•°å†³å®šï¼‰ä¸­è¯»å–æ•°æ®ï¼Œç„¶åè°ƒç”¨parse_traps()å‡½æ•°è¿›è¡Œè§£æå¤„ç† pollerç±»è¿›ç¨‹pollerç±»è¿›ç¨‹æ˜¯æŒ‡ä»¥ä¸»åŠ¨æ–¹å¼è·å–åŸå§‹ç›‘æ§æ•°æ®çš„è¿›ç¨‹ï¼ŒåŒ…æ‹¬pollerè¿›ç¨‹ã€unreachable pollerè¿›ç¨‹ã€ipmi manager&#x2F;pollerè¿›ç¨‹ã€icmp pingerè¿›ç¨‹ã€javapollerè¿›ç¨‹ã€proxy pollerè¿›ç¨‹å’Œhttp pollerè¿›ç¨‹ï¼Œä¸€å…±æœ‰7ç§ï¼Œå®ƒä»¬å„è‡ªè´Ÿè´£é‡‡é›†ä¸åŒç±»å‹çš„ç›‘æ§é¡¹æ•°æ®ã€‚ä¸trapperç±»è¿›ç¨‹ä¸åŒçš„æ˜¯ï¼Œpollerç±»è¿›ç¨‹éœ€è¦è‡ªå·±æ‰§è¡Œç›‘æ§æ•°æ®é‡‡é›†é€»è¾‘ï¼Œæ¯ä¸€ç§ç›‘æ§é¡¹éƒ½éœ€è¦è°ƒç”¨ä¸åŒçš„å‡½æ•°è¿›è¡Œå¤„ç†æ‰èƒ½å¾—åˆ°ç›‘æ§æ•°æ®ï¼Œè€Œtrapperç±»è¿›ç¨‹å¯ä»¥ç›´æ¥æ¥æ”¶ç›‘æ§æ•°æ®ã€‚ä»è¿™ä¸ªè§’åº¦æ¥è¯´ï¼Œå¯¹äºåŒæ ·æ•°é‡çš„ç›‘æ§ä»»åŠ¡ï¼Œä½¿ç”¨pollerå·¥ä½œæ–¹å¼è¦æ¯”ä½¿ç”¨trapperå·¥ä½œæ–¹å¼çš„è´Ÿè½½æ›´é«˜ unreachable pollerè¿›ç¨‹åœ¨ç½‘ç»œé€šä¿¡è‰¯å¥½å¹¶ä¸”å„æ–¹æœåŠ¡æ­£å¸¸çš„æƒ…å†µä¸‹ï¼Œpollerè¿›ç¨‹æ‰€å¤„ç†çš„Zabbixå®¢æˆ·ç«¯å’ŒSNMPå®¢æˆ·ç«¯ç›‘æ§é¡¹ï¼Œä»¥åŠIPMIè¿›ç¨‹å¤„ç†çš„IPMIå®¢æˆ·ç«¯ï¼ˆIPMIagentï¼‰ç›‘æ§é¡¹å’Œjava pollerè¿›ç¨‹å¤„ç†çš„JMXç›‘æ§é¡¹ï¼Œéƒ½èƒ½å¤ŸæˆåŠŸæ‰§è¡Œå¹¶è·å–ç›‘æ§æ•°æ®ã€‚ä½†æ˜¯ï¼Œå½“å‡ºç°agentæœåŠ¡æ•…éšœæ—¶ï¼Œå¦‚æœç»§ç»­ç”±åŸæ¥çš„pollerç±»è¿›ç¨‹å¤„ç†å¯¹åº”çš„ç›‘æ§é¡¹ï¼Œå¤§é‡çš„è¿æ¥è¶…æ—¶å°±æœ‰å¯èƒ½å¼•èµ·æ•´ä½“æœåŠ¡æ°´å¹³ä¸‹é™ã€‚unreachable pollerè¿›ç¨‹å°±æ˜¯å¯¹è¯¥é—®é¢˜çš„è§£å†³æ–¹æ¡ˆï¼Œå½“å®¢æˆ·ç«¯ï¼ˆåŒ…æ‹¬Zabbixå®¢æˆ·ç«¯ã€SNMPå®¢æˆ·ç«¯ã€IPMIå®¢æˆ·ç«¯å’ŒJMXå®¢æˆ·ç«¯ï¼‰æœåŠ¡ä¸å¯ç”¨æ—¶ï¼Œå¯¹åº”çš„ç›‘æ§é¡¹ä¼šè½¬ç§»åˆ°unreachable polleré˜Ÿåˆ—ä¸­å¤„ç†ã€‚å½“unreachable pollerè¿›ç¨‹å‘ç°æŸä¸ªå®¢æˆ·ç«¯å·²ç»æ¢å¤æ­£å¸¸æ—¶ï¼Œåˆ™å°†å¯¹åº”çš„ç›‘æ§é¡¹å†è½¬ç§»å›åŸå§‹é˜Ÿåˆ—ä¸­ã€‚ ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œç”±äºå¤§éƒ¨åˆ†å®¢æˆ·ç«¯çŠ¶æ€æ˜¯è‰¯å¥½çš„ï¼Œå› æ­¤unreachable pollerè¿›ç¨‹çš„è´Ÿè½½å¹¶ä¸é«˜ã€‚ä½†æ˜¯ï¼Œä¸€æ—¦å‘ç”Ÿå¤§é¢ç§¯ç½‘ç»œæ•…éšœï¼Œä¼šæœ‰å¤§é‡ç›‘æ§é¡¹è½¬ç§»åˆ°unreachablepollerè¿›ç¨‹çš„ä»»åŠ¡é˜Ÿåˆ—ä¸­ï¼Œæ­¤æ—¶è¿›ç¨‹çš„è´Ÿè½½ä¼šé£™å‡ã€‚å¦‚æœè¦é™ä½è´Ÿè½½ï¼Œå¯ä»¥è€ƒè™‘å¢åŠ UnavailableDelayå‚æ•°å€¼ï¼Œæˆ–è€…å¢åŠ unreachable pollerè¿›ç¨‹çš„å¯åŠ¨æ•°é‡ã€‚ é¢„å¤„ç†è¿›ç¨‹é¢„å¤„ç†ï¼ˆpreprocessingï¼‰è¿›ç¨‹æ˜¯ä»Zabbix 3.4å¼€å§‹æ–°å¢çš„ä¸€ç§è¿›ç¨‹ç±»å‹ï¼Œå®ƒç”¨äºå¯¹åŸå§‹çš„ç›‘æ§æ•°æ®è¿›è¡Œå„ç§å½¢å¼çš„å˜æ¢å’Œè®¡ç®—ï¼Œå¹¶é€šè¿‡å…±äº«å†…å­˜ï¼Œå°†è¾“å‡ºç»“æœä¼ é€’åˆ°history syncerè¿›ç¨‹è¿›è¡Œå¤„ç†ã€‚åœ¨Zabbixçš„æ—©æœŸç‰ˆæœ¬ä¸­ï¼Œé¢„å¤„ç†è¿›ç¨‹åªèƒ½è¿è¡Œåœ¨ZabbixæœåŠ¡å™¨ç«¯ï¼Œå½“æ•°æ®é‡å¤§æ—¶ä¼šç»™ZabbixæœåŠ¡å™¨ç«¯é€ æˆè¾ƒå¤§çš„å‹åŠ›ã€‚å› æ­¤ä»Zabbix 4.2ç‰ˆæœ¬å¼€å§‹ï¼Œé¢„å¤„ç†è¿›ç¨‹å¯ä»¥åŒæ—¶è¿è¡Œåœ¨ZabbixæœåŠ¡å™¨ç«¯å’ŒZabbixä»£ç†ç«¯ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œç”±Zabbixä»£ç†è´Ÿè´£é‡‡é›†çš„ç›‘æ§æ•°æ®åœ¨ä¼ è¾“åˆ°ZabbixæœåŠ¡å™¨ç«¯ä¹‹å‰å°±å·²ç»å®Œæˆäº†é¢„å¤„ç†ï¼Œç›´æ¥ä»Zabbixå®¢æˆ·ç«¯ä¼ è¾“åˆ°ZabbixæœåŠ¡å™¨ç«¯çš„æ•°æ®åˆ™éœ€è¦ç”±ZabbixæœåŠ¡å™¨ç«¯å®Œæˆé¢„å¤„ç†ã€‚ preprocessingè¿›ç¨‹ç”±1ä¸ªpreprocessing manager(ç®¡ç†è€…è¿›ç¨‹)å’Œå¤šä¸ªpreprocessing worker(å·¥ä½œè€…è¿›ç¨‹)è¿›ç¨‹ç»„æˆã€‚ processing managerè¿›ç¨‹è´Ÿè´£ç›‘å¬é¢„å¤„ç†æ‰€ä½¿ç”¨çš„UnixåŸŸå¥—æ¥å­—å¹¶å¤„ç†ç”±poller &#x2F; trapperè¿›ç¨‹å’Œpreprocessing workerè¿›ç¨‹å‘é€è¿‡æ¥çš„æ¶ˆæ¯ã€‚è¿˜ä¼šå‘lld managerè¿›ç¨‹å‘é€æ¶ˆæ¯ï¼Œå› ä¸ºåŸå§‹ç›‘æ§æ•°æ®ä¸­åŒæ—¶åŒ…å«LLDè§„åˆ™ç›‘æ§é¡¹æ•°æ®ï¼Œè¿™äº›æ•°æ®åœ¨é¢„å¤„ç†å®Œæ¯•ä»¥åè¿˜éœ€è¦è¿›è¡ŒLLDå¤„ç†ï¼ˆç”±lld managerå’Œlld workerè¿›ç¨‹å®Œæˆï¼‰ é¢„å¤„ç†å·¥ä½œè€…ï¼ˆpreprocessing workerï¼‰è¿›ç¨‹çš„æ•°é‡ç”±é…ç½®å‚æ•°StartPreprocessorså†³å®šï¼Œå…è®¸1ï½1 000ä¸ªè¿›ç¨‹ã€‚å·¥ä½œè€…è¿›ç¨‹è´Ÿè´£è¯»å–ç®¡ç†è€…è¿›ç¨‹å‘é€çš„è¿›ç¨‹é—´é€šä¿¡æœåŠ¡æ¶ˆæ¯ï¼Œå¹¶æ‰§è¡Œæ‰€è·å¾—çš„ä»»åŠ¡ã€‚ LLDè¿›ç¨‹LLDè¿›ç¨‹æ˜¯ä»Zabbix 5.0å¼€å§‹å‡ºç°çš„ä¸“é—¨è´Ÿè´£LLDè§„åˆ™ï¼ˆLLD ruleï¼‰ç›‘æ§æ•°æ®å¤„ç†çš„è¿›ç¨‹ï¼Œç”±äºåº•å±‚å‘ç°ï¼ˆLow Level Discoveryï¼ŒLLDï¼‰å¾—åˆ°è¶Šæ¥è¶Šå¤šçš„åº”ç”¨ï¼Œå› æ­¤è¿™ç±»æ•°æ®çš„å¤„ç†å‹åŠ›éšä¹‹å¢åŠ ï¼Œå°†è¿™äº›å·¥ä½œäº¤ç»™å•ç‹¬çš„è¿›ç¨‹æ¥å¤„ç†å°†æœ‰åˆ©äºæ€§èƒ½çš„æå‡å’Œå°†æ¥çš„è¿›ä¸€æ­¥æ‰©å±•ã€‚ LLDè¿›ç¨‹åŒ…æ‹¬lld managerè¿›ç¨‹å’Œlld workerè¿›ç¨‹ä¸¤ç§ï¼Œå…¶ä¸­ç®¡ç†è€…è¿›ç¨‹æ˜¯å”¯ä¸€çš„ï¼Œå·¥ä½œè€…è¿›ç¨‹å¯ä»¥å¯åŠ¨å¤šä¸ªã€‚LLDè¿›ç¨‹åªèƒ½è¿è¡Œåœ¨ZabbixæœåŠ¡å™¨ç«¯ï¼Œå®ƒä»¬ä½äºé¢„å¤„ç†è¿›ç¨‹çš„ä¸‹æ¸¸ï¼Œæ¥æ”¶é¢„å¤„ç†è¿›ç¨‹å‘é€çš„æ¶ˆæ¯ä½œä¸ºè¾“å…¥ï¼Œè€Œè¾“å‡ºåˆ™æ˜¯å¯¹å„é¡¹ç›‘æ§é…ç½®çš„æ›´æ–°æ“ä½œã€‚æœ¬è´¨ä¸Šï¼ŒLLDå°±æ˜¯é€šè¿‡è§£æLLDè§„åˆ™ç›‘æ§é¡¹ï¼ˆä¸€ç§ç‰¹æ®Šç±»å‹çš„ç›‘æ§é¡¹ï¼Œå…¶é…ç½®ä¿¡æ¯å­˜å‚¨åœ¨itemsè¡¨ä¸­ï¼Œå…¶ç›‘æ§å€¼ä¸ç”¨äºå­˜å‚¨ï¼Œåªç”¨äºæ›´æ–°ç›‘æ§é…ç½®ï¼‰è¿”å›çš„ç‰¹æ®Šæ ¼å¼çš„å­—ç¬¦ä¸²ï¼Œåˆ›å»ºã€æ›´æ–°æˆ–è€…åˆ é™¤ç›‘æ§é¡¹ã€è§¦å‘å™¨ã€å›¾è¡¨æˆ–ä¸»æœºï¼Œä½¿ä¹‹ä¸è¿”å›ç»“æœä¿æŒä¸€è‡´ã€‚ç”±äºLLDè§„åˆ™ç›‘æ§å€¼ä¼šæŒ‰ç…§è®¾å®šçš„é¢‘ç‡è¿›è¡Œæ›´æ–°ï¼Œå› æ­¤Zabbixå¯ä»¥éšç€æ•°æ®çš„æ›´æ–°è€ŒåŠ¨æ€è°ƒæ•´ç›‘æ§å¯¹è±¡ã€ç›‘æ§æŒ‡æ ‡å’Œç›‘æ§å‚æ•°ç­‰ã€‚ä»Zabbix 4.2å¼€å§‹ï¼ŒLLDè§„åˆ™çš„ç›‘æ§å€¼è·Ÿæ™®é€šç›‘æ§é¡¹ä¸€æ ·å¯ä»¥è¿›è¡Œé¢„å¤„ç†ï¼Œåœ¨é¢„å¤„ç†ç»“æŸä»¥åï¼ŒLLDè¿›ç¨‹å†å¯¹æ•°æ®è¿›è¡Œè§£æå¹¶æ›´æ–°é…ç½®ä¿¡æ¯ï¼Œè¿™ä¸€æ–¹å¼èµ‹äºˆç”¨æˆ·æ›´å¤šå¯¹LLDè§„åˆ™æ•°æ®è¿›è¡Œå¤„ç†çš„èƒ½åŠ›ï¼Œä»è€Œå¢å¼ºäº†åº•å±‚å‘ç°çš„åŠŸèƒ½ã€‚ lld managerè¿›ç¨‹è™½ç„¶åªæœ‰ä¸€ä¸ªï¼Œä½†æ˜¯å…¶éœ€è¦å®Œæˆçš„ä»»åŠ¡æœ‰å¤šç§ï¼ŒåŒ…æ‹¬æ³¨å†Œlldworkerè¿›ç¨‹ã€æ¥æ”¶å…¶ä»–è¿›ç¨‹å‘é€çš„æ¶ˆæ¯ã€ç»™lld workerè¿›ç¨‹åˆ†é…ä»»åŠ¡ã€å¤„ç†lldworkerè¿›ç¨‹è¿”å›çš„ç»“æœä»¥åŠå“åº”é˜Ÿåˆ—é•¿åº¦è¯·æ±‚ç­‰ã€‚ lld workerè¿›ç¨‹è´Ÿè´£å¤„ç†lld managerè¿›ç¨‹åˆ†é…çš„ä»»åŠ¡ï¼Œå³æ¥æ”¶å¹¶å¤„ç†é€šè¿‡è¿›ç¨‹é—´é€šä¿¡æœåŠ¡å‘é€è¿‡æ¥çš„code 1100æ¶ˆæ¯ã€‚æ€»ä½“çš„å¤„ç†è¿‡ç¨‹åŒ…æ‹¬è§£ææ¶ˆæ¯ï¼ŒéªŒè¯LLDè§„åˆ™æœ‰æ•ˆæ€§ï¼ˆé€šè¿‡ConfigCacheï¼‰ï¼ŒåŠ è½½filterã€LLD macroså’Œoverridesï¼Œè§£æLLDæ¶ˆæ¯çš„JSONæ•°ç»„ï¼Œè¿›è¡Œé…ç½®ä¿¡æ¯æ›´æ–°ï¼Œä»¥åŠæ ¹æ®LLDè§„åˆ™ç›‘æ§é¡¹çŠ¶æ€ç”Ÿæˆå†…éƒ¨äº‹ä»¶ã€‚lld workerè¿›ç¨‹çš„å·¥ä½œæœºåˆ¶æ˜¯è¢«åŠ¨æ¨¡å¼ï¼Œå³å‘å‡ºæ³¨å†Œæ¶ˆæ¯ä»¥åï¼Œå¹¶ä¸ä¼šä¸»åŠ¨å‘ç®¡ç†è€…è¿›ç¨‹è¯·æ±‚ä»»åŠ¡ï¼Œè€Œæ˜¯ç­‰å¾…ç®¡ç†è€…è¿›ç¨‹åˆ†é…ä»»åŠ¡ã€‚ é¢„å¤„ç†è¿›ç¨‹å’ŒLLDè¿›ç¨‹å¤„äºpollerç±»è¿›ç¨‹å’Œtrapperç±»è¿›ç¨‹çš„ä¸‹æ¸¸ï¼Œè´Ÿè´£å¤„ç†pollerç±»è¿›ç¨‹å’Œtrapperç±»è¿›ç¨‹è·å–çš„åŸå§‹ç›‘æ§æ•°æ®ã€‚é¢„å¤„ç†è¿›ç¨‹æŒ‰ç…§ç”¨æˆ·è®¾ç½®çš„å¤„ç†è§„åˆ™å¯¹æ•°æ®è¿›è¡Œå˜æ¢å’Œè®¡ç®—ï¼Œå¤„ç†ä¹‹åçš„æ•°æ®ä¼ é€’ç»™history syncerè¿›ç¨‹å¤„ç†ã€‚é¢„å¤„ç†è¿›ç¨‹é€šè¿‡è¿›ç¨‹é—´é€šä¿¡æœåŠ¡æ–¹å¼ä¸ä¸Šæ¸¸è¿›ç¨‹é€šä¿¡ã€‚å¤„ç†ä¹‹åçš„æ•°æ®å†™å…¥å…±äº«å†…å­˜ï¼Œä¾›ä¸‹æ¸¸è¿›ç¨‹ä½¿ç”¨ã€‚ history syncerè¿›ç¨‹history syncerè¿›ç¨‹æ˜¯ZabbixæœåŠ¡å™¨ç«¯æœ€ä¸ºæ ¸å¿ƒçš„è¿›ç¨‹ï¼Œå®ƒè´Ÿè´£å°†ç›‘æ§æ•°æ®ï¼ˆåŒ…æ‹¬è¶‹åŠ¿æ•°æ®ï¼‰å†™å…¥æ•°æ®åº“å’Œå†™å…¥ç¼“å­˜ã€ç”Ÿæˆå¹¶å¤„ç†äº‹ä»¶ï¼Œä»¥åŠå¤„ç†åŠ¨ä½œï¼ˆactionï¼‰å¹¶ç”Ÿæˆå‡çº§åºåˆ—ï¼ˆescalationï¼‰ç­‰ã€‚å¦‚æœæ²¡æœ‰history syncerè¿›ç¨‹ï¼ŒZabbixæœåŠ¡å™¨å°†ä»€ä¹ˆä¹Ÿåšä¸äº†ï¼šæ—¢ä¸èƒ½å¤„ç†ç›‘æ§æ•°æ®ï¼Œåˆä¸èƒ½ç”Ÿæˆäº‹ä»¶ï¼Œä¹Ÿä¸èƒ½è¿›è¡Œå‘Šè­¦ã€‚history syncerè¿›ç¨‹ä½äºé¢„å¤„ç†è¿›ç¨‹çš„ä¸‹æ¸¸ï¼Œå®ƒå°†é¢„å¤„ç†è¿›ç¨‹å†™å…¥HistoryCacheå’ŒHistoryIndexCacheçš„æ•°æ®ä½œä¸ºè¾“å…¥ã€‚ history syncerè¿›ç¨‹çš„å¯åŠ¨æ•°é‡ç”±é…ç½®æ–‡ä»¶ä¸­çš„StartDBSyncerså‚æ•°æ§åˆ¶ï¼Œå…è®¸1ï½100ä¸ªè¿›ç¨‹ã€‚history syncerè¿›ç¨‹çš„ä½œç”¨æ˜¯å°†HistoryCacheå’ŒHistoryIndexCacheä¸­çš„ç›‘æ§å€¼å†™å…¥æ•°æ®åº“ä¸­çš„historyè¡¨å’Œtrendsè¡¨ï¼ŒåŒæ—¶æ ¹æ®ç›‘æ§å€¼è®¡ç®—è§¦å‘å™¨è¡¨è¾¾å¼ï¼Œå†³å®šæ˜¯å¦è§¦å‘äº‹ä»¶ã€‚è¯¥è¿›ç¨‹åœ¨ZabbixæœåŠ¡å™¨ç«¯å’ŒZabbixä»£ç†ç«¯éƒ½å­˜åœ¨ï¼Œä½†æ˜¯æœ‰æ‰€ä¸åŒï¼Œåœ¨ZabbixæœåŠ¡å™¨ç«¯æ—¶ï¼Œè¯¥è¿›ç¨‹æ—¢éœ€è¦å¤„ç†ç›‘æ§å€¼ï¼ˆvaluesï¼‰ï¼Œä¹Ÿéœ€è¦å¤„ç†è§¦å‘å™¨ï¼ˆtriggersï¼‰ï¼Œåœ¨Zabbixä»£ç†ç«¯æ—¶ï¼Œè¯¥è¿›ç¨‹åªéœ€è¦å¤„ç†ç›‘æ§å€¼ï¼Œè€Œä¸éœ€è¦å¤„ç†è§¦å‘å™¨ï¼Œå› ä¸ºè§¦å‘å™¨è¡¨è¾¾å¼ç»Ÿä¸€ç”±ZabbixæœåŠ¡å™¨ç«¯å¤„ç† å¤„ç†åŠ¨ä½œç›¸å…³è¿›ç¨‹escalatorè¿›ç¨‹ç”¨äºå¤„ç†äº‹ä»¶è§¦å‘çš„æ•´ä¸ªåŠ¨ä½œåºåˆ—ï¼Œè¯¥è¿›ç¨‹è¯»å–escalationsè¡¨ä¸­çš„æ•°æ®å¹¶è¿›è¡Œå¤„ç†ï¼Œå¹¶å°†ç”Ÿæˆçš„è­¦æŠ¥æ¶ˆæ¯æ’å…¥alertsè¡¨ä¸­ï¼Œä¾›alerterè¿›ç¨‹ä½¿ç”¨ã€‚æ‰€ä»¥ï¼Œescalatorè¿›ç¨‹å¹¶ä¸å®é™…å‘é€è­¦æŠ¥æ¶ˆæ¯ï¼Œè€Œåªç”Ÿæˆè­¦æŠ¥ã€‚ alerterè¿›ç¨‹alerterè¿›ç¨‹æ—ç”¨äºå®é™…å‘é€è­¦æŠ¥ï¼Œè¯¥è¿›ç¨‹æ—åŒ…æ‹¬alert syncerè¿›ç¨‹ã€alert mangerè¿›ç¨‹å’Œalerterè¿›ç¨‹ alert syncerè¿›ç¨‹è´Ÿè´£å°†æ•°æ®åº“ä¸­çš„è­¦æŠ¥ä¿¡æ¯å’Œåª’ä½“ç±»å‹ä¿¡æ¯åŒæ­¥åˆ°alert managerè¿›ç¨‹ï¼Œå…·ä½“æ–¹æ³•æ˜¯ä»æ•°æ®åº“è¯»å–æ•°æ®ï¼Œç„¶åæ„é€ ä¸ºè¿›ç¨‹é—´é€šä¿¡æœåŠ¡æ¶ˆæ¯å¹¶å‘é€åˆ°alert managerè¿›ç¨‹ã€‚ alert managerè¿›ç¨‹è´Ÿè´£å‘alerterè¿›ç¨‹åˆ†å‘è­¦æŠ¥å¤„ç†ä»»åŠ¡ï¼Œå¹¶æ¥æ”¶alerterè¿›ç¨‹åé¦ˆçš„ç»“æœã€‚ alerterè¿›ç¨‹è´Ÿè´£æŒ‰ç…§alertmanageråˆ†é…çš„ä»»åŠ¡å¤„ç†è­¦æŠ¥å¹¶åé¦ˆç»“æœã€‚task managerè¿›ç¨‹è¿è¡Œåœ¨ZabbixæœåŠ¡å™¨ç«¯å’ŒZabbixä»£ç†ç«¯ï¼Œå®ƒè´Ÿè´£å¤„ç†å­˜å‚¨åœ¨æ•°æ®åº“taskè¡¨ä¸­çš„è¿œç¨‹å‘½ä»¤ï¼ˆremote commandï¼‰ã€ç«‹å³æ£€æŸ¥ï¼ˆcheck nowï¼‰ã€é—®é¢˜ç¡®è®¤ï¼ˆproblem acknowledgeï¼‰å’Œé—®é¢˜å…³é—­ï¼ˆproblem closeï¼‰ç­‰ä»»åŠ¡ã€‚","categories":[{"name":"è¿ç»´","slug":"è¿ç»´","permalink":"https://maydaychen.github.io/categories/%E8%BF%90%E7%BB%B4/"}],"tags":[{"name":"ç›‘æ§","slug":"ç›‘æ§","permalink":"https://maydaychen.github.io/tags/%E7%9B%91%E6%8E%A7/"},{"name":"Zabbix","slug":"Zabbix","permalink":"https://maydaychen.github.io/tags/Zabbix/"}]},{"title":"Zabbixè¿›é˜¶5--å¯†ç é‡ç½®","slug":"Zabbixè¿›é˜¶5--å¯†ç é‡ç½®","date":"2024-12-23T08:18:55.000Z","updated":"2025-02-24T15:11:15.626Z","comments":true,"path":"2024/12/23/Zabbixè¿›é˜¶5--å¯†ç é‡ç½®/","link":"","permalink":"https://maydaychen.github.io/2024/12/23/Zabbix%E8%BF%9B%E9%98%B65--%E5%AF%86%E7%A0%81%E9%87%8D%E7%BD%AE/","excerpt":"","text":"åœ¨ä½¿ç”¨ zabbix çš„è¿‡ç¨‹ä¸­ç”±äºé»˜è®¤å¯†ç è¿‡äºç®€å•ï¼Œå¾€å¾€ä¼šä¿®æ”¹å¯†ç å¹¶é…ç½®ä¸ºè‡ªåŠ¨ç™»å½•ï¼Œæ—¶é—´ä¸€é•¿å¾€å¾€å¿˜è®°å¯†ç ï¼Œé€ æˆæ— æ³•ç™»å½•çš„æƒ…å†µï¼Œè¿™ç§æƒ…å†µå°±éœ€è¦é‡ç½®å¯†ç ã€‚ Zabbix çš„å¯†ç å­˜å‚¨åœ¨æ•°æ®åº“ä¸­ï¼Œå¯é€šè¿‡æ•°æ®åº“é‡ç½®ã€‚åœ¨ Zabbix 5.0 ç‰ˆæœ¬ä¹‹å‰ï¼Œzabbix ç”¨æˆ·å¯†ç ä½¿ç”¨ MD5 åŠ å¯†æ–¹å¼å­˜å‚¨ï¼Œä» 5.0 ç‰ˆæœ¬å¼€å§‹ä½¿ç”¨ Bcrypt åŠ å¯†æ–¹å¼ã€‚ BCrypt æ˜¯ä¸€ç§è·¨å¹³å°çš„æ–‡ä»¶åŠ å¯†å·¥å…·ï¼Œä½¿ç”¨çš„æ˜¯å¸ƒé²æ–¯ Â· æ–½å†…å°”åœ¨ 1993 å¹´å‘å¸ƒçš„ Blowfish åŠ å¯†ç®—æ³•ã€‚å®ƒæ˜¯ä¸€ç§å¯ç”Ÿæˆéšæœºç›å€¼çš„å•å‘ Hash åŠ å¯†ç®—æ³•ï¼ŒHash å€¼ä¸­åŒ…å«äº†ä¸Šä¸€æ­¥ç”Ÿæˆçš„ç›å€¼ï¼ˆ22 ä¸ªå­—ç¬¦ï¼‰çš„ä¸å¯é€†åŠ å¯†ç®—æ³•ã€‚åŒä¸€ç§æ˜æ–‡ï¼Œæ¯æ¬¡è¢«åŠ å¯†åçš„å¯†æ–‡éƒ½ä¸ä¸€æ ·ï¼Œå¹¶ä¸”ä¸å¯åå‘ç ´è§£ç”Ÿæˆæ˜æ–‡ï¼Œç ´è§£éš¾åº¦éå¸¸å¤§ã€‚å¤§å¤§æå‡äº†ç³»ç»Ÿçš„å®‰å…¨æ€§ï¼Œå› æ­¤è¦é‡ç½® 5.0 ä»¥åç‰ˆæœ¬çš„ç”¨æˆ·å¯†ç å°±éœ€è¦æ³¨æ„ï¼Œä¸èƒ½å†ä½¿ç”¨ MD5 åŠ å¯†æ–¹å¼ç”Ÿæˆçš„å¯†ç ã€‚ å¯æŒ‰ç…§ä»¥ä¸‹æ–¹æ³•å¯¹ zabbix çš„ Admin ç”¨æˆ·å¯†ç è¿›è¡Œé‡ç½® MySQL æ•°æ®åº“ 1234mysql -uzabbix -puse zabbix;updateusersSET passwd=&#x27;$2y$10$92nDno4n0Zm7Ej7Jfsz8WukBfgSS/U0QkIuu8WkJPihXBb2A1UrEK&#x27;where userid=1;quit; PostgreSQL 12345su - postgrespsqlc zabbix;updateusersSET passwd=&#x27;$2y$10$92nDno4n0Zm7Ej7Jfsz8WukBfgSS/U0QkIuu8WkJPihXBb2A1UrEK&#x27;where userid=1;ã€q é‡ç½®åå³å¯ä½¿ç”¨è´¦å·ï¼šAdmin å¯†ç ï¼šzabbix ç™»å½•ç³»ç»Ÿï¼Œæ³¨æ„è´¦å· Admin çš„ A ä¸ºå¤§å†™ï¼ŒåŒºåˆ†å¤§å°å†™ã€‚ {&quot;AlarmName&quot;:&quot;AWS&#x2F;WAF HostingProviderIPList BlockedRequests is more than 300 in 5 mins&quot;,&quot;AlarmDescription&quot;:null,&quot;AWSAccountId&quot;:&quot;861276109353&quot;,&quot;AlarmConfigurationUpdatedTimestamp&quot;:&quot;2025-01-23T06:39:17.195+0000&quot;,&quot;NewStateValue&quot;:&quot;OK&quot;,&quot;NewStateReason&quot;:&quot;Threshold Crossed: 1 out of the last 1 datapoints [1.0 (23&#x2F;01&#x2F;25 06:35:00)] was not greater than the threshold (300.0) (minimum 1 datapoint for ALARM -&gt; OK transition).&quot;,&quot;StateChangeTime&quot;:&quot;2025-01-23T06:40:06.454+0000&quot;,&quot;Region&quot;:&quot;Asia Pacific (Singapore)&quot;,&quot;AlarmArn&quot;:&quot;arn:aws:cloudwatch:ap-southeast-1:861276109353:alarm:AWS&#x2F;WAF HostingProviderIPList BlockedRequests is more than 300 in 5 mins&quot;,&quot;OldStateValue&quot;:&quot;ALARM&quot;,&quot;OKActions&quot;:[&quot;arn:aws:sns:ap-southeast-1:861276109353:Monitoring-Prod-CloudWatch&quot;],&quot;AlarmActions&quot;:[&quot;arn:aws:sns:ap-southeast-1:861276109353:Monitoring-Prod-CloudWatch&quot;],&quot;InsufficientDataActions&quot;:[],&quot;Trigger&quot;:{&quot;MetricName&quot;:&quot;BlockedRequests&quot;,&quot;Namespace&quot;:&quot;AWS&#x2F;WAFV2&quot;,&quot;StatisticType&quot;:&quot;Statistic&quot;,&quot;Statistic&quot;:&quot;SUM&quot;,&quot;Unit&quot;:null,&quot;Dimensions&quot;:[{&quot;value&quot;:&quot;apx-prod-web-acl&quot;,&quot;name&quot;:&quot;WebACL&quot;},{&quot;value&quot;:&quot;ap-southeast-1&quot;,&quot;name&quot;:&quot;Region&quot;},{&quot;value&quot;:&quot;HostingProviderIPList&quot;,&quot;name&quot;:&quot;LabelName&quot;},{&quot;value&quot;:&quot;awswaf:managed:aws:anonymous-ip-list&quot;,&quot;name&quot;:&quot;LabelNamespace&quot;}],&quot;Period&quot;:300,&quot;EvaluationPeriods&quot;:1,&quot;DatapointsToAlarm&quot;:1,&quot;ComparisonOperator&quot;:&quot;GreaterThanThreshold&quot;,&quot;Threshold&quot;:300.0,&quot;TreatMissingData&quot;:&quot;notBreaching&quot;,&quot;EvaluateLowSampleCountPercentile&quot;:&quot;&quot;}}","categories":[{"name":"è¿ç»´","slug":"è¿ç»´","permalink":"https://maydaychen.github.io/categories/%E8%BF%90%E7%BB%B4/"}],"tags":[{"name":"ç›‘æ§","slug":"ç›‘æ§","permalink":"https://maydaychen.github.io/tags/%E7%9B%91%E6%8E%A7/"},{"name":"Zabbix","slug":"Zabbix","permalink":"https://maydaychen.github.io/tags/Zabbix/"}]},{"title":"Zabbixè¿›é˜¶4--æ€§èƒ½ä¼˜åŒ–ç›¸å…³","slug":"Zabbixè¿›é˜¶4--æ€§èƒ½ä¼˜åŒ–ç›¸å…³","date":"2024-12-22T07:46:19.000Z","updated":"2025-02-24T15:10:48.186Z","comments":true,"path":"2024/12/22/Zabbixè¿›é˜¶4--æ€§èƒ½ä¼˜åŒ–ç›¸å…³/","link":"","permalink":"https://maydaychen.github.io/2024/12/22/Zabbix%E8%BF%9B%E9%98%B64--%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E7%9B%B8%E5%85%B3/","excerpt":"","text":"Zabbixè¿›ç¨‹åŠå…¶åŠŸèƒ½123456789101112131415161718192021æŠ¥è­¦å™¨(alerter) è¯¥ç±»å‹çš„è¿›ç¨‹æ˜¯ç”¨æ¥å‘é€æŠ¥è­¦é€šçŸ¥çš„ï¼›é…ç½®åŒæ­¥å™¨(configuration syncer) ç”¨äºå°†é…ç½®æ–‡ä»¶ä¸­çš„é…ç½®ä¿¡æ¯åŒæ­¥åˆ°å†…å­˜ä¸­ç¼“å­˜ï¼›æ•°æ®å‘é€å™¨(data sender) æœåŠ¡å™¨ä»£ç†èŠ‚ç‚¹ç”¨äºå‘é€æ•°æ®çš„è¿›ç¨‹ï¼ˆæœåŠ¡å™¨ç«¯æ²¡æœ‰è¿™ç±»è¿›ç¨‹ï¼‰ï¼›æ•°æ®åº“çœ‹é—¨ç‹—(db watchdog) è¯¥è¿›ç¨‹ç”¨äºç›‘è§†zabbixç³»ç»Ÿçš„æ•°æ®åº“çŠ¶æ€ï¼Œå½“æ•°æ®åº“çŠ¶æ€å˜ä¸ºä¸å¯ç”¨æ—¶ï¼Œå‘é€è­¦å‘Šä¿¡æ¯ï¼ˆæœåŠ¡å™¨ä»£ç†ç«¯ä¸æ”¯æŒè¿™ç±»å‹è¿›ç¨‹ï¼‰ã€‚è‡ªåŠ¨å‘ç°å™¨(discoverer) ç”¨äºè‡ªåŠ¨å‘ç°è®¾å¤‡çš„è¿›ç¨‹ï¼›æ­¥éª¤(escalator) ç”¨äºå¤„ç†åŠ¨ä½œä¸­çš„æ­¥éª¤çš„è¿›ç¨‹ï¼›å¿ƒè·³å‘é€å™¨(heartbeat sender) æœåŠ¡å™¨ä»£ç†ç«¯ç”¨äºå‘é€å¿ƒè·³ä¿¡æ¯ï¼ˆæœåŠ¡å™¨ç«¯æ²¡æœ‰è¿™ç±»å‹çš„è¿›ç¨‹ï¼‰ï¼›å†å²æ•°æ®åŒæ­¥å™¨(history syncer) ç”¨äºå†™å†å²æ•°æ®è¡¨ï¼›ç®¡å®¶(housekeeper) ç”¨äºæ¸…ç†è¿‡æœŸçš„å†å²æ•°æ®çš„è¿›ç¨‹ï¼›HTTP è½®è¯¢å™¨(http poller) ç”¨äºè½®è¯¢webç±»çš„ç›‘æ§é¡¹ç›®ï¼›Pingæ£€æŸ¥å™¨(icmp pinger) ç”¨äºå®šæœŸçš„è¿›è¡ŒICMP PINGæ£€æŸ¥ï¼›ipmi è½®è¯¢å™¨ï¼ˆipmi pollerï¼‰ ç”¨äºå®šæœŸè¿›è¡Œipmiç›‘æ§é¡¹ç›®çš„æ£€æŸ¥ï¼›java è½®è¯¢å™¨(java poller) ç”¨äºè½®è¯¢java ç›‘æ§é¡¹ç›®ï¼›åˆ†å¸ƒå¼èŠ‚ç‚¹çœ‹å®ˆå™¨(node watcher) ç”¨äºåœ¨ä¸åŒçš„åˆ†å¸ƒå¼èŠ‚ç‚¹å‘é€å†å²æ•°æ®å’Œé…ç½®ä¿¡æ¯æ›´æ–°çš„è¿›ç¨‹ï¼›è½®è¯¢å™¨(poller) ç”¨äºæ™®é€šçš„è¢«åŠ¨ç›‘æ§é¡¹ç›®çš„è½®è¯¢ï¼›æœåŠ¡å™¨ä»£ç†è½®è¯¢(proxy poller) ç”¨äºæœåŠ¡å™¨ä»£ç†çš„è¢«åŠ¨è½®è¯¢ï¼›è‡ªæˆ‘ç›‘æ§(self-monitoring) ç”¨äºæ”¶é›†Zabbixç³»ç»Ÿå†…éƒ¨çš„ç›‘æ§ä¿¡æ¯ï¼›å®šæ—¶å™¨(timer) ç”¨äºå¤„ç†è§¦å‘å™¨ä¸­ä¹Ÿæ—¶é—´ç›¸å…³çš„å‡½æ•°å’Œç»´æŠ¤æ¨¡å¼çš„è¿›ç¨‹ï¼›é™·å…¥å™¨(trapper) ç”¨äºå¤„ç†ä¸»åŠ¨é‡‡é›†ã€é™·å…¥ä»¥åŠåˆ†å¸ƒå¼èŠ‚ç‚¹é—´æˆ–æœåŠ¡å™¨ä»£ç†çš„é€šä¿¡ï¼›ä¸å¯åˆ°è¾¾è½®è¯¢å™¨(unreachable poller) ç”¨äºè½®è¯¢ä¸å¯åˆ°è¾¾åˆ°çš„è®¾å¤‡ï¼›vmware æ”¶é›†å™¨(vmware collector) è´Ÿè´£ä»vmwareæœåŠ¡è¿›ç¨‹ä¸­æ”¶é›†æ•°æ®ï¼ˆæœåŠ¡å™¨ä»£ç†ç«¯ä¸æ”¯æŒè¿™ç§ç±»å‹çš„è¿›ç¨‹ï¼‰ï¼› é…ç½®æ–‡ä»¶è§£æ123456789StartTrappers=20 Trappersåˆå§‹å­è¿›ç¨‹æ•°StartPollers=20 åˆå§‹åŒ–æ—¶å¯åŠ¨å­è¿›ç¨‹æ•°é‡ï¼Œæ•°é‡è¶Šå¤šï¼Œåˆ™æœåŠ¡ç«¯ååèƒ½åŠ›è¶Šå¼ºï¼Œç³»ç»Ÿèµ„æºæ¶ˆè€—è¶Šå¤§StartIPMIPollers=1 ä¸»è¦ç”¨äºIPMIæŠ€æœ¯ç”¨äºè·å–ç¡¬ä»¶çŠ¶æ€åœºæ™¯ï¼Œå¦‚æœæ— ç›¸å…³ç›‘æ§é¡¹ï¼Œå»ºè®®è®¾ç½®ä¸º0StartDiscoverers=1 ç”¨äºè®¾ç½®è‡ªåŠ¨å‘ç°ä¸»æœºçš„å­è¿›ç¨‹æ•°é‡StartPingers=10 ç”¨äºè®¾ç½®å¯ç”¨icmpåè®®PINGä¸»æœºæ–¹å¼å¯åŠ¨å­è¿›ç¨‹æ•°é‡StartHTTPPollers=1 HTTPä¸»åŠ¨ç›‘æµ‹çš„è¿›ç¨‹æ•°StartProxyPollers=1 å¯ç”¨å¤šå°‘å­è¿›ç¨‹ä¸ä»£ç†ç«¯é€šä¿¡StartPollersUnreachable=10 é»˜è®¤æƒ…å†µä¸‹ï¼Œzabbixä¼šå¯åŠ¨æŒ‡å®šè¿›ç¨‹ç”¨äºæ¢æµ‹æŸäº›ä¸å¯è¾¾ä¸»æœºï¼ˆå«IPMIåœºæ™¯ï¼‰ï¼›è‹¥åœºæ™¯ä¸­å«æœ‰ä»£ç†ç«¯ï¼Œå»ºè®®ä½¿ç”¨é»˜è®¤ï¼Œè‹¥ç›´æ¥agentè¾ƒå¤šï¼Œæ ¹æ®å€¼è°ƒæ•´StartDBSyncers=4 DBåŒæ­¥è¿›ç¨‹æ•°é‡ Zabbix Serveré…ç½®è¯¦è§£ï¼š http://t.zoukankan.com/Rohn-p-14788840.htmlä¸‹é¢æ˜¯éƒ¨åˆ†å‚æ•°çš„å±•ç¤º é…ç½® é»˜è®¤å€¼ æ¨èå€¼ StartDBSyncers 4 8ï¼Œä¸å®œå¤ªé«˜ï¼Œé»˜è®¤å€¼å·²èƒ½å¤„ç†4000 NVPS StartAlerters 3 6 StartDiscoverers 1 3 StartPollers 5 12 StartPreprocessors 3 6 StartProxyPollers 1 3 StartTrappers 5 12 StartLLDProcessors 2 3 StartEscalators 1 1 CacheSize 256M ç¼“å­˜å¤§å°, å•ä½ä¸ºå­—èŠ‚ã€‚ ç”¨äºå­˜å‚¨ä¸»æœºã€ç›‘æ§é¡¹ã€è§¦å‘å™¨æ•°æ®çš„å…±äº«å†…å­˜å¤§å°ã€‚ Zabbix2.2.3ä»¥å‰çš„ç‰ˆæœ¬æœ€å¤§å¯é…ç½®å€¼ä¸º2GBã€‚ CacheUpdateFrequency 60 Zabbix é…ç½®ç¼“å­˜æ›´æ–°é¢‘ç‡, å•ä½ä¸ºç§’ DebugLevel 3 æŒ‡å®šè°ƒè¯•ç­‰çº§: 0 - Zabbixè¿›ç¨‹çš„èµ·åœåŸºæœ¬ä¿¡æ¯ 1 - ä¸¥é‡ï¼ˆCriticalï¼‰ä¿¡æ¯ 2 - é”™è¯¯ï¼ˆErrorï¼‰ä¿¡æ¯ 3 - è­¦å‘Šï¼ˆWarningï¼‰ä¿¡æ¯ 4 - è°ƒè¯•ï¼ˆDebugï¼‰ä¿¡æ¯ (äº§ç”Ÿå¤§é‡ä¿¡æ¯) 5 - æ‰©å±•è°ƒè¯• (äº§ç”Ÿæ›´å¤šä¿¡æ¯) ExportFileSize 1G æ¯ä¸ªå¯¼å‡ºæ–‡ä»¶çš„æœ€å¤§é™åˆ¶ï¼Œå•ä½ä¸ºå­—èŠ‚ã€‚ä»…å½“ExportDirå‚æ•°è®¾ç½®åæ‰ä½¿ç”¨ï¼Œç”¨äºè½®è½¬ç”Ÿæˆå¯¼å‡ºçš„æ–‡ä»¶ã€‚ æ­¤å‚æ•°ä»Zabbix 4.0.0å¼€å§‹æ”¯æŒã€‚ HistoryCacheSize 128M å†å²ç¼“å­˜æ•°æ®å¤§å°, å•ä½ä¸ºå­—èŠ‚ã€‚ HistoryIndexCacheSize 16M å†å²ç´¢å¼•ç¼“å­˜å¤§å°, å•ä½ä¸ºå­—èŠ‚ã€‚ç¼“å­˜ä¸€ä¸ªitemå¤§æ¦‚éœ€è¦å¤§å°ä¸º100å­—èŠ‚çš„ç©ºé—´ã€‚ è¯¥å‚æ•°ä»Zabbix 3.0.0å¼€å§‹æ”¯æŒã€‚ HistoryStorageDateIndex 1 å¯ç”¨å†å²æ•°æ®é¢„å¤„ç†ï¼Œå¯ä»¥å°†æ•°æ®å­˜å‚¨åˆ°ä¸åŒçš„åŸºäºæ—¶é—´çš„ç´¢å¼•: 0 - ç¦æ­¢ 1 - å…è®¸ HistoryStorageURL ä½ çš„ES URL å†å²æ•°æ®å­˜å‚¨ HTTP[S] URLï¼Œç”¨äºæŠŠå†å²æ•°æ®å­˜å‚¨åˆ°ElasticSearchã€‚ è¿™ä¸ªå‚æ•°å‚è€ƒ Elasticsearchè¿›è¡Œé…ç½®ã€‚ HistoryStorageTypes uint,dbl,str,log,text ä»¥é€—å·åˆ†éš”çš„åˆ—è¡¨é…ç½®å“ªäº›ç±»å‹çš„å†å²æ•°æ®éœ€è¦å­˜å‚¨åˆ°Elasticsearchã€‚ è¿™ä¸ªå‚æ•°å‚è€ƒ Elasticsearch è¿›è¡Œé…ç½® HousekeepingFrequency 3 Zabbix æ‰§è¡Œ housekeeping çš„é¢‘ç‡ (å•ä½ä¸ºå°æ—¶)ã€‚ housekeepingè´Ÿè´£ä»æ•°æ®åº“ä¸­åˆ é™¤è¿‡æœŸçš„ä¿¡æ¯ã€‚æ³¨æ„: ä¸ºäº†é˜²æ­¢ housekeeper è´Ÿè½½è¿‡å¤§ (ä¾‹å¦‚, å½“å†å²å’Œè¶‹åŠ¿å‘¨æœŸå¤§å¤§å‡å°æ—¶), å¯¹äºæ¯ä¸€ä¸ªç›‘æ§é¡¹ï¼Œä¸ä¼šåœ¨ä¸€ä¸ªhousekeepingå‘¨æœŸå†…åˆ é™¤è¶…è¿‡4å€HousekeepingFrequency çš„è¿‡æœŸæ•°æ®ã€‚ å› æ­¤, å¦‚æœ HousekeepingFrequency æ˜¯ 1å°æ—¶, ä¸€ä¸ªå‘¨æœŸå†…ä¸ä¼šåˆ é™¤è¶…è¿‡4å°æ—¶çš„è¿‡æœŸä¿¡æ¯ (ä»æœ€æ—§çš„æ•°æ®å¼€å§‹) ã€‚ å¤‡æ³¨: ä¸ºé™ä½ serverå‹åŠ›ï¼Œ housekeepingå°†åœ¨serverå¯åŠ¨ä»¥åï¼Œå»¶è¿Ÿ30åˆ†é’Ÿæ‰§è¡Œã€‚ å› æ­¤, å¦‚æœ HousekeepingFrequency æ˜¯1å°æ—¶,serverå¯åŠ¨30åˆ†åæ‰§è¡Œç¬¬ä¸€æ¬¡ housekeeping , ç„¶åæŒ‰1å°æ—¶ä¸ºå‘¨æœŸé‡å¤æ‰§è¡Œã€‚ä»Zabbix 2.4.0ä»¥åæœ‰äº†è¿™ç§å»¶è¿Ÿè¡Œä¸ºã€‚ ä»Zabbix 3.0.0å¼€å§‹ï¼Œå¯ä»¥è®¾ç½®HousekeepingFrequencyä¸º0æ¥ç¦æ­¢è‡ªåŠ¨housekeepingã€‚ æ­¤æ—¶ housekeeping åªèƒ½é€šè¿‡ housekeeper_execute å¯åŠ¨ï¼Œ åœ¨ä¸€ä¸ªhousuekeepingå‘¨æœŸå†…åˆ é™¤çš„è¿‡æœŸä¿¡æ¯æ—¶é•¿ä¸ºä»æœ€åä¸€æ¬¡housekeepingä»¥æ¥åˆ°é…ç½®å‘¨æœŸçš„4å€,ä¸å°‘äº4å°æ—¶ä¸”ä¸å¤§äº4å¤©ã€‚ ä¹Ÿå¯å‚è§è¿è¡Œæ§åˆ¶ é€‰é¡¹ã€‚ LogFile æ—¥å¿—æ–‡ä»¶åç§°ã€‚ LogFileSize 128 æ—¥å¿—æ–‡ä»¶å¤§å°ï¼Œå•ä½ MBã€‚ 0 - ç¦æ­¢æ—¥å¿—æ–‡ä»¶è‡ªåŠ¨å›æ»š. æ³¨æ„: å¦‚æœæ—¥å¿—æ–‡ä»¶è¾¾åˆ°é™å®šçš„å¤§å°ï¼Œæ–‡ä»¶å›æ»šå¤±è´¥, ä¸ç®¡æ˜¯ä»€ä¹ˆåŸå› , ç°æœ‰çš„æ—¥å¿—ä¼šè¢«æˆªæ–­ï¼Œå¹¶é‡æ–°è®°å½•æ—¥å¿—ã€‚ LogType file æ—¥å¿—è¾“å‡ºç±»å‹: file - å†™å…¥LogFile å‚æ•°æŒ‡å®šçš„æ—¥å¿—æ–‡ä»¶ä¸­, system - å†™å…¥syslog, console - æ§åˆ¶å°è¾“å‡º. ä»Zabbix 3.0.0å¼€å§‹æ”¯æŒè¯¥å‚æ•°ã€‚ LogSlowQueries 3000 æ•°æ®åº“æŸ¥è¯¢æ¶ˆè€—æ—¶é—´ï¼Œå¤§äºè¯¥æ—¶é—´å°†ä¼šè®°å…¥æ—¥å¿— (æ¯«ç§’)ã€‚ 0 - ä¸è®°å½•æ…¢æŸ¥è¯¢æ—¥å¿—ã€‚ DebugLevel&#x3D;3æ—¶è¯¥é€‰é¡¹å¯ç”¨ã€‚ ä»Zabbix 1.8.2å¼€å§‹æ”¯æŒè¯¥å‚æ•° MaxHousekeeperDelete 5000 ä¸€ä¸ªhousekeepingå‘¨æœŸå†…ï¼Œä¸€ä¸ªä»»åŠ¡åˆ é™¤çš„æœ€å¤§è¡Œæ•° ï¼ˆç›¸åº”çš„è¡¨åï¼Œå­—æ®µåï¼Œå€¼ï¼‰ã€‚ å¦‚æœè®¾ç½®ä¸º0ï¼Œä¸é™åˆ¶åˆ é™¤çš„è¡Œæ•°ï¼Œè¿™ç§æƒ…å†µï¼Œä½ å¿…é¡»æ¸…æ¥šè¿™æ ·åšçš„å½±å“! ä»Zabbix 1.8.2 å¼€å§‹æ”¯æŒè¯¥å‚æ•°ï¼Œä»…åœ¨å¯¹å·²ç»è¢«åˆ é™¤çš„ç›‘æ§é¡¹è¿›è¡Œå†å²å’Œè¶‹åŠ¿æ•°æ®åˆ é™¤æ“ä½œæ—¶æœ‰æ•ˆ ProxyConfigFrequency 180 Zabbix server å¤šå°‘ç§’å‘Zabbix proxy å‘é€ä¸€æ¬¡é…ç½®æ•°æ®ï¼Œç”¨äºè¢«åŠ¨æ¨¡å¼çš„proxy ã€‚ ä»Zabbix 1.8.3å¼€å§‹æ”¯æŒè¯¥å‚æ•°ã€‚ ProxyDataFrequency 1 Zabbix server å¤šå°‘ç§’å‘Zabbix proxyè¯·æ±‚ä¸€æ¬¡å†å²æ•°æ®ï¼Œ ç”¨äºè¢«åŠ¨æ¨¡å¼çš„proxyã€‚ä»Zabbix 1.8.3å¼€å§‹æ”¯æŒè¯¥å‚æ•°ã€‚ StartDBSyncers 8 æ•°æ®åº“è¿›ç¨‹çš„åˆå§‹å®ä¾‹æ•°é‡ã€‚ åœ¨ç‰ˆæœ¬1.8.5ä¹‹å‰ï¼Œä¸Šé™æ˜¯64ã€‚ è¿™ä¸ªå‚æ•°ä»Zabbix 1.8.3å¼€å§‹å¾—åˆ°äº†æ”¯æŒ StartAlerters 12 æŠ¥è­¦è¿›ç¨‹çš„åˆå§‹å®ä¾‹æ•°é‡ã€‚ ä»Zabbix 3.4.0å¼€å§‹æ”¯æŒè¯¥å‚æ•° StartDiscoverers 12 å‘ç°è¿›ç¨‹çš„åˆå§‹å®ä¾‹æ•°é‡ã€‚ åœ¨Zabbix 1.8.5ç‰ˆæœ¬ä¹‹å‰ï¼Œæœ€å¤§èƒ½è®¾ç½®ä¸º255ã€‚ StartEscalators 12 escalatorsè¿›ç¨‹çš„åˆå§‹å®ä¾‹æ•°é‡ã€‚ ä»Zabbix 3.0.0å¼€å§‹æ”¯æŒè¯¥å‚æ•° StartHTTPPollers 6 HTTP è½®è¯¢è¿›ç¨‹çš„åˆå§‹å®ä¾‹æ•°é‡. åœ¨Zabbix 1.8.5ç‰ˆæœ¬ä¹‹å‰ï¼Œæœ€å¤§èƒ½è®¾ç½®ä¸º255ã€‚ StartIPMIPollers 3 IPMI è½®è¯¢è¿›ç¨‹çš„åˆå§‹å®ä¾‹æ•°é‡ã€‚ åœ¨Zabbix 1.8.5ç‰ˆæœ¬ä¹‹å‰ï¼Œæœ€å¤§èƒ½è®¾ç½®ä¸º255ã€‚ StartJavaPollers 6 Java è½®è¯¢å­è¿›ç¨‹çš„åˆå§‹å®ä¾‹æ•°é‡ã€‚. ä»Zabbix 2.0.0å¼€å§‹æ”¯æŒè¯¥å‚æ•°ã€‚ StartLLDProcessors 2 Number of pre-forked instances of low-level discovery (LLD) workers1. The LLD manager process is automatically started when an LLD worker is started. This parameter is supported since Zabbix 4.2.0. StartPingers 12 ICMP pingersè¿›ç¨‹çš„åˆå§‹å®ä¾‹æ•°é‡1. åœ¨Zabbix 1.8.5ç‰ˆæœ¬ä¹‹å‰ï¼Œæœ€å¤§èƒ½è®¾ç½®ä¸º255ã€‚ StartPollersUnreachable 6 ä¸å¯è¾¾ä¸»æœº (åŒ…æ‹¬IPMI å’Œ Java)çš„è½®è¯¢è¿›ç¨‹çš„åˆå§‹å®ä¾‹æ•°é‡ã€‚1. ä»Zabbix 2.4.0å¼€å§‹ï¼Œå¦‚æœIPMIæˆ–Javaè½®è¯¢å™¨å¯åŠ¨ï¼Œé‚£ä¹ˆè‡³å°‘æœ‰ä¸€ä¸ªé’ˆå¯¹ä¸å¯è®¿é—®ä¸»æœºçš„è½®è¯¢è¿›ç¨‹å¿…é¡»è¿è¡Œã€‚ åœ¨Zabbix 1.8.5ç‰ˆæœ¬ä¹‹å‰ï¼Œæœ€å¤§èƒ½è®¾ç½®ä¸º255ã€‚ è¿™ä¸ªå‚æ•°ä»Zabbix 1.8.3ç‰ˆæœ¬ç¼ºå¤±ã€‚ StartPollers 12 è½®è¯¢è¿›ç¨‹çš„åˆå§‹å®ä¾‹æ•°é‡ã€‚.æ³¨æ„å¦‚æœè¦å†…éƒ¨ï¼Œèšåˆï¼Œè®¡ç®—çš„ç›‘æ§é¡¹èƒ½æ­£å¸¸å·¥ä½œï¼Œè¿™ä¸ªå‚æ•°å€¼å¿…é¡»é0ã€‚ StartPreprocessors 12 é¢„å¤„ç†å·¥ä½œè¿›ç¨‹çš„åˆå§‹å®ä¾‹æ•°é‡ã€‚é¢„å¤„ç†ç®¡ç†è¿›ç¨‹å°†è·Ÿéšé¢„å¤„ç†å·¥ä½œè¿›ç¨‹å¯åŠ¨. ä»Zabbix 3.4.0å¼€å§‹æ”¯æŒè¯¥å‚æ•°ã€‚ æ•°æ®åº“ä¼˜åŒ–å¦‚æœæ•°æ®åº“å’Œzabbixåœ¨ä¸€å°æœºå™¨ï¼Œå¯ä»¥ä½¿ç”¨socketè¿æ¥ï¼Œé€Ÿåº¦ä¼šæé«˜ã€‚æ•°æ®åº“zabbixæ¥è¯´ï¼Œé€‰æ‹©InnoDBå¼•æ“ï¼Œæ•ˆç‡æ˜¯å…¶å®ƒå¼•æ“çš„1.5å€ å¯¹historyç±»å‹çš„(historyã€history_uintç­‰)å¤§è¡¨è¿›è¡Œæ‹†åˆ†æ“ä½œï¼Œå…³é—­housekeeperç¦æ­¢è‡ªåŠ¨å®šæœŸæ¸…é™¤å†å²è®°å½•æ•°æ®ï¼Œå› ä¸ºå¯¹äºæ•°æ®åº“ç‰¹åˆ«æ˜¯å¯¹äºInnoDBå¼•æ“å¤§æ•°æ®åˆ é™¤è²Œä¼¼å¾ˆè›‹ç–¼ã€‚ å¯ä»¥å¯¹æ•°æ®åº“é…ç½®æ–‡ä»¶è°ƒä¼˜ï¼Œå› ä¸ºéƒ½è¦æäº¤åˆ°æ•°æ®åº“ä¸­ï¼Œå½“æœºå™¨å¾ˆå¤šæ—¶ï¼Œæ•°æ®åº“å‹åŠ›ä¼šå¾ˆå¤§ å¦‚æœè¿˜æ˜¯å¤ªå¤šï¼Œå¯ä»¥è€ƒè™‘å°†mysqlå•ç‹¬ä¸€å°ï¼Œå¹¶è®¾ç½®è¯»å†™åˆ†ç¦»ï¼Œå¯ä»¥ç”¨ä¸­é—´ä»¶å®ç°ã€‚ æœåŠ¡ç«¯é…ç½®ä¼˜åŒ–å…³é—­æœåŠ¡ç«¯çš„housekeephousekeepæ˜¯æ¸…ç†å†å²çš„æœºåˆ¶ï¼Œé…ç½®æ–‡ä»¶ä¸­ï¼Œé»˜è®¤æ˜¯æ¯å°æ—¶å¯åŠ¨ä¸€æ¬¡ï¼Œç„¶åæ¸…é™¤ç›‘æ§é¡¹è®¾ç½®ä¹‹å¤–çš„å¤šä½™å†å²è®°å½•ã€‚æ¯”å¦‚mysqlç›‘æ§é¡¹é»˜è®¤ä¿å­˜90å¤©ï¼Œä»–ä¼šæ¸…é™¤90å¤©ä»¥å¤–çš„ï¼Œè¿™ä¼šå¯¼è‡´ç»å¸¸å»æ¸…ç†ï¼Œæœ‰æ—¶ä¼šæŠ¥é”™ï¼šZabbix housekeeper processes more than 75% busy è°ƒæ•´ç›‘æ§é¡¹å¾ˆå¤šç›‘æ§é¡¹éƒ½æ˜¯æ— ç”¨çš„æˆ–è€…ç›®å‰ç”¨ä¸åˆ°çš„ï¼Œåƒredisç›‘æ§æ¨¡æ¿ä¸­çš„è°ƒé˜…&#x2F;å‘å¸ƒç›‘æ§é¡¹åº”è¯¥å»æ‰ã€‚ ç›‘æ§é¡¹çš„ç±»å‹æœ€å¥½ä½¿ç”¨æ•°å­—ï¼Œå°½é‡é¿å…ä½¿ç”¨å­—ç¬¦ã€‚å­—ç¬¦åœ¨æ•°æ®åº“ä¸­çš„å­˜å‚¨ç©ºé—´ä½¿ç”¨è¾ƒå¤§ï¼Œåœ¨è®¾ç½®triggeræ—¶ä¹Ÿç›¸å¯¹éº»çƒ¦ï¼Œå¹¶ä¸”zabbixæœ¬èº«å¤„ç†æ•°å­—çš„æ•ˆç‡è¦ç›¸å¯¹é«˜ã€‚å¦‚æœä¸šåŠ¡éœ€è¦å­—ç¬¦ç±»å‹çš„ç›‘æ§é¡¹ï¼Œå¯ä»¥é€‚å½“çš„é™ä½æ•°æ®é‡‡é›†çš„æ—¶é—´é—´éš”ä»¥æé«˜å¤„ç†æ•ˆç‡ Triggerä¸­ï¼Œæ­£åˆ™è¡¨è¾¾å¼å‡½æ•°last(),nodata()çš„é€Ÿåº¦æœ€å¿«ï¼Œmin()ã€max()ã€avg()çš„é€Ÿåº¦æœ€æ…¢ã€‚åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œå°½é‡é€‰æ‹©é€Ÿåº¦è¾ƒå¿«çš„å‡½æ•°ã€‚é…ç½®Triggeræ—¶ï¼Œä¹Ÿåº”æ³¨æ„ä½¿ç”¨æ­£ç¡®çš„é€»è¾‘ï¼Œé”™è¯¯çš„é€»è¾‘å¯èƒ½å¯¼è‡´æ•°æ®åº“æŸ¥è¯¢è¾ƒæ…¢çš„ç°è±¡ã€‚ itemç›‘æ§æ€§é»˜è®¤å¤§éƒ¨åˆ†éƒ½æ˜¯ä¿ç•™90dï¼ˆå¤©ï¼‰æˆ–è€…1wï¼ˆå‘¨ï¼‰çš„å†å²æ•°æ®ï¼Œè¶‹åŠ¿å›¾æ•°æ®ä¿ç•™365å¤©ã€‚ å…¶å®æœ‰è¶‹åŠ¿å›¾æ•°æ®å³å¯ï¼Œå†å²æ•°æ®ä¿ç•™7å¤©è¶³å¤Ÿäº†ï¼Œé‡‡é›†é¢‘ç‡ï¼Œåƒç£ç›˜ï¼Œæ–‡ä»¶å¤§å°ç­‰å¾ˆä¹…æ‰å˜åŒ–çš„ï¼Œé‡‡é›†é¢‘ç‡å¯ä»¥åŠ å¤§ï¼Œä»¥è¾¾åˆ°ç¼“è§£å‹åŠ›å’ŒèŠ‚çœç©ºé—´çš„ä½œç”¨ å¦‚æœä¸»æœºæ•°é‡å¤ªå¤šï¼Œé‡‡ç”¨ä»£ç†å¦‚æœä¸»æœºæ•°é‡å¤ªå¤šï¼Œå¯ä»¥è€ƒè™‘åˆ†æœºæˆ¿ï¼Œåˆ†ä¸šåŠ¡ï¼Œåˆ†ç»„çš„æ–¹å¼æ¥ç”¨ä»£ç†ä¸­è½¬ã€‚zabbix_proxyå¯ä»¥ä»£æ›¿æœåŠ¡ç«¯æ”¶é›†æ•°æ®å’Œç›‘æ§ï¼Œä½†æ˜¯ç›‘æ§ç»“æœè¿˜æ˜¯å‘é€åˆ°æœåŠ¡ç«¯æ±‡æ€»ï¼Œä»£ç†æ˜¯æ²¡æœ‰webç•Œé¢çš„ã€‚ å¦‚æœæœºå™¨å¤ªå¤šï¼Œå¯ä»¥ç”¨ä¸»åŠ¨æ¨¡å¼ï¼Œå½“å‰æ‰€æœ‰é»˜è®¤éƒ½æ˜¯è¢«åŠ¨æ¨¡å¼çš„ï¼Œå®¢æˆ·ç«¯å¯åŠ¨10051ç«¯å£ï¼ŒæœåŠ¡ç«¯éœ€è¦å»10051å–æ•°æ®ã€‚ å‡å°‘ history ä¿å­˜æ—¶é—´ å‡å°‘ item è·å–é—´éš”æ—¶é—´ å‡å°‘ä¸å¿…è¦çš„ç›‘æ§é¡¹","categories":[{"name":"è¿ç»´","slug":"è¿ç»´","permalink":"https://maydaychen.github.io/categories/%E8%BF%90%E7%BB%B4/"}],"tags":[{"name":"ç›‘æ§","slug":"ç›‘æ§","permalink":"https://maydaychen.github.io/tags/%E7%9B%91%E6%8E%A7/"},{"name":"Zabbix","slug":"Zabbix","permalink":"https://maydaychen.github.io/tags/Zabbix/"}]},{"title":"Zabbixç›‘æ§ä¸‡ç‰©1--ç›‘æ§MSSQL","slug":"Zabbixç›‘æ§ä¸‡ç‰©1--ç›‘æ§MSSQL","date":"2024-12-19T08:14:15.000Z","updated":"2025-02-24T15:15:17.282Z","comments":true,"path":"2024/12/19/Zabbixç›‘æ§ä¸‡ç‰©1--ç›‘æ§MSSQL/","link":"","permalink":"https://maydaychen.github.io/2024/12/19/Zabbix%E7%9B%91%E6%8E%A7%E4%B8%87%E7%89%A91--%E7%9B%91%E6%8E%A7MSSQL/","excerpt":"","text":"èƒŒæ™¯ç”±äºæ²¡æœ‰å‡çº§zabbix agent2çš„æ‰“ç®—ï¼Œæ‰€ä»¥é‡‡ç”¨äº†å®˜æ–¹çš„templateæ–¹æ¡ˆPSï¼š ç¬¬ä¸‰æ–¹çš„éƒ½æ˜¯å‘ï¼Œå¯¹äºMS SQL2019æ²¡æ³•ä½¿ç”¨https://www.zabbix.com/integrations/mssql#mssql_odbc ä¸‹è½½åŠå¯¼å…¥æ¨¡ç‰ˆServerå®‰è£…ODBCé©±åŠ¨è¿™ä¸€æ­¥éœ€è¦åœ¨zabbix serverä¸­å®‰è£…ODBCé©±åŠ¨ï¼Œè¿™é‡Œé‡‡ç”¨å¾®è½¯å®˜æ–¹çš„ https://learn.microsoft.com/en-us/sql/connect/odbc/linux-mac/installing-the-microsoft-odbc-driver-for-sql-server?view=sql-server-ver16&amp;tabs=alpine18-install%2Calpine17-install%2Cdebian8-install%2Credhat7-13-install%2Crhel7-offline ç‰ˆæœ¬é‡‡ç”¨17ç‰ˆæœ¬ï¼Œå› ä¸º18å¯èƒ½ä¼šæœ‰æŠ¥é”™ Serverç”±äºæ˜¯Rocky9.3ï¼Œå› æ­¤é€‰æ‹©RHEL9ç‰ˆæœ¬ å®‰è£…1234567891011121314151617181920#Download appropriate package for the OS version#Choose only ONE of the following, corresponding to your OS version#RHEL 7 and Oracle Linux 7curl https://packages.microsoft.com/config/rhel/7/prod.repo | sudo tee /etc/yum.repos.d/mssql-release.repo#RHEL 8 and Oracle Linux 8curl https://packages.microsoft.com/config/rhel/8/prod.repo | sudo tee /etc/yum.repos.d/mssql-release.repo#RHEL 9curl https://packages.microsoft.com/config/rhel/9/prod.repo | sudo tee /etc/yum.repos.d/mssql-release.reposudo yum remove unixODBC-utf16 unixODBC-utf16-devel #to avoid conflictssudo ACCEPT_EULA=Y yum install -y msodbcsql17# optional: for bcp and sqlcmdsudo ACCEPT_EULA=Y yum install -y mssql-toolsecho &#x27;export PATH=&quot;$PATH:/opt/mssql-tools/bin&quot;&#x27; &gt;&gt; ~/.bashrcsource ~/.bashrc# optional: for unixODBC development headerssudo yum install -y unixODBC-devel é…ç½®æŸ¥çœ‹ODBCæ˜¯å¦å®‰è£…æˆåŠŸï¼Œ éœ€è¦æŸ¥çœ‹odbcinst.ini 123456less odbcinst.ini[ODBC Driver 17 for SQL Server]Description=Microsoft ODBC Driver 17 for SQL ServerDriver=/opt/microsoft/msodbcsql17/lib64/libmsodbcsql-17.10.so.6.1UsageCount=1 é…ç½®DSN 1234[sql1] ## åå­—å¯è‡ªå®šä¹‰Driver = ODBC Driver 17 for SQL Server é€‰æ‹©ä¸Šä¸€æ­¥çš„åå­—Server = 10.202.0.201 ## DB IPåœ°å€ï¼Œç«¯å£é»˜è®¤1433TrustServerCertificate = yes æµ‹è¯•1isql &lt;DSNåç§°&gt; &lt;username&gt; &lt;password&gt; å¦‚æœèƒ½å¤Ÿè¿›å…¥æ•°æ®åº“ï¼Œåˆ™è¯´æ˜é…ç½®æˆåŠŸ Zabbix Serverç«¯é…ç½®é…ç½®æ¨¡ç‰ˆçš„Macro123&#123;$MSSQL.USER&#125; - æ•°æ®åº“ç”¨æˆ·&#123;$MSSQL.PASSWORD&#125; - æ•°æ®åº“å¯†ç &#123;$MSSQL.DSN&#125; - æ•°æ®åº“DSNåç§° Trouble Shooting1. é€šè¿‡isqlå‘½ä»¤å¯ä»¥è¿æ¥ï¼Œä½†æ˜¯åœ¨zabbixä¸Šä¸è¡Œï¼Œæç¤ºA network-related or instance-specific error has occurred while establishinè§£å†³åŠæ³•ï¼š æŸ¥çœ‹SELinuxä»¥åŠfirewalldï¼ŒæŠŠè¿™ä¿©éƒ½å…³äº†å°±å¥½äº† 2. Microsoft ODBC Driver 18 for SQL Server : SSL Provider: [error:1416F086:SSL routines:tls_process_server_certificate:certificate verify failed:self signed certificate]è§£å†³åŠæ³•ï¼šåœ¨DSNä¸­æ·»åŠ ä¸€è¡Œé…ç½® 1TrustServerCertificate=yes;","categories":[{"name":"è¿ç»´","slug":"è¿ç»´","permalink":"https://maydaychen.github.io/categories/%E8%BF%90%E7%BB%B4/"}],"tags":[{"name":"ç›‘æ§","slug":"ç›‘æ§","permalink":"https://maydaychen.github.io/tags/%E7%9B%91%E6%8E%A7/"},{"name":"Zabbix","slug":"Zabbix","permalink":"https://maydaychen.github.io/tags/Zabbix/"}]},{"title":"NASæ‚è®°3--ç¾¤æ™–DS224plusSHRè½¬basic","slug":"NASæ‚è®°3--ç¾¤æ™–DS224plusSHRè½¬basic","date":"2024-12-10T13:20:24.000Z","updated":"2025-02-24T10:07:16.000Z","comments":true,"path":"2024/12/10/NASæ‚è®°3--ç¾¤æ™–DS224plusSHRè½¬basic/","link":"","permalink":"https://maydaychen.github.io/2024/12/10/NAS%E6%9D%82%E8%AE%B03--%E7%BE%A4%E6%99%96DS224plusSHR%E8%BD%ACbasic/","excerpt":"","text":"ä¸ºä»€ä¹ˆè¦è½¬basicç”±äºä¹°çš„æ˜¯ç¾¤æ™–DS224+NASï¼Œåªæœ‰åŒç›˜ä½ï¼Œå¯¼è‡´äº†å¦‚æœè¦ç»„SHRæˆ–è€…Raidçš„è¯ï¼Œå°±åªæœ‰ä¸€å—ç¡¬ç›˜çš„å­˜å‚¨ç©ºé—´äº†ï¼Œä½†æ˜¯å§ï¼Œç”±äºå–œæ¬¢æ‹ç…§+æŠ˜è…¾ï¼Œå†åŠ ä¸Šmacçš„æ—¶å…‰æœºï¼Œå¯¼è‡´äº†å­˜å‚¨ç©ºé—´ç”¨çš„å¾ˆå¿«ï¼Œæ²¡åŠæ³•ï¼Œåªèƒ½ç—›ä¸‹å†³å¿ƒå°†ä¹‹å‰æ²¡ç»éªŒè®¾ç½®çš„SHRè½¬æˆbasicæ¨¡å¼ å‡†å¤‡å·¥ä½œå»ºè®®å¤‡ä»½è‡ªå·±çš„é‡è¦æ–‡ä»¶ï¼Œå› ä¸ºæ•°æ®è¿ç§»è¿‡ç¨‹ä¸­å¯èƒ½ä¼šé€ æˆä¸¢å¤±ï¼ˆè™½ç„¶ä¸‡å¹¸ï¼Œæˆ‘æ²¡æœ‰ï¼‰ æ­£å¼å¼€å§‹ å…³æœºï¼Œæ‹”å‡ºä»»æ„ä¸€å—ç¡¬ç›˜ï¼Œå…¶å®ä¸å…³æœºä¸ªäººæ„Ÿè§‰ä¹Ÿå¯ä»¥ï¼Œæ¯•ç«Ÿæ”¯æŒçƒ­æ’æ‹”ï¼Œä½†æ˜¯å¤šä¸€äº‹ä¸å¦‚å°‘ä¸€äº‹ æ’å…¥åˆšæ‰é‚£å—ç¡¬ç›˜ï¼Œå¼€æœºï¼Œè¿™æ—¶å€™NASä¼šç–¯ç‹‚æŠ¥è­¦ï¼Œå»ºè®®é™éŸ³å¤„ç† è¿™æ—¶å€™åº”è¯¥æœ‰ä¸€å—æ˜¯å ªç”¨çŠ¶æ€ï¼Œå¦ä¸€å—æ–°æ’å…¥çš„å¿˜è®°ä»€ä¹ˆçŠ¶æ€äº†ï¼Œæ€»ä¹‹ï¼Œæ ¼å¼åŒ–ï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„å­˜å‚¨æ±  ç§»åŠ¨å…±äº«æ–‡ä»¶å¤¹å¦‚å›¾ï¼Œç›´æ¥æŠŠæ‰€æœ‰çš„å…±äº«æ–‡ä»¶å¤¹ä»æ—§çš„å­˜å‚¨ç©ºé—´ç§»åŠ¨åˆ°æ–°çš„å­˜å‚¨ç©ºé—´ ç§»åŠ¨å¥—ä»¶ï¼Œè·Ÿç€è¿™ä¸ªrepoä¸€æ­¥ä¸€æ­¥èµ°ï¼Œç”šè‡³å¯ä»¥æŠŠdockeréƒ½ç»™ç§»åŠ¨è¿‡å»ï¼Œå°±æ˜¯dockerä¼šéœ€è¦ä¸€æ®µæ—¶é—´ï¼Œæ¯”è¾ƒä¹…https://github.com/007revad/Synology_app_mover?tab=readme-ov-fileæ³¨æ„æœ‰çš„å¥—ä»¶ç§»åŠ¨å®Œæˆåä¼šæœ‰æç¤ºï¼Œéœ€è¦æŒ‰ç…§æç¤ºä¿®æ”¹é…ç½®ä¿¡æ¯ è¿™æ—¶å€™åº”è¯¥å¤§éƒ¨åˆ†çš„ç§»åŠ¨éƒ½å®Œæˆäº†ï¼Œåªéœ€è¦æŸ¥æ¼è¡¥ç¼ºï¼Œå¦‚æœæœ‰æ²¡ç§»åŠ¨çš„æ–‡ä»¶ï¼Œé‚£ä¹ˆæ‰‹åŠ¨ç§»åŠ¨ä¸€ä¸‹å°±å¯ä»¥äº† æŸ¥çœ‹ dockerä¸­å®¹å™¨è¿è¡Œæƒ…å†µä¸€èˆ¬æƒ…å†µä¸‹ï¼Œç”±äºdockerçš„ä¾èµ–æ–‡ä»¶è·¯å¾„è¢«ä¿®æ”¹äº†ï¼Œæ‰€ä»¥ä¼šå¯¼è‡´dockerå®¹å™¨å¯åŠ¨æŠ¥é”™ï¼Œéœ€è¦æ‰‹åŠ¨checké”™è¯¯æ—¥å¿—å¹¶ä¿®æ”¹å¯¹åº”çš„é…ç½®é¡¹ ç¦ç”¨Container Managerå¥—ä»¶ ä½¿ç”¨å‘½ä»¤è¿›å…¥&#x2F;volume2&#x2F;@docker&#x2F;containers&#x2F;å¯¹åº”çš„å®¹å™¨ç›®å½• ä¿®æ”¹config.v2.json æŠŠæ‰€æœ‰çš„volume1æ”¹æˆvolume2 é‡å¯docker æœ€ç»ˆæ­¥éª¤è¿™æ—¶å€™å…¶å®åªéœ€è¦åˆ é™¤è€çš„å­˜å‚¨æ± å’Œå­˜å‚¨ç©ºé—´ï¼Œå¹¶é‡å»ºï¼Œå³å¯æ‹¥æœ‰ä¸¤å—å®Œå…¨ä¸åŒçš„å­˜å‚¨æ± å’Œå­˜å‚¨ç©ºé—´ï¼Œå¤§åŠŸå‘Šæˆï¼","categories":[{"name":"Tools","slug":"Tools","permalink":"https://maydaychen.github.io/categories/Tools/"}],"tags":[{"name":"NAS","slug":"NAS","permalink":"https://maydaychen.github.io/tags/NAS/"}]},{"title":"Zabbixè¿›é˜¶3--æ•°æ®åº“ç›‘æ§æ•°æ®ç£ç›˜ä½¿ç”¨é‡è§£æåŠé¢„æµ‹","slug":"Zabbixè¿›é˜¶3--æ•°æ®åº“ç›‘æ§æ•°æ®ç£ç›˜ä½¿ç”¨é‡è§£æåŠé¢„æµ‹","date":"2024-12-04T08:21:42.000Z","updated":"2025-02-24T15:10:48.175Z","comments":true,"path":"2024/12/04/Zabbixè¿›é˜¶3--æ•°æ®åº“ç›‘æ§æ•°æ®ç£ç›˜ä½¿ç”¨é‡è§£æåŠé¢„æµ‹/","link":"","permalink":"https://maydaychen.github.io/2024/12/04/Zabbix%E8%BF%9B%E9%98%B63--%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9B%91%E6%8E%A7%E6%95%B0%E6%8D%AE%E7%A3%81%E7%9B%98%E4%BD%BF%E7%94%A8%E9%87%8F%E8%A7%A3%E6%9E%90%E5%8F%8A%E9%A2%84%E6%B5%8B/","excerpt":"","text":"Zabbixå¯¹ç£ç›˜çš„å†³å®šæ€§å› ç´ æœ‰å››ä¸ª æ¯ç§’å¤„ç†çš„æ•°æ®é‡è¿™ä¸ªé—®é¢˜ä¸è¯´ï¼Œå¤§å®¶ä¹Ÿæ˜ç™½ã€‚è¿™è¾¹çš„æ¯ç§’åªæ˜¯ä¸€ä¸ªå¹³å‡å€¼ï¼Œä¾‹å¦‚æˆ‘æœ‰3000ä¸ªç›‘æ§é¡¹ï¼Œæ¯60ç§’åˆ·æ–°ä¸€æ¬¡ï¼Œé‚£ä¹ˆå¹³å‡æ¯ç§’æœ‰50ï¼ˆ3000&#x2F;60ï¼‰ä¸ªæ•°æ®è¦å¤„ç†ã€‚å°±æ˜¯è¯´æ¯ç§’æœ‰50æ¡æ•°æ®è¦æ’å…¥MySQL å†å²è®°å½•ä¿å­˜æ—¶é—´zabbixå¯¹æ¯ä¸ªç›‘æ§é¡¹çš„å€¼éƒ½è¦è®°å½•ä¸‹æ¥ï¼Œè¿™äº›è®°å½•ä¸€èˆ¬ä¿ç•™å‡ å‘¨åˆ°å‡ ä¸ªæœˆï¼Œæ¯ä¸ªå€¼éƒ½éœ€è¦æš‚ç”¨ç¡¬ç›˜ç©ºé—´ã€‚å‡å¦‚ä¸€ä¸ªæ•°æ®ä½ è¦ä¿ç•™30å¤©ï¼Œè€Œä¸”æ¯ç§’æœ‰50ä¸ªå€¼è¦ä¿ç•™ï¼Œé‚£æˆ‘ä»¬ä¸€å…±æœ‰129ï¼Œ600ï¼Œ000ï¼ˆ30å¤©24å°æ—¶3600ç§’ï¼‰50ä¸ªå€¼ï¼Œä¸€æ¡è®°å½•å¤šå¤§ï¼Œç”±ä½ çš„æ•°æ®åº“å¼•æ“å’Œä½ å­˜å‚¨çš„æ•°æ®ç±»å‹æ¥å†³å®šï¼ˆæµ®ç‚¹å‹ï¼Œæ•´å½¢ï¼Œå­—ç¬¦å‹ç­‰ç­‰ï¼‰ï¼Œä¸€èˆ¬æ¥è¯´ä¸€æ¡è®°å½•éœ€è¦å ç”¨50ä¸ªå­—èŠ‚ï¼ˆä¸€ä¸ªå¤§æ¦‚å€¼ï¼‰ï¼Œåœ¨è¿™ä¸ªæ¡ˆä¾‹ä¸­129,600,000ä¸ªè®°å½•å¤§çº¦éœ€è¦ï¼ˆ12960000050å­—èŠ‚ï¼‰6.5Gçš„ç¡¬ç›˜ç©ºé—´ è¶‹åŠ¿æ•°æ®ä¿å­˜æ—¶é—´ä»€ä¹ˆæ˜¯è¶‹åŠ¿æ•°æ®å‘¢ï¼Ÿå½“ä½ æŸ¥çœ‹ä¸€å‘¨æˆ–è€…ä¸€æœˆçš„å›¾è¡¨ï¼Œå›¾è¡¨ä¸Šçœ‹åˆ°çš„MAX&#x2F;MIN&#x2F;AVG&#x2F;COUNTéƒ½æ˜¯å–è‡ªè¶‹åŠ¿æ•°æ®ï¼Œè¶‹åŠ¿æ•°æ®ä¸€å°æ—¶è·å–ä¸€æ¬¡ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ï¼Œè¶‹åŠ¿æ•°æ®ä¸€æ¡è®°å½•å¤§æ¦‚å ç”¨128å­—èŠ‚ï¼Œå¦‚æœæˆ‘ä»¬æƒ³ä¿å­˜5å¹´è¶‹åŠ¿æ•°æ®ï¼Œ3000ä¸ªç›‘æ§çº¿éœ€è¦2.4GBï¼ˆ3000ä¸ª24å°æ—¶356å¤©*128å­—èŠ‚ï¼‰æ¯å¹´ï¼Œ5å¹´ä¸€å…±16.8G äº‹ä»¶è®°å½•ä¿å­˜æ—¶é—´æŠ¥è­¦ã€è­¦å‘Šã€æ¢å¤ç­‰ç­‰äº‹æƒ…ï¼Œä¸€ä¸ªäº‹ä»¶å¤§æ¦‚å ç”¨130ä¸ªå­—èŠ‚ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ä¸ä¼šå¤ªå¤šï¼Œé™¤éè¿ç»´åšçš„å¤ªç³Ÿç³•ï¼Œæˆ–è€…è¿ç»´è¦æ±‚å¤ªä¸¥æ ¼ï¼ŒæŠŠé˜€å€¼è°ƒçš„å¾ˆä½ã€‚å‡å¦‚è¿™ä¸ªè¿ç»´ä»Šå¹´æœ¬å‘½å¹´ï¼Œæ—¢æ²¡æ‹œä½›æœ‰æ²¡çƒ§é¦™ï¼Œæ›´åˆ«è¯´ç»™æœåŠ¡å™¨è´´çµç¬¦ï¼Œäºæ˜¯è¿™ä¸€å¹´æ¯ç§’é’Ÿå°±æœ‰ä¸€ä¸ªäº‹ä»¶å‘ç”Ÿï¼Œé‚£ä¹ˆäº‹ä»¶è¿™ä¸€å¹´å ç”¨çš„æ•°æ®ç©ºé—´ä¸ºï¼š1å¹´365å¤©24å°æ—¶3600ç§’130å­—èŠ‚å¤§æ¦‚ä¸º4.1Gç©ºé—´ã€‚ æ•°æ®åº“ç©ºé—´è®¡ç®—å…¬å¼zabbixé…ç½®ï¼šå›ºå®šå¤§å°ï¼Œä¸€èˆ¬&lt;10MB å†å²æ•°æ®ï¼šå¤©æ•°*(ç›‘æ§é¡¹æ€»æ•°&#x2F;åˆ·æ–°é¢‘ç‡)24å°æ—¶3600ç§’*50å­—èŠ‚ è¶‹åŠ¿æ•°æ®ï¼šå¤©æ•°ï¼ˆç›‘æ§é¡¹æ€»æ•°&#x2F;3600ï¼‰24å°æ—¶3600ç§’128å­—èŠ‚ äº‹ä»¶æ•°æ®ï¼šå¤©æ•°äº‹ä»¶ä¸ªæ•°ï¼ˆå¤§æ¦‚å€¼ï¼‰24å°æ—¶3600ç§’130å­—èŠ‚","categories":[{"name":"è¿ç»´","slug":"è¿ç»´","permalink":"https://maydaychen.github.io/categories/%E8%BF%90%E7%BB%B4/"}],"tags":[{"name":"ç›‘æ§","slug":"ç›‘æ§","permalink":"https://maydaychen.github.io/tags/%E7%9B%91%E6%8E%A7/"},{"name":"Zabbix","slug":"Zabbix","permalink":"https://maydaychen.github.io/tags/Zabbix/"}]},{"title":"Zabbixè¿›é˜¶2--æ‰§è¡Œè¿œç¨‹å‘½ä»¤","slug":"Zabbixè¿›é˜¶2--æ‰§è¡Œè¿œç¨‹å‘½ä»¤","date":"2024-12-02T08:00:22.000Z","updated":"2025-02-24T15:10:48.189Z","comments":true,"path":"2024/12/02/Zabbixè¿›é˜¶2--æ‰§è¡Œè¿œç¨‹å‘½ä»¤/","link":"","permalink":"https://maydaychen.github.io/2024/12/02/Zabbix%E8%BF%9B%E9%98%B62--%E6%89%A7%E8%A1%8C%E8%BF%9C%E7%A8%8B%E5%91%BD%E4%BB%A4/","excerpt":"","text":"è¿œç¨‹æ‰§è¡Œå‘½ä»¤èƒ½åšäº›ä»€ä¹ˆ: é‡å¯åº”ç”¨ï¼ˆApacheã€nginxã€MySQLç­‰ç­‰ï¼‰ ä½¿ç”¨IPMIæ¥å£é‡å¯æœåŠ¡å™¨ è‡ªåŠ¨é‡Šæ”¾ç£ç›˜ç©ºé—´ï¼ˆåˆ é™¤è€æ–‡ä»¶ï¼Œæ¸…é™¤&#x2F;tmpç›®å½•ç­‰ç­‰ï¼‰ CPUè¿‡è½½æ—¶è®²ä¸€ä¸ªè™šæ‹Ÿæœºè¿ç§»åˆ°å¦å¤–ä¸€å°ç‰©ç†æœåŠ¡å™¨ äº‘ç¯å¢ƒä¸‹ï¼Œä¸€å°æœåŠ¡å™¨CPU\\ç¡¬ç›˜\\å†…å­˜\\å…¶ä»–ç¡¬ä»¶èµ„æºä¸è¶³çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥è‡ªåŠ¨æ·»åŠ è¿‡å» âš ï¸ Zabbix proxyä¸æ”¯æŒè¿œç¨‹å‘½ä»¤ è¿œç¨‹å‘½ä»¤æœ€å¤§é•¿åº¦ä¸º255å­—ç¬¦ï¼ŒåŒæ—¶æ”¯æŒå¤šä¸ªè¿œç¨‹å‘½ä»¤ï¼Œå¦‚éœ€è¦æ‰§è¡Œå¤šæ¡å‘½ä»¤ï¼Œåªéœ€è¦å¦èµ·ä¸€è¡Œå†™å‘½ä»¤å³å¯ï¼Œè¿˜æœ‰ï¼Œè¿œç¨‹å‘½ä»¤å¯ä»¥ä½¿ç”¨å®å˜é‡ã€‚ é…ç½®ä¿®æ”¹agentd.conf1EnableRemoteCommands = 1 é‡å¯agenté…ç½®action åœ¨Operationsé€‰æ˜¾å¡ä¸­é€‰æ‹©Remote command é€‰æ‹©è¿œç¨‹å‘½ä»¤ç±»å‹(IPMI, Custom script, SSH, Telnet, Global script) å†™ä¸Šè¿œç¨‹å‘½ä»¤ å¤‡æ³¨ sudoä¸ç”¨å¤šè¯´äº†ï¼Œzabbixç”¨æˆ·æ²¡æœ‰è¿è¡ŒæŸäº›å‘½ä»¤çš„æƒé™,å¿…é¡»åŠ ä¸Š. è¿œç¨‹å‘½ä»¤ï¼Œè‡ªç„¶æ˜¯åœ¨è¿œç¨‹çš„ä¸»æœºåå°è¿è¡Œã€‚Conditionsé€‰é¡¹å¡å®šä¹‰äº†ä»€ä¹ˆæ¡ä»¶ä¸‹ï¼Œè¿™ä¸ªè¿œç¨‹å‘½ä»¤ä¼šè¢«æ‰§è¡Œï¼Œå…¶å®è¿™ä¸ªå’Œå‰é¢è¯´çš„actionçœŸæ²¡ä»€ä¹ˆåŒºåˆ«ï¼Œå¤§å®¶éƒ½èƒ½çœ‹æ‡‚ã€‚ä¸‹å›¾çš„æ„æ€æ˜¯ï¼Œåœ¨éç»´æŠ¤æ—¶é—´Apacheåº”ç”¨å‡ºç°çŠ¶å†µï¼Œå¹¶ä¸”ä¸¥é‡æ€§çº§åˆ«ä¸ºDisasterã€‚æ»¡è¶³æ¡ä»¶ä¹‹åï¼Œå°±å¼€å§‹æ‰§è¡Œå‘½ä»¤äº†ã€‚ è®¿é—®æƒé™é…ç½®å¯ä»¥é…ç½®sudoeræ–‡ä»¶ï¼Œä½¿zabbixç”¨æˆ·å¯ä»¥æ‰§è¡Œæ‰€æœ‰å‘½ä»¤ 1234# allows &#x27;zabbix&#x27; user to run all commands without password. zabbix ALL=NOPASSWD: ALL# allows &#x27;zabbix&#x27; user to restart apache without password. zabbix ALL=NOPASSWD: /etc/init.d/apache restart","categories":[{"name":"è¿ç»´","slug":"è¿ç»´","permalink":"https://maydaychen.github.io/categories/%E8%BF%90%E7%BB%B4/"}],"tags":[{"name":"ç›‘æ§","slug":"ç›‘æ§","permalink":"https://maydaychen.github.io/tags/%E7%9B%91%E6%8E%A7/"},{"name":"Zabbix","slug":"Zabbix","permalink":"https://maydaychen.github.io/tags/Zabbix/"}]},{"title":"Zabbixè¿›é˜¶1--è‡ªåŠ¨æ³¨å†ŒæœåŠ¡å™¨åˆ°Zabbixçš„ä¸‰ç§æ–¹å¼ä»‹ç»","slug":"Zabbixè¿›é˜¶1--è‡ªåŠ¨æ³¨å†ŒæœåŠ¡å™¨åˆ°Zabbixçš„ä¸‰ç§æ–¹å¼ä»‹ç»","date":"2024-12-01T08:17:26.000Z","updated":"2025-02-24T15:34:32.490Z","comments":true,"path":"2024/12/01/Zabbixè¿›é˜¶1--è‡ªåŠ¨æ³¨å†ŒæœåŠ¡å™¨åˆ°Zabbixçš„ä¸‰ç§æ–¹å¼ä»‹ç»/","link":"","permalink":"https://maydaychen.github.io/2024/12/01/Zabbix%E8%BF%9B%E9%98%B61--%E8%87%AA%E5%8A%A8%E6%B3%A8%E5%86%8C%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%88%B0Zabbix%E7%9A%84%E4%B8%89%E7%A7%8D%E6%96%B9%E5%BC%8F%E4%BB%8B%E7%BB%8D/","excerpt":"","text":"èƒŒæ™¯åœ¨é¡¹ç›®ä¸­ï¼Œæœ‰å¾ˆå¤šæƒ…å†µä¸‹æˆ‘ä»¬æ²¡æœ‰åŠæ³•ä¸€å°ä¸€å°æœåŠ¡å™¨æ‰‹åŠ¨æ·»åŠ ï¼Œä¾‹å¦‚ æœåŠ¡å™¨æ•°é‡è¿‡å¤š ä½¿ç”¨Auto scaleç­‰æŠ€æœ¯è‡ªåŠ¨æ‰©ç¼©å®¹ï¼ŒæœåŠ¡å™¨éšæ—¶å¯èƒ½è¢«åˆ›å»ºæˆ–åˆ é™¤è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å°±éœ€è¦é…ç½®è‡ªåŠ¨æ·»åŠ æœåŠ¡å™¨äº†ï¼ŒZabbixä¹Ÿæ˜¯æä¾›äº†ä¸°å¯Œçš„é…ç½®æ¥å¸®åŠ©æˆ‘ä»¬å®ç°è¿™ä¸€åŠŸèƒ½ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬çœ‹ä¸€ä¸‹å…·ä½“å¯ä»¥æ€ä¹ˆå®ç° å®æ“Autoregistration actionsAutoregistration actionså¯ä»¥è¯´æ˜¯æˆ‘å¿ƒç›®ä¸­æœ€ç®€å•çš„é…ç½®äº†ï¼Œæˆ‘æ¥åˆ†äº«ä¸€ä¸‹æˆ‘æ˜¯æ€ä¹ˆé…ç½®çš„ æœåŠ¡å™¨ä¸­é…ç½®HostMetadata&#x3D;RPP-Bankconnectoråœ¨&#x2F;etc&#x2F;zabbix&#x2F;zabbix_agent.confä¸­é…ç½®å¦‚ä¸‹ 1HostMetadata=xxx è®°å¾—é‡å¯agent é…ç½®Autoregistration actionsAlerts -&gt; Actions -&gt; Autoregistration actions,ç‚¹å‡»å·¦ä¸Šè§’Create actionName: è¿™ä¸ªactionçš„åç§°ï¼Œå¯æ ¹æ®æ„å›¾å¡«å†™Conditions: æ¡ä»¶ï¼Œè¿™è¾¹æœ‰ä¸‰ä¸ªé€‰é¡¹ï¼ŒHostName, HostMetadata, Proxy, ç”±äºHostNameæ˜¯å”¯ä¸€çš„ï¼Œä¸å¯èƒ½ç”¨æ¥ä½œä¸ºæ¡ä»¶ï¼Œæ‰€ä»¥ä¸€èˆ¬æˆ‘éƒ½é€‰æ‹©ä½¿ç”¨hostmetadata å†çœ‹Operationsè¿™ä¸€ä¸ªtab è¿™ä¸ªtabå°±æ˜¯ç”¨æ¥è®¾å®šæ‰€æœ‰å‘ç°ä¸»æœºåéœ€è¦åšçš„æ“ä½œï¼Œç”±äºå®åœ¨å¤ªå¤šäº†ï¼Œæˆ‘æŠŠå®˜ç½‘æ–‡æ¡£é‡Œè¯´çš„ç²˜è´´ä¸€ä¸‹ Add host Remove host Enable host Disable host Add to host group Remove from host group Add host tags Remove host tags Link template Unlink template Set host inventory modeå¯ä»¥çœ‹åˆ°ï¼Œæ“ä½œè¿˜æ˜¯å¾ˆå¤šçš„ï¼Œåªéœ€è¦é€‰æ‹©éœ€è¦çš„æ“ä½œè¿›è¡Œæ·»åŠ å°±å¯ä»¥äº† DiscoveryData collection -&gt; Discoveryä¸­ï¼Œç‚¹å‡»Create Discovery Rulesæ¥åˆ›å»ºæ–°çš„Discovery IP rangeåœ¨è¿™è¾¹æˆ‘ä»¬éœ€è¦è®¾å®šæˆ‘ä»¬discoverçš„IPèŒƒå›´ï¼Œè¯ä¸å¤šè¯´ç›´æ¥å¤åˆ¶å®˜ç½‘ 123456789éœ€è¦å‘ç°çš„IPåœ°å€èŒƒå›´ã€‚åŒ…æ‹¬ä¸‹åˆ—æ ¼å¼:å•IP: 192.168.1.33IPåœ°å€èŒƒå›´: 192.168.1-10.1-255ã€‚IPåœ°å€èŒƒå›´å–å†³äºåŒ…å«çš„æ‰€æœ‰åœ°å€æ•°é‡(å°äº64K)ã€‚IPå­ç½‘æ©ç : 192.168.4.0/24æ”¯æŒçš„IPæ©ç :/16 - /30 ç”¨äº IPv4åœ°å€/112 - /128ç”¨äºIPv6åœ°å€åˆ—è¡¨: 192.168.1.1-255, 192.168.2.1-100, 192.168.2.200, 192.168.4.0/24ä»Zabbix 3.0.0èµ·æ”¯æŒç©ºæ ¼ã€åˆ¶è¡¨ç¬¦å’Œå¤šè¡Œã€‚ Checksæ£€æŸ¥é¡¹ï¼Œå…¶å®å°±æ˜¯ç”¨æ¥åˆ¤æ–­ä½ çš„hostèƒ½ä¸èƒ½è¢«discoveråˆ° 1234567Zabbixä¼šä½¿ç”¨æ­¤æ£€æŸ¥åˆ—è¡¨æ¥æ‰§è¡Œç½‘ç»œå‘ç°ã€‚ç‚¹å‡» åœ¨å¼¹çª—ä¸­é…ç½®ä¸€ä¸ªæ–°æ£€æŸ¥ã€‚æ”¯æŒçš„æ£€æŸ¥: SSH, LDAP, SMTP, FTP, HTTP, HTTPS, POP, NNTP, IMAP, TCP, Telnet, Zabbix agent, SNMPv1 agent, SNMPv2 agent, SNMPv3 agent, ICMP ping.åŸºäºåè®®çš„è‡ªåŠ¨å‘ç°ä½¿ç”¨net.tcp.service[] åŠŸèƒ½æ¥æ£€æµ‹æ¯å°ä¸»æœºï¼ŒæŸ¥è¯¢SNMP OIDçš„SNMPæœåŠ¡ä¸åœ¨æ­¤åˆ—ã€‚é€šè¿‡æŸ¥è¯¢æœªåŠ å¯†æ¨¡å¼çš„ç›‘æ§é¡¹æ¥æ¢æµ‹Zabbix agentçš„å­˜åœ¨ã€‚è¯·æŸ¥é˜…agentç›‘æ§é¡¹è·å–æ›´å¤šä¿¡æ¯ã€‚&#x27;ç«¯å£&#x27;å‚æ•°çš„æ ¼å¼å¦‚ä¸‹ï¼šå•ä¸€ç«¯å£: 22ç«¯å£èŒƒå›´: 22-45åˆ—è¡¨: 22-45,55,60-70 æ³¨æ„ï¼Œå¾ˆå¤šæ–‡ç« ä¸­åªé…ç½®äº†ä¸€ä¸ªcheckï¼Œä½†æ˜¯å¦‚æœæœ‰ä¸¤ä¸ªchecké¡¹ï¼Œä¼šæ€ä¹ˆæ ·å‘¢ï¼Ÿå…¶å®æ˜¯å®Œå…¨æ²¡æœ‰é—®é¢˜çš„ï¼Œå®Œå…¨å¯ä»¥è®¾ç½®ä¸¤ä¸ªZabbix agent typeçš„checkå…¶ä»–å‡ ä¸ªä¸è°ˆï¼Œå…¶å®å¾ˆç®€å•ï¼Œé…ç½®è¿‡ä¸€ä¸ªhostçš„åº”è¯¥éƒ½çŸ¥é“è¿™å‡ ä¸ªå‚æ•° é…ç½®discovery actionsæ¥ä¸‹æ¥éœ€è¦å»åˆ°Alerts -&gt; Actions -&gt; Discovery actionsï¼Œåœ¨è¿™é‡Œé¢é…ç½®å¦‚æœcheckåˆ°å¯¹åº”çš„æ•°æ®ï¼Œè¯¥æ€ä¹ˆæ·»åŠ åˆ°zabbix å¯ä»¥çœ‹åˆ°ï¼Œè·ŸAutoregistration actionså·®ä¸å¤šçš„ï¼Œæˆ‘ä»¬éœ€è¦è¿™æ˜¯conditionè·Ÿoperationsï¼Œç”±äºéå¸¸ç±»ä¼¼ï¼Œæ‰€ä»¥è¿™é‡Œå°±ä¸è¿‡å¤šèµ˜è¿°äº†ï¼Œæœ‰é—®é¢˜è¯„è®ºåŒºè§å§ï½ æ³¨æ„åœ¨conditionä¸­è®¾ç½®received valueçš„æ—¶å€™ï¼Œå¯èƒ½å¾ˆå¤šäººä¼šç–‘æƒ‘ï¼Œæˆ‘è®¾ç½®äº†ä¸¤ä¸ªcheckï¼Œé‚£è¿™ä¸ªvalueæ˜¯ä»å“ªé‡Œæ¥çš„å‘¢ï¼Ÿæˆ‘ä¸€å¼€å§‹ä¹Ÿå¾ˆç–‘æƒ‘ï¼Œç›´åˆ°æˆ‘æŸ¥åˆ°äº†å®˜æ–¹è¯´æ³• 1234567Specify the value received from an agent (Zabbix, SNMP) check in a discovery rule. String comparison. If several Zabbix agent or SNMP checks are configured for a rule, received values for each of them are checked (each check generates a new event which is matched against all conditions).equals - equal to the value.does not equal - not equal to the value.is greater than or equals - more or equal to the value.is less than or equals - less or equal to the value.contains - contains the substring. Parameter is given as a string.does not contain - does not contain the substring. Parameter is given as a string. LLDLLDçš„è¯ï¼Œéœ€è¦é…ç½®ä¸€ä¸ªDiscoveryï¼Œç„¶åå…ˆé€šè¿‡discoveryæ¥è·å–å¯¹åº”çš„æœåŠ¡å™¨åˆ—è¡¨ã€‚ä¹‹åé€šè¿‡åˆ›å»ºä¸€ä¸ªHost prototypesæ¥è®©Zabbixè‡ªåŠ¨åˆ›å»ºè¯¥Host å›¾ä¸­çš„Agentçš„IPåœ°å€127.0.0.1ä¹Ÿæ˜¯å¯ä»¥å˜æˆä¸€ä¸ªå¯é€‰é¡¹çš„ï¼Œä¸æ˜¯éå¾—å›ºå®š127.0.0.1 å¯ä»¥çœ‹åˆ°ï¼Œè·Ÿè‡ªåŠ¨æ³¨å†Œä¸ä¸€æ ·çš„æ˜¯ï¼Œè¿™ä¸ªå°±è·Ÿæˆ‘ä»¬çš„Hostç•Œé¢ä¸€æ ·ï¼Œé€šè¿‡ç•Œé¢åŒ–çš„æ–¹å¼æ¥é…ç½®templateï¼Œtagï¼Œhostnameç­‰ä¿¡æ¯ï¼Œæ›´åŠ å¯è§†åŒ–å¦å¤–ï¼Œè¿™ä¸ªHostä¹Ÿå¯ä»¥åœ¨é…ç½®discovery listçš„æ—¶å€™é€šè¿‡é…ç½®Keep lost resources periodæ¥è®¾ç½®å¤šä¹…æ‰¾ä¸åˆ°å°±è‡ªåŠ¨åˆ é™¤ æ€»ç»“ Autoregistration actions è¿™åº”è¯¥æ˜¯æœ€ç®€å•çš„ä¸€ä¸ªï¼Œå› ä¸ºåªéœ€è¦å†™ä¸€ä¸ªactionå°±å®Œäº‹äº†ï¼Œä¸éœ€è¦é…ç½®discoveryç„¶åé…ç½®actionï¼Œä¹Ÿä¸éœ€è¦é€‚é…æ¥å£å†åšåç»­æ“ä½œï¼Œæ˜¯æˆ‘è®¤ä¸ºæœ€ç®€å•çš„ä¸€ç§ç”¨æ³•ï¼Œä½†æ˜¯ç¼ºç‚¹åŒæ ·åŠ¨äºº ä¸èƒ½è‡ªåŠ¨åˆ é™¤ï¼Œåªèƒ½è‡ªåŠ¨æ·»åŠ  Discovery éœ€è¦ä¸€ä¸ªç¡®å®šçš„IPåŒºé—´ï¼Œå¦‚æœåœ¨AWSä¸­æœ‰è¾ƒå¤šå­è´¦å·ï¼Œè€Œä¸”é…ç½®ä¸å½“å¯¼è‡´private IPå†²çªçš„è¯ï¼Œå¯¹åˆ›å»ºhostå½±å“å¾ˆå¤§ å¯ä»¥è‡ªåŠ¨åˆ é™¤(é…ç½®å¯¹åº”çš„discovery action) LLD é€šè¿‡æ¥å£ç­‰æ–¹å¼è·å–æœåŠ¡å™¨åˆ—è¡¨ï¼Œç„¶åæ·»åŠ åˆ°zabbixä¸­ï¼Œé€‚ç”¨äºAWS CLIè¿™ç§æ¥å£å½¢å¼çš„æ·»åŠ  ä½†æ˜¯è¿˜æ˜¯æœ‰ä¸ªä¸é€‚ç”¨æ€§ï¼Œå°±æ˜¯è·¨AWS accountï¼Œæ— æ³•ç”¨ä¸€ä¸ªCLIå»è·å–æ‰€æœ‰çš„EC2 å¯ä»¥è‡ªåŠ¨åˆ é™¤(ä¸éœ€è¦é…ç½®ï¼Œå¦‚æœæ²¡æœ‰çš„è¯ä¼šè‡ªåŠ¨åˆ é™¤)","categories":[{"name":"è¿ç»´","slug":"è¿ç»´","permalink":"https://maydaychen.github.io/categories/%E8%BF%90%E7%BB%B4/"}],"tags":[{"name":"ç›‘æ§","slug":"ç›‘æ§","permalink":"https://maydaychen.github.io/tags/%E7%9B%91%E6%8E%A7/"},{"name":"Zabbix","slug":"Zabbix","permalink":"https://maydaychen.github.io/tags/Zabbix/"}]},{"title":"Linuxæ“ä½œè®°å½•5--ä¸ºç”¨æˆ·ç™»å½•è®¾ç½®MFA","slug":"Linuxæ“ä½œè®°å½•5--ä¸ºç”¨æˆ·ç™»å½•è®¾ç½®MFA","date":"2024-08-11T09:42:10.000Z","updated":"2025-02-24T14:47:47.316Z","comments":true,"path":"2024/08/11/Linuxæ“ä½œè®°å½•5--ä¸ºç”¨æˆ·ç™»å½•è®¾ç½®MFA/","link":"","permalink":"https://maydaychen.github.io/2024/08/11/Linux%E6%93%8D%E4%BD%9C%E8%AE%B0%E5%BD%955--%E4%B8%BA%E7%94%A8%E6%88%B7%E7%99%BB%E5%BD%95%E8%AE%BE%E7%BD%AEMFA/","excerpt":"","text":"æ·»åŠ repoä¿¡æ¯sudo vi &#x2F;etc&#x2F;yum.repos.d&#x2F;epel.repo 1234567891011121314151617181920212223242526272829303132[epel]name=Extra Packages for Enterprise Linux 7 - $basearch# It is much more secure to use the metalink, but if you wish to use a local mirror# place its address here.#baseurl=http://download.example/pub/epel/7/$basearchmetalink=https://mirrors.fedoraproject.org/metalink?repo=epel-7&amp;arch=$basearch&amp;infra=$infra&amp;content=$contentdirfailovermethod=priorityenabled=1gpgcheck=1gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-EPEL-7[epel-debuginfo]name=Extra Packages for Enterprise Linux 7 - $basearch - Debug# It is much more secure to use the metalink, but if you wish to use a local mirror# place its address here.#baseurl=http://download.example/pub/epel/7/$basearch/debugmetalink=https://mirrors.fedoraproject.org/metalink?repo=epel-debug-7&amp;arch=$basearch&amp;infra=$infra&amp;content=$contentdirfailovermethod=priorityenabled=0gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-EPEL-7gpgcheck=1[epel-source]name=Extra Packages for Enterprise Linux 7 - $basearch - Source# It is much more secure to use the metalink, but if you wish to use a local mirror# place it&#x27;s address here.#baseurl=http://download.example/pub/epel/7/source/tree/metalink=https://mirrors.fedoraproject.org/metalink?repo=epel-source-7&amp;arch=$basearch&amp;infra=$infra&amp;content=$contentdirfailovermethod=priorityenabled=0gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-EPEL-7gpgcheck=1 éœ€è¦æ·»åŠ RPM-GPG-KEY-EPEL-7è®¤è¯ä¿¡æ¯sudo vi &#x2F;etc&#x2F;pki&#x2F;rpm-gpg&#x2F;RPM-GPG-KEY-EPEL-7 1234567891011121314151617181920212223242526272829-----BEGIN PGP PUBLIC KEY BLOCK-----Version: GnuPG v1.4.11 (GNU/Linux)mQINBFKuaIQBEAC1UphXwMqCAarPUH/ZsOFslabeTVO2pDk5YnO96f+rgZB7xArBOSeQk7B90iqSJ85/c72OAn4OXYvT63gfCeXpJs5M7emXkPsNQWWSju99lW+AqSNmjYWhmRlLRGl0OO7gIwj776dIXvcMNFlzSPj00N2xAqjMbjlnV2n2abAE5gq6VpqPvFXVyfrVa/ualogDVmf6h2t4Rdpifq8qTHsHFU3xpCz+T6/dGWKGQ42ZQfTaLnDMjToAsmY0AyevkIbX6iZVtzGvanYpPcWW4X0RDPcpqfFNZk643xI4lsZ+Y2Er9Yu5S/8x0ly+tmmIokaE0wwbdUu740YTZjCesroYWiRg5zuQ2xfKxJoV5E+Eh+tYwGDJn6HfWhRgnudRRwvuJ45ztYVtKulKw8QQpd2STWrcQQDJaRWmnMooX/PATTjCBExB9dkz38Druvk7IkHMtsIqlkAOQMdsX1d3Tov6BE2XDjIG0zFxLduJGbVwc/6rIc95T055j36Ez0HrjxdpTGOOHxRqMK5m9flFbaxxtDnS7w77WqzW7HjFrD0VeTx2vnjjGqchHEQpfDpFOzb8LTFhgYidyRNUflQY35WLOzLNV+pV3eQ3Jg11UFwelSNLqfQfuFRGc+zcwkNjHh5yPvm9odR1BIfqJ6sKGPGbtPNXo7ERMRypWyRz0zi0twARAQABtChGZWRvcmEgRVBFTCAoNykgPGVwZWxAZmVkb3JhcHJvamVjdC5vcmc+iQI4BBMBAgAiBQJSrmiEAhsPBgsJCAcDAgYVCAIJCgsEFgIDAQIeAQIXgAAKCRBqL66iNSxk5cfGD/4spqpsTjtDM7qpytKLHKruZtvuWiqt5RfvT9ww9GUUFMZ4ZZGX4nUXg49qixDLayWR8ddG/s5kyOi3C0uX/6inzaYyRg+Bh70brqKUK14F1BrrPi29eaKfG+GuMFtXdBG2a7OtPmw3yuKmq9Epv6B0mP6E5KSdvSRSqJWtGcA6wRS/wDzXJENHp5re9Ism3CYydpy0GLRA5wo4fPB5uLdUhLEUDvh2KK//fMjja3o0L+SNz8N0aDZyn5AxCU9RB3EHcTecFgoy5umRj99BZrebR1NO+4gBrivIfdvD4fJNfNBHXwhSH9ACGCNvHnXVjHQF9iHWApKkRIeh8Fr2n5dtfJEF7SEX8GbX7FbsWo29kXMrVgNqHNyDnfABVoPubgQdtJZJkVZAkaHrMu8AytwT62Q4eNqmJI1aWbZQNI5jWYqc6RKuCK6/F99qthFT9gJO17+yRuL6Uv2/vgzVR1RGdwVLKwlUjGPAjYflpCQwWMAASxiv9uPyYPHcErSrbRG0wjIfAR3vus1OSOx3xZHZpXFfmQTsDP7zVROLzV98R3JwFAxJ4/xqeON4vCPFU6OsT3lWQ8w7il5ohY95wmujfr6lk89kEzJdOTzcn7DBbUru33CQMGKZ3EvtRjsC7FDbL017qxS+ZVA/HGkyfiu4cpgV8VUnbql5eAZ+1Ll6Dw===hdPa-----END PGP PUBLIC KEY BLOCK----- å®‰è£…google-authenticator1sudo yum install google-authenticator -y ä¿®æ”¹sshdæ–‡ä»¶123sudo vi /etc/pam.d/sshd# æ·»åŠ ä¸‹é¢è¿™å¥è¯auth required pam_google_authenticator.so nullok ä¿®æ”¹sshd_configæ–‡ä»¶123sudo vi /etc/ssh/sshd_config# ä¿®æ”¹è¿™å¥è¯AuthenticationMethods publickey,keyboard-interactive é‡å¯sshd1sudo systemctl restart sshd","categories":[{"name":"è¿ç»´","slug":"è¿ç»´","permalink":"https://maydaychen.github.io/categories/%E8%BF%90%E7%BB%B4/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"https://maydaychen.github.io/tags/Linux/"}]},{"title":"Teamsé€šè¿‡Webhookå®ç°mentionæŸäººåŠè¸©å‘è®°å½•","slug":"Teamsé€šè¿‡Webhookå®ç°@æŸäººåŠè¸©å‘è®°å½•","date":"2024-04-23T15:02:27.000Z","updated":"2024-12-27T05:13:56.000Z","comments":true,"path":"2024/04/23/Teamsé€šè¿‡Webhookå®ç°@æŸäººåŠè¸©å‘è®°å½•/","link":"","permalink":"https://maydaychen.github.io/2024/04/23/Teams%E9%80%9A%E8%BF%87Webhook%E5%AE%9E%E7%8E%B0@%E6%9F%90%E4%BA%BA%E5%8F%8A%E8%B8%A9%E5%9D%91%E8%AE%B0%E5%BD%95/","excerpt":"","text":"èƒŒæ™¯æˆ‘ä»¬åœ¨ä½¿ç”¨MS Teamsè¿›è¡Œæ²Ÿé€šçš„æ—¶å€™ï¼Œè‚¯å®šä¼šç”¨åˆ°webhookè¿›è¡Œæ¶ˆæ¯çš„è‡ªåŠ¨åŒ–å‘é€ï¼Œä½†æ˜¯ç°åœ¨æœ‰ä¸€ä¸ªéœ€æ±‚ï¼Œæœ‰ä¸€äº›æ¶ˆæ¯éœ€è¦æŒ‡å®š@æŸäº›äººï¼Œè€Œä¸æ˜¯å•çº¯çš„å‘é€æ¶ˆæ¯ å®ç°å‰é¢æˆ‘ä»¬è¯´äº†æ€ä¹ˆé€šè¿‡pythonä»£ç è¿›è¡Œé€šçŸ¥å‘é€ï¼Œè¿™æ¬¡åªéœ€è¦æ”¹ä¸€äº›ä»£ç  12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758import urllib3import jsonhttp = urllib3.PoolManager()def lambda_handler(event, context): # è¿™æ˜¯webhookåœ°å€ url = &quot;https://xxx.webhook.office.com/webhookb2/xxxxxx&quot; msg = &#123; &quot;type&quot;:&quot;message&quot;, &quot;attachments&quot;:[ &#123; &quot;contentType&quot;:&quot;application/vnd.microsoft.card.adaptive&quot;, &quot;contentUrl&quot;:&#x27;&#x27;, &quot;content&quot;:&#123; &quot;$schema&quot;:&quot;http://adaptivecards.io/schemas/adaptive-card.json&quot;, &quot;type&quot;:&quot;AdaptiveCard&quot;, &quot;version&quot;:&quot;1.2&quot;, &quot;body&quot;: [ &#123; &quot;type&quot;: &quot;TextBlock&quot;, &quot;text&quot;: &quot;Hi &lt;at&gt;Adele UPN&lt;/at&gt;, &lt;at&gt;Adele Microsoft Entra ID&lt;/at&gt;&quot; &#125; ], &quot;msteams&quot;: &#123; &quot;entities&quot;: [ &#123; &quot;type&quot;: &quot;mention&quot;, &quot;text&quot;: &quot;&lt;at&gt;Adele UPN&lt;/at&gt;&quot;, &quot;mentioned&quot;: &#123; &quot;id&quot;: &quot;AdeleV@contoso.onmicrosoft.com&quot;, &quot;name&quot;: &quot;Adele Vance&quot; &#125; &#125;, &#123; &quot;type&quot;: &quot;mention&quot;, &quot;text&quot;: &quot;&lt;at&gt;Adele Microsoft Entra ID&lt;/at&gt;&quot;, &quot;mentioned&quot;: &#123; &quot;id&quot;: &quot;87d349ed-44d7-43e1-9a83-5f2406dee5bd&quot;, &quot;name&quot;: &quot;Adele Vance&quot; &#125; &#125; ] &#125; &#125; &#125; ]&#125; encoded_msg = json.dumps(msg).encode(&quot;utf-8&quot;) resp = http.request(&quot;POST&quot;, url, body=encoded_msg) print( &#123; &quot;message&quot;: event[&quot;Records&quot;][0][&quot;Sns&quot;][&quot;Message&quot;], &quot;status_code&quot;: resp.status, &quot;response&quot;: resp.data, &#125; ) å¯ä»¥çœ‹åˆ°ä¸€ä¸‹å˜æ›´ç‚¹ bodyä¸­çš„TextBlockæ·»åŠ äº†Adele UPN å­—æ®µï¼Œå…¶ä¸­Adele UPNå¯ä»¥ä¸ºç”¨æˆ·å æ·»åŠ msteamså—ï¼Œå…¶ä¸­æŒ‡å®štypeä¸ºmentionï¼Œ idå¯ä»¥ä¸ºUserIdï¼Œä¹Ÿå¯ä»¥ä¸ºç”¨æˆ·é‚®ç®±ï¼Œä¹Ÿå¯ä»¥ä¸ºMS Entra Object ID,keyéƒ½æ˜¯id nameå­—æ®µï¼Œå¯ä»¥æŠŠå˜æ›´ç‚¹1ä¸­çš„ç”¨æˆ·åæ”¹ä¸ºåˆ«çš„å­—æ®µï¼Œä½†æ˜¯ä¸å½±å“@ç”¨æˆ·çš„æ•ˆæœ å‘ç‚¹åˆ‡è®°ï¼@mentionåŠŸèƒ½ä¸æ”¯æŒGuestè´¦æˆ·ï¼Œä¹Ÿå°±æ˜¯è¯´åªæœ‰åœ¨è¿™ä¸ªTeamsä¸­çš„ç”¨æˆ·æ‰èƒ½è¢«@ï¼","categories":[{"name":"è¿ç»´","slug":"è¿ç»´","permalink":"https://maydaychen.github.io/categories/%E8%BF%90%E7%BB%B4/"}],"tags":[{"name":"ç›‘æ§","slug":"ç›‘æ§","permalink":"https://maydaychen.github.io/tags/%E7%9B%91%E6%8E%A7/"}]},{"title":"Macä¼˜åŒ–è®°å½•3-Alfred æ”¯æŒedgeæµè§ˆå™¨ä¹¦ç­¾","slug":"Macä¼˜åŒ–è®°å½•3--Alfred æ”¯æŒedgeæµè§ˆå™¨ä¹¦ç­¾","date":"2024-03-16T09:37:26.000Z","updated":"2025-08-15T09:17:19.000Z","comments":true,"path":"2024/03/16/Macä¼˜åŒ–è®°å½•3--Alfred æ”¯æŒedgeæµè§ˆå™¨ä¹¦ç­¾/","link":"","permalink":"https://maydaychen.github.io/2024/03/16/Mac%E4%BC%98%E5%8C%96%E8%AE%B0%E5%BD%953--Alfred%20%E6%94%AF%E6%8C%81edge%E6%B5%8F%E8%A7%88%E5%99%A8%E4%B9%A6%E7%AD%BE/","excerpt":"","text":"ä¼—æ‰€å‘¨çŸ¥ï¼Œåœ¨Alfredä¸Šåªæœ‰Safariè·ŸChromeæµè§ˆå™¨çš„æ”¯æŒï¼Œç”šè‡³éƒ½ä¸å¯ä»¥é€‰æ‹©åˆ«çš„æµè§ˆå™¨åœ¨Alfred ç¤¾åŒºé‡Œï¼Œå¼€å‘è€…ä¹Ÿæ˜¯ç›´æ¥è¯´äº†è¿™ä¸¤ä¸ªæ˜¯macä¸Šçš„ç”¨çš„äººæœ€å¤šçš„æµè§ˆå™¨ï¼Œç›®å‰æ²¡æœ‰æ·»åŠ å…¶ä»–æµè§ˆå™¨ä¹¦ç­¾æ”¯æŒçš„è®¡åˆ’ï¼Œæ‰€ä»¥æˆ‘ä»¬åªèƒ½è‡ªå·±æ‘¸ç´¢ä½†æ˜¯è¯´å®åœ¨çš„ï¼Œedgeæµè§ˆå™¨åœ¨å›½å†…æœ‰ç€å…ˆå¤©çš„ä¼˜åŠ¿ï¼Œå„ç§åŒæ­¥åŠŸèƒ½çš„æ­£å¸¸ä½¿ç”¨å·²ç»è®©å®ƒåœ¨å›½å†…è¶Šæ¥è¶Šå—æ¬¢è¿ï¼Œæ‰€ä»¥åŠ å…¥ä¸€ä¸ªedgeæµè§ˆå™¨çš„æ”¯æŒä¸ªäººè®¤ä¸ºè¿˜æ˜¯å¾ˆæœ‰å¿…è¦çš„ ä½æ•ˆæ–¹æ³•ï¼šè£…ä¸€ä¸ªChrome, ç„¶åæŠŠedgeä¹¦ç­¾å¯¼å…¥è¿‡å» å¥½äº†ï¼Œä¸å¼€ç©ç¬‘äº†ï¼Œä¸‹é¢è®°å½•ä¸€ä¸ªåœ¨ç¤¾åŒºçœ‹åˆ°çš„å¾ˆå¥½ç”¨çš„æ–¹æ³• æ­£ç»è®°å½•step 1. è¿˜æ˜¯éœ€è¦ä¸€ä¸ªchromeæµè§ˆå™¨ï¼Œæ‰€ä»¥è¿˜æ˜¯è£…ä¸€ä¸ªå§step 2. link edgeâ€™s bookmarks to chromecd ~/Library/Application\\ Support/Google/Chrome/Default//è¿™ä¸€æ­¥å¦‚æœæ–°å®‰è£…çš„chromeæ˜¯ä¸éœ€è¦çš„ï¼Œå› ä¸ºæ²¡æœ‰è¿™ä¸ªæ–‡ä»¶ mv Bookmarks Bookmarks_233.bakln -s ~/Library/Application\\ Support/Microsoft\\ Edge/Default/Bookmarks ~/Library/Application\\ Support/Google/Chrome/Default/Bookmarksè´´ä¸€ä¸ªln -så‘½ä»¤è¯¦è§£https://blog.csdn.net/qianxuedegushi/article/details/108145547 ç„¶åå†ç”¨alfredè¯•ä¸€ä¸‹ï¼Œå¯ä»¥æ˜¾ç¤ºedgeçš„ä¹¦ç­¾äº†","categories":[{"name":"Tools","slug":"Tools","permalink":"https://maydaychen.github.io/categories/Tools/"}],"tags":[{"name":"MacOS","slug":"MacOS","permalink":"https://maydaychen.github.io/tags/MacOS/"}]},{"title":"Hexoé—®é¢˜è®°å½•2--valineè¯„è®ºç³»ç»Ÿæ¥å£404é—®é¢˜è§£å†³","slug":"Hexoé—®é¢˜è®°å½•2--valineè¯„è®ºç³»ç»Ÿæ¥å£404é—®é¢˜è§£å†³","date":"2024-03-16T09:08:57.000Z","updated":"2025-02-24T15:34:02.389Z","comments":true,"path":"2024/03/16/Hexoé—®é¢˜è®°å½•2--valineè¯„è®ºç³»ç»Ÿæ¥å£404é—®é¢˜è§£å†³/","link":"","permalink":"https://maydaychen.github.io/2024/03/16/Hexo%E9%97%AE%E9%A2%98%E8%AE%B0%E5%BD%952--valine%E8%AF%84%E8%AE%BA%E7%B3%BB%E7%BB%9F%E6%8E%A5%E5%8F%A3404%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3/","excerpt":"","text":"é—®é¢˜æè¿°åœ¨é…ç½®valineè¯„è®ºç³»ç»Ÿæ—¶ï¼Œçªç„¶å‘ç°è¯„ä»·æ— æ³•æŸ¥çœ‹ï¼Œé€šè¿‡æ§åˆ¶å°å‘ç°æ˜¯æ¥å£404äº†ï¼Œå¾ˆå¥‡æ€ª é—®é¢˜æ’æŸ¥ é€šè¿‡F12å¯ä»¥çœ‹åˆ°ï¼Œä»–è°ƒç”¨çš„æ¥å£è®¿é—®ä¿¡æ¯ä¸­æ˜¯æ˜¾ç¤ºä»–éœ€è¦è®¿é—®çš„Classçš„ï¼Œä½†æ˜¯æˆ‘ä»¬åœ¨LeanCloudä¸­å¹¶æ²¡æœ‰è¿™ä¸ªClassï¼Œæ‰€ä»¥æ€€ç–‘æ˜¯ç¼ºå°‘è¿™ä¸ªClasså¯¼è‡´çš„é—®é¢˜ é—®é¢˜è§£å†³ åœ¨LeanCloudçš„æ§åˆ¶å°ä¸­ï¼Œåœ¨æ•°æ®å­˜å‚¨-&gt;ç»“æ„åŒ–æ•°æ®é€‰é¡¹ä¸­ï¼Œæœ‰ä¸€ä¸ªåˆ›å»ºClassçš„æŒ‰é’®ï¼Œå’±ä»¬éœ€è¦æ‰‹åŠ¨åˆ›å»ºä¸€ä¸ªå«åšCommentçš„Class,åœ¨åˆ›å»ºå®Œæˆåï¼Œåˆ·æ–°åšæ–‡é¡µé¢ï¼Œä¼šå‘ç°å·²ç»å¯ä»¥æŸ¥çœ‹è¯„è®ºäº†","categories":[{"name":"åšå®¢ç›¸å…³","slug":"åšå®¢ç›¸å…³","permalink":"https://maydaychen.github.io/categories/%E5%8D%9A%E5%AE%A2%E7%9B%B8%E5%85%B3/"}],"tags":[{"name":"Hexo","slug":"Hexo","permalink":"https://maydaychen.github.io/tags/Hexo/"}]},{"title":"Linuxé—®é¢˜è®°å½•2--scpåˆ°æœåŠ¡å™¨æ—¶æŠ¥é”™Permissions 0644 for 'xx.pem' are too open","slug":"Linuxé—®é¢˜è®°å½•2--scpåˆ°æœåŠ¡å™¨æ—¶æŠ¥é”™Permissions-0644-for-xx-pem-are-too-open","date":"2024-03-15T16:58:52.000Z","updated":"2025-02-24T14:51:50.278Z","comments":true,"path":"2024/03/16/Linuxé—®é¢˜è®°å½•2--scpåˆ°æœåŠ¡å™¨æ—¶æŠ¥é”™Permissions-0644-for-xx-pem-are-too-open/","link":"","permalink":"https://maydaychen.github.io/2024/03/16/Linux%E9%97%AE%E9%A2%98%E8%AE%B0%E5%BD%952--scp%E5%88%B0%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%97%B6%E6%8A%A5%E9%94%99Permissions-0644-for-xx-pem-are-too-open/","excerpt":"","text":"é—®é¢˜Permissions 0644 for &#39;xx.pem&#39; are too open. It is required that your private key files are NOT accessible by others. This private key will be ignored. Load key &quot;xx.pem&quot;: bad permissions ec2-user@35.77.46.6: Permission denied (publickey,gssapi-keyex,gssapi-with-mic). lost connection è§£å†³æ–¹æ¡ˆçœ‹æ—¥å¿—æŠ¥å‡ºçš„é”™è¯¯ï¼Œâ€Permissions 0644 for â€˜xx.pemâ€™ are too openâ€ï¼Œpenæ–‡ä»¶çš„æƒé™å¤ªå¤§å¤ªopenäº†ã€‚ä½¿ç”¨ll(ls -al)å‘½ä»¤æŸ¥çœ‹äº†ç§é’¥æ–‡ä»¶çš„æƒé™ï¼Œå‘ç°å’Œé”™è¯¯ä¸€æ ·ï¼Œæ˜¯644æ‰€ä»¥éœ€è¦ä½¿ç”¨chmodå‘½ä»¤ä¿®æ”¹æ–‡ä»¶çš„æƒé™ chmod 600 xx.pemä¹‹åå†å°è¯•ä¸€éï¼Œå®Œç¾æ‰§è¡Œ","categories":[{"name":"è¿ç»´","slug":"è¿ç»´","permalink":"https://maydaychen.github.io/categories/%E8%BF%90%E7%BB%B4/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"https://maydaychen.github.io/tags/Linux/"}]},{"title":"Linuxæ“ä½œè®°å½•4--Linuxæ–‡ä»¶æ¸…ç©ºçš„å‡ ç§æ–¹æ³•","slug":"Linuxæ“ä½œè®°å½•4--æ–‡ä»¶æ¸…ç©ºçš„å‡ ç§æ–¹æ³•","date":"2024-03-15T16:57:47.000Z","updated":"2025-02-24T14:47:47.308Z","comments":true,"path":"2024/03/16/Linuxæ“ä½œè®°å½•4--æ–‡ä»¶æ¸…ç©ºçš„å‡ ç§æ–¹æ³•/","link":"","permalink":"https://maydaychen.github.io/2024/03/16/Linux%E6%93%8D%E4%BD%9C%E8%AE%B0%E5%BD%954--%E6%96%87%E4%BB%B6%E6%B8%85%E7%A9%BA%E7%9A%84%E5%87%A0%E7%A7%8D%E6%96%B9%E6%B3%95/","excerpt":"","text":"ä½¿ç”¨é‡å®šå‘çš„æ–¹æ³• 12345[root@centos7 ~]# du -h test.txt 4.0K test.txt[root@centos7 ~]# &gt; test.txt [root@centos7 ~]# du -h test.txt 0 test.txt ä½¿ç”¨trueå‘½ä»¤é‡å®šå‘æ¸…ç©ºæ–‡ä»¶ 12345[root@centos7 ~]# du -h test.txt 4.0K test.txt[root@centos7 ~]# true &gt; test.txt [root@centos7 ~]# du -h test.txt 0 test.txt ä½¿ç”¨cat&#x2F;cp&#x2F;ddå‘½ä»¤åŠ&#x2F;dev&#x2F;nullè®¾å¤‡æ¥æ¸…ç©ºæ–‡ä»¶ 1234567891011121314151617181920212223[root@centos7 ~]# du -h test.txt 4.0K test.txt[root@centos7 ~]# cat /dev/null &gt; test.txt [root@centos7 ~]# du -h test.txt 0 test.txt###################################################[root@centos7 ~]# echo &quot;Hello World&quot; &gt; test.txt [root@centos7 ~]# du -h test.txt 4.0K test.txt[root@centos7 ~]# cp /dev/null test.txt cpï¼šæ˜¯å¦è¦†ç›–&quot;test.txt&quot;ï¼Ÿ y[root@centos7 ~]# du -h test.txt 0 test.txt##################################################[root@centos7 ~]# echo &quot;Hello World&quot; &gt; test.txt [root@centos7 ~]# du -h test.txt 4.0K test.txt[root@centos7 ~]# dd if=/dev/null of=test.txt è®°å½•äº†0+0 çš„è¯»å…¥è®°å½•äº†0+0 çš„å†™å‡º0å­—èŠ‚(0 B)å·²å¤åˆ¶ï¼Œ0.000266781 ç§’ï¼Œ0.0 kB/ç§’[root@centos7 ~]# du -h test.txt 0 test.txt ä½¿ç”¨echoå‘½ä»¤æ¸…ç©ºæ–‡ä»¶ 1234567[root@centos7 ~]# echo &quot;Hello World&quot; &gt; test.txt [root@centos7 ~]# du -h test.txt 4.0K test.txt[root@centos7 ~]# echo -n &quot;&quot; &gt; test.txt ==&gt;è¦åŠ ä¸Š&quot;-n&quot;å‚æ•°ï¼Œé»˜è®¤æƒ…å†µä¸‹ä¼š&quot;&quot;ï¼Œä¹Ÿå°±æ˜¯å›è½¦ç¬¦[root@centos7 ~]# du -h test.txt 0 test.txt ä½¿ç”¨truncateå‘½ä»¤æ¸…ç©ºæ–‡ä»¶ 12345[root@centos7 ~]# du -h test.txt 4.0K test.txt[root@centos7 ~]# truncate -s 0 test.txt -så‚æ•°ç”¨æ¥è®¾å®šæ–‡ä»¶çš„å¤§å°ï¼Œæ¸…ç©ºæ–‡ä»¶ï¼Œå°±è®¾å®šä¸º0ï¼›[root@centos7 ~]# du -h test.txt 0 test.txt","categories":[{"name":"è¿ç»´","slug":"è¿ç»´","permalink":"https://maydaychen.github.io/categories/%E8%BF%90%E7%BB%B4/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"https://maydaychen.github.io/tags/Linux/"}]},{"title":"Zabbixè¸©å‘è®°å½•1--ç›‘æ§çš„ç›®æ ‡ä¸»æœºé»˜è®¤åªæ˜¾ç¤º20æ¡å›¾å½¢","slug":"Zabbixè¸©å‘è®°å½•1--ç›‘æ§çš„ç›®æ ‡ä¸»æœºé»˜è®¤åªæ˜¾ç¤º20æ¡å›¾å½¢-zabbixæ˜¾ç¤º-ä¸å…¨-ç¼ºå¤±","date":"2024-03-15T16:45:32.000Z","updated":"2025-02-24T15:03:02.750Z","comments":true,"path":"2024/03/16/Zabbixè¸©å‘è®°å½•1--ç›‘æ§çš„ç›®æ ‡ä¸»æœºé»˜è®¤åªæ˜¾ç¤º20æ¡å›¾å½¢-zabbixæ˜¾ç¤º-ä¸å…¨-ç¼ºå¤±/","link":"","permalink":"https://maydaychen.github.io/2024/03/16/Zabbix%E8%B8%A9%E5%9D%91%E8%AE%B0%E5%BD%951--%E7%9B%91%E6%8E%A7%E7%9A%84%E7%9B%AE%E6%A0%87%E4%B8%BB%E6%9C%BA%E9%BB%98%E8%AE%A4%E5%8F%AA%E6%98%BE%E7%A4%BA20%E6%9D%A1%E5%9B%BE%E5%BD%A2-zabbix%E6%98%BE%E7%A4%BA-%E4%B8%8D%E5%85%A8-%E7%BC%BA%E5%A4%B1/","excerpt":"","text":"ç›‘æ§çš„ç›®æ ‡ä¸»æœºé»˜è®¤åªæ˜¾ç¤º20æ¡å›¾å½¢ ( zabbix æ˜¾ç¤º ä¸å…¨ ç¼ºå¤±) è§£å†³æ–¹æ³•ï¼šsudo vi &#x2F;usr&#x2F;share&#x2F;zabbix&#x2F;include&#x2F;defines.inc.php ä¿®æ”¹æ–‡ä»¶ ZBX_MAX_GRAPHS_P ER_PAGE è¿™ä¸ªå˜é‡é»˜è®¤æ˜¯20ï¼ŒæŠŠå®ƒæ”¹æˆ60","categories":[{"name":"è¿ç»´","slug":"è¿ç»´","permalink":"https://maydaychen.github.io/categories/%E8%BF%90%E7%BB%B4/"}],"tags":[{"name":"ç›‘æ§","slug":"ç›‘æ§","permalink":"https://maydaychen.github.io/tags/%E7%9B%91%E6%8E%A7/"},{"name":"Zabbix","slug":"Zabbix","permalink":"https://maydaychen.github.io/tags/Zabbix/"}]},{"title":"Grafanaä½¿ç”¨æ—¥å¿—1--Origin not allowed","slug":"Grafanaä½¿ç”¨æ—¥å¿—1--Origin-not-allowed","date":"2024-03-15T16:44:22.000Z","updated":"2025-02-24T15:23:51.948Z","comments":true,"path":"2024/03/16/Grafanaä½¿ç”¨æ—¥å¿—1--Origin-not-allowed/","link":"","permalink":"https://maydaychen.github.io/2024/03/16/Grafana%E4%BD%BF%E7%94%A8%E6%97%A5%E5%BF%971--Origin-not-allowed/","excerpt":"","text":"ä¸Šå‘¨ Grafana å·¥ä½œæ²¡æœ‰ä»»ä½•é—®é¢˜ï¼Œä½†æ›´æ–°åˆ° 8.3.5 åæˆ‘æ— æ³•å†ç™»å½•ã€‚åœ¨ç™»å½•å±å¹•ä¸­ï¼Œè¾“å…¥æˆ‘çš„ç”¨æˆ·åå’Œå¯†ç åï¼Œä¼šå‡ºç°ä¸€æ¡æ¶ˆæ¯ï¼šâ€œOrigin not allowedâ€ã€‚ åœ¨ grafana.log æ–‡ä»¶ä¸­ï¼Œæˆ‘çœ‹åˆ°ä¸€è¡Œï¼šlvl&#x3D;eror msg&#x3D;â€æ— æ³•æ ¹æ® cookie æŸ¥æ‰¾ç”¨æˆ·â€ logger&#x3D;context error&#x3D;â€æœªæ‰¾åˆ°ç”¨æˆ·ä»¤ç‰Œâ€ è§£å†³æ–¹æ¡ˆï¼šåœ¨nginxçš„conf.dæ–‡ä»¶ä¸­ï¼Œæœ‰ä¸€ä¸ªgrafana.confçš„æ–‡ä»¶ï¼Œéœ€è¦åœ¨é…ç½®æ–‡ä»¶ä¸­å¢åŠ  1proxy_set_header Host $http_host; //added after upgrade from 8.1 to 8.4.1 for origin not allowed error ä½†æ˜¯å‘ç°è¿˜æ˜¯ä¸è¡Œï¼Œçœ‹åˆ°è¯´å¯ä»¥æŠŠ$http_hostæ”¹æˆè‡ªå·±çš„domainï¼Œäºæ˜¯å°è¯•ä¸‹ 1proxy_set_header Host domain.com æœ€åé‡å¯nginx 12sudo systemctl restart nginxsudo systemctl status nginx ç„¶ååˆ·æ–°é¡µé¢ï¼Œç™»å½•ï¼Œå¯ä»¥è¿›å»äº†","categories":[{"name":"è¿ç»´","slug":"è¿ç»´","permalink":"https://maydaychen.github.io/categories/%E8%BF%90%E7%BB%B4/"}],"tags":[{"name":"ç›‘æ§","slug":"ç›‘æ§","permalink":"https://maydaychen.github.io/tags/%E7%9B%91%E6%8E%A7/"},{"name":"Grafana","slug":"Grafana","permalink":"https://maydaychen.github.io/tags/Grafana/"}]},{"title":"Macä¼˜åŒ–è®°å½•2-Terminalç»ˆç«¯æ²¡æœ‰llå‘½ä»¤è§£å†³åŠæ³•","slug":"Macä¼˜åŒ–è®°å½•2--Terminalç»ˆç«¯æ²¡æœ‰llå‘½ä»¤è§£å†³åŠæ³•","date":"2024-03-15T16:26:52.000Z","updated":"2025-02-24T10:00:53.000Z","comments":true,"path":"2024/03/16/Macä¼˜åŒ–è®°å½•2--Terminalç»ˆç«¯æ²¡æœ‰llå‘½ä»¤è§£å†³åŠæ³•/","link":"","permalink":"https://maydaychen.github.io/2024/03/16/Mac%E4%BC%98%E5%8C%96%E8%AE%B0%E5%BD%952--Terminal%E7%BB%88%E7%AB%AF%E6%B2%A1%E6%9C%89ll%E5%91%BD%E4%BB%A4%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95/","excerpt":"","text":"é¦–å…ˆåœ¨ ~&#x2F;.bash_profile æ–‡ä»¶ä¸­åŠ å…¥å¦‚ä¸‹å‘½ä»¤(å¦‚æœæ²¡æœ‰å°±touchä¸€ä¸ª)alias ll=&#39;ls -alF&#39; éšåæ‰§è¡Œsource ~/.bash_profileå‘½ä»¤ï¼Œä½¿ä¿®æ”¹ç”Ÿæ•ˆ è¿™æ ·å°±å¯ä»¥ä½¿ç”¨ ll å‘½ä»¤äº†ï¼Œä½†æ˜¯è¿™æ ·æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œæ¯æ¬¡æ–°å¼€çš„ç»ˆç«¯ ll å‘½ä»¤éƒ½ä¼šå¤±æ•ˆ ä»¥ä¸‹æ˜¯è§£å†³æ–¹æ¡ˆ åœ¨ ï½&#x2F;.zshrc æ–‡ä»¶ä¸­åŠ å…¥å¦‚ä¸‹å‘½ä»¤source ~/.bash_profileå¦‚æœæ‰¾ä¸åˆ°.zshrc æ–‡ä»¶ï¼Œè·Ÿä¸Šé¢ä¸€æ ·touchä¸€ä¸ªå°±å®Œäº‹äº† æ‰§è¡Œsource ~/.zshrcä½¿æ–‡ä»¶ç”Ÿæ•ˆï¼Œä¹‹åçš„æ¯æ¬¡llå°±éƒ½ä¼šèµ·ä½œç”¨äº†","categories":[{"name":"Tools","slug":"Tools","permalink":"https://maydaychen.github.io/categories/Tools/"}],"tags":[{"name":"MacOS","slug":"MacOS","permalink":"https://maydaychen.github.io/tags/MacOS/"}]},{"title":"Macä¼˜åŒ–è®°å½•1--Edgeæµè§ˆå™¨è·ŸChromeæµè§ˆå™¨è§¦æ§æ¿æ— æ³•å³å‡»çš„è§£å†³åŠæ³•","slug":"Macä¼˜åŒ–è®°å½•1--Edgeæµè§ˆå™¨è·ŸChromeæµè§ˆå™¨è§¦æ§æ¿æ— æ³•å³å‡»çš„è§£å†³åŠæ³•","date":"2024-03-15T16:25:55.000Z","updated":"2025-02-24T14:50:48.249Z","comments":true,"path":"2024/03/16/Macä¼˜åŒ–è®°å½•1--Edgeæµè§ˆå™¨è·ŸChromeæµè§ˆå™¨è§¦æ§æ¿æ— æ³•å³å‡»çš„è§£å†³åŠæ³•/","link":"","permalink":"https://maydaychen.github.io/2024/03/16/Mac%E4%BC%98%E5%8C%96%E8%AE%B0%E5%BD%951--Edge%E6%B5%8F%E8%A7%88%E5%99%A8%E8%B7%9FChrome%E6%B5%8F%E8%A7%88%E5%99%A8%E8%A7%A6%E6%8E%A7%E6%9D%BF%E6%97%A0%E6%B3%95%E5%8F%B3%E5%87%BB%E7%9A%84%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95/","excerpt":"","text":"é—®é¢˜ä¸çŸ¥é“ä»ä»€ä¹ˆæ—¶å€™å¼€å§‹ï¼Œç”¨macçš„è§¦æ§æ¿ï¼ŒåŒæŒ‡ç‚¹å‡»å·²ç»æ— æ³•åœ¨æµè§ˆå™¨ä¸Šè·³å‡ºå³é”®çš„é‚£ä¸ªèœå•äº†ï¼Œå®æµ‹edgeè·Ÿchromeéƒ½ä¸€æ · è§£å†³åŠæ³• ç»è¿‡å„ç§æµ‹è¯•ï¼Œå‘ç°æ˜¯å› ä¸ºæˆ‘è£…äº†ä¸€ä¸ªcrxMouseæ’ä»¶ï¼Œè¯¥æ’ä»¶ä¼šæœ‰ä¸€ä¸ªLinux&#x2F;Macé€‰é¡¹ï¼Œå¦‚æœæŠŠå®ƒå»æ‰å‹¾é€‰ï¼Œé—®é¢˜è§£å†³ï¼Œæ‰€ä»¥ç¡®å®šæ˜¯å› ä¸ºè¿™ä¸ªè‡³äºè¿™æ˜¯å¹²å˜›çš„ï¼Œä¸å¤ªç¡®å®šï¼Œä¸è¿‡æ¯•ç«Ÿç°åœ¨å·²ç»ä¸ç”¨é¼ æ ‡ï¼Œè½¬æŠ•è§¦æ§æ¿ï¼Œæ‰€ä»¥è¿™ä¸ªæ’ä»¶å¯¹æˆ‘æ¥è¯´ä¹Ÿæ²¡æœ‰ä»€ä¹ˆç”¨äº†","categories":[{"name":"Tools","slug":"Tools","permalink":"https://maydaychen.github.io/categories/Tools/"}],"tags":[{"name":"MacOS","slug":"MacOS","permalink":"https://maydaychen.github.io/tags/MacOS/"}]},{"title":"Alfred æ”¯æŒedgeæµè§ˆå™¨ä¹¦ç­¾","slug":"Alfred--æ”¯æŒedgeæµè§ˆå™¨ä¹¦ç­¾","date":"2024-03-15T09:37:26.000Z","updated":"2024-12-27T05:07:45.000Z","comments":true,"path":"2024/03/15/Alfred--æ”¯æŒedgeæµè§ˆå™¨ä¹¦ç­¾/","link":"","permalink":"https://maydaychen.github.io/2024/03/15/Alfred--%E6%94%AF%E6%8C%81edge%E6%B5%8F%E8%A7%88%E5%99%A8%E4%B9%A6%E7%AD%BE/","excerpt":"","text":"ä¼—æ‰€å‘¨çŸ¥ï¼Œåœ¨Alfredä¸Šåªæœ‰Safariè·ŸChromeæµè§ˆå™¨çš„æ”¯æŒï¼Œç”šè‡³éƒ½ä¸å¯ä»¥é€‰æ‹©åˆ«çš„æµè§ˆå™¨åœ¨Alfred ç¤¾åŒºé‡Œï¼Œå¼€å‘è€…ä¹Ÿæ˜¯ç›´æ¥è¯´äº†è¿™ä¸¤ä¸ªæ˜¯macä¸Šçš„ç”¨çš„äººæœ€å¤šçš„æµè§ˆå™¨ï¼Œç›®å‰æ²¡æœ‰æ·»åŠ å…¶ä»–æµè§ˆå™¨ä¹¦ç­¾æ”¯æŒçš„è®¡åˆ’ï¼Œæ‰€ä»¥æˆ‘ä»¬åªèƒ½è‡ªå·±æ‘¸ç´¢ä½†æ˜¯è¯´å®åœ¨çš„ï¼Œedgeæµè§ˆå™¨åœ¨å›½å†…æœ‰ç€å…ˆå¤©çš„ä¼˜åŠ¿ï¼Œå„ç§åŒæ­¥åŠŸèƒ½çš„æ­£å¸¸ä½¿ç”¨å·²ç»è®©å®ƒåœ¨å›½å†…è¶Šæ¥è¶Šå—æ¬¢è¿ï¼Œæ‰€ä»¥åŠ å…¥ä¸€ä¸ªedgeæµè§ˆå™¨çš„æ”¯æŒä¸ªäººè®¤ä¸ºè¿˜æ˜¯å¾ˆæœ‰å¿…è¦çš„ ä½æ•ˆæ–¹æ³•ï¼šè£…ä¸€ä¸ªChrome, ç„¶åæŠŠedgeä¹¦ç­¾å¯¼å…¥è¿‡å» å¥½äº†ï¼Œä¸å¼€ç©ç¬‘äº†ï¼Œä¸‹é¢è®°å½•ä¸€ä¸ªåœ¨ç¤¾åŒºçœ‹åˆ°çš„å¾ˆå¥½ç”¨çš„æ–¹æ³• æ­£ç»è®°å½•step 1. è¿˜æ˜¯éœ€è¦ä¸€ä¸ªchromeæµè§ˆå™¨ï¼Œæ‰€ä»¥è¿˜æ˜¯è£…ä¸€ä¸ªå§step 2. link edgeâ€™s bookmarks to chromecd ~/Library/Application\\ Support/Google/Chrome/Default//è¿™ä¸€æ­¥å¦‚æœæ–°å®‰è£…çš„chromeæ˜¯ä¸éœ€è¦çš„ï¼Œå› ä¸ºæ²¡æœ‰è¿™ä¸ªæ–‡ä»¶ mv Bookmarks Bookmarks_233.bakln -s ~/Library/Application\\ Support/Microsoft\\ Edge/Default/Bookmarks ./Bookmarksè´´ä¸€ä¸ªln -så‘½ä»¤è¯¦è§£https://blog.csdn.net/qianxuedegushi/article/details/108145547 ç„¶åå†ç”¨alfredè¯•ä¸€ä¸‹ï¼Œå¯ä»¥æ˜¾ç¤ºedgeçš„ä¹¦ç­¾äº†","categories":[{"name":"Tools","slug":"Tools","permalink":"https://maydaychen.github.io/categories/Tools/"}],"tags":[]},{"title":"Gité…ç½®ä»£ç†","slug":"Gité…ç½®ä»£ç†","date":"2024-03-13T23:05:42.000Z","updated":"2025-02-11T06:36:20.141Z","comments":true,"path":"2024/03/14/Gité…ç½®ä»£ç†/","link":"","permalink":"https://maydaychen.github.io/2024/03/14/Git%E9%85%8D%E7%BD%AE%E4%BB%A3%E7%90%86/","excerpt":"","text":"å‚è€ƒæ–‡ç« æ–‡ç« å†™çš„å¾ˆæ£’ï¼Œæˆ‘å°±æ˜¯å‚è€ƒè¿™ä¸ª é…ç½®gitä»£ç†ï¼ˆå¸¦ç”¨æˆ·åï¼‰git config â€“global http.proxy http://username:pass@server:portgit config â€“global https.proxy https://username:pass@server:port æ‰“å¼€gité…ç½®æ–‡ä»¶1open ~/.gitconfig","categories":[{"name":"Tools","slug":"Tools","permalink":"https://maydaychen.github.io/categories/Tools/"}],"tags":[]},{"title":"ZabbixåŸºç¡€6--Graphç›¸å…³çŸ¥è¯†","slug":"ZabbixåŸºç¡€6--Graphç›¸å…³çŸ¥è¯†","date":"2024-02-27T07:42:13.000Z","updated":"2025-02-24T15:08:29.347Z","comments":true,"path":"2024/02/27/ZabbixåŸºç¡€6--Graphç›¸å…³çŸ¥è¯†/","link":"","permalink":"https://maydaychen.github.io/2024/02/27/Zabbix%E5%9F%BA%E7%A1%806--Graph%E7%9B%B8%E5%85%B3%E7%9F%A5%E8%AF%86/","excerpt":"","text":"ç®€æ˜“å›¾è¡¨åœ¨zabbixä¸­ï¼Œæ‰€æœ‰æ•°å€¼itemå€¼éƒ½å¯ä»¥ç»˜åˆ¶æˆç®€æ˜“çš„å›¾è¡¨ã€‚åœ¨Monitoring-&gt;Latest data-&gt;ä»»æ„ä¸€ä¸ªæ•°å€¼itemåˆ—ä¸Šæœ‰ä¸ªGraph,ç‚¹å‡»ä¾¿ä¼šå‡ºç°ä¸€ä¸ªç®€æ˜“å›¾è¡¨ã€‚å¦‚ä¸‹å›¾ï¼š ä½¿ç”¨å†å²&#x2F;è¶‹åŠ¿æ•°æ®ç”Ÿæˆå›¾è¡¨å›¾è¡¨éƒ½æ˜¯åŸºäºå†å²æˆ–è€…è¶‹åŠ¿æ•°æ®ç”Ÿæˆçš„ï¼Œåœ¨å›¾è¡¨çš„å³ä¸‹è§’æˆ‘ä»¬å¯ä»¥åˆ¤æ–­å›¾è¡¨æ˜¯ä½¿ç”¨ä»€ä¹ˆæ•°æ®ç”Ÿæˆçš„ï¼Œå¦‚æœæ˜¯â€data from historyâ€è¡¨ç¤ºä½¿ç”¨å†å²æ•°æ®ç”Ÿæˆã€‚å¦‚æœæ˜¯â€œdata from trendsâ€è¡¨æ˜å›¾è¡¨æ•°æ®æ¥è‡ªè¶‹åŠ¿æ•°æ®ã€‚ å…³äºä½¿ç”¨è¶‹åŠ¿æ•°æ®: è¾ƒè€çš„itemå†å²æ•°æ®ï¼Œä¾‹å¦‚itemçš„å†å²è®°å½•åªä¿ç•™åŠå¹´ï¼Œè¿™ä¸ªæ—¶å€™ä½ æŸ¥çœ‹åŠå¹´ä»¥å‰çš„æ•°æ®ï¼Œå› ä¸ºå†å²æ•°æ®å·²ç»è¢«åˆ é™¤äº†ï¼Œæ‰€ä»¥åªèƒ½ä½¿ç”¨è¶‹åŠ¿æ•°æ®æ¥ç»˜åˆ¶å›¾è¡¨ã€‚ æ•°æ®æ‹¥æŒ¤ï¼Œå¦‚æœå›¾è¡¨æ°´å¹³åƒç´ è¶…è¿‡3600/16ï¼Œé‚£ä¹ˆä¸ç®¡ä½ çš„å†å²è®°å½•æ˜¯å¦å­˜åœ¨ï¼Œä»–ä¸€å®šä¼šä½¿ç”¨è¶‹åŠ¿è®°å½•ï¼Œä½ æƒ³æƒ³ï¼Œå¦‚æœä¸€ä¸ªitemæ¯éš”ä¸€ç§’å»è·å–æ•°æ®ï¼Œä½ è¦æŸ¥çœ‹ä»–10å¤©çš„æ•°æ®ï¼Œé‚£å¼ å›¾ç‰‡è¯¥å¤šä¹±ï¼Œè¿™ä¸ªæ—¶å€™ä½¿ç”¨è¶‹åŠ¿è®°å½•æ¥ç»˜åˆ¶å›¾ç‰‡çš„æ•ˆæœå®é™…ä¸Šæ˜¯ä¸€æ ·çš„ã€‚ è¶‹åŠ¿è®°å½•è¢«ç¦ç”¨ï¼Œå¦‚æœå­˜åœ¨å½“å‰æ—¶é—´æ®µitemçš„å†å²æ•°æ®ï¼Œé‚£ä¹ˆå°†ä¼šä½¿ç”¨å†å²è®°å½•æ¥ç»˜åˆ¶å›¾è¡¨. è¿™ä¸ªç‰¹æ€§ä»Zabbix 2.2.1å¼€å§‹æ”¯æŒ (ä»¥å¾€, å¦‚æœç¦ç”¨äº†è¶‹åŠ¿è®°å½•ï¼Œé‚£ä¹ˆåªä¼šæ˜¾ç¤ºä¸€å¼ ç©ºç™½å›¾è¡¨ï¼Œä¸ç®¡å†å²è®°å½•æ˜¯å¦å­˜åœ¨. è‡ªå®šä¹‰Graphåˆ›å»ºè‡ªå®šä¹‰å›¾è¡¨æ­¥éª¤ï¼šConfigurationâ†’Hostsï¼ˆæˆ–è€…templatesï¼‰,ç‚¹å‡»hosts&#x2F;templateåˆ—çš„Graphsï¼Œç‚¹å‡»å³ä¸Šè§’çš„Create graph è‡ªå®šä¹‰å›¾æ ‡å±æ€§ å±æ€§ æè¿° Name å›¾è¡¨åç§°ï¼ˆå”¯ä¸€ï¼‰ Width å›¾è¡¨å®½åº¦ï¼ˆå•ä½ï¼šåƒç´ ï¼‰(ä»…ç”¨äºé¢„è§ˆå’Œpie&#x2F;explodedå›¾è¡¨). Height å›¾è¡¨é«˜åº¦ï¼ˆå•ä½ï¼šåƒç´ ï¼‰ Graph type å›¾è¡¨ç±»å‹ Normal - å¸¸è§„å›¾è¡¨, å€¼æ˜¾ç¤ºä¸ºçº¿æ¡ Stacked - å å›¾, æ˜¾ç¤ºå¡«å……åŒºåŸŸ Pie - é¥¼å›¾ Exploded - â€œè£‚å¼€çš„â€é¥¼å›¾ï¼Œæ˜¾ç¤ºéƒ¨åˆ†åˆ‡å‡ºçš„é¥¼å›¾ Show legend æ˜¾ç¤ºå›¾ä¾‹,ä¾‹å¦‚itemåç§°ä¸æœ€å¤§ã€å¹³å‡ã€æœ€å°çš„æ•°æ®ï¼Œä¸€èˆ¬æ˜¾ç¤ºåœ¨å›¾è¡¨çš„ä¸‹æ–¹ Show working time æ˜¯å¦æ˜¾ç¤ºå·¥ä½œæ—¶é—´ï¼Œå¦‚æœé€‰æ‹©è¿™ä¸ªå¤é€‰æ¡†ï¼Œé‚£ä¹ˆéå·¥ä½œæ—¶é—´èƒŒæ™¯ä¸ºç°è‰²ã€‚å¤‡æ³¨ï¼šé¥¼å›¾å’Œçˆ†ç‚¸å¼é¥¼å›¾æ²¡æœ‰è¿™ä¸ªå‚æ•° Show triggers å¦‚æœé€‰æ‹©ç°è±¡ï¼Œé‚£ä¹ˆè§¦å‘å™¨å°†ä¼šç”¨çº¢çº¿è¡¨ç¤º. ä¸¤ç§é¥¼å›¾ä¸åŒ…å«è¿™ä¸ªåŠŸèƒ½ Percentile line (left) å·¦Yè½´ç™¾åˆ†æ•°. Percentile line (right) å³Yè½´ç™¾åˆ†æ•° Y axis MIN value Yè½´æœ€å°å€¼ï¼šCalculated - è‡ªåŠ¨è®¡ç®—Yè½´æœ€å°å€¼ï¼ˆå–itemæœ€å°å€¼ï¼‰Fixed - å›º.å®šYè½´æœ€å°å€¼. é¥¼å›¾ä¸è£‚å˜å¼é¥¼å›¾æ²¡æœ‰è¿™ä¸ªå‚æ•°Item - é€‰ä¸­itemçš„æœ€æ–°å€¼ï¼ˆä¾‹å¦‚ä½ é€‰ä¸­æŸç½‘å¡ï¼Œé‚£ä¹ˆå®ƒçš„æœ€å°å€¼å°†æ¥è‡ªè¿™ä¸ªç½‘å¡itemçš„æœ€æ–°å€¼ï¼‰ Y axis MAX value Yè½´æœ€å¤§å€¼ï¼šCalculated - è‡ªåŠ¨è®¡ç®—Yè½´æœ€å¤§å€¼ï¼ˆå–itemæœ€å¤§å€¼ï¼‰Fixed - å›º.å®šYè½´æœ€å¤§å€¼. é¥¼å›¾ä¸è£‚å˜å¼é¥¼å›¾æ²¡æœ‰è¿™ä¸ªå‚æ•°Item - é€‰ä¸­itemçš„æœ€æ–°å€¼ï¼ˆä¾‹å¦‚ä½ é€‰ä¸­æŸç½‘å¡ï¼Œé‚£ä¹ˆå®ƒçš„æœ€å¤§å€¼å°†æ¥è‡ªè¿™ä¸ªç½‘å¡itemçš„æœ€æ–°å€¼ï¼‰ 3D view ç«‹ä½“é£æ ¼å›¾è¡¨ï¼Œä»…é€‚ç”¨äºé¥¼å›¾ä¸çˆ†ç‚¸å¼é¥¼å›¾. Items ç›‘æ§é¡¹ï¼Œå›¾è¡¨çš„æ•°æ®æ¥æº è‡ªå®šä¹‰å›¾æ ‡itemå±æ€§ï¼ˆå¯ä»¥æ·»åŠ å¤šä¸ªitemï¼‰ å‚æ•° æè¿° Sort order (0â†’100) ç»˜å›¾é¡ºåºï¼Œå¯ä»¥ä¸Šä¸‹æ‹–åŠ¨itemsæ¥æ”¹å˜ä»–ä»¬çš„é¡ºåº.è¿™ä¸ªé¡ºåºç”¨æ¥å†³å®šå›¾å±‚çš„é¡ºåºã€‚ Name itemåç§° Type Type (ä»…ç”¨äºä¸¤ä¸ªé¥¼å›¾å›¾è¡¨):Simple - æŒ‰æ¯”ä¾‹æ˜¾ç¤ºGraph sum - å……æ»¡æ•´ä¸ªé¥¼å›¾ä¸€ å¼ å›¾è¡¨åªå…è®¸æœ‰ä¸€ä¸ªitemsæ˜¯Graph sumï¼Œå¦åˆ™æŠ¥é”™ï¼šERROR: Cannot display more than one item with type â€œGraph sumâ€ï¼Œé€šå¸¸ç”¨äºå½±ç‰‡ï¼Œç¡¬ç›˜å¤§å°itemä½¿ç”¨Graph sumï¼Œå‰©ä½™ç©ºé—´åˆ™ä½¿ç”¨simpleã€‚è¿™æ ·ä¸€ä¸ªé¥¼å›¾çš„ç¡¬ç›˜ä½¿ç”¨æƒ…å†µä¾¿ä¸€ç›®äº†ç„¶ã€‚ Function å½“ä¸€ä¸ªitemæœ‰å¤šç§æ•°å€¼æ—¶,é€‰æ‹©ä¸€ç§æ•°å€¼ç”¨äºå›¾è¡¨å±•ç¤ºall - æ‰€æœ‰å€¼ (æœ€å°ã€å¹³å‡ã€æœ€å¤§)min - ä»…æœ€å°å€¼avg - ä»…å¹³å‡å€¼max - è¿›æœ€å¤§å€¼ Draw style ç»˜åˆ¶é£æ ¼(åªæœ‰å¸¸è§„å›¾è¡¨å­˜åœ¨è¯¥é€‰é¡¹):Line - ç»˜åˆ¶çº¿æ¡Filled region - ç»˜åˆ¶å¡«å……åŒºåŸŸBold line - ç”»ç²—çº¿Dot - ç”»ç‚¹Dashed line - ç”»è™šçº¿ Y axis side Yè½´åœ¨å·¦è¾¹è¿˜æ˜¯å³è¾¹ Colour é¢œè‰² å›¾è¡¨é¢„è§ˆåœ¨åˆ›å»ºå›¾è¡¨çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥éšæ—¶é¢„è§ˆä¿®æ”¹çš„é…ç½®å›¾è¡¨ï¼Œç‚¹å‡»æ ‡ç­¾previewå³å¯ã€‚å¤‡æ³¨ï¼šå¦‚æœæ˜¯templateé¢„è§ˆæ—¶æ²¡æœ‰æ„ä¹‰çš„ï¼Œæ¯•ç«Ÿæ²¡æœ‰ä»»ä½•æ•°æ®ã€‚ âš ï¸ å¦‚æœå›¾è¡¨çš„é«˜åº¦å°äº120åƒç´ ï¼Œé‚£ä¹ˆå›¾æ ‡ä¸Šå°†ä¸ä¼šå±•ç¤ºè§¦å‘å™¨ç›¸å…³ä¿¡æ¯","categories":[{"name":"è¿ç»´","slug":"è¿ç»´","permalink":"https://maydaychen.github.io/categories/%E8%BF%90%E7%BB%B4/"}],"tags":[{"name":"ç›‘æ§","slug":"ç›‘æ§","permalink":"https://maydaychen.github.io/tags/%E7%9B%91%E6%8E%A7/"},{"name":"Zabbix","slug":"Zabbix","permalink":"https://maydaychen.github.io/tags/Zabbix/"}]},{"title":"ZabbixåŸºç¡€5--Maintenanceç»´æŠ¤å‘¨æœŸ","slug":"ZabbixåŸºç¡€5--Maintenanceç»´æŠ¤å‘¨æœŸ","date":"2024-02-26T07:48:55.000Z","updated":"2025-02-24T15:13:31.274Z","comments":true,"path":"2024/02/26/ZabbixåŸºç¡€5--Maintenanceç»´æŠ¤å‘¨æœŸ/","link":"","permalink":"https://maydaychen.github.io/2024/02/26/Zabbix%E5%9F%BA%E7%A1%805--Maintenance%E7%BB%B4%E6%8A%A4%E5%91%A8%E6%9C%9F/","excerpt":"","text":"æ¦‚è¿°æœ‰æ—¶å€™æˆ‘ä»¬ä¼šå¯¹æœåŠ¡å™¨åšä¸€äº›æ›´æ–°æˆ–è€…æ‰«ææ“ä½œï¼Œè¿™äº›æ“ä½œéå¸¸å®¹æ˜“å¯¼è‡´åœ¨zabbixä¸­ä¸€äº›false alertçš„è§¦å‘æˆ‘ä»¬å¯ä»¥é€‰æ‹©ç›´æ¥æŠŠè¿™ä¸ªæœåŠ¡å™¨disableæ‰ï¼Œä½†æ˜¯è¿™æ ·ä¼šå¯¼è‡´æ²¡æœ‰ä»»ä½•çš„ç›‘æ§æ•°æ®è¿™æ—¶å€™æˆ‘ä»¬å¯ä»¥ä¸ºéœ€è¦æ“ä½œçš„æœåŠ¡å™¨è®¾ç½®ç»´æŠ¤æ¨¡å¼ï¼Œæœ‰æ•ˆé¿å…false alertçš„è§¦å‘ æˆ‘ä»¬å¯ä»¥ç»™æŸäº›Hostsï¼ˆGroupï¼‰è®¾ç½®ç»´æŠ¤æ—¶é—´,zabbixæä¾›ä¸¤ç§ç»´æŠ¤ç±»å‹ï¼š ä¾æ—§æ”¶é›†æ•°æ® æš‚åœæ”¶é›†æ•°æ® åœ¨ æœåŠ¡å™¨ç»´æŠ¤æœŸé—´ä¸ä¼šç”ŸæˆæŠ¥è­¦ï¼ˆå‰æï¼šè§¦å‘å™¨è®¾ç½®äº†â€™Maintenance status &#x3D; not in â€œmaintenanceâ€â€™ï¼‰ï¼Œå¦‚æœåœ¨ç»´æŠ¤æœŸé—´å‡ºç°æ•…éšœï¼Œå¹¶ä¸”æ²¡æœ‰è§£å†³æ‰ï¼Œé‚£ä¹ˆåœ¨ç»´æŠ¤å‘¨æœŸç»“æŸä¹‹åï¼ŒæœåŠ¡å™¨ä¼šç”ŸæˆæŠ¥è­¦.å¦‚æœä½ æƒ³åœ¨ç»´æŠ¤æœŸé—´ä¹Ÿèƒ½æ”¶åˆ°æŠ¥ è­¦ï¼Œé‚£ä¹ˆè§¦å‘å™¨ä¸éœ€è¦è®¾ç½®â€™Maintenance status &#x3D; not in â€œmaintenanceâ€â€™. é…ç½®é…ç½®ç»´æŠ¤å‘¨æœŸ Data Collection â†’ Maintenanceï¼ˆç»´æŠ¤ï¼‰â€”&gt;ç‚¹å‡»Create maintenance period ï¼ˆåˆ›å»ºç»´æŠ¤å‘¨æœŸï¼‰ å‚æ•° æè¿° Name ç»´æŠ¤åç§° Maintenance type ä¸¤ç§ç»´æŠ¤ç±»å‹å¯é€‰:With data collection - ä¾æ—§æ”¶é›†æ•°æ®No data collection - æš‚åœæ”¶é›†æ•°æ® Active since ç»´æŠ¤å‘¨æœŸå¼€å§‹æ—¶é—´ Active till ç»´æŠ¤ç»“æŸæ—¶é—´ .Periods é€‰é¡¹å¡æ˜¯ç»´æŠ¤å‘¨æœŸçš„ï¼Œå¯ä»¥é€‰æ‹©daily, weekly, monthly or one-timeï¼Œå¦‚æ¯å‘¨ä¸€å‡Œæ™¨6ç‚¹å¼€å§‹ç»´æŠ¤ï¼ŒæŒç»­2ä¸ªå°æ—¶ï¼Œä¹Ÿå°±æ˜¯åˆ°å…«ç‚¹ç»“æŸ. å¦‚æœä½ æƒ³æ¯å¤©æ‰§è¡Œï¼Œä¹Ÿå¯ä»¥é€‰æ‹©dailyæˆ–è€…åœ¨weekly é‡Œé€‰æ‹©å‘¨ä¸€åˆ°å‘¨å¤© ç»“æœæŸ¥çœ‹ç»´æŠ¤æ ‡è¯†åœ¨inventoryâ€“&gt;HOSTS-&gt;host inventoryçš„overviewé‡Œé¢å¯ä»¥çœ‹åˆ°ç»´æŠ¤çš„æ ‡ç¤ºï¼ˆæ‰³æ‰‹ï¼‰","categories":[{"name":"è¿ç»´","slug":"è¿ç»´","permalink":"https://maydaychen.github.io/categories/%E8%BF%90%E7%BB%B4/"}],"tags":[{"name":"ç›‘æ§","slug":"ç›‘æ§","permalink":"https://maydaychen.github.io/tags/%E7%9B%91%E6%8E%A7/"},{"name":"Zabbix","slug":"Zabbix","permalink":"https://maydaychen.github.io/tags/Zabbix/"}]},{"title":"ZabbixåŸºç¡€4--Queueç›¸å…³","slug":"ZabbixåŸºç¡€4--Queueç›¸å…³","date":"2024-02-25T07:58:12.000Z","updated":"2025-02-24T15:07:16.199Z","comments":true,"path":"2024/02/25/ZabbixåŸºç¡€4--Queueç›¸å…³/","link":"","permalink":"https://maydaychen.github.io/2024/02/25/Zabbix%E5%9F%BA%E7%A1%804--Queue%E7%9B%B8%E5%85%B3/","excerpt":"","text":"æ¦‚è¿°queueï¼ˆé˜Ÿåˆ—ï¼‰æ˜¾ç¤ºç›‘æ§é¡¹ç­‰å¾…åˆ·æ–°çš„æ—¶é—´,å¯ä»¥çœ‹åˆ°æ¯ç§agentç±»å‹åˆ·æ–°æ—¶é—´ï¼Œé€šè¿‡queueå¯ä»¥æ›´å¥½çš„ä½“ç°å‡ºç›‘æ§çš„ä¸€ä¸ªæŒ‡æ ‡.æ­£å¸¸æƒ…å†µä¸‹ï¼Œæ˜¯ä¸€ç‰‡ç»¿è‰²ã€‚å¦‚æœå‡ºç°è¿‡å¤šçº¢è‰²ï¼Œé‚£ä¹ˆéœ€è¦ç•™æ„ä¸€ä¸‹ã€‚æˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨å³ä¸Šè§’çš„ä¸‹æ‹‰æ¡é€‰detailï¼Œå¯ä»¥æ‰¾å‡ºåˆ°åº•æ˜¯å“ªä¸ªitemçš„é—®é¢˜ã€‚ è¿œç¨‹èŠ‚ç‚¹å»¶è¿Ÿæ¥è‡ªå­èŠ‚ç‚¹ï¼ˆchild nodeï¼‰çš„ä¿¡æ¯éƒ¨éƒ½ä¸æ˜¯æœ€æ–°çš„ã€‚masterèŠ‚ç‚¹æ¥å—åˆ°çš„æ•°æ®éƒ½å­˜åœ¨ä¸€å®šå¾—å»¶è¿Ÿï¼ˆé€šå¸¸æƒ…å†µä¸‹ï¼Œå¤šåˆ™éœ€è¦10ç§’ï¼‰ å†³å®šå­èŠ‚ç‚¹ä¿¡æ¯å»¶è¿Ÿå› ç´  å­èŠ‚ç‚¹æ€§èƒ½ å­èŠ‚ç‚¹ä¸ä¸»èŠ‚ç‚¹ä¹‹é—´çš„é€šä¿¡è´¨é‡ å­èŠ‚ç‚¹ä¸ä¸»èŠ‚ç‚¹ä¹‹é—´çš„æ—¶é—´å·® Queue itemæ—¢ç„¶queueä¹Ÿæ˜¯ä¸€é¡¹æ€§èƒ½æŒ‡æ ‡ï¼Œé‚£ä¹ˆæˆ‘ä»¬ä¹Ÿæœ‰å¾ˆå¿…è¦æŠŠä»–åŠ å…¥ç›‘æ§é¡¹ï¼Œzabbixæä¾›äº†å†…å»ºitem zabbix[queue,,] ï¼Œfromé»˜è®¤ä¸º6ç§’ï¼Œè¡¨ç¤ºè¶…è¿‡å¤šå°‘ç§’ä¾¿æŠ¥è­¦ï¼Œtoé»˜è®¤ä¸ºinfinityï¼Œä¹Ÿå°±æ˜¯æ— é™åˆ¶.","categories":[{"name":"è¿ç»´","slug":"è¿ç»´","permalink":"https://maydaychen.github.io/categories/%E8%BF%90%E7%BB%B4/"}],"tags":[{"name":"ç›‘æ§","slug":"ç›‘æ§","permalink":"https://maydaychen.github.io/tags/%E7%9B%91%E6%8E%A7/"},{"name":"Zabbix","slug":"Zabbix","permalink":"https://maydaychen.github.io/tags/Zabbix/"}]},{"title":"ZabbixåŸºç¡€3--Proxyç›¸å…³","slug":"ZabbixåŸºç¡€3--Proxyç›¸å…³","date":"2024-02-24T07:52:38.000Z","updated":"2025-02-24T15:06:38.963Z","comments":true,"path":"2024/02/24/ZabbixåŸºç¡€3--Proxyç›¸å…³/","link":"","permalink":"https://maydaychen.github.io/2024/02/24/Zabbix%E5%9F%BA%E7%A1%803--Proxy%E7%9B%B8%E5%85%B3/","excerpt":"","text":"æ¦‚è¿°æœåŠ¡å™¨ä¸€å¤šä»¥åŠæœåŠ¡å™¨åˆ†å¸ƒåœ¨å„ä¸ªä¸åŒåœ°åŒºï¼Œä¾¿éœ€è¦è€ƒè™‘ä½¿ç”¨åˆ†å¸ƒå¼ç›‘æ§ï¼Œé‚£ä¹ˆæˆ‘ä»¬åˆ°åº•é€‰æ‹©proxyè¿˜æ˜¯nodeså‘¢,è¯·çœ‹å¦‚ä¸‹çš„å¯¹ç…§è¡¨ï¼Œçœ‹å®Œä¹‹åï¼Œæˆ‘æƒ³ä½ èƒ½é€‰åˆ°ä¸€ä¸ªä½ æ»¡æ„çš„æ–¹å¼ Proxy Node æè¿° Lightweight&#x2F;è½»é‡çº§ Yes No å®‰è£…å®Œæ¯•å³å¯,Proxyå¿…é¡»æ›´è½»é‡çº§ GUI&#x2F;å›¾å½¢ç•Œé¢ No Yes proxyçš„é…ç½®éƒ½åœ¨serversä¸Šï¼Œè€Œnodeæ˜¯ä¸€ä¸ªå®Œæ•´çš„server Works independently&#x2F;ç‹¬ç«‹å·¥ä½œ Yes Yes Easy maintenance&#x2F;æ˜“äºç»´æŠ¤ Yes No Automatic DB creation&#x2F;è‡ªåŠ¨ç”Ÿæˆæ•°æ®åº“ Yes No Local administration&#x2F;æœ¬åœ°ç®¡ç† No Yes Ready for embedded hardware Yes No One way TCP connections Yes Yes Centralised configuration&#x2F;é›†ä¸­é…ç½® Yes No proxyé…ç½®å…¨éƒ¨é›†ä¸­åœ¨serverä¸Šï¼Œnodeè‡ªå·±ç»´æŠ¤è‡ªå·±çš„é…ç½® Generates notifications&#x2F;é€šçŸ¥ No Yes ä½¿ç”¨åœºæ™¯ ç›‘æ§è¿œç¨‹åŒºåŸŸè®¾å¤‡ ç›‘æ§æœ¬åœ°ç½‘ç»œä¸ç¨³å®šåŒºåŸŸ å½“zabbixç›‘æ§ä¸Šåƒè®¾å¤‡æ—¶ï¼Œä½¿ç”¨å®ƒæ¥å‡è½»serverçš„å‹åŠ› ç®€åŒ–zabbixçš„ç»´æŠ¤ ç‰¹ç‚¹zabbix proxyä»…ä»…éœ€è¦ä¸€æ¡tcpè¿æ¥åˆ°zabbix server,æ‰€ä»¥é˜²ç«å¢™ä¸Šä»…ä»…éœ€è¦åŠ ä¸Šä¸€æ¡è§„åˆ™å³å¯.zabbix proxyæ•°æ®åº“å¿…é¡»å’Œserveråˆ†å¼€ï¼Œå¦åˆ™æ•°æ®ä¼šè¢«ç ´åï¼Œæ¯•ç«Ÿè¿™ä¸¤ä¸ªæ•°æ®åº“çš„è¡¨å¤§éƒ¨åˆ†éƒ½ç›¸åŒã€‚æ€»ä¹‹è®°ä½ï¼Œæ•°æ®åº“åˆ†å¼€å³å¯ã€‚ proxyæ”¶é›†åˆ°æ•°æ®ä¹‹åï¼Œé¦–å…ˆå°†æ•°æ®ç¼“å­˜åœ¨æœ¬åœ°ï¼Œç„¶ååœ¨ä¸€å®šå¾—æ—¶é—´ä¹‹åä¼ é€’ç»™zabbix server.è¿™ä¸ªæ—¶é—´ç”±proxyé…ç½®æ–‡ä»¶ä¸­å‚æ•°ProxyLocalBuffer and ProxyOfflineBufferå†³å®š. zabbix proxyæ˜¯ä¸€ä¸ªæ•°æ®æ”¶é›†å™¨ï¼Œå®ƒä¸è®¡ç®—è§¦å‘å™¨ã€ä¸å¤„ç†äº‹ä»¶ã€ä¸å‘é€æŠ¥è­¦ âš ï¸ ä½¿ç”¨agent activeæ¨¡å¼ï¼Œä¸€å®šè¦è®°ä½åœ¨agentçš„é…ç½®æ–‡ä»¶å‚æ•°ServerActiveåŠ ä¸Šproxyçš„IPåœ°å€.åˆ‡è®°","categories":[{"name":"è¿ç»´","slug":"è¿ç»´","permalink":"https://maydaychen.github.io/categories/%E8%BF%90%E7%BB%B4/"}],"tags":[{"name":"ç›‘æ§","slug":"ç›‘æ§","permalink":"https://maydaychen.github.io/tags/%E7%9B%91%E6%8E%A7/"},{"name":"Zabbix","slug":"Zabbix","permalink":"https://maydaychen.github.io/tags/Zabbix/"}]},{"title":"Linuxæ“ä½œè®°å½•3--ç›¸å…³ç®€æ˜“æ“ä½œæ±‡æ€»","slug":"Linuxæ“ä½œè®°å½•3--ç›¸å…³ç®€æ˜“æ“ä½œæ±‡æ€»","date":"2024-02-15T07:22:23.000Z","updated":"2025-02-24T14:47:47.318Z","comments":true,"path":"2024/02/15/Linuxæ“ä½œè®°å½•3--ç›¸å…³ç®€æ˜“æ“ä½œæ±‡æ€»/","link":"","permalink":"https://maydaychen.github.io/2024/02/15/Linux%E6%93%8D%E4%BD%9C%E8%AE%B0%E5%BD%953--%E7%9B%B8%E5%85%B3%E7%AE%80%E6%98%93%E6%93%8D%E4%BD%9C%E6%B1%87%E6%80%BB/","excerpt":"","text":"Ubuntuè·å–rootæƒé™ è¾“å…¥å‘½ä»¤ï¼šsudo su; å±å¹•ä¸Šä¼šå›æ˜¾è¦æ±‚è¾“å…¥å½“å‰ç”¨æˆ·å¯†ç çš„æç¤ºï¼Œè¾“å…¥å¯†ç å³å¯è·å¾—ç®¡ç†å‘˜æƒé™; è‹¥æƒ³é€€å‡ºç®¡ç†å‘˜æƒé™å¯è¾“å…¥å‘½ä»¤ï¼šsu ç”¨æˆ·å. Ubuntu vimæ˜¾ç¤ºè¡Œæ•° è¿›å…¥ç»ˆç«¯ï¼Œåœ¨å‘½ä»¤è¡Œä¸­è¾“å…¥cd &#x2F;etc&#x2F;vim åæ•²å›è½¦ï¼Œè¿›å…¥&#x2F;etc&#x2F;vimç›®å½•ï¼› è¿›å…¥etc&#x2F;vimç›®å½•åï¼Œæ‰¾åˆ°vimrcæ–‡ä»¶ï¼ˆvimçš„åˆå§‹åŒ–æ–‡ä»¶ï¼‰ï¼Œä½¿ç”¨cpå‘½ä»¤å¯¹å…¶è¿›è¡Œå¤‡ä»½ï¼Œå‘½ä»¤ä¸ºï¼šcp vimrc vimrc.bakï¼ˆå¿…é¡»è¦æœ‰ç®¡ç†å‘˜æƒé™ï¼Œå¦åˆ™æ— æ³•æˆåŠŸï¼‰ ç”¨ç®¡ç†å‘˜æƒé™æ‰“å¼€vimrcï¼Œå‘½ä»¤ä¸ºï¼šsudo vi vimrc æ‰“å¼€åï¼Œåœ¨vimrcæ–‡ä»¶æœ€ååŠ å…¥ä¸€è¡Œå‘½ä»¤ï¼šset nu; åŠ å®Œåï¼Œå†™å…¥ï¼Œé€€å‡ºï¼Œï¼ˆesc -&gt; :wqï¼‰ï¼Œé‡æ–°ä½¿ç”¨vimæ‰“å¼€ä»»æ„æ–‡ä»¶å³å¯å‘ç°æœ‰è¡Œå·çš„æ ‡ç¤ºã€‚ navicat for MySQLæ— æ³•è¿æ¥LinuxæœåŠ¡å™¨ä¸­çš„MySQL 1130é”™è¯¯ è¾“å…¥mysql -pè¿›å…¥MySQLï¼Œè¾“å…¥å¯†ç  mysql&gt; grant all privileges on . to root@â€%â€ identified by â€œrootâ€;ç»“æœå¦‚ä¸‹ï¼šQuery OK, 0 rows affected, 1 warning (0.00 sec) é€€å‡ºæ•°æ®åº“mysql&gt; exit å°†&#x2F;etc&#x2F;mysql&#x2F;my.cnfæ–‡ä»¶ä¸­bind-address&#x3D;127.0.0.1 è¿™å¥è¯æ³¨é‡Šæ‰ sudo &#x2F;etc&#x2F;init.d&#x2F;mysql restart é‡å¯MySQLæœåŠ¡æˆåŠŸï¼æ­¤æ—¶navicatå®¢æˆ·ç«¯å·²å¯è¿æ¥æœåŠ¡å™¨MySQL","categories":[{"name":"è¿ç»´","slug":"è¿ç»´","permalink":"https://maydaychen.github.io/categories/%E8%BF%90%E7%BB%B4/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"https://maydaychen.github.io/tags/Linux/"}]},{"title":"ZabbixåŸºç¡€2--Macrosç›¸å…³","slug":"ZabbixåŸºç¡€2--Macrosç›¸å…³","date":"2024-02-11T07:56:45.000Z","updated":"2025-02-24T15:05:57.283Z","comments":true,"path":"2024/02/11/ZabbixåŸºç¡€2--Macrosç›¸å…³/","link":"","permalink":"https://maydaychen.github.io/2024/02/11/Zabbix%E5%9F%BA%E7%A1%802--Macros%E7%9B%B8%E5%85%B3/","excerpt":"","text":"å˜é‡å¯ä»¥ç”¨äºå¦‚ä¸‹åœ°æ–¹ itemåç§° item keyå‚æ•° è§¦å‘å™¨åç§°å’Œæè¿° è§¦å‘å™¨è¡¨è¾¾å¼ å…¶ä»–åœ°æ–¹ å®åç§°å®å˜é‡åç§°å®šä¹‰åªå…è®¸åé¢åŒ…å«åé¢çš„å­—ç¬¦: A-Z , 0-9 , _ ,. å®å˜é‡ä¼˜å…ˆçº§ ä¸»æœºå®(checked first) ä¸»æœºæ¨¡æ¿å®šä¹‰çš„å®,å¦‚æœæœ‰å¤šä¸ªæ¨¡æ¿ï¼Œé‚£ä¹ˆæŒ‰ç…§æ¨¡æ¿è¶Šé å‰é‚£ä¹ˆå®çš„ä¼˜å…ˆçº§è¶Šé«˜ å…¨å±€å®(checked last) è‡ªå®šä¹‰å®å®šä¹‰å…¨å±€å®ï¼Œ Administration â†’ General â†’ Macrosï¼Œä¾‹å¦‚å®åç§°${TTLSA_SITE}ï¼Œå€¼www.ttlsa.com. å®šä¹‰ä¸»æœº&#x2F;æ¨¡æ¿çº§å®å˜é‡ï¼Œç¼–è¾‘ä¸»æœºæˆ–è€…æ¨¡æ¿ï¼Œæ‰¾åˆ°Macrosé€‰é¡¹å¡ï¼Œå®šä¹‰å®å˜é‡ å®å˜é‡ç»å¸¸ç”¨äºæ›¿ä»£è´¦å·ã€ç«¯å£ã€å¯†ç ç­‰ï¼Œä¾‹å¦‚ä½ çš„æŸä¸ªç›‘æ§æƒ³æœ‰ç”¨åˆ°è´¦å·ã€å¯†ç ï¼Œå¯ä»¥å®šä¹‰ä¸ºå®ï¼Œå‡å¦‚ä¸‹æ¬¡è´¦å·å¯†ç æœ‰ä¿®æ”¹ï¼Œåªéœ€è¦ä¿®æ”¹å®å³å¯ã€‚è€Œä¸éœ€è¦æ¯ä¸ªç›‘æ§é¡¹éƒ½å»ä¿®æ”¹è´¦å·å¯†ç ã€‚","categories":[{"name":"è¿ç»´","slug":"è¿ç»´","permalink":"https://maydaychen.github.io/categories/%E8%BF%90%E7%BB%B4/"}],"tags":[{"name":"ç›‘æ§","slug":"ç›‘æ§","permalink":"https://maydaychen.github.io/tags/%E7%9B%91%E6%8E%A7/"},{"name":"Zabbix","slug":"Zabbix","permalink":"https://maydaychen.github.io/tags/Zabbix/"}]},{"title":"ZabbixåŸºç¡€1--Rocky9å®‰è£…Zabbix-Grafana","slug":"ZabbixåŸºç¡€1--Rocky9å®‰è£…Zabbix-Grafana","date":"2024-02-08T09:21:55.000Z","updated":"2025-07-26T09:49:17.338Z","comments":true,"path":"2024/02/08/ZabbixåŸºç¡€1--Rocky9å®‰è£…Zabbix-Grafana/","link":"","permalink":"https://maydaychen.github.io/2024/02/08/Zabbix%E5%9F%BA%E7%A1%801--Rocky9%E5%AE%89%E8%A3%85Zabbix-Grafana/","excerpt":"","text":"å®‰è£…Zabbixå®‰è£…MariaDBè¿™é‡Œç”¨MariaDBæ¼”ç¤ºhttps://mariadb.org/download/?t=repo-config&amp;d=Red+Hat+Enterprise+Linux+9&amp;v=10.11&amp;r_m=neusofté€šè¿‡è¿™ä¸ªç½‘å€è·å¾—è¿æ¥ é€‰æ‹©å¯¹åº”çš„repoæ ¹æ®ç³»ç»Ÿç‰ˆæœ¬å’Œè¦å®‰è£…çš„ç‰ˆæœ¬é€‰æ‹©å¯¹åº”çš„repo å®‰è£…æ–°å»ºä¸€ä¸ªrepoæ–‡ä»¶ï¼Œä¾‹å¦‚&#x2F;etc&#x2F;yum.repos.d&#x2F;MariaDB.repoï¼Œ ç„¶åæŠŠç½‘ç«™ä¸Šæä¾›çš„å†…å®¹å¤åˆ¶è¿›å»ï¼Œä¾‹å¦‚ 12345678910# MariaDB 10.11 RedHatEnterpriseLinux repository list - created 2024-02-29 09:14 UTC# https://mariadb.org/download/[mariadb]name = MariaDB# rpm.mariadb.org is a dynamic mirror if your preferred mirror goes offline. See https://mariadb.org/mirrorbits/ for details.# baseurl = https://rpm.mariadb.org/10.11/rhel/$releasever/$basearchbaseurl = https://mirrors.aliyun.com/mariadb/yum/10.11/rhel/$releasever/$basearch# gpgkey = https://rpm.mariadb.org/RPM-GPG-KEY-MariaDBgpgkey = https://mirrors.aliyun.com/mariadb/yum/RPM-GPG-KEY-MariaDBgpgcheck = 1 ç„¶åå°±æ˜¯å®‰è£…æ­¥éª¤ 12345678sudo dnf install MariaDB-server## å¯é€‰æ­¥éª¤ï¼Œç°åœ¨mariadbçš„å‘½ä»¤ä¸ä¼šè‡ªåŠ¨ç»‘å®šmysqlå‘½ä»¤äº†ï¼Œæ‰€ä»¥ä½ ç°åœ¨ç”¨mysql -uxxx -pä¹‹ç±»çš„ä¼šè·Ÿä½ è¯´å‘½ä»¤ä¸å­˜åœ¨sudo ln -s /usr/bin/mariadb /usr/bin/mysql## å¯åŠ¨å¹¶è®¾ç½®è‡ªåŠ¨å¯åŠ¨sudo systemctl start mysqlsudo systemctl enable mysql è‡³æ­¤ï¼ŒMariaDçš„å®‰è£…å°±ç»“æŸäº† å®‰è£…Zabbix Serverè·Ÿç€è¿™ä¸ªç½‘é¡µçš„å‘½ä»¤èµ°ï¼ŒåŸºæœ¬ä¸ä¼šå‡ºä»€ä¹ˆé—®é¢˜ç”±äºä»Šå¤©æˆ‘ä»¬ä¸»è¦è®²Rockyçš„å®‰è£…ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿™ä¹ˆé€‰ æ¥ä¸‹æ¥çš„æ­¥éª¤ç”±äºå®˜ç½‘å†™çš„å¾ˆè¯¦ç»†ï¼Œæˆ‘å°±ç›´æ¥æŠ„ä¸‹æ¥äº†ï¼Œå„ä½å¯ä»¥çœ‹ä¸€ä¸‹ Install Zabbix repositoryDisable Zabbix packages provided by EPEL, if you have it installed. Edit file &#x2F;etc&#x2F;yum.repos.d&#x2F;epel.repo and add the following statement. 123[epel]...excludepkgs=zabbix* Proceed with installing zabbix repository. 12# rpm -Uvh https://repo.zabbix.com/zabbix/7.0/rocky/9/x86_64/zabbix-release-latest-7.0.el9.noarch.rpm# dnf clean all Install Zabbix server, frontend, agent21# dnf install zabbix-server-mysql zabbix-web-mysql zabbix-nginx-conf zabbix-sql-scripts zabbix-selinux-policy zabbix-agent2 Install Zabbix agent 2 pluginsYou may want to install Zabbix agent 2 plugins. 1# dnf install zabbix-agent2-plugin-mongodb zabbix-agent2-plugin-mssql zabbix-agent2-plugin-postgresql Create initial databaseMake sure you have database server up and running. Run the following on your database host. 1234567# mysql -uroot -ppasswordmysql&gt; create database zabbix character set utf8mb4 collate utf8mb4_bin;mysql&gt; create user zabbix@localhost identified by &#x27;password&#x27;;mysql&gt; grant all privileges on zabbix.* to zabbix@localhost;mysql&gt; set global log_bin_trust_function_creators = 1;mysql&gt; quit; On Zabbix server host import initial schema and data. You will be prompted to enter your newly created password. 1# zcat /usr/share/zabbix-sql-scripts/mysql/server.sql.gz | mysql --default-character-set=utf8mb4 -uzabbix -p zabbix Disable log_bin_trust_function_creators option after importing database schema. 1234# mysql -uroot -ppasswordmysql&gt; set global log_bin_trust_function_creators = 0;mysql&gt; quit; Configure the database for Zabbix serverEdit file &#x2F;etc&#x2F;zabbix&#x2F;zabbix_server.conf 1DBPassword=password Start Zabbix server and agent processesStart Zabbix server and agent processes and make it start at system boot. 12# systemctl restart zabbix-server zabbix-agent2 nginx php-fpm# systemctl enable zabbix-server zabbix-agent2 nginx php-fpm Open Zabbix UI web pageåœ¨Nginxçš„é…ç½®ä¸­ï¼Œzabbixé»˜è®¤ä½¿ç”¨80ç«¯å£ï¼Œä½†æ˜¯ç”±äºæ”¿ç­–é™åˆ¶ï¼Œå…¶å®æˆ‘ä»¬ä¸èƒ½ä½¿ç”¨ï¼Œæ‰€ä»¥è¿™è¾¹æ”¹æˆ8090 123456789vi /etc/nginx/conf.d/zabbix.confserver &#123; ## æŠŠä¸‹é¢è¿™ä¸¤å¥çš„æ³¨é‡Šå»æ‰ï¼Œå†ä¿®æ”¹ä¸€ä¸‹ç«¯å£ listen 8090; server_name example.com;## é‡è½½ä¸€ä¸‹nginxsystemctl reload nginx ç„¶åå°±å¯ä»¥é€šè¿‡IP:8090 çš„å½¢å¼è®¿é—®åˆ°zabbix consoleäº† å®‰è£…Grafanaå®‰è£…ç›´æ¥è¿›ä¸‹é¢è¿™ä¸ªé¡µé¢ï¼Œå¯ä»¥çœ‹åˆ°è¿™è¾¹å¯ä»¥é€‰æ‹©ç‰ˆæœ¬ä»¥åŠæ“ä½œç³»ç»Ÿ å¹¶ä¸”å¦‚æœæ˜¯Linuxå¹³å°çš„ï¼Œä¸‹é¢ä¼šç»™å‡ºä¸åŒå¹³å°çš„å‘½ä»¤ï¼Œç›´æ¥å¤åˆ¶ç²˜è´´æ‰§è¡Œä¸€ä¸‹å°±å¯ä»¥äº† éªŒè¯è¿è¡Œå‘½ä»¤ 12345## è¿è¡Œservicesystemctl start grafana-server## è‡ªå¯åŠ¨systemctl enable grafana-server ä¹‹åæµè§ˆå™¨è®¿é—®IP:3000ï¼Œå°±å¯ä»¥çœ‹åˆ°Grafanaç•Œé¢å•¦é»˜è®¤è´¦å·å¯†ç ä¸ºadmin&#x2F;adminï¼Œç¬¬ä¸€æ¬¡ç™»å½•ä¼šå¼ºåˆ¶ä¿®æ”¹å¯†ç  å…¶ä»–ä¿®æ”¹é»˜è®¤ç«¯å£1234vi /etc/grafana/grafana.ini## æŠŠè¿™ä¸ª3000ä¿®æ”¹æˆåˆ«çš„å³å¯;http_port = 3000 é…ç½®é‚®ä»¶æœåŠ¡ç”¨äºå¿˜è®°å¯†ç ç­‰æƒ…å†µï¼Œå¯ä»¥ä¸é€šçŸ¥ç®¡ç†å‘˜è‡ªè¡Œä¿®æ”¹å¯†ç ","categories":[{"name":"è¿ç»´","slug":"è¿ç»´","permalink":"https://maydaychen.github.io/categories/%E8%BF%90%E7%BB%B4/"}],"tags":[{"name":"ç›‘æ§","slug":"ç›‘æ§","permalink":"https://maydaychen.github.io/tags/%E7%9B%91%E6%8E%A7/"},{"name":"Zabbix","slug":"Zabbix","permalink":"https://maydaychen.github.io/tags/Zabbix/"}]},{"title":"Linuxæ“ä½œè®°å½•2--Nginxä»£ç†ç«¯å£","slug":"Linuxæ“ä½œè®°å½•2--Nginxä»£ç†ç«¯å£","date":"2024-01-25T06:57:07.000Z","updated":"2025-07-14T03:24:59.000Z","comments":true,"path":"2024/01/25/Linuxæ“ä½œè®°å½•2--Nginxä»£ç†ç«¯å£/","link":"","permalink":"https://maydaychen.github.io/2024/01/25/Linux%E6%93%8D%E4%BD%9C%E8%AE%B0%E5%BD%952--Nginx%E4%BB%A3%E7%90%86%E7%AB%AF%E5%8F%A3/","excerpt":"","text":"Nginx å®‰è£…å‚ç…§è¿™ä¸ªé“¾æ¥å°±å¥½äº†http://nginx.org/en/linux_packages.html#RHELä½¿ç”¨nginx -Vï¼Œ çœ‹åˆ°å¦‚ä¸‹ç•Œé¢ï¼Œå°±OKäº† Nginxé…ç½®åœ¨&#x2F;etc&#x2F;nginx&#x2F;nginx.confæœ€ä¸‹é¢åŠ å…¥å¦‚ä¸‹ä»£ç  1234567891011stream &#123; upstream ssh&#123; server 1.2.3.4:22; &#125; server &#123; listen 8022; proxy_connect_timeout 1h; proxy_timeout 1h; proxy_pass ssh; &#125;&#125; é‡è½½é…ç½®1systemctl reload nginx ç„¶åå°±å¯ä»¥ç”¨8022ç«¯å£å»è¿æ¥æœåŠ¡å™¨å•¦","categories":[{"name":"è¿ç»´","slug":"è¿ç»´","permalink":"https://maydaychen.github.io/categories/%E8%BF%90%E7%BB%B4/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"https://maydaychen.github.io/tags/Linux/"}]},{"title":"NASæ‚è®°2--HomeAssistantç¬”è®°--æ›´æ¢iOS Themesä¸»é¢˜","slug":"NASæ‚è®°2--HomeAssistantæ›´æ¢iOS-Themesä¸»é¢˜","date":"2023-11-24T23:58:37.000Z","updated":"2025-02-24T10:06:30.000Z","comments":true,"path":"2023/11/25/NASæ‚è®°2--HomeAssistantæ›´æ¢iOS-Themesä¸»é¢˜/","link":"","permalink":"https://maydaychen.github.io/2023/11/25/NAS%E6%9D%82%E8%AE%B02--HomeAssistant%E6%9B%B4%E6%8D%A2iOS-Themes%E4%B8%BB%E9%A2%98/","excerpt":"","text":"ä¸»é¢˜é“¾æ¥ï¼šhttps://github.com/basnijholt/lovelace-ios-themes é…ç½®è¿‡ç¨‹ ä¸»é¢˜éœ€è¦åœ¨HACSä¸­å®‰è£…ï¼Œæœç´¢iOSåº”è¯¥å°±èƒ½çœ‹åˆ° é…ç½®ä¸­åŠ å…¥: 123456æ–‡ä»¶åï¼š /config/configuration.yaml# Load frontend themes from the themes folderfrontend: themes: !include_dir_merge_named themes æŠŠä¸»é¢˜æ”¾ç½®åœ¨themesä¸‹themesæ–‡ä»¶å¤¹åœ¨dockerä¸­HAçš„æ ¹ç›®å½•ä¸‹ å»ºwwwç›®å½•å­˜æ”¾å›¾ç‰‡èµ„æº æ³¨æ„ï¼šwwwæ–‡ä»¶å¤¹ä¸themesæ–‡ä»¶å¤¹åŒä¸€å±‚çº§ åœ¨wwwç›®å½•ä¸­å»ºç«‹è·Ÿthemesç›®å½•ä¸­ä¸€æ ·çš„æ–‡ä»¶å¤¹åç§°ï¼Œä¾‹å¦‚è¿™é‡Œå«åšios-themes åœ¨wwwçš„æ’ä»¶æ–‡ä»¶å¤¹ä¸­ï¼Œä¿®æ”¹ios-themes.yaml 1234567891011ä¸»è¦æ˜¯è¿™è¾¹çš„ä¿®æ”¹æŠŠwwwæ”¹ä¸ºlocal, è·¯å¾„æ›´æ”¹background-image: &quot;center / cover no-repeat fixed url(&#x27;/hacsfiles/themes/homekit-bg-dark-green.jpg&#x27;)&quot;æ”¹æˆbackground-image: &quot;center / cover no-repeat fixed url(&#x27;/local/ios-themes/homekit-bg-dark-green.jpg&#x27;)&quot; localæ–‡ä»¶å¤¹å…¶å®å°±æ˜¯å€¼å¾—wwwæ–‡ä»¶å¤¹ï¼ˆæ³¨æ„ä¸æ˜¯æŠŠwwwæ–‡ä»¶å¤¹æ”¹åæˆlocalæ–‡ä»¶å¤¹ï¼‰ å¦‚æœä¸æ”¹çš„è¯ï¼Œç³»ç»Ÿä¼šæ‰¾ä¸åˆ°è¿™ä¸ªå›¾ç‰‡ï¼Œå¯¼è‡´é¦–é¡µä¸ä¼šä¿®æ”¹èƒŒæ™¯å›¾ é‡å¯HA","categories":[{"name":"Tools","slug":"Tools","permalink":"https://maydaychen.github.io/categories/Tools/"}],"tags":[{"name":"NAS","slug":"NAS","permalink":"https://maydaychen.github.io/tags/NAS/"}]},{"title":"Ansibleç¬”è®°2--delegate_toæŒ‡ä»¤","slug":"Ansibleç¬”è®°2--delegate-toæŒ‡ä»¤","date":"2023-11-22T02:22:08.000Z","updated":"2025-02-24T09:42:46.000Z","comments":true,"path":"2023/11/22/Ansibleç¬”è®°2--delegate-toæŒ‡ä»¤/","link":"","permalink":"https://maydaychen.github.io/2023/11/22/Ansible%E7%AC%94%E8%AE%B02--delegate-to%E6%8C%87%E4%BB%A4/","excerpt":"","text":"åœºæ™¯ä»‹ç»ç›®å‰æ‰§è¡ŒAnsibleçš„è¿‡ç¨‹ä¸­ï¼Œé‡åˆ°è¿™ä¹ˆä¸€ä¸ªéœ€æ±‚ï¼Œåœ¨è¿œç¨‹æœåŠ¡å™¨ä¸Šæ‰§è¡Œä¸€ç³»åˆ—æ“ä½œï¼Œä½†æ˜¯è¿™ä¸ªæ“ä½œéœ€è¦ç”¨åˆ°ä¸€ç»„æ•°æ®ï¼Œè¯¥æ•°æ®å­˜åœ¨äºAnsibleæœåŠ¡å™¨ä¸­çš„ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œä½†æ˜¯è¿œç¨‹æœåŠ¡å™¨æ— æ³•è¯»å–åˆ°è¯¥æ–‡ä»¶ï¼Œæ‰€ä»¥æŸ¥åˆ°äº†è¿™ä¸ªæŒ‡ä»¤ï¼ŒAnsible çš„ä»»åŠ¡å§”æ´¾åŠŸèƒ½ï¼ˆdelegate_toï¼‰ã€‚ ä½¿ç”¨ delegate_to å…³é”®å­—å¯ä»¥å§”æ´¾ä»»åŠ¡åˆ°æŒ‡å®šçš„æœºå™¨ä¸Šè¿è¡Œã€‚ åœ¨ playbook çš„æ“ä½œå¦‚ä¸‹ï¼š 12345678## è¯»å–æŒ‡å®šçš„localhostä¸Šçš„æ–‡ä»¶å¹¶å®šä¹‰ä¸ºå˜é‡- name: read read_csv: path: &quot;&#123;&#123; csv_tmp_path &#125;&#125;&quot; delimiter: &#x27;,&#x27; register: file_list changed_when: false delegate_to: localhost ä»»åŠ¡å§”æ´¾åŠŸèƒ½è¿˜å¯ä»¥ç”¨äºä»¥ä¸‹åœºæ™¯ï¼š åœ¨éƒ¨ç½²ä¹‹å‰å°†ä¸€ä¸ªä¸»æœºä»ä¸€ä¸ªè´Ÿè½½å‡è¡¡é›†ç¾¤ä¸­åˆ é™¤ï¼› å½“ä½ è¦å¯¹ä¸€ä¸ªä¸»æœºåšæ”¹å˜ä¹‹å‰å»æ‰ç›¸åº” dns çš„è®°å½•ï¼› å½“åœ¨ä¸€ä¸ªå­˜å‚¨è®¾å¤‡ä¸Šåˆ›å»º iscsi å·çš„æ—¶å€™ï¼› å½“ä½¿ç”¨å¤–çš„ä¸»æœºæ¥æ£€æµ‹ç½‘ç»œå‡ºå£æ˜¯å¦æ­£å¸¸çš„æ—¶å€™ã€‚ å§”æ‰˜ï¼ˆdelegateï¼‰é€šè¿‡â€delegate_toâ€, ç”¨æˆ·å¯ä»¥æŠŠæŸä¸€ä¸ªä»»åŠ¡æ”¾åœ¨å§”æ‰˜çš„æœºå™¨ä¸Šæ‰§è¡Œ. 1234567hosts: webserversserial: 5tasks: - name: take out of load balancer pool command: /usr/bin/take_out_of_pool &#123;&#123; inventory_hostname &#125;&#125; delegate_to: 127.0.0.1 æ— è®ºå®šä¹‰äº†hostsæ˜¯ä»€ä¹ˆï¼Œä¸Šé¢çš„è¿™ä¸ªtaskéƒ½åªä¼šåœ¨localhost(å³ansibleè¿è¡Œçš„æœºå™¨)ä¸Šæ‰§è¡Œ, å¦‚æœåªæ˜¯æƒ³åœ¨æœ¬åœ°æ‰§è¡Œï¼Œâ€œdelegate_to: 127.0.0.1â€ ä¹Ÿå¯ä»¥ç”¨local_actionæ¥ä»£æ›¿ 1234tasks: - name: take out of load balancer pool local_action: command /usr/bin/take_out_of_pool &#123;&#123; inventory_hostname &#125;&#125; å§”æ‰˜è€…çš„factsé»˜è®¤æƒ…å†µä¸‹, å§”æ‰˜ä»»åŠ¡çš„factsæ˜¯inventory_hostnameä¸­ä¸»æœºçš„facts, è€Œä¸æ˜¯è¢«å§”æ‰˜æœºå™¨çš„facts. åœ¨ansible 2.0 ä¸­, è®¾ç½®delegate_factsä¸ºtrueå¯ä»¥è®©ä»»åŠ¡å»æ”¶é›†è¢«å§”æ‰˜æœºå™¨çš„facts. 1234567- hosts: app_servers tasks: - name: gather facts from db servers setup: delegate_to: &quot;&#123;&#123;item&#125;&#125;&quot; delegate_facts: True with_items: &quot;&#123;&#123;groups[&#x27;dbservers&#x27;&#125;&#125;&quot; è¯¥ä¾‹å­ä¼šæ”¶é›†dbserversçš„factså¹¶åˆ†é…ç»™è¿™äº›æœºå™¨, è€Œä¸ä¼šå»æ”¶é›†app_serversçš„facts run_onceé€šè¿‡run_once: trueæ¥æŒ‡å®šè¯¥taskåªèƒ½åœ¨æŸä¸€å°æœºå™¨ä¸Šæ‰§è¡Œä¸€æ¬¡. å¯ä»¥å’Œdelegate_to ç»“åˆä½¿ç”¨ 123- command: /opt/application/upgrade_db.py run_once: true delegate_to: web01.example.org æŒ‡å®šåœ¨â€web01.example.orgâ€ä¸Šæ‰§è¡Œè¿™ä¸ªtask å¦‚æœæ²¡æœ‰delegate_to, é‚£ä¹ˆè¿™ä¸ªtaskåªä¼šåœ¨å½“å‰ä¸»æœºç»„çš„ç¬¬ä¸€å°æœºå™¨ä¸Šæ‰§è¡Œ","categories":[{"name":"è¿ç»´","slug":"è¿ç»´","permalink":"https://maydaychen.github.io/categories/%E8%BF%90%E7%BB%B4/"}],"tags":[{"name":"Ansible","slug":"Ansible","permalink":"https://maydaychen.github.io/tags/Ansible/"}]},{"title":"Ansibleç¬”è®°1--è·å–å½“å‰æ—¥æœŸæ—¶é—´","slug":"Ansibleç¬”è®°1--è·å–å½“å‰æ—¥æœŸæ—¶é—´","date":"2023-11-21T05:34:45.000Z","updated":"2025-02-24T09:42:46.000Z","comments":true,"path":"2023/11/21/Ansibleç¬”è®°1--è·å–å½“å‰æ—¥æœŸæ—¶é—´/","link":"","permalink":"https://maydaychen.github.io/2023/11/21/Ansible%E7%AC%94%E8%AE%B01--%E8%8E%B7%E5%8F%96%E5%BD%93%E5%89%8D%E6%97%A5%E6%9C%9F%E6%97%B6%E9%97%B4/","excerpt":"","text":"è·å–å½“å‰æ—¥æœŸ123- name: Display current date and time ansible.builtin.debug: msg: &quot;Current date and time is &#123;&#123; ansible_date_time.date &#125;&#125;&quot; è·å–åˆ°çš„æ—¥æœŸæ ¼å¼æ˜¯YYYY-MM-DD, å¦‚æœæƒ³æ”¹æˆå…¶ä»–æ ¼å¼ï¼Œå¯ä»¥ä½¿ç”¨æ­£åˆ™è·å–å¹´æœˆæ—¥ 123- name: Format current date ansible.builtin.debug: msg: &quot;Formatted date: &#123;&#123; ansible_date_time.date | regex_replace(&#x27;^(\\\\d&#123;4&#125;)-(\\\\d&#123;2&#125;)-(\\\\d&#123;2&#125;)$&#x27;, &#x27;\\\\3/\\\\2/\\\\1&#x27;) &#125;&#125;&quot; \\1 - å¹´ \\2 - æœˆ \\3 - æ—¥ è·å–å½“å‰æ—¶é—´123- name: Display current date and time ansible.builtin.debug: msg: &quot;Current date and time is &#123;&#123; ansible_date_time.time &#125;&#125;&quot; é—®é¢˜â€˜ansible_date_timeâ€™ is undefined è§£å†³æ–¹æ¡ˆï¼š ansible_date_timeæ˜¯äº‹å®çš„ä¸€éƒ¨åˆ†ï¼Œæ‰€ä»¥éœ€è¦è®¾ç½® 1gather_facts: true","categories":[{"name":"è¿ç»´","slug":"è¿ç»´","permalink":"https://maydaychen.github.io/categories/%E8%BF%90%E7%BB%B4/"}],"tags":[{"name":"Ansible","slug":"Ansible","permalink":"https://maydaychen.github.io/tags/Ansible/"}]},{"title":"NASæ‚è®°1--å°ç¿¼ç®¡å®¶è·å–ç”µä¿¡å…‰çŒ«è¶…å¯†æ•™ç¨‹","slug":"NASæ‚è®°1--å°ç¿¼ç®¡å®¶è·å–ç”µä¿¡å…‰çŒ«è¶…å¯†æ•™ç¨‹","date":"2023-11-20T14:03:14.000Z","updated":"2025-02-24T10:06:30.000Z","comments":true,"path":"2023/11/20/NASæ‚è®°1--å°ç¿¼ç®¡å®¶è·å–ç”µä¿¡å…‰çŒ«è¶…å¯†æ•™ç¨‹/","link":"","permalink":"https://maydaychen.github.io/2023/11/20/NAS%E6%9D%82%E8%AE%B01--%E5%B0%8F%E7%BF%BC%E7%AE%A1%E5%AE%B6%E8%8E%B7%E5%8F%96%E7%94%B5%E4%BF%A1%E5%85%89%E7%8C%AB%E8%B6%85%E5%AF%86%E6%95%99%E7%A8%8B/","excerpt":"","text":"è½¬è‡ªhttps://www.bilibili.com/read/cv22351257/è‡ªç”¨ï¼Œä¾µåˆ  æ–¹æ³•ä¸€ï¼šè‹¹æœæ‰‹æœºï¼ˆæœ€ç®€å•ï¼‰ è‹¹æœæ‰‹æœºåœ¨App Storeä¸‹è½½æŠ“åŒ…è½¯ä»¶streamï¼ŒåŠå°ç¿¼ç®¡å®¶ï¼ˆç»‘å®šå…‰çŒ«ï¼‰ã€‚è¿æ¥å…‰çŒ«WiFi streamè½¯ä»¶æ‰“å¼€HTTMSæŠ“åŒ…ï¼Œå®‰è£…CAè¯ä¹¦å¹¶ä¿¡ä»» ç‚¹å‡»å¼€å§‹æŠ“åŒ…ï¼Œæ‰“å¼€å°ç¿¼ç®¡å®¶ï¼Œç‚¹å‡»ç½‘å…³è®¾ç½®ï¼Œç„¶åéšä¾¿ç‚¹å‡»ï¼ˆæ¯”å¦‚æŒ‡ç¤ºç¯ï¼Œä¸ç‚¹ä¹Ÿå¯ä»¥ï¼‰ã€‚ å›åˆ°streamï¼Œåœæ­¢æŠ“åŒ…ã€‚ç‚¹å‡»æŠ“åŒ…å†å²ã€‚å…¨éƒ¨è¯·æ±‚æ‰¾åˆ°ä»»æ„ä¸€ä¸ªå«æœ‰token&#x3D;çš„POSTç½‘å€å¹¶ç‚¹å‡»è¿›å»ï¼ˆä¸è¡Œå°±å¤šè¯•å‡ ä¸ªPOSTç½‘å€ï¼‰ï¼Œç‚¹å‡»å³ä¸Šè§’å‘ä¸Šçš„ç®­å¤´ï¼Œå¼¹å‡ºæ›´å¤šæ“ä½œï¼Œç‚¹å‡»ç¼–è¾‘é‡æ”¾è¯·æ±‚ã€‚ ç‚¹å‡»æœ€ä¸‹é¢çš„è¯·æ±‚ä½“æœ€ä¸‹é¢ä¸€è¡Œï¼Œç‚¹å‡»åŸå§‹æ•°æ®ï¼Œåˆ é™¤æ¸…ç©ºå¹¶ç²˜è´´ä»¥ä¸‹ä»£ç å¹¶ç‚¹å‡»å­˜å‚¨ï¼šï¼ˆæ³¨æ„æ ¼å¼ï¼‰ { â€œParamsâ€: [], â€œMethodNameâ€: â€œGetTAPasswdâ€, â€œRPCMethodâ€: â€œCallMethodâ€, â€œObjectPathâ€: â€œ&#x2F;com&#x2F;ctc&#x2F;igd1&#x2F;Telecom&#x2F;Systemâ€, â€œInterfaceNameâ€: â€œcom.ctc.igd1.SysCmdâ€, â€œServiceNameâ€: â€œcom.ctc.igd1â€ } æœ€åç‚¹å‡»å³ä¸Šè§’å¼€å§‹æŒ‰é’®ï¼Œç‚¹å‡»å“åº”æœ€ä¸‹é¢çš„BODYå³å¯çœ‹åˆ°ï¼ˆå¦‚æœç»“æœè¿”å›é”™è¯¯ï¼ŒåŸå› æ˜¯ä»¥ä¸Šçš„ä»£ç æ ¼å¼ä¸æ­£ç¡®æˆ–è€…æ˜¯POSTç½‘å€æ²¡æ‰¾å¯¹ï¼‰ æ³¨ï¼šå¯†ç æ ¼å¼ï¼štelecomadmin12345678ï¼Œè´¦å·é»˜è®¤æ˜¯telecomadminã€‚","categories":[{"name":"Tools","slug":"Tools","permalink":"https://maydaychen.github.io/categories/Tools/"}],"tags":[{"name":"NAS","slug":"NAS","permalink":"https://maydaychen.github.io/tags/NAS/"}]},{"title":"Linuxæ“ä½œè®°å½•1--ç³»ç»Ÿç›˜æ‰©å®¹","slug":"Linuxæ“ä½œè®°å½•1--ç³»ç»Ÿç›˜æ‰©å®¹","date":"2023-11-13T11:13:57.000Z","updated":"2025-02-24T14:47:47.311Z","comments":true,"path":"2023/11/13/Linuxæ“ä½œè®°å½•1--ç³»ç»Ÿç›˜æ‰©å®¹/","link":"","permalink":"https://maydaychen.github.io/2023/11/13/Linux%E6%93%8D%E4%BD%9C%E8%AE%B0%E5%BD%951--%E7%B3%BB%E7%BB%9F%E7%9B%98%E6%89%A9%E5%AE%B9/","excerpt":"","text":"å…ˆåœ¨äº‘æ§åˆ¶å°æ–°å¢å®¹é‡ è¿è¡Œä¸‹é¢çš„å‘½ä»¤ä»¥æŸ¥çœ‹æ ¹ç›®å½•ç›®å‰çš„å®¹é‡ 1234567891011[root@ip-172-17-6-219 ~]$ df -hTFilesystem Type Size Used Avail Use% Mounted ondevtmpfs devtmpfs 461M 0 461M 0% /devtmpfs tmpfs 479M 0 479M 0% /dev/shmtmpfs tmpfs 479M 780K 478M 1% /runtmpfs tmpfs 479M 0 479M 0% /sys/fs/cgroup/dev/nvme0n1p1 xfs 8.0G 5.6G 2.5G 70% /tmpfs tmpfs 96M 0 96M 0% /run/user/1015tmpfs tmpfs 96M 0 96M 0% /run/user/1014tmpfs tmpfs 96M 0 96M 0% /run/user/0tmpfs tmpfs 96M 0 96M 0% /run/user/1028 è¿è¡Œä¸‹é¢çš„å‘½ä»¤æ¥æŸ¥çœ‹å®é™…å®¹é‡ 12345[root@ip-172-17-6-219 ~]$ lsblkNAME MAJ:MIN RM SIZE RO TYPE MOUNTPOINTnvme0n1 259:0 0 15G 0 disk|-nvme0n1p1 259:1 0 8G 0 part /`-nvme0n1p128 259:2 0 1M 0 part è¿è¡Œä¸‹é¢çš„å‘½ä»¤æ¥å¢åŠ å®¹é‡ï¼ˆæœ€åçš„1ä¸ºç›®æ ‡ç›˜åœ¨è¿™ä¸ªnvme0n1ï¼‰ä¸­çš„åºå· 12[root@ip-172-17-6-219 ~]$ sudo growpart /dev/nvme0n1 1CHANGED: partition=1 start=4096 old: size=16773087 end=16777183 new: size=31453151 end=31457247 ä¸ºäº†éªŒè¯å®¹é‡æ˜¯å¦å·²ç»è¢«æ·»åŠ , æˆ‘ä»¬å¯ä»¥å†æ¬¡ä½¿ç”¨lsblkå‘½ä»¤ 12345[root@ip-172-17-6-219 ~]$ lsblkNAME MAJ:MIN RM SIZE RO TYPE MOUNTPOINTnvme0n1 259:0 0 15G 0 disk|-nvme0n1p1 259:1 0 15G 0 part /`-nvme0n1p128 259:2 0 1M 0 part æ ¹æ®æ–‡ä»¶ç³»ç»Ÿä¸åŒè¿è¡Œä¸åŒçš„å‘½ä»¤ å¦‚æœæ˜¯xfsæ–‡ä»¶ç³»ç»Ÿ: sudo xfs_growfs -d &#x2F; 1234567891011[root@ip-172-17-6-219 ~]$ sudo xfs_growfs -d /meta-data=/dev/nvme0n1p1 isize=512 agcount=4, agsize=524159 blks = sectsz=512 attr=2, projid32bit=1 = crc=1 finobt=1 spinodes=0data = bsize=4096 blocks=2096635, imaxpct=25 = sunit=0 swidth=0 blksnaming =version 2 bsize=4096 ascii-ci=0 ftype=1log =internal bsize=4096 blocks=2560, version=2 = sectsz=512 sunit=0 blks, lazy-count=1realtime =none extsz=4096 blocks=0, rtextents=0data blocks changed from 2096635 to 3931643 å¦‚æœæ˜¯ext4æ–‡ä»¶ç³»ç»Ÿ: 1sudo resize2fs /dev/nvme5n1p2","categories":[{"name":"è¿ç»´","slug":"è¿ç»´","permalink":"https://maydaychen.github.io/categories/%E8%BF%90%E7%BB%B4/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"https://maydaychen.github.io/tags/Linux/"}]},{"title":"Linuxé—®é¢˜è®°å½•1--Nginxé…ç½®åå‘ä»£ç†æ—¶å‡ºç°çš„13: Permission denied) while connecting to upstream, client: 127.0.0.1","slug":"Linuxé—®é¢˜è®°å½•1--Nginxé…ç½®åå‘ä»£ç†æ—¶å‡ºç°çš„13-Permission-denied-while-connecting-to-upstream-client-127-0-0-1","date":"2023-11-01T07:09:12.000Z","updated":"2025-02-24T14:51:10.431Z","comments":true,"path":"2023/11/01/Linuxé—®é¢˜è®°å½•1--Nginxé…ç½®åå‘ä»£ç†æ—¶å‡ºç°çš„13-Permission-denied-while-connecting-to-upstream-client-127-0-0-1/","link":"","permalink":"https://maydaychen.github.io/2023/11/01/Linux%E9%97%AE%E9%A2%98%E8%AE%B0%E5%BD%951--Nginx%E9%85%8D%E7%BD%AE%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86%E6%97%B6%E5%87%BA%E7%8E%B0%E7%9A%8413-Permission-denied-while-connecting-to-upstream-client-127-0-0-1/","excerpt":"","text":"æ¡ä»¶ä¸å…è®¸çš„æƒ…å†µä¸‹ï¼ˆä¸èƒ½éšæ„é‡å¯è®¡ç®—æœºï¼‰æ‰§è¡Œä¸‹åˆ—ä»£ç ï¼š 1setsebool -P httpd_can_network_connect 1 å…¶ä»–æƒ…å†µä¸‹, å¯ä»¥è·å–rootæƒé™ï¼Œé€šè¿‡rootä¿®æ”¹&#x2F;etc&#x2F;selinux&#x2F;config 123456789sudo suvim /etc/selinux/configSELINUX=enforcingæ”¹ä¸ºSELINUX=disabledé‡å¯æœåŠ¡å™¨","categories":[{"name":"è¿ç»´","slug":"è¿ç»´","permalink":"https://maydaychen.github.io/categories/%E8%BF%90%E7%BB%B4/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"https://maydaychen.github.io/tags/Linux/"}]},{"title":"Hexoå­¦ä¹ æ—¥å¿—1--æ›´æ–°github-pagesåšå®¢","slug":"Hexoå­¦ä¹ æ—¥å¿—1--æ›´æ–°github-pagesåšå®¢","date":"2023-10-12T07:23:01.000Z","updated":"2025-02-24T09:53:44.000Z","comments":true,"path":"2023/10/12/Hexoå­¦ä¹ æ—¥å¿—1--æ›´æ–°github-pagesåšå®¢/","link":"","permalink":"https://maydaychen.github.io/2023/10/12/Hexo%E5%AD%A6%E4%B9%A0%E6%97%A5%E5%BF%971--%E6%9B%B4%E6%96%B0github-pages%E5%8D%9A%E5%AE%A2/","excerpt":"","text":"#æ–‡ä»¶ç”ŸæˆåŠç¼–è¾‘ 1hexo new &quot;æ–‡ç« æ ‡é¢˜&quot; é€šè¿‡è¯¥å‘½ä»¤è¡Œï¼Œå¯ä»¥åœ¨ â€œåšå®¢æ‰€åœ¨è·¯å¾„\\source_posts\\â€ä¸‹ç”Ÿæˆä¸€ä¸ªmdæ–‡ä»¶ï¼Œæ–‡ä»¶åç§°ä¸ºä¸Šé¢å‘½ä»¤è¡Œæ‰€è¾“å…¥çš„æ–‡ç« æ ‡é¢˜ ç”±äºç”Ÿæˆçš„æ˜¯markdownæ ¼å¼çš„æ–‡ä»¶ï¼Œæ‰€ä»¥å»ºè®®ä½¿ç”¨ä¸€ä¸ªmarkdownç¼–å†™å®Œæˆåï¼Œå¤åˆ¶ç²˜è´´åˆ°è¯¥mdæ–‡ä»¶ä¸­ã€‚ #æ–‡ä»¶å‘å¸ƒç¼–è¾‘å®Œæˆåï¼Œåœ¨å‘½ä»¤è¡Œè¾“å…¥ 1hexo g æ–‡ç« å°±ä¼šå‘å¸ƒåˆ°æœ¬åœ°ï¼Œç„¶åé€šè¿‡ 1hexo s å°†æ–‡ä»¶å˜åŒ–å‘å¸ƒåˆ°æœ¬åœ°ç¯å¢ƒï¼Œæ­¤æ—¶å¯ä»¥é€šè¿‡è®¿é—®localhost:4000ï¼ŒæŸ¥çœ‹è‡ªå·±åšå®¢ç›¸å…³å˜åŒ– #åŒæ­¥åˆ°GitHub 1hexo d æˆåŠŸåŒæ­¥åˆ°GitHubï¼ˆå‰ææ˜¯è·ŸGitHubå·²ç»é…å¯¹ï¼‰ï¼","categories":[{"name":"åšå®¢ç›¸å…³","slug":"åšå®¢ç›¸å…³","permalink":"https://maydaychen.github.io/categories/%E5%8D%9A%E5%AE%A2%E7%9B%B8%E5%85%B3/"}],"tags":[{"name":"Hexo","slug":"Hexo","permalink":"https://maydaychen.github.io/tags/Hexo/"}]},{"title":"Hexoé—®é¢˜è®°å½•1--gæŠ¥é”™-Cannot-read-properties-of-undefined-reading-count","slug":"Hexoé—®é¢˜è®°å½•1--gæŠ¥é”™-Cannot-read-properties-of-undefined-reading-count","date":"2023-08-27T14:07:18.000Z","updated":"2025-02-24T15:34:02.387Z","comments":true,"path":"2023/08/27/Hexoé—®é¢˜è®°å½•1--gæŠ¥é”™-Cannot-read-properties-of-undefined-reading-count/","link":"","permalink":"https://maydaychen.github.io/2023/08/27/Hexo%E9%97%AE%E9%A2%98%E8%AE%B0%E5%BD%951--g%E6%8A%A5%E9%94%99-Cannot-read-properties-of-undefined-reading-count/","excerpt":"","text":"é—®é¢˜åœ¨ç¼–è¯‘åšå®¢çš„æ—¶å€™ï¼Œå‘ç°äº†ä¸€ä¸ªé—®é¢˜ 12345678910111213141516171819hexo gINFO Validating configINFO Start processingFATAL Something&#x27;s wrong. Maybe you can find the solution here: https://hexo.io/docs/troubleshooting.htmlTypeError: Cannot read properties of undefined (reading &#x27;count&#x27;) at module.exports (/Users/xxx/Documents/blog/node_modules/hexo-baidu-url-submit/lib/generator.js:4:41) at Hexo.tryCatcher (/Users/xxx/Documents/blog/node_modules/bluebird/js/release/util.js:16:23) at Hexo.&lt;anonymous&gt; (/Users/xxx/Documents/blog/node_modules/bluebird/js/release/method.js:15:34) at /Users/xxx/Documents/blog/node_modules/hexo/lib/hexo/index.js:407:22 at tryCatcher (/Users/xxx/Documents/blog/node_modules/bluebird/js/release/util.js:16:23) at MappingPromiseArray._promiseFulfilled (/Users/xxx/Documents/blog/node_modules/bluebird/js/release/map.js:68:38) at PromiseArray._iterate (/Users/xxx/Documents/blog/node_modules/bluebird/js/release/promise_array.js:115:31) at MappingPromiseArray.init (/Users/xxx/Documents/blog/node_modules/bluebird/js/release/promise_array.js:79:10) at MappingPromiseArray._asyncInit (/Users/xxx/Documents/blog/node_modules/bluebird/js/release/map.js:37:10) at _drainQueueStep (/Users/xxx/Documents/blog/node_modules/bluebird/js/release/async.js:97:12) at _drainQueue (/Users/xxx/Documents/blog/node_modules/bluebird/js/release/async.js:86:9) at Async._drainQueues (/Users/xxx/Documents/blog/node_modules/bluebird/js/release/async.js:102:5) at Async.drainQueues [as _onImmediate] (/Users/xxx/Documents/blog/node_modules/bluebird/js/release/async.js:15:14) at process.processImmediate (node:internal/timers:476:21) æ’æŸ¥é—®é¢˜1hexo g --debug é€šè¿‡debugæ¨¡å¼æŸ¥çœ‹é—®é¢˜æ‰€åœ¨ï¼Œå‘ç°é—®é¢˜æ‰€åœ¨ 12345614:02:48.751 DEBUG Generator: post14:02:48.753 DEBUG Generator: archive14:02:48.753 DEBUG Generator: index14:02:48.754 DEBUG Generator: atom14:02:48.762 DEBUG Generator: baidu_url_generator14:02:48.763 FATAL Something&#x27;s wrong. Maybe you can find the solution here: https://hexo.io/docs/troubleshooting.html Issue Linkhttps://github.com/hexojs/hexo/issues/2402 è¯¥æ’ä»¶çš„ç›¸å…³æ–‡æ¡£https://hui-wang.info/2016/10/23/Hexoæ’ä»¶ä¹‹ç™¾åº¦ä¸»åŠ¨æäº¤é“¾æ¥/","categories":[{"name":"åšå®¢ç›¸å…³","slug":"åšå®¢ç›¸å…³","permalink":"https://maydaychen.github.io/categories/%E5%8D%9A%E5%AE%A2%E7%9B%B8%E5%85%B3/"}],"tags":[{"name":"Hexo","slug":"Hexo","permalink":"https://maydaychen.github.io/tags/Hexo/"}]},{"title":"Dockerå…¥é—¨1--Dockeræ¦‚è¿°","slug":"Dockerå…¥é—¨1--Dockeræ¦‚è¿°","date":"2023-08-27T09:49:33.000Z","updated":"2025-02-24T09:45:11.000Z","comments":true,"path":"2023/08/27/Dockerå…¥é—¨1--Dockeræ¦‚è¿°/","link":"","permalink":"https://maydaychen.github.io/2023/08/27/Docker%E5%85%A5%E9%97%A81--Docker%E6%A6%82%E8%BF%B0/","excerpt":"","text":"Dockerä¸è™šæ‹Ÿæœºçš„å¯¹æ¯”è™šæ‹ŸæœºæŠ€æœ¯ç¼ºç‚¹ï¼š èµ„æºå ç”¨ååˆ†å¤š å†—ä½™æ­¥éª¤å¤šï¼ˆæ¯”å¦‚å¼€æœºç­‰ï¼‰ å¯åŠ¨å¾ˆæ…¢ Dockerå’Œä¼ ç»Ÿè™šæ‹Ÿæœºçš„ä¸åŒï¼š ä¼ ç»Ÿè™šæ‹Ÿæœºéœ€è¦è™šæ‹Ÿå‡ºä¸€ä¸ªç¡¬ä»¶ï¼Œè¿è¡Œä¸€æ•´ä¸ªæ“ä½œç³»ç»Ÿï¼Œç„¶ååœ¨ç³»ç»Ÿä¸Šå®‰è£…å’Œè¿è¡Œè½¯ä»¶ å®¹å™¨å†…çš„åº”ç”¨ç›´æ¥è¿è¡Œåœ¨å®¿ä¸»æœºï¼Œå®¹å™¨æ²¡æœ‰è‡ªå·±çš„å†…æ ¸çš„ï¼Œ ä¹Ÿæ²¡æœ‰è™šæ‹Ÿç¡¬ä»¶ï¼Œæ‰€ä»¥å¾ˆè½»ä¾¿ æ¯ä¸ªå®¹å™¨ä¹‹é—´äº’ç›¸éš”ç¦»ï¼Œæ¯ä¸ªå®¹å™¨å†…éƒ½æœ‰ä¸€ä¸ªå±äºè‡ªå·±çš„æ–‡ä»¶ç³»ç»Ÿï¼Œäº’ä¸å½±å“ Dockerç»„æˆé•œåƒImageï¼šå°±å¥½æ¯”ä¸€ä¸ªæ¨¡ç‰ˆï¼Œå¯ä»¥é€šè¿‡æ¨¡ç‰ˆæ¥åˆ›å»ºå®¹å™¨æœåŠ¡ é€šè¿‡é•œåƒå¯ä»¥åˆ›å»ºå¤šä¸ªå®¹å™¨ï¼ˆæœ€ç»ˆæœåŠ¡&#x2F;é¡¹ç›®è¿è¡Œå°±åœ¨å®¹å™¨ä¸­ï¼‰ å®¹å™¨Containerï¼šDockeråˆ©ç”¨å®¹å™¨æŠ€æœ¯ï¼Œç‹¬ç«‹è¿è¡Œä¸€ä¸ªæˆ–ä¸€ç»„åº”ç”¨ï¼Œé€šè¿‡é•œåƒæ¥åˆ›å»º åŸºæœ¬å‘½ä»¤ï¼šå¯åŠ¨ï¼Œåœæ­¢ï¼Œåˆ é™¤ ç›®å‰å¯ä»¥æŠŠå®¹å™¨ç†è§£ä¸ºä¸€ä¸ªç®€æ˜“çš„Linuxç³»ç»Ÿ ä»“åº“Registry: è¿œç¨‹ä»“åº“å­˜æ”¾é•œåƒçš„åœ°æ–¹ï¼Œå°±å¥½æ¯”ä»£ç æ”¾git ä»“åº“åˆ†ä¸ºå…¬æœ‰ä»“åº“å’Œç§æœ‰ä»“åº“ å¦‚Docker Hub(é»˜è®¤éƒ½æ˜¯å›½å†…çš„ï¼Œéœ€è¦é…ç½®é•œåƒåŠ é€Ÿ) äº‘æœåŠ¡å•†éƒ½æœ‰å®¹å™¨æœåŠ¡å™¨ Dockeræ˜¯æ€ä¹ˆå·¥ä½œçš„Dockeræ˜¯ä¸€ä¸ªClient-Serveræ¶æ„çš„ç³»ç»Ÿï¼ŒDockerçš„å®ˆæŠ¤è¿›ç¨‹è¿è¡Œåœ¨ä¸»æœºä¸Šï¼Œé€šè¿‡Socketä»å®¢æˆ·ç«¯è®¿é—® DockerServeræ¥æ”¶åˆ°DockerClientçš„æŒ‡ä»¤ï¼Œå°±ä¼šæ‰§è¡Œè¿™ä¸ªæŒ‡ä»¤ Dockerä¸ºä»€ä¹ˆæ¯”VMå¿«Dockeræœ‰ç€æ¯”VMæ›´å°‘çš„æŠ½è±¡å±‚ Dockeråˆ©ç”¨çš„æ˜¯å®¿ä¸»æœºçš„å†…æ ¸ï¼Œä½†VMéœ€è¦åŠ è½½ä¸€ä¸ªåˆ†é’Ÿçº§åˆ«çš„Guest OS æ‰€ä»¥è¯´ï¼Œæ–°å»ºä¸€ä¸ªå®¹å™¨çš„æ—¶å€™ï¼Œdockerä¸éœ€è¦åƒVMä¸€æ ·é‡æ–°åŠ è½½ä¸€ä¸ªOSçš„å†…æ ¸ï¼Œçœç•¥äº†åŠ è½½Guest OSçš„è¿‡ç¨‹ï¼Œæ‰€ä»¥ä¼šå¾ˆå¿«","categories":[{"name":"è¿ç»´","slug":"è¿ç»´","permalink":"https://maydaychen.github.io/categories/%E8%BF%90%E7%BB%B4/"}],"tags":[{"name":"Docker","slug":"Docker","permalink":"https://maydaychen.github.io/tags/Docker/"}]},{"title":"Windowsä¼˜åŒ–è®°å½•2--Windowså³é”®å®ç°å½“å‰è·¯å¾„æ‰“å¼€cmd","slug":"Windowsä¼˜åŒ–è®°å½•2--Windowså³é”®å®ç°å½“å‰è·¯å¾„æ‰“å¼€cmd","date":"2022-03-17T03:49:21.000Z","updated":"2025-02-24T14:57:16.103Z","comments":true,"path":"2022/03/17/Windowsä¼˜åŒ–è®°å½•2--Windowså³é”®å®ç°å½“å‰è·¯å¾„æ‰“å¼€cmd/","link":"","permalink":"https://maydaychen.github.io/2022/03/17/Windows%E4%BC%98%E5%8C%96%E8%AE%B0%E5%BD%952--Windows%E5%8F%B3%E9%94%AE%E5%AE%9E%E7%8E%B0%E5%BD%93%E5%89%8D%E8%B7%AF%E5%BE%84%E6%89%93%E5%BC%80cmd/","excerpt":"","text":"è½¬è‡ªhttps://blog.csdn.net/wx_assa/article/details/106880806 ##æ— ç®¡ç†å‘˜æƒé™çš„cmdæ–°å»ºä¸€ä¸ªtxtæ–‡ä»¶ï¼Œå¹¶é‡å‘½åä¸ºxxx.regï¼Œå¹¶å°†ä¸‹æ”¾ä»£ç å¤åˆ¶åˆ°æ–‡æœ¬ä¸­ 123Windows Registry Editor Version 5.00[HKEY_CLASSES_ROOT\\Directory\\Background\\shell\\QOpencmd\\command]&quot;&quot;=&quot;cmd.exe /s /k pushd \\&quot;%V\\&quot;&quot; è¿è¡Œè¯¥æ³¨å†Œè¡¨æ–‡ä»¶ï¼Œåœ¨å³é”®èœå•ä¸­ä¼šå¤šå‡ºä¸€é¡¹ QQOpencmdï¼Œå³ä¸ºæ‰“å¼€cmdçš„é€‰é¡¹ ##æœ‰ç®¡ç†å‘˜æƒé™çš„cmdæ–°å»ºæ–‡ä»¶åŒä¸Šï¼Œä»£ç å¤åˆ¶ä¸‹é¢çš„ä»£ç  12345Windows Registry Editor Version 5.00[HKEY_CLASSES_ROOT\\Directory\\Background\\shell\\runas]&quot;ShowBasedOnVelocityId&quot;=dword:00639bc8[HKEY_CLASSES_ROOT\\Directory\\Background\\shell\\runas\\command]@=&quot;cmd.exe /s /k pushd \\&quot;%V\\&quot;&quot; è¿è¡Œï¼Œåœ¨å³é”®èœå•ä¸­ä¼šå¤šå‡ºä¸€é¡¹ ä»¥ç®¡ç†å‘˜è¿è¡Œ(A)ï¼Œå³ä¸ºä»¥ç®¡ç†å‘˜æ‰“å¼€cmdçš„é€‰é¡¹","categories":[{"name":"Tools","slug":"Tools","permalink":"https://maydaychen.github.io/categories/Tools/"}],"tags":[{"name":"Windows","slug":"Windows","permalink":"https://maydaychen.github.io/tags/Windows/"}]},{"title":"Windowsä¼˜åŒ–è®°å½•1--å¸¸ç”¨Windowsè½¯ä»¶æ€»ç»“","slug":"Windowsä¼˜åŒ–è®°å½•1--å¸¸ç”¨Windowsè½¯ä»¶æ€»ç»“","date":"2022-03-15T16:28:34.000Z","updated":"2025-02-24T14:57:16.096Z","comments":true,"path":"2022/03/16/Windowsä¼˜åŒ–è®°å½•1--å¸¸ç”¨Windowsè½¯ä»¶æ€»ç»“/","link":"","permalink":"https://maydaychen.github.io/2022/03/16/Windows%E4%BC%98%E5%8C%96%E8%AE%B0%E5%BD%951--%E5%B8%B8%E7%94%A8Windows%E8%BD%AF%E4%BB%B6%E6%80%BB%E7%BB%93/","excerpt":"","text":"ä¸ºäº†æ¯æ¬¡é‡è£…ç”µè„‘çš„æ—¶å€™ä¸ä¼šé—æ¼ç›¸å…³è½¯ä»¶ï¼Œç‰¹å†™ä¸‹æ­¤æ–‡ç« ï¼Œæé†’è‡ªå·±ä¿æŒè¾ƒé«˜ç”Ÿäº§åŠ› #æœåŠ¡å™¨ç›¸å…³ Xshellè¿œç¨‹è¿æ¥æœåŠ¡å™¨ï¼Œæ‰§è¡Œç›¸å…³æ“ä½œhttps://www.netsarang.com/products/xsh_overview.html FileZillaæœåŠ¡å™¨è¿œç¨‹æ–‡ä»¶ä¼ è¾“https://filezilla-project.org/ #å½±éŸ³ Listen1æ”¯æŒç½‘æ˜“äº‘éŸ³ä¹&#x2F;QQéŸ³ä¹&#x2F;è™¾ç±³éŸ³ä¹ä¸‰åˆä¸€https://github.com/listen1/listen1_chrome_extension ç½‘æ˜“äº‘éŸ³ä¹ä»¥å‰å¾ˆå–œæ¬¢ï¼Œå¯æ˜¯ç°åœ¨- -ç‰ˆæƒå®åœ¨å¤ªå°‘ï¼Œèƒ½å¬çš„ä¸å¤šï¼Œè€Œä¸”æ¨èç®—æ³•å·¥ç¨‹å¸ˆå¯èƒ½æ¢äººäº†â€¦â€¦https://music.163.com/ win10å•†åº—ä¸­çš„çˆ±å¥‡è‰ºæ²¡ï¼æœ‰ï¼å¹¿ï¼å‘Šï¼ #å·¥å…· å¾®è½¯ To- Doæ¯æ—¥å¤‡å¿˜è®°å½•æé†’https://todo.microsoft.com/zh-cn geekå¾ˆèˆ’æœçš„å¸è½½å·¥å…·https://geekuninstaller.com/ TeamViewerè¿œç¨‹æ§åˆ¶è½¯ä»¶ï¼Œwork from home å¿…å¤‡https://www.teamviewer.com/zhCN/ notepad++æ›¿ä»£è®°äº‹æœ¬è‰¯å¿ƒç›´é€‰https://notepad-plus-plus.org/ QuickLookå®ç°macä¸Šçš„é¢„è§ˆåŠŸèƒ½https://github.com/QL-Win/QuickLook/releases woxæ„Ÿè§‰å†™çš„å¥½çš„ä¸€ç¯‡æ–‡ç«  https://github.com/Wox-launcher/Wox/releases Q-DiråŒæ—¶æ˜¾ç¤ºå››ä¸ªèµ„æºç®¡ç†å™¨https://q-dir.en.softonic.com/ æŒç»­æ›´æ–°ingâ€¦â€¦","categories":[{"name":"Tools","slug":"Tools","permalink":"https://maydaychen.github.io/categories/Tools/"}],"tags":[{"name":"Windows","slug":"Windows","permalink":"https://maydaychen.github.io/tags/Windows/"}]},{"title":"å¼€å‘ç»éªŒè°ˆ","slug":"å¼€å‘ç»éªŒè°ˆ","date":"2022-02-11T07:50:16.000Z","updated":"2024-12-27T05:17:00.000Z","comments":true,"path":"2022/02/11/å¼€å‘ç»éªŒè°ˆ/","link":"","permalink":"https://maydaychen.github.io/2022/02/11/%E5%BC%80%E5%8F%91%E7%BB%8F%E9%AA%8C%E8%B0%88/","excerpt":"","text":"å¼€å‘å±‚é¢ï¼š ä¸è¦è¿‡åº¦å°è£…ï¼ŒåŠŸèƒ½å¯ä»¥å°è£…ï¼Œä½†æ˜¯é¡µé¢ç­‰æŒè°¨æ…æ€åº¦ï¼Œç”²æ–¹éšæ—¶å¯èƒ½æ”¹åŠ¨éƒ¨åˆ†é¡µé¢ å¯¹äºä¸€ä¸ªèµ„æºæ–‡ä»¶åœ¨å¤šå¤„è°ƒç”¨çš„åœºæ™¯ï¼Œä¸èƒ½ç›´æ¥è¦†ç›–ä¿®æ”¹ï¼Œå®¹æ˜“åœ¨å…¶ä»–åœ°æ–¹äº§ç”Ÿé”™è¯¯ ä»£ç è§„èŒƒå¾ˆé‡è¦ æ”¹bugå‰ï¼Œå…ˆæƒ³ä¸€æƒ³æ”¹åŠ¨çš„ä»£ç å¯¹å…¶ä»–åŠŸèƒ½æœ‰æ²¡æœ‰å½±å“ï¼Œåˆ‡å¿Œçœ‹åˆ°å•¥é—®é¢˜å°±ç›´æ¥æ”¹ï¼Œå®¹æ˜“å‡ºäº‹ æ”¹å®Œbugéœ€è¦è‡ªå·±æµ‹è¯•ä¸€ä¸‹ï¼Œä¸ç„¶å®¹æ˜“å¯¼è‡´é—®é¢˜åå¤ code reviewï¼ŒåŠŸèƒ½å®Œæˆåæœ‰æ—¶é—´æŸ¥çœ‹ä¸€éå®ç°ä»£ç ï¼Œä¼šç”¨Android Lintç­‰æ£€æŸ¥å·¥å…· é¡¹ç›®ç®¡ç†ï¼š è¦æœ‰é£é™©æ„è¯†ï¼ŒæŠ¥å·¥æœŸè¦ç»™è‡ªå·±é¢„ç•™è¶³å¤Ÿçš„çªå‘äº‹ä»¶å¤„ç†æ—¶é—´ å¤šäººå¼€å‘æ—¶ï¼Œæ¯ä¸ªäººçš„å¼€å‘èƒ½åŠ›æœ‰å·®å¼‚ï¼Œéœ€è¦æœ‰ä¸€ä¸ªä¸»å¯¼ï¼Œå°½é‡ä¿æŒä»£ç ä¸€è‡´æ€§ï¼Œä¿è¯ä»Šåçš„å¯ç»´æŠ¤æ€§ï¼Œä¸èƒ½äº‹ä¸å…³å·±é«˜é«˜æŒ‚èµ· ä¸€ä¸ªé¡¹ç›®ä¸ä¸€å®šåªæœ‰ä¸€ç§æ¡†æ¶ï¼Œè¦æ ¹æ®éœ€æ±‚éšæœºåº”å˜ éœ€è¦å¯¹åŠŸèƒ½æœ‰ç»†è‡´äº†è§£æ‰èƒ½è¿›è¡Œå¼€å‘ å¤šåˆ‡åˆ†æ”¯ï¼Œé¿å…ä¸€æ­¥é”™ï¼Œæ­¥æ­¥é”™çš„æƒ…å†µ æ¯å¤©æ±‡æ€»è¿›åº¦ï¼Œåˆ¤æ–­é¡¹ç›®è¿›å±•çœŸå®æƒ…å†µ å…¶ä½™ éƒ½æ˜¯ä¸€å®¶äººï¼Œä¸èƒ½ä¸çˆ½å°±å–·ï¼Œæ§åˆ¶æƒ…ç»ª ä¸èƒ½æŒæ§éœ€æ±‚ï¼Œå°±åªèƒ½æ¥å—éœ€æ±‚","categories":[{"name":"å¼€å‘","slug":"å¼€å‘","permalink":"https://maydaychen.github.io/categories/%E5%BC%80%E5%8F%91/"}],"tags":[]},{"title":"å‰ç«¯è®°å½•6--Elementä¸­uploadç»„ä»¶ä½¿ç”¨å¤šä¸ªæ—¶ç»‘å®šindex","slug":"å‰ç«¯è®°å½•6--Elementä¸­uploadç»„ä»¶ä½¿ç”¨å¤šä¸ªæ—¶ç»‘å®šindex","date":"2021-03-31T05:58:41.000Z","updated":"2025-02-24T15:01:20.411Z","comments":true,"path":"2021/03/31/å‰ç«¯è®°å½•6--Elementä¸­uploadç»„ä»¶ä½¿ç”¨å¤šä¸ªæ—¶ç»‘å®šindex/","link":"","permalink":"https://maydaychen.github.io/2021/03/31/%E5%89%8D%E7%AB%AF%E8%AE%B0%E5%BD%956--Element%E4%B8%ADupload%E7%BB%84%E4%BB%B6%E4%BD%BF%E7%94%A8%E5%A4%9A%E4%B8%AA%E6%97%B6%E7%BB%91%E5%AE%9Aindex/","excerpt":"","text":"é—®é¢˜æè¿°ä¸€èˆ¬æˆ‘ä»¬ä½¿ç”¨el-uploadï¼Œæ˜¯è¿™ç§ç”¨æ³• 123456789&lt;el-upload class=&quot;avatar-uploader&quot; action=&quot;#&quot; :show-file-list=&quot;false&quot; :http-request=&quot;fileUpLoad&quot; &gt; &lt;img v-if=&quot;form.credentialsRealUrl&quot; :src=&quot;form.credentialsRealUrl&quot; class=&quot;avatar&quot;&gt; &lt;i v-else class=&quot;el-icon-plus avatar-uploader-icon&quot;&gt;&lt;/i&gt; &lt;/el-upload&gt; é€šè¿‡å®ç°http-requestæ–¹æ³•ï¼Œæ¥å®ç°ä¸Šä¼ æ“ä½œï¼Œç„¶åå°†å›¾ç‰‡åœ°å€èµ‹å€¼ç»™ä¸€ä¸ªå˜é‡ ä½†æ˜¯ç°åœ¨ï¼Œåœ¨ä½¿ç”¨el-uploadè¿‡ç¨‹ä¸­ï¼Œæœ‰è¿™ä¹ˆä¸€ä¸ªéœ€æ±‚ä¼šæœ‰åŠ¨æ€æ•°é‡çš„uploadæ¡†ï¼Œæ‰€ä»¥ä¸èƒ½ç”¨å†™æ­»çš„fileUpLoadæ–¹æ³•ï¼Œå› ä¸ºé»˜è®¤æ–¹æ³•åªæœ‰ä¸€ä¸ªoptionå‚æ•°ï¼Œæ²¡æœ‰å…¶ä»–çš„å¯é€‰å‚æ•°ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸çŸ¥é“ä¸Šä¼ çš„å›¾ç‰‡åœ°å€åˆ°åº•æ˜¯è¯¥ç»™å“ªä¸€ä¸ªå˜é‡ è§£å†³åŠæ³•ï¼š1:http-request=&quot;(option)=&gt;&#123;return fileUpLoad(option,index)&#125;&quot; è¿™æ ·å¯ä»¥å¢åŠ ä¸€ä¸ªindexå˜é‡ï¼Œä»è€Œå»è¿›è¡Œä¸€äº›èµ‹å€¼é€»è¾‘äº†","categories":[{"name":"å¼€å‘","slug":"å¼€å‘","permalink":"https://maydaychen.github.io/categories/%E5%BC%80%E5%8F%91/"}],"tags":[{"name":"å‰ç«¯","slug":"å‰ç«¯","permalink":"https://maydaychen.github.io/tags/%E5%89%8D%E7%AB%AF/"}]},{"title":"å‰ç«¯è®°å½•5--Elementä¸Šä¼ æ–‡ä»¶åˆ°é˜¿é‡Œäº‘OSSè®°å½•","slug":"å‰ç«¯è®°å½•5--Elementä¸Šä¼ æ–‡ä»¶åˆ°é˜¿é‡Œäº‘OSSè®°å½•","date":"2021-03-27T06:03:16.000Z","updated":"2025-02-24T15:01:20.413Z","comments":true,"path":"2021/03/27/å‰ç«¯è®°å½•5--Elementä¸Šä¼ æ–‡ä»¶åˆ°é˜¿é‡Œäº‘OSSè®°å½•/","link":"","permalink":"https://maydaychen.github.io/2021/03/27/%E5%89%8D%E7%AB%AF%E8%AE%B0%E5%BD%955--Element%E4%B8%8A%E4%BC%A0%E6%96%87%E4%BB%B6%E5%88%B0%E9%98%BF%E9%87%8C%E4%BA%91OSS%E8%AE%B0%E5%BD%95/","excerpt":"","text":"vue é€šè¿‡element el-uploadä¸Šä¼ åˆ°é˜¿é‡Œäº‘ä»“åº“çš„æ­¥éª¤ å®‰è£…ali-oss 1npm install ali-oss æ–°å»ºé…ç½®æ–‡ä»¶ï¼Œå¦‚ali_oss.jsï¼Œæˆ‘è¿™é‡Œåªæ˜¯ç”¨äº†ä»–çš„getFilePathè·ŸgetFileNumberéƒ¨åˆ†å¯ä»¥åœ¨è¿™é‡Œé…ç½®oss clientï¼Œä¹Ÿå¯ä»¥åœ¨vueä»£ç ä¸­é€šè¿‡æ¥å£åŠ¨æ€è·å–ï¼Œæœ¬æ–‡ä½¿ç”¨çš„æ˜¯åè€…ï¼Œä¸è¿‡æä¾›å‰è€…çš„å®ç°ï¼Œå¯ä»¥å‚çœ‹ä¸‹é¢ä»£ç çš„é…ç½®éƒ¨åˆ† 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879let OSS = require(&#x27;ali-oss&#x27;)let region = &#x27;ä½ çš„region &#x27;//äº‘è´¦å·AccessKeyæœ‰æ‰€æœ‰APIè®¿é—®æƒé™ï¼Œå»ºè®®éµå¾ªé˜¿é‡Œäº‘å®‰å…¨æœ€ä½³å®è·µï¼Œéƒ¨ç½²åœ¨æœåŠ¡ç«¯ä½¿ç”¨RAMå­è´¦å·æˆ–STSï¼Œéƒ¨ç½²åœ¨å®¢æˆ·ç«¯ä½¿ç”¨STSlet accessKeyId = &#x27;ä½ çš„accessKeyId &#x27;let accessKeySecret = &#x27;ä½ çš„accessKeySecret &#x27;let bucket = &#x27;ä½ çš„bucket &#x27;//clienté…ç½®let client = new OSS(&#123; region: region, accessKeyId: accessKeyId, accessKeySecret: accessKeySecret, bucket: bucket&#125;)export default (conf) =&gt; &#123; return new OSS(conf)&#125;;//æ–‡ä»¶ä¸Šä¼ export const put = async(filePath, fileUrl) =&gt; &#123; try &#123; let result = await client.put(filePath, fileUrl) return result &#125; catch (e) &#123; console.log(e) &#125;&#125;//ossçš„åœ°å€export const getSystemPath = () =&gt; &#123;return ossPath&#125;//æ–‡ä»¶çš„ä¸Šä¼ åœ°å€export const getFilePath = (ObjName, orangeName) =&gt; &#123; let fileName = getFileNumber() + getFileSuffix(orangeName) let result = `/shuyu/admin/$&#123;fileName&#125;` return result&#125;//ossæ–‡ä»¶åè·å–éšæœºexport const getFileNumber = () =&gt; &#123; let timeNumber = new Date().getTime() let randomNumber = Math.floor(Math.random() * 999999) return timeNumber + &#x27;&#x27; + randomNumber&#125;//è·å–æ–‡ä»¶åç¼€export const getFileSuffix = (fileName) =&gt; &#123; let name = fileName.lastIndexOf(&#x27;.&#x27;)//å–åˆ°æ–‡ä»¶åå¼€å§‹åˆ°æœ€åä¸€ä¸ªç‚¹çš„é•¿åº¦ let length = fileName.length let fileSuffix = fileName.substring(name, length) return fileSuffix&#125;//æ£€æŸ¥æ–‡ä»¶æ ¼å¼export const checkFileFormat = (fileName) =&gt; &#123; let isJPG = false let type = fileName.substring(fileName.lastIndexOf(&#x27;.&#x27;) + 1).toLowerCase() if (type === &#x27;jpg&#x27; || type === &#x27;png&#x27; || type === &#x27;jpeg&#x27;) &#123; isJPG = true &#125; else if (type === &#x27;mp4&#x27; || type === &#x27;3gp&#x27; || type === &#x27;avi&#x27;) &#123; isJPG = true &#125; return isJPG&#125;//è·å–å½•éŸ³å’Œè§†é¢‘çš„æ—¶é•¿export const getTimeFromVideo = (file) =&gt; &#123; let time = 0 var url = URL.createObjectURL(file) var audioElement = new Audio(url) audioElement.addEventListener(&#x27;loadedmetadata&#x27;, (_event) =&gt; &#123; time = parseInt(audioElement.duration) return time &#125;) console.log(time)&#125; å¦‚æœæ˜¯ç›´æ¥åœ¨JSé…ç½®å¯ä»¥è·³è¿‡è¿™ä¸€æ­¥ï¼Œå¦‚æœé€šè¿‡åå°æ¥å£è¿”å›accessKeyId ç­‰å‚æ•°å°±éœ€è¦è¿™ä¸€æ­¥ 12345678910111213141516//dataéƒ¨åˆ†uploadConf: &#123; region: &#x27;oss-cn-beijing&#x27;, accessKeyId: null, accessKeySecret: null, bucket: &#x27;linkdoc-felling&#x27;, stsToken: null&#125;//methodséƒ¨åˆ†getOssToken().then(res =&gt; &#123; this.uploadConf.accessKeyId = res.AccessKeyId this.uploadConf.accessKeySecret = res.AccessKeySecret this.uploadConf.stsToken = res.SecurityToken&#125;) é…ç½®el-uploadï¼Œè‡ªå®šä¹‰http-requestæ–¹æ³• 123456789&lt;el-upload class=&quot;avatar-uploader&quot; action=&quot;#&quot; :show-file-list=&quot;false&quot; :http-request=&quot;fileUpLoad&quot; &gt; &lt;img v-if=&quot;form.credentialsRealUrl&quot; :src=&quot;form.credentialsRealUrl&quot; class=&quot;avatar&quot;&gt; &lt;i v-else class=&quot;el-icon-plus avatar-uploader-icon&quot;&gt;&lt;/i&gt; &lt;/el-upload&gt; å®ç°http-requestå¯¹åº”çš„æ–¹æ³•å¦‚æœå‚ç…§ä¸‹é¢çš„ä»£ç ï¼Œä¸€å®šåˆ«å¿˜è®°å¼•å…¥æˆ‘ä»¬çš„jsæ–‡ä»¶ 1import ossClient, &#123; getFilePath, getSystemPath &#125; from &#x27;@/utils/ali_oss&#x27; 123456789101112131415//ä¸Šä¼ æ–‡ä»¶æ“ä½œï¼Œè°ƒç”¨é˜¿é‡Œäº‘fileUpLoad(option)&#123;//æå‰æ‹¼æ¥è¿”å›åœ°å€ let filePath = getFilePath(this.$route.name, option.file.name) if (option.file.size &gt; 2024000) &#123; this.$message.error(&#x27;èµ„æºæ–‡ä»¶å¤§å°è¶…å‡ºèŒƒå›´&#x27;) return &#125; ossClient(this.uploadConf).put(filePath, option.file).then((res) =&gt; &#123; console.log(res) if (res !== undefined) &#123; this.$message.success(&#x27;ä¸Šä¼ æˆåŠŸ&#x27;) &#125; &#125;)&#125; è‡³æ­¤ï¼Œä¸Šä¼ æˆåŠŸï¼ŒfilePathå·²ç»è·å–åˆ°äº†ï¼Œå¦‚æœæ˜¯åŠ å¯†çš„æ•°æ®ï¼Œåˆ™ç»§ç»­è°ƒç”¨è‡ªå·±çš„æ¥å£ï¼Œè·å–çœŸå®å¯è¯»çš„å›¾ç‰‡åœ°å€","categories":[{"name":"å¼€å‘","slug":"å¼€å‘","permalink":"https://maydaychen.github.io/categories/%E5%BC%80%E5%8F%91/"}],"tags":[{"name":"å‰ç«¯","slug":"å‰ç«¯","permalink":"https://maydaychen.github.io/tags/%E5%89%8D%E7%AB%AF/"}]},{"title":"å‰ç«¯è®°å½•4--å¾®ä¿¡å°ç¨‹åºæ²¡æœ‰æ‰¾åˆ°å¯ä»¥æ„å»ºçš„npmåŒ…","slug":"å‰ç«¯è®°å½•4--å¾®ä¿¡å°ç¨‹åºæ²¡æœ‰æ‰¾åˆ°å¯ä»¥æ„å»ºçš„npmåŒ…","date":"2021-02-23T07:07:40.000Z","updated":"2025-02-24T15:01:34.232Z","comments":true,"path":"2021/02/23/å‰ç«¯è®°å½•4--å¾®ä¿¡å°ç¨‹åºæ²¡æœ‰æ‰¾åˆ°å¯ä»¥æ„å»ºçš„npmåŒ…/","link":"","permalink":"https://maydaychen.github.io/2021/02/23/%E5%89%8D%E7%AB%AF%E8%AE%B0%E5%BD%954--%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E6%B2%A1%E6%9C%89%E6%89%BE%E5%88%B0%E5%8F%AF%E4%BB%A5%E6%9E%84%E5%BB%BA%E7%9A%84npm%E5%8C%85/","excerpt":"","text":"å‰è¨€è¿™æ®µæ—¶é—´é‡æ–°å¼€å§‹åšå°ç¨‹åºé¡¹ç›®ï¼Œæ„å¤–å‘ç°å°ç¨‹åºç«Ÿç„¶å¯ä»¥æ”¯æŒnpmäº†ï¼Œ ä»å°ç¨‹åºåŸºç¡€åº“ç‰ˆæœ¬ 2.2.1 æˆ–ä»¥ä¸Šã€åŠå¼€å‘è€…å·¥å…· 1.02.1808300 æˆ–ä»¥ä¸Šå¼€å§‹ï¼Œå°ç¨‹åºæ”¯æŒä½¿ç”¨ npm å®‰è£…ç¬¬ä¸‰æ–¹åŒ…ã€‚ ä½†æ˜¯åœ¨å¼•ç”¨ç¬¬ä¸‰æ–¹åŒ…çš„æ—¶å€™å‡ºç°äº†ä¸€äº›é—®é¢˜ï¼Œç‰¹æ­¤è®°å½• é—®é¢˜ è§£å†³åŠæ³• å‘½ä»¤è¡Œè¿›å…¥å°ç¨‹åºæ ¹ç›®å½•ï¼Œè¾“å…¥ 1npm init ä¹‹åè®©ä½ è¾“å…¥çš„ä»»ä½•éƒ½ä¸ç”¨ç®¡ï¼Œç›´æ¥å›è½¦ç›´åˆ°å®Œæˆ è¾“å…¥å‘½ä»¤ï¼š 1npm i miniprogram-sm-crypto --production è¿è¡Œå®Œæˆåï¼Œè¿›å…¥å¾®ä¿¡å¼€å‘è€…å·¥å…·ï¼Œä¾æ¬¡ç‚¹å‡»å·¥å…· -&gt; æ„å»ºnpm åº”è¯¥æ²¡æœ‰é—®é¢˜äº†","categories":[{"name":"å¼€å‘","slug":"å¼€å‘","permalink":"https://maydaychen.github.io/categories/%E5%BC%80%E5%8F%91/"}],"tags":[{"name":"å‰ç«¯","slug":"å‰ç«¯","permalink":"https://maydaychen.github.io/tags/%E5%89%8D%E7%AB%AF/"}]},{"title":"Pythoné—®é¢˜è®°å½•2--seleniumè§£å†³æŠ¥é”™SessionNotCreatedException session not created: No matching capabilitieä¸é—®é¢˜è§£æ","slug":"Pythoné—®é¢˜è®°å½•2--seleniumè§£å†³æŠ¥é”™SessionNotCreatedException-session-not-created-No-matching-capabilitieä¸é—®é¢˜è§£æ","date":"2021-01-27T07:18:44.000Z","updated":"2025-02-24T14:55:35.147Z","comments":true,"path":"2021/01/27/Pythoné—®é¢˜è®°å½•2--seleniumè§£å†³æŠ¥é”™SessionNotCreatedException-session-not-created-No-matching-capabilitieä¸é—®é¢˜è§£æ/","link":"","permalink":"https://maydaychen.github.io/2021/01/27/Python%E9%97%AE%E9%A2%98%E8%AE%B0%E5%BD%952--selenium%E8%A7%A3%E5%86%B3%E6%8A%A5%E9%94%99SessionNotCreatedException-session-not-created-No-matching-capabilitie%E4%B8%8E%E9%97%AE%E9%A2%98%E8%A7%A3%E6%9E%90/","excerpt":"","text":"é—®é¢˜è¯¦æƒ…æ ¹æ®å¤§ä½¬çš„æ•™ç¨‹ï¼Œåœ¨å­¦ä¹ ä½¿ç”¨seleniumè®¿é—®ç™¾åº¦çš„æ—¶å€™ï¼Œå‡ºç°äº†ä¸€ä¸ªé©±åŠ¨å™¨çš„ä½¿ç”¨é—®é¢˜ï¼Œç‰¹æ­¤è®°å½• é—®é¢˜æè¿°æ ¹æ®å¤§ä½¬çš„è®²è§£ï¼Œæˆ‘ä¸‹è½½äº†chromeçš„é©±åŠ¨å™¨ï¼Œä½†æ˜¯äº‹å®ä¸Šï¼Œæˆ‘ç°åœ¨ç”¨çš„æ˜¯æ–°ç‰ˆçš„Edgeæµè§ˆå™¨ï¼Œæœ¬èº«æƒ³ç€è¿™ä¹Ÿæ˜¯Chromiumå†…æ ¸ï¼Œåº”è¯¥æ²¡æœ‰ä»€ä¹ˆé—®é¢˜ï¼Œä½†æ˜¯å®é™…ä¸Šå´ä¸æ˜¯ çœ‹åˆ°æŠ¥é”™ï¼Œä¸€è„¸æ‡µé€¼ï¼Ÿçº³å°¼ï¼Ÿï¼Ÿ æˆ‘çš„edgeå°±æ˜¯88ç‰ˆæœ¬å•Šï¼Ÿwhyï¼Ÿéš¾é“è¯´è¿™ä¸ªchromeé©±åŠ¨å™¨åªèƒ½é©±åŠ¨Chromeæµè§ˆå™¨ï¼Ÿç»“æœç½‘ä¸Šä¸€æŸ¥ï¼Œè¿˜çœŸæ˜¯â€¦â€¦å¾—ï¼Œå»å¾®è½¯å®˜ç½‘ä¸‹è½½æ–°ç‰ˆçš„edgeé©±åŠ¨å™¨ å¥½äº†ï¼Œæ¥ä¸‹æ¥ç¡®å®ä¸æŠ¥é”™äº†##æ¥ä¸‹æ¥ï¼Œæ ‡é¢˜ä¸Šçš„é—®é¢˜æ¥äº† åŸå› æ˜¯å•¥å‘¢ï¼Ÿ è§£å†³ä¸‹é¢çœ‹ä¸€ä¸‹æˆ‘æ­¤æ—¶çš„ä»£ç  çœ‹åˆ°äº†å˜›ï¼Œæˆ‘è¿˜æ˜¯ç”¨çš„webdriver.Chromeï¼Œå…¶å®è¿™è¾¹åº”è¯¥ç”¨webdriver.Edge æ€»ç»“ä¸€ä¸‹ï¼Œå°±æ˜¯ï¼Œç”¨ä»€ä¹ˆæµè§ˆå™¨ï¼Œç”¨ä»€ä¹ˆé©±åŠ¨å™¨ï¼Œä»£ç ä¸­è°ƒç”¨å¯¹åº”çš„å‡½æ•° é—®é¢˜è§£å†³ï¼","categories":[{"name":"å¼€å‘","slug":"å¼€å‘","permalink":"https://maydaychen.github.io/categories/%E5%BC%80%E5%8F%91/"}],"tags":[{"name":"Python","slug":"Python","permalink":"https://maydaychen.github.io/tags/Python/"}]},{"title":"Pythoné—®é¢˜è®°å½•1--BeautifulSoupçˆ¬å–ç½‘é¡µè¿‡ç¨‹ä¸­ä¼šå‡ºç°ä¹±ç ","slug":"Pythoné—®é¢˜è®°å½•1--BeautifulSoupçˆ¬å–ç½‘é¡µè¿‡ç¨‹ä¸­ä¼šå‡ºç°ä¹±ç ","date":"2021-01-26T07:24:16.000Z","updated":"2025-02-24T14:55:35.156Z","comments":true,"path":"2021/01/26/Pythoné—®é¢˜è®°å½•1--BeautifulSoupçˆ¬å–ç½‘é¡µè¿‡ç¨‹ä¸­ä¼šå‡ºç°ä¹±ç /","link":"","permalink":"https://maydaychen.github.io/2021/01/26/Python%E9%97%AE%E9%A2%98%E8%AE%B0%E5%BD%951--BeautifulSoup%E7%88%AC%E5%8F%96%E7%BD%91%E9%A1%B5%E8%BF%87%E7%A8%8B%E4%B8%AD%E4%BC%9A%E5%87%BA%E7%8E%B0%E4%B9%B1%E7%A0%81/","excerpt":"","text":"é—®é¢˜æè¿°åœ¨å°è¯•çˆ¬å–å°è¯´æ—¶ï¼Œå‘ç°çˆ¬å–åˆ°çš„æ­£æ–‡æ ¼å¼æ˜¯æ­£ç¡®çš„ï¼Œä½†æ˜¯ç« èŠ‚åˆ—è¡¨ä¼šå‡ºç°ä¹±ç ï¼Œç»è¿‡ä»”ç»†æœç´¢ç»ˆäºè§£å†³ï¼Œç‰¹æ­¤è®°å½• ##æºä»£ç  123456req = requests.get(url=self.target)bf = BeautifulSoup(req.text, &#x27;html.parser&#x27;)div = bf.findAll(&#x27;div&#x27;, class_=&#x27;listmain&#x27;)a_bf = BeautifulSoup(str(div[0]), &quot;html.parser&quot;)a = a_bf.findAll(&#x27;a&#x27;)print(a[0].) è§£å†³æ–¹æ¡ˆç¡®å®šå½“å‰ç½‘é¡µçš„ç¼–ç æ ¼å¼ï¼Œå¯ä»¥åœ¨æ§åˆ¶å°ä¸­æŸ¥çœ‹ï¼Œåœ¨consoleä¸­è¾“å…¥1document.charset ä¸‹å›¾å¯ä»¥çœ‹å‡ºï¼Œè¯¥ç½‘é¡µæ˜¯é‡‡ç”¨GBKç¼–ç  æ·»åŠ ä»£ç ï¼Œå°†ç¼–ç æ ¼å¼è®¾ç½®ä¸ºå¯¹åº”çš„ç¼–ç æ ¼å¼123req = requests.get(url=self.target)req.encoding = &#x27;GBK&#x27; //å°†ç¼–ç æ ¼å¼è®¾ç½®ä¸ºç½‘é¡µå¯¹åº”çš„æ ¼å¼ï¼Œåœ¨è¿™é‡Œå°±æ˜¯GBKbf = BeautifulSoup(req.text, &#x27;html.parser&#x27;) é—®é¢˜è§£å†³","categories":[{"name":"å¼€å‘","slug":"å¼€å‘","permalink":"https://maydaychen.github.io/categories/%E5%BC%80%E5%8F%91/"}],"tags":[{"name":"Python","slug":"Python","permalink":"https://maydaychen.github.io/tags/Python/"}]},{"title":"å‰ç«¯è®°å½•3--Vueä½¿ç”¨echartsæ–¹æ³•åŠé—®é¢˜å°è®°","slug":"å‰ç«¯è®°å½•3--Vueä½¿ç”¨echartsæ–¹æ³•åŠé—®é¢˜å°è®°","date":"2021-01-06T07:29:45.000Z","updated":"2025-02-24T15:01:20.389Z","comments":true,"path":"2021/01/06/å‰ç«¯è®°å½•3--Vueä½¿ç”¨echartsæ–¹æ³•åŠé—®é¢˜å°è®°/","link":"","permalink":"https://maydaychen.github.io/2021/01/06/%E5%89%8D%E7%AB%AF%E8%AE%B0%E5%BD%953--Vue%E4%BD%BF%E7%94%A8echarts%E6%96%B9%E6%B3%95%E5%8F%8A%E9%97%AE%E9%A2%98%E5%B0%8F%E8%AE%B0/","excerpt":"","text":"echartså®˜ç½‘ï¼šhttp://echarts.apache.org/zh/index.html å®‰è£…1npm install echarts -S å¼•å…¥å®‰è£…å®Œæˆåï¼Œç”±äºéœ€è¦å…¨å±€å¼•å…¥ï¼Œæ‰€ä»¥éœ€è¦åœ¨main.jsä¸­é…ç½® 12Vue.config.productionTip = falseVue.prototype.$echarts = echarts æ­¤å¤„æ³¨æ„ï¼Œå®‰è£…å®Œæˆåï¼Œåœ¨package.jsonä¸­çœ‹ä¸€ä¸‹echartsçš„ç‰ˆæœ¬ å¦‚æœæ˜¯5.0.0ï¼Œé‚£ä¹ˆä¸Šæ–¹çš„å¼•å…¥ä¼šæŠ¥é”™ï¼Œæ­¤æ—¶éœ€è¦æ”¹æˆ 1import * as echarts from &#x27;echarts&#x27;; å³å¯##ä½¿ç”¨é¦–å…ˆéœ€è¦åœ¨ä»£ç å—ä¸­å£°æ˜ä¸€ä¸ªdiv 1&lt;div id=&quot;myChart&quot; style=&quot;height: 400px&quot;&gt;&lt;/div&gt; éšååœ¨mountedæ–¹æ³•ä¸­ç»˜åˆ¶å›¾è¡¨ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354 mounted() &#123; this.drawLine(); &#125;,methods: &#123; drawLine() &#123; // åŸºäºå‡†å¤‡å¥½çš„domï¼Œåˆå§‹åŒ–echartså®ä¾‹ let myChart = this.$echarts.init(document.getElementById(&#x27;myChart&#x27;)) // ç»˜åˆ¶å›¾è¡¨ myChart.setOption(&#123; title: &#123; text: &#x27;æ¯æ—¥å‘Šè­¦æ•°&#x27; &#125;, tooltip: &#123; trigger: &#x27;axis&#x27; &#125;, legend: &#123; data: [&#x27;æ¸©åº¦&#x27;, &#x27;æ¹¿åº¦&#x27;, &#x27;ç”µæµ&#x27;, &#x27;ç”µå‹&#x27;, &#x27;ç®±é—¨&#x27;, &#x27;æ°´æµ¸&#x27;, &#x27;æ–­ç”µ&#x27;, &#x27;æ— çº¿ä¿¡å·&#x27;] &#125;, grid: &#123; left: &#x27;3%&#x27;, right: &#x27;4%&#x27;, bottom: &#x27;3%&#x27;, containLabel: true &#125;, toolbox: &#123; feature: &#123; saveAsImage: &#123;&#125; &#125; &#125;, xAxis: &#123; type: &#x27;category&#x27;, boundaryGap: false, data: [&#x27;å‘¨ä¸€&#x27;, &#x27;å‘¨äºŒ&#x27;, &#x27;å‘¨ä¸‰&#x27;, &#x27;å‘¨å››&#x27;, &#x27;å‘¨äº”&#x27;, &#x27;å‘¨å…­&#x27;, &#x27;å‘¨æ—¥&#x27;] &#125;, yAxis: &#123; type: &#x27;value&#x27; &#125;, series: [ &#123; name: &#x27;æ¸©åº¦&#x27;, type: &#x27;line&#x27;, stack: &#x27;æ€»é‡&#x27;, data: [120, 132, 101, 134, 90, 230, 210] &#125;, &#123; name: &#x27;æ¹¿åº¦&#x27;, type: &#x27;line&#x27;, stack: &#x27;æ€»é‡&#x27;, data: [220, 182, 191, 234, 290, 330, 310] &#125; ] &#125;); &#125;, &#125; è¿™æ—¶å€™ï¼ï¼åˆå‡ºç°äº†ä¸€ä¸ªé—®é¢˜ ä»”ç»†çœ‹ï¼Œå‘ç°Yè½´çš„æ•°é‡ä¸å¯¹åŠ²ï¼Œè§£å†³åŠæ³•ï¼šå°†ä¸Šé¢ä»£ç ä¸­çš„seriesä¸­ï¼Œ 1stack: &#x27;æ€»é‡&#x27;, è¿™å¥è¯å…¨éƒ¨å»æ‰ï¼Œå°±å¥½äº†è‡³æ­¤ï¼Œechartsçš„åŸºæœ¬ä½¿ç”¨æ–¹æ³•å¤§ä½“å·²ç»ç»“æŸ","categories":[{"name":"å¼€å‘","slug":"å¼€å‘","permalink":"https://maydaychen.github.io/categories/%E5%BC%80%E5%8F%91/"}],"tags":[{"name":"å‰ç«¯","slug":"å‰ç«¯","permalink":"https://maydaychen.github.io/tags/%E5%89%8D%E7%AB%AF/"}]},{"title":"å‰ç«¯è®°å½•2--è®¾ç½®divèƒŒæ™¯é¢œè‰²é€æ˜åº¦ä½†å†…éƒ¨å…ƒç´ ä¸é€æ˜","slug":"å‰ç«¯è®°å½•2--è®¾ç½®divèƒŒæ™¯é¢œè‰²é€æ˜åº¦ä½†å†…éƒ¨å…ƒç´ ä¸é€æ˜","date":"2020-09-15T07:12:43.000Z","updated":"2025-02-24T15:01:20.396Z","comments":true,"path":"2020/09/15/å‰ç«¯è®°å½•2--è®¾ç½®divèƒŒæ™¯é¢œè‰²é€æ˜åº¦ä½†å†…éƒ¨å…ƒç´ ä¸é€æ˜/","link":"","permalink":"https://maydaychen.github.io/2020/09/15/%E5%89%8D%E7%AB%AF%E8%AE%B0%E5%BD%952--%E8%AE%BE%E7%BD%AEdiv%E8%83%8C%E6%99%AF%E9%A2%9C%E8%89%B2%E9%80%8F%E6%98%8E%E5%BA%A6%E4%BD%86%E5%86%85%E9%83%A8%E5%85%83%E7%B4%A0%E4%B8%8D%E9%80%8F%E6%98%8E/","excerpt":"","text":"éœ€æ±‚è®¾ç½®divèƒŒæ™¯é¢œè‰²é€æ˜åº¦ï¼Œå†…éƒ¨å…ƒç´ ä¸é€æ˜ï¼š å®ç°123.demo&#123; background-color:rgba(0,0,0,0.8)&lt;!--æœ€åä¸€ä¸ªå‚æ•°è®¾ç½®é€æ˜åº¦ï¼Œå‰é¢ä¸‰ä¸ªæ˜¯RGBé¢œè‰²å€¼--&gt;&#125; é”™è¯¯æ–¹å¼ï¼š1234.demo&#123;background-color:black;opacity:0.75;&#125; è¿™æ ·ä¼šå¯¼è‡´divé‡Œé¢çš„å…ƒç´ å†…å®¹å’ŒèƒŒæ™¯é¢œè‰²ä¸€èµ·å˜é€æ˜","categories":[{"name":"å¼€å‘","slug":"å¼€å‘","permalink":"https://maydaychen.github.io/categories/%E5%BC%80%E5%8F%91/"}],"tags":[{"name":"å‰ç«¯","slug":"å‰ç«¯","permalink":"https://maydaychen.github.io/tags/%E5%89%8D%E7%AB%AF/"}]},{"title":"Androidè®°å½•11--è°ƒç”¨sharesdkè¿‡ç¨‹åŠé—®é¢˜","slug":"Androidè®°å½•11--è°ƒç”¨sharesdkè¿‡ç¨‹åŠé—®é¢˜","date":"2020-09-12T06:17:53.000Z","updated":"2025-02-24T15:30:14.437Z","comments":true,"path":"2020/09/12/Androidè®°å½•11--è°ƒç”¨sharesdkè¿‡ç¨‹åŠé—®é¢˜/","link":"","permalink":"https://maydaychen.github.io/2020/09/12/Android%E8%AE%B0%E5%BD%9511--%E8%B0%83%E7%94%A8sharesdk%E8%BF%87%E7%A8%8B%E5%8F%8A%E9%97%AE%E9%A2%98/","excerpt":"","text":"å…·ä½“é…ç½®æ–¹æ³•è¯¦è§å®˜ç½‘ï¼Œæˆ‘è¿™è¾¹ä½¿ç”¨çš„ç¦»çº¿é…ç½®ï¼Œå³æ²¡æœ‰ä½¿ç”¨gradleè¿›è¡Œé…ç½®ï¼Œè¿™é‡Œå·å·æ‡’ï¼Œä¸è¯¦ç»†è®°å½• è¯¦ç»†æ­¥éª¤æ­¥éª¤ä¸ºç²—ç•¥æ­¥éª¤ï¼Œè¯¦ç»†æ­¥éª¤å‚ç…§æ­¤å¤„ åœ¨å®˜ç½‘æ ¹æ®è‡ªå·±è¦åˆ†äº«çš„å¹³å°ä¸‹è½½ç›¸å…³çš„jaråŒ… å°†ä¸‹è½½çš„jaråŒ…æ”¾åœ¨è‡ªå·±ç›®å½•çš„libæ–‡ä»¶å¤¹ä¸‹å¹¶åœ¨é¡¹ç›®ä¸­å¼•ç”¨ ä½¿ç”¨å®ƒæä¾›çš„æŒ‡å¯¼æ–‡ä»¶ç”Ÿæˆç›¸å…³æ–‡ä»¶ï¼Œå¹¶æ ¹æ®readmeå°†å„ä¸ªæ–‡ä»¶æ”¾åœ¨å„è‡ªå¯¹åº”çš„è·¯å¾„ä¸‹ åœ¨manifestsæ–‡ä»¶ä¸‹ç”³è¯·ç›¸å…³æƒé™ 123456789&lt;uses-permission android:name=&quot;android.permission.ACCESS_FINE_LOCATION&quot;/&gt;&lt;uses-permission android:name=&quot;android.permission.ACCESS_COARSE_LOCATION&quot;/&gt;&lt;uses-permission android:name=&quot;android.permission.GET_TASKS&quot; /&gt;&lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;&lt;uses-permission android:name=&quot;android.permission.ACCESS_WIFI_STATE&quot; /&gt;&lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot; /&gt;&lt;uses-permission android:name=&quot;android.permission.CHANGE_WIFI_STATE&quot; /&gt;&lt;uses-permission android:name=&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot; /&gt;&lt;uses-permission android:name=&quot;android.permission.READ_PHONE_STATE&quot; /&gt; åœ¨applicationæ ‡ç­¾ä¸­æ·»åŠ ä»¥ä¸‹å†…å®¹ 12345678910111213141516171819202122232425262728293031&lt;activity android:name=&quot;com.mob.tools.MobUIShell&quot; android:theme=&quot;@android:style/Theme.Translucent.NoTitleBar&quot; android:configChanges=&quot;keyboardHidden|orientation|screenSize&quot; android:windowSoftInputMode=&quot;stateHidden|adjustResize&quot; &gt; &lt;!-- è°ƒç”¨æ–°æµªåŸç”ŸSDKï¼Œéœ€è¦æ³¨å†Œçš„å›è°ƒactivity --&gt; &lt;intent-filter&gt; &lt;action android:name=&quot;com.sina.weibo.sdk.action.ACTION_SDK_REQ_ACTIVITY&quot; /&gt; &lt;category android:name=&quot;android.intent.category.DEFAULT&quot; /&gt; &lt;/intent-filter&gt; &lt;!--é›†æˆlineå®¢æˆ·ç«¯ç™»å½•æˆæƒï¼Œéœ€è¦æ·»å¦‚ä¸‹æ ¼å¼çš„è¿‡æ»¤å™¨--&gt; &lt;intent-filter&gt; &lt;data android:scheme=&quot;line.1477692153&quot; /&gt; &lt;action android:name=&quot;android.intent.action.VIEW&quot;/&gt; &lt;category android:name=&quot;android.intent.category.BROWSABLE&quot; /&gt; &lt;category android:name=&quot;android.intent.category.DEFAULT&quot; /&gt; &lt;/intent-filter&gt; &lt;!-- ShareSDK&lt;strong&gt;3.1.0ç‰ˆæœ¬ä¹‹å‰&lt;/strong&gt;æ‰éœ€è¦åœ¨MobUIShellä¸‹é¢æ³¨å†Œæ­¤æ„å›¾ï¼Œ3.1.0ç‰ˆæœ¬ä¹‹åï¼ˆåŒ…å«3.1.0ï¼‰ä¸éœ€è¦æ³¨å†Œæ­¤intent--&gt; &lt;intent-filter&gt; &lt;data android:scheme=&quot;tencent100371282&quot; /&gt; &lt;action android:name=&quot;android.intent.action.VIEW&quot; /&gt; &lt;category android:name=&quot;android.intent.category.BROWSABLE&quot; /&gt; &lt;category android:name=&quot;android.intent.category.DEFAULT&quot; /&gt; &lt;/intent-filter&gt; &lt;/activity&gt;&lt;!-- å¡«å†™æ‚¨ä»Mobå¼€å‘è€…åå°ä¸­å¾—åˆ°çš„Appkeyå’ŒAppSecret --&gt;&lt;meta-data android:name=&quot;Mob-AppKey&quot; android:value=&quot;æ‚¨çš„AppKey&quot;/&gt;&lt;meta-data android:name=&quot;Mob-AppSecret&quot; android:value=&quot;æ‚¨çš„AppSecret&quot;/&gt; å…¶ä¸­Mob-AppKeyä¸Mob-AppSecretæ˜¯è‡ªå·±ç”³è¯·æ—¶åå°åˆ†é…çš„ï¼Œæ ¹æ®åå°æ•°æ®å¦‚å®æ›¿æ¢å³å¯ åœ¨assetsæ–‡ä»¶å¤¹çš„ShareSDK.xmlæ–‡ä»¶ä¸‹ï¼Œå¡«å†™æ¯ä¸ªå¹³å°éœ€è¦çš„å‚æ•°ï¼Œä¾‹å¦‚ 123456789&lt;Wechat Id=&quot;4&quot; SortId=&quot;4&quot; AppId=&quot;xxx&quot; AppSecret=&quot;xxx&quot;userName=&quot;xxx&quot;path=&quot;pages/index/index.html?id=1&quot; BypassApproval=&quot;true&quot; Enable=&quot;true&quot; /&gt; æ¯ä¸ªå­—æ®µçš„æ„æ€è¯¦è§ä¸Šé¢é“¾æ¥çš„å®˜ç½‘æ•™ç¨‹ å¯åŠ¨åˆ†äº«åœ¨éœ€è¦å¼¹å‡ºåˆ†äº«é¡µé¢è¿›è¡Œåˆ†äº«çš„é¡µé¢ï¼Œæ·»åŠ ä»¥ä¸‹æ–¹æ³• 123456789101112131415161718192021222324252627private void showShare() &#123; OnekeyShare oks = new OnekeyShare(); //å…³é—­ssoæˆæƒ oks.disableSSOWhenAuthorize(); // åˆ†äº«æ—¶Notificationçš„å›¾æ ‡å’Œæ–‡å­— 2.5.9ä»¥åçš„ç‰ˆæœ¬ä¸ è°ƒç”¨æ­¤æ–¹æ³• //oks.setNotification(R.drawable.ic_launcher, getString(R.string.app_name)); // titleæ ‡é¢˜ï¼Œå°è±¡ç¬”è®°ã€é‚®ç®±ã€ä¿¡æ¯ã€å¾®ä¿¡ã€äººäººç½‘å’ŒQQç©ºé—´ä½¿ç”¨ oks.setTitle(getString(R.string.share)); // titleUrlæ˜¯æ ‡é¢˜çš„ç½‘ç»œé“¾æ¥ï¼Œä»…åœ¨äººäººç½‘å’ŒQQç©ºé—´ä½¿ç”¨ oks.setTitleUrl(&quot;http://sharesdk.cn&quot;); // textæ˜¯åˆ†äº«æ–‡æœ¬ï¼Œæ‰€æœ‰å¹³å°éƒ½éœ€è¦è¿™ä¸ªå­—æ®µ oks.setText(&quot;æˆ‘æ˜¯åˆ†äº«æ–‡æœ¬&quot;); // imagePathæ˜¯å›¾ç‰‡çš„æœ¬åœ°è·¯å¾„ï¼ŒLinked-Inä»¥å¤–çš„å¹³å°éƒ½æ”¯æŒæ­¤å‚æ•° oks.setImagePath(&quot;/sdcard/test.jpg&quot;);//ç¡®ä¿SDcardä¸‹é¢å­˜åœ¨æ­¤å¼ å›¾ç‰‡ // urlä»…åœ¨å¾®ä¿¡ï¼ˆåŒ…æ‹¬å¥½å‹å’Œæœ‹å‹åœˆï¼‰ä¸­ä½¿ç”¨ oks.setUrl(&quot;http://sharesdk.cn&quot;); // commentæ˜¯æˆ‘å¯¹è¿™æ¡åˆ†äº«çš„è¯„è®ºï¼Œä»…åœ¨äººäººç½‘å’ŒQQç©ºé—´ä½¿ç”¨ oks.setComment(&quot;æˆ‘æ˜¯æµ‹è¯•è¯„è®ºæ–‡æœ¬&quot;); // siteæ˜¯åˆ†äº«æ­¤å†…å®¹çš„ç½‘ç«™åç§°ï¼Œä»…åœ¨QQç©ºé—´ä½¿ç”¨ oks.setSite(getString(R.string.app_name)); // siteUrlæ˜¯åˆ†äº«æ­¤å†…å®¹çš„ç½‘ç«™åœ°å€ï¼Œä»…åœ¨QQç©ºé—´ä½¿ç”¨ oks.setSiteUrl(&quot;http://sharesdk.cn&quot;); // å¯åŠ¨åˆ†äº«GUI oks.show(this);&#125; åˆ†äº«æœ‹å‹åœˆæ—¶ï¼Œå¯ä»¥åˆ†äº«ç½‘ç»œå›¾ç‰‡æˆ–æœ¬æœºå›¾ç‰‡ï¼Œæœ¬æœºå›¾ç‰‡éœ€è¦è®¾ç½® oks.setImagePath(â€œ&#x2F;sdcard&#x2F;test.jpgâ€)ï¼Œç½‘ç»œå›¾ç‰‡éœ€è¦è®¾ç½® oks.setImageUrl(url);&#x2F;&#x2F;urlå³ä¸ºç½‘ç»œå›¾ç‰‡é“¾æ¥ã€‚ åˆ†äº«å›è°ƒæœ‰æ—¶å€™æˆ‘ä»¬è¦åšæ´»åŠ¨ï¼Œåˆ†äº«æˆåŠŸåèµ é€ä¼˜æƒ åˆ¸ï¼Œè¿™æ—¶å€™æˆ‘ä»¬å¯ä»¥è®¾ç½®ç›¸å…³å›è°ƒ 12345678910111213141516oks.setCallback(new PlatformActionListener() &#123; @Override public void onComplete(Platform platform, int i, HashMap&lt;String, Object&gt; hashMap) &#123; &#125; @Override public void onError(Platform platform, int i, Throwable throwable) &#123; &#125; @Override public void onCancel(Platform platform, int i) &#123; &#125; &#125;); å¯ä»¥çœ‹åˆ°ï¼Œè¿™é‡Œé¢å®šä¹‰äº†ä¸‰ä¸ªæ–¹æ³• onCompleteï¼Œåˆ†äº«æˆåŠŸçš„å›è°ƒï¼Œå¯ä»¥åœ¨è¿™é‡Œè°ƒç”¨æ¥å£ï¼Œèµ é€ä¼˜æƒ åˆ¸ç­‰ onErrorï¼Œåˆ†äº«å‘ç”Ÿé”™è¯¯çš„å›è°ƒ onCancelï¼Œåˆ†äº«å–æ¶ˆçš„å›è°ƒæˆ‘ä»¬ä¸€èˆ¬å…³æ³¨ç¬¬ä¸€ä¸ªonCompleteå°±è¡Œ è‡³æ­¤ï¼Œå®Œæ•´çš„åˆ†äº«è¿‡ç¨‹å·²ç»å…¨éƒ¨ç»“æŸï¼Œå¯ä»¥æ¬¢å¿«çš„è¿›è¡Œç›¸å…³å¹³å°çš„åˆ†äº«äº† #åˆ†äº«é—®é¢˜ä¸è§£å†³ åˆ†äº«å®Œæˆåé€‰æ‹©ç•™åœ¨å¾®ä¿¡ï¼Œåˆ†äº«å›è°ƒå¤±æ•ˆæ­¤é—®é¢˜æš‚æ—¶æ— è§£â€¦â€¦çœŸçš„- -å®˜æ–¹è®ºå›ä¹Ÿè¯´æ²¡æœ‰è§£å†³åŠæ³•â€¦â€¦æ‰€ä»¥å–å·§çš„è§£å†³åŠæ³•æ˜¯ï¼Œåœ¨ç”¨æˆ·è°ƒç”¨åˆ†äº«çš„æ—¶å€™å°±è°ƒç”¨æ¥å£å‘æ”¾ä¼˜æƒ åˆ¸ï¼Œç¼ºç‚¹æ˜¯å¯èƒ½ä¼šé€ æˆå‡åˆ†äº« åœ¨å®‰å“6.0ä»¥ä¸Šçš„ç³»ç»Ÿåˆ†äº«ç•Œé¢æ‰“ä¸å¼€æœ¬æ¥ä»¥ä¸ºæ˜¯éƒ¨åˆ†æ‰‹æœºé—®é¢˜ï¼Œå€Ÿäº†å¾ˆå¤šæ‰‹æœºå‘ç°éƒ½æœ‰è¿™ä¸ªé—®é¢˜ï¼Œäºæ˜¯æƒ³åˆ°äº†åŠ¨æ€æƒé™é—®é¢˜ï¼Œå¯æ˜¯ä¸çŸ¥é“æ˜¯ä»€ä¹ˆæƒé™ï¼Œç›´åˆ°åœ¨æ–‡æ¡£é‡Œå‘ç°äº†è¿™æ®µè¯ å¾®ä¿¡å¹¶æ— å®é™…çš„åˆ†äº«ç½‘ç»œå›¾ç‰‡å’Œåˆ†äº«bitmapçš„åŠŸèƒ½ï¼Œå¦‚æœè®¾ç½®äº†ç½‘ç»œå›¾ç‰‡ï¼Œæ­¤å›¾ç‰‡ä¼šå…ˆä¸‹è½½ä¼šæœ¬åœ°ï¼Œä¹‹åå†å½“ä½œæœ¬åœ°å›¾ç‰‡åˆ†äº«ï¼Œå› æ­¤å»¶è¿Ÿè¾ƒå¤§ã€‚bitmapåˆ™å¥½ä¸€äº›ï¼Œä½†æ˜¯ç”±äºbitmapå¹¶ä¸çŸ¥é“å›¾ç‰‡çš„æ ¼å¼ï¼Œå› æ­¤éƒ½ä¼šè¢«å½“ä½œpngç¼–ç ï¼Œå†æäº¤å¾®ä¿¡å®¢æˆ·ç«¯ã€‚æ­¤å¤–ï¼ŒSHARE_EMOJIæ”¯æŒgifæ–‡ä»¶ï¼Œä½†æ˜¯å¦‚æœä½¿ç”¨imageDataï¼Œåˆ™é»˜è®¤åªæ˜¯æäº¤ä¸€ä¸ªpngå›¾ç‰‡ï¼Œå› ä¸ºbitmapæ˜¯é™æ€å›¾ç‰‡ã€‚ sharesdkä¼šå°†ç½‘ç»œå›¾ç‰‡æˆ–è€…å›¾ç‰‡éƒ½ä¸‹è½½åˆ°æœ¬åœ°ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿™è¾¹å¿…é¡»ç”³è¯·å­˜å‚¨æƒé™ã€‚åœ¨ç”³è¯·å®Œå­˜å‚¨æƒé™ååˆ†äº«ï¼ŒæˆåŠŸï¼é—®é¢˜è§£å†³","categories":[{"name":"å¼€å‘","slug":"å¼€å‘","permalink":"https://maydaychen.github.io/categories/%E5%BC%80%E5%8F%91/"}],"tags":[{"name":"Android","slug":"Android","permalink":"https://maydaychen.github.io/tags/Android/"}]},{"title":"Androidè®°å½•10--Imageviewç›¸å…³å°çŸ¥è¯†","slug":"Androidè®°å½•10--Imageviewç›¸å…³å°çŸ¥è¯†","date":"2020-07-07T06:39:39.000Z","updated":"2025-02-24T15:29:54.397Z","comments":true,"path":"2020/07/07/Androidè®°å½•10--Imageviewç›¸å…³å°çŸ¥è¯†/","link":"","permalink":"https://maydaychen.github.io/2020/07/07/Android%E8%AE%B0%E5%BD%9510--Imageview%E7%9B%B8%E5%85%B3%E5%B0%8F%E7%9F%A5%E8%AF%86/","excerpt":"","text":"å›¾ç‰‡æ¸…é™¤æ€»ç»“ï¼šä¹‹å‰ç”¨ä»€ä¹ˆæ–¹æ³•è®¾ç½®çš„å°±ç”¨ä»€ä¹ˆæ–¹æ³•æ¸…é™¤eg:å¦‚æœä¹‹å‰æ˜¯ç”¨çš„ 1ivThankPic.setImageBitmap(bmp); é‚£æˆ‘ä»¬å¦‚æœæƒ³è¦æ¸…é™¤å›¾ç‰‡å†…å®¹ï¼Œæˆ‘ä»¬å°±éœ€è¦ä½¿ç”¨ 1ivThankPic.setImageBitmap(null); è®¾ç½®äº†backgroundå°±éœ€è¦ä½¿ç”¨å¯¹åº”çš„backgroundæ”¹ ImageLoaderåŠ è½½ç½‘ç»œå›¾ç‰‡githubåœ°å€ å¯¼å…¥æ–¹æ³• ä¸‹è½½jaråŒ…å¹¶æ‰‹åŠ¨å¯¼å…¥ï¼š1implementation files(&#x27;libs/universal-image-loader-1.9.5.jar&#x27;) åœ¨build.gradleä¸­æ·»åŠ 1compile â€˜com.nostra13.universalimageloader:universal-image-loader:1.9.5â€™ æ·»åŠ æƒé™éœ€è¦æ·»åŠ å†™å…¥æƒé™ä»¥åŠè”ç½‘æƒé™ï¼Œæ³¨æ„å®‰å“6.0ä»¥ååŠ¨æ€æƒé™é—®é¢˜ 12&lt;uses-permission android:name=&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot; /&gt; &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt; åˆå§‹åŒ–123 // åˆå§‹åŒ–ImageLoaderConfiguration configuration = new ImageLoaderConfiguration.Builder(this).writeDebugLogs().build();ImageLoader.getInstance().init(configuration); åŠ è½½å›¾ç‰‡12345678910111213141516171819202122232425262728293031323334353637383940 // å…ˆè®¾ç½®ç½‘ä¸Šå›¾ç‰‡çš„è·¯å¾„ String uri = &quot;&quot;; // å¯ä»¥è®¾ç½®å›¾ç‰‡å¤§å° ImageSize mImageSize = new ImageSize(300, 300); // å›¾ç‰‡çš„ç›¸å…³é…ç½® DisplayImageOptions mOptions = new DisplayImageOptions.Builder() .cacheInMemory(true).cacheOnDisc(true) .bitmapConfig(Bitmap.Config.RGB_565).build(); ImageLoader.getInstance().loadImage(uri, mImageSize, mOptions, new ImageLoadingListener() &#123; @Override public void onLoadingStarted(String arg0, View arg1) &#123; // TODO Auto-generated method stub //å›¾ç‰‡å¼€å§‹åŠ è½½çŠ¶æ€ &#125; @Override public void onLoadingFailed(String arg0, View arg1, FailReason arg2) &#123; // TODO Auto-generated method stub //å›¾ç‰‡åŠ è½½å¤±è´¥åå›è°ƒï¼Œå¯ä»¥åœ¨è¿™è®¾ç½®å›¾ç‰‡åŠ è½½å¤±è´¥åçš„é»˜è®¤å›¾ç­‰ &#125; @Override public void onLoadingComplete(String arg0, View arg1, Bitmap arg2) &#123; ivPersonLogo.setImageBitmap(arg2); //å›¾ç‰‡åŠ è½½å®Œæˆï¼Œarg2å³ä¸ºåŠ è½½å‡ºçš„å›¾ç‰‡ï¼Œä»¥bitmapå½¢å¼å­˜åœ¨ &#125; @Override public void onLoadingCancelled(String arg0, View arg1) &#123; // TODO Auto-generated method stub //å›¾ç‰‡åŠ è½½å–æ¶ˆå›è°ƒ &#125; &#125;);&#125;","categories":[{"name":"å¼€å‘","slug":"å¼€å‘","permalink":"https://maydaychen.github.io/categories/%E5%BC%80%E5%8F%91/"}],"tags":[{"name":"Android","slug":"Android","permalink":"https://maydaychen.github.io/tags/Android/"}]},{"title":"Androidè®°å½•9--è‡ªåŠ¨åŒºåˆ†dev\\releaseç­‰ç¯å¢ƒå˜é‡å¹¶æ‰“åŒ…","slug":"Androidè®°å½•9--è‡ªåŠ¨åŒºåˆ†dev-releaseç­‰ç¯å¢ƒå˜é‡å¹¶æ‰“åŒ…","date":"2020-06-09T06:22:03.000Z","updated":"2025-02-24T15:34:02.383Z","comments":true,"path":"2020/06/09/Androidè®°å½•9--è‡ªåŠ¨åŒºåˆ†dev-releaseç­‰ç¯å¢ƒå˜é‡å¹¶æ‰“åŒ…/","link":"","permalink":"https://maydaychen.github.io/2020/06/09/Android%E8%AE%B0%E5%BD%959--%E8%87%AA%E5%8A%A8%E5%8C%BA%E5%88%86dev-release%E7%AD%89%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F%E5%B9%B6%E6%89%93%E5%8C%85/","excerpt":"","text":"å‰è¨€å¹³æ—¶Androidé¡¹ç›®æ‰“åŒ…ï¼Œéƒ½æ˜¯ç›´æ¥ç‚¹å‡»buildé€‰æ‹©releaseï¼Œè®©ç¼–è¯‘å™¨è‡ªåŠ¨è¿›è¡Œæ‰“åŒ…æ“ä½œ ä½†æ˜¯è¿™æ ·å­æ“ä½œæœ‰ä¸€ä¸ªé—®é¢˜ï¼Œdevç¯å¢ƒè·Ÿreleaseç¯å¢ƒçš„æ¥å£è¯·æ±‚åœ°å€å¹¶ä¸ä¸€è‡´ï¼Œç¬¬ä¸‰æ–¹sdkçš„appidç­‰å‚æ•°ä¹Ÿå¾—æ”¹ï¼Œä»¥è‡³äºæ¯æ¬¡åˆ‡æ¢ç¯å¢ƒï¼Œéƒ½å¾—èŠ±å¥½ä¹…æ‰èƒ½æŠŠæ‰€æœ‰å‚æ•°æ”¹ä¸€éï¼Œå¦‚æœæ”¹é”™äº†è¿˜å¾—é‡æ¥ï¼Œè¢«æµ‹è¯•é‚£è¾¹è¯´ï¼Œæœ‰æ²¡æœ‰åŠæ³•å¯ä»¥ä¸€æ­¥åˆ°ä½ï¼Œè®©ç¼–è¯‘å™¨è‡ªåŠ¨åŒ¹é…å‚æ•°å‘¢ï¼Ÿ è§£å†³åŠæ³•æ‰€æœ‰æ­¥éª¤éƒ½åœ¨app&#x2F;build.gradleä¸­ï¼Œéƒ½åœ¨android{}æ‹¬å·ä¸­ æˆ‘ä»¬è¿™è¾¹ç¬¬ä¸‰æ–¹sdkä»¥æå…‰ä¸ºä¾‹ é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦ä¿®æ”¹appè·¯å¾„ä¸‹çš„build.gradle ç¬¬ä¸€æ­¥å®šä¹‰å¥½è‡ªå·±éœ€è¦çš„ç¯å¢ƒï¼ŒmyDebugè·ŸmyReleaseåå­—å¯ä»¥æ ¹æ®éœ€è¦å– 12345678910111213141516android&#123; signingConfigs &#123; myDebug&#123; keyAlias &#x27;xxxx&#x27; keyPassword &#x27;xxxx&#x27; storeFile file(&#x27;jksçš„è·¯å¾„&#x27;) storePassword &#x27;xxxx&#x27; &#125; myRelease &#123; keyAlias &#x27;xxxx&#x27; keyPassword &#x27;xxxx&#x27; storeFile file(&#x27;jksçš„è·¯å¾„&#x27;) storePassword &#x27;xxxx&#x27; &#125; &#125;&#125; ç¬¬äºŒæ­¥123 defaultConfig &#123;//å¯ä»¥åœ¨è¿™é‡Œé¢å†™ä¸€äº›å…±é€šçš„é…ç½®ä¿¡æ¯ï¼Œæ¯”æ–¹è¯´versionCodeä¹‹ç±»çš„&#125; ç¬¬ä¸‰æ­¥åˆ†åˆ«é…ç½®debugç¯å¢ƒè·Ÿreleaseç¯å¢ƒçš„ç›¸å…³å˜é‡ï¼Œè¿™è¾¹æˆ‘ä»¬å¯ä»¥åœ¨manifestPlaceholdersé…ç½®appåç§°&#x2F;ç¬¬ä¸‰æ–¹appkeyï¼Œè¿™äº›é…ç½®å¯ä»¥åœ¨manifestæ–‡ä»¶ä¸­å»è¿›è¡Œå¼•ç”¨ï¼›ä¹Ÿå¯ä»¥é€šè¿‡å®šä¹‰buildConfigFieldé…ç½®ä¸åŒçš„ç¯å¢ƒè®¿é—®çš„ä¸åŒçš„ipåœ°å€ï¼Œåœ¨retrofitç›¸å…³çš„httpMethodsä¸­å»å¼•ç”¨ 12345678910111213141516171819202122232425262728293031323334353637buildTypes &#123; debug &#123; minifyEnabled false// shrinkResources true signingConfig signingConfigs.debug proguardFiles getDefaultProguardFile(&#x27;proguard-android-optimize.txt&#x27;), &#x27;proguard-rules.pro&#x27; manifestPlaceholders = [ app_label : &quot;@string/app_name_dev&quot;, JPUSH_APPKEY : &quot;xxxxxxx&quot;, //JPush ä¸Šç”Ÿäº§ç¯å¢ƒæ³¨å†Œçš„åŒ…åå¯¹åº”çš„ Appkey. JPUSH_CHANNEL: &quot;developer-default&quot; //æš‚æ—¶å¡«å†™é»˜è®¤å€¼å³å¯. ] applicationIdSuffix = &#x27;.test&#x27; buildConfigField &quot;String&quot;, &quot;BASE_URL&quot;, &quot;\\&quot;http://xxxxx:xxx\\&quot;&quot; &#125; release &#123; minifyEnabled false signingConfig signingConfigs.release proguardFiles getDefaultProguardFile(&#x27;proguard-android-optimize.txt&#x27;), &#x27;proguard-rules.pro&#x27; manifestPlaceholders = [ app_label : &quot;@string/app_name_release&quot;, JPUSH_APPKEY : &quot;xxxxxxx&quot;, //JPush ä¸Šç”Ÿäº§ç¯å¢ƒæ³¨å†Œçš„åŒ…åå¯¹åº”çš„ Appkey. JPUSH_CHANNEL: &quot;developer-default&quot;, //æš‚æ—¶å¡«å†™é»˜è®¤å€¼å³å¯. ] buildConfigField &quot;String&quot;, &quot;BASE_URL&quot;, &quot;\\&quot;http://xxxxx:xxx\\&quot;&quot; &#125; &#125;//è¿™è¾¹å¯ä»¥æ ¹æ®ç‰ˆæœ¬è‡ªå®šä¹‰ç”Ÿæˆçš„apkçš„åå­—applicationVariants.all &#123; variant -&gt; variant.outputs.all &#123; output -&gt; if (variant.buildType.name.equals(&#x27;debug&#x27;)) &#123; outputFileName = &quot;app-user-uat-release&quot; + &quot;.apk&quot; &#125; else if (variant.buildType.name.equals(&#x27;release&#x27;)) &#123; outputFileName = &quot;app-user-production-release&quot; + &quot;.apk&quot; &#125; &#125; &#125; ç¬¬å››æ­¥ç°åœ¨æˆ‘ä»¬å¯ä»¥åœ¨AndroidMenifestsæ–‡ä»¶ä¸­ï¼ŒåŠ¨æ€åœ°è®¾ç½®appåç§°ç­‰ä¿¡æ¯,${xxxx}å³ç¬¬ä¸‰éƒ¨ä¸­åœ¨build.gradleä¸­manifestPlaceholdersä¸­å®šä¹‰çš„é‚£äº›å­—æ®µ 12345678910111213&lt;application android:name=&quot;.MyApplication&quot; android:allowBackup=&quot;false&quot; android:icon=&quot;@mipmap/ic_launcher&quot; android:label=&quot;$&#123;app_label&#125;&quot; android:roundIcon=&quot;@mipmap/ic_launcher&quot; android:supportsRtl=&quot;true&quot; android:theme=&quot;@style/AppTheme&quot; tools:replace=&quot;android:allowBackup&quot;&gt; &lt;meta-data android:name=&quot;JPUSH_APPKEY&quot; android:value=&quot;$&#123;JPUSH_APPKEY&#125;&quot; /&gt; &lt;/application&gt; ç¬¬äº”æ­¥æˆ‘ä»¬å¯ä»¥åœ¨configæ–‡ä»¶ä¸­å°†BASE_URLèµ‹å€¼ä¸ºç¬¬ä¸‰æ­¥ä¸­é€šè¿‡buildConfigFieldå£°æ˜çš„å˜é‡ 1234public class Config &#123; //æ­£å¼ç¯å¢ƒ public static String BASE_URL = BuildConfig.BASE_URL;&#125; ç»“å°¾ç»è¿‡ä¸Šé¢çš„äº”æ­¥æ“ä½œï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å¯ä»¥åœ¨æ‰“åŒ…æ—¶è‡ªåŠ¨åŒºåˆ†ç¯å¢ƒäº†ï¼Œä¸å†éœ€è¦æ¯æ¬¡åˆ‡æ¢ç¯å¢ƒçš„æ—¶å€™è‡ªå·±å»æ”¹ç¯å¢ƒï¼Œæ”¹appkeyä¹‹ç±»çš„äº†ï¼Œç”šè‡³ä¹Ÿä¸éœ€è¦ç»™apkè¿›è¡Œé‡å‘½åäº†ï¼Œæ‰“åŒ…çš„æ•ˆç‡æå‡äº†ä¸æ­¢ä¸€ç‚¹ç‚¹ ##æ³¨æ„ç‚¹1. 1234567891011121314signingConfigs &#123; debug&#123; keyAlias &#x27;key0&#x27; keyPassword &#x27;android&#x27; storeFile file(&#x27;../sgi_back.jks&#x27;) storePassword &#x27;android&#x27; &#125; release &#123; keyAlias &#x27;key0&#x27; keyPassword &#x27;android&#x27; storeFile file(&#x27;../sgi_back.jks&#x27;) storePassword &#x27;android&#x27; &#125; &#125; å³ç¬¬ä¸€æ­¥ï¼Œå¿…é¡»è¦æœ‰ï¼ä¸ç„¶ä¼šæŠ¥é”™Could not get unknown property â€˜releaseâ€™ for SigningConfig container åœ¨å¹³æ—¶è¿è¡Œæ—¶ï¼Œæˆ‘ä»¬éƒ½æ˜¯ç›´æ¥æŒ‰ç»¿è‰²çš„ä¸‰è§’å½¢ï¼Œä½†æ˜¯éƒ½æ˜¯é»˜è®¤debugç¯å¢ƒï¼Œå¦‚æœæƒ³åˆ‡æ¢è¿è¡Œç¯å¢ƒï¼Œè¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿ è¯¥å›¾ä½äºASçš„å·¦ä¸‹è§’ï¼Œç‚¹å‡»Build Variantsï¼Œå†ç‚¹å‡»å³ä¾§çš„åç§°ï¼Œä¼šç»™ä½ é€‰æ‹©debugè¿˜æ˜¯releaseç¯å¢ƒï¼Œé€‰æ‹©è‡ªå·±æƒ³è¦è¿è¡Œçš„ç¯å¢ƒå³å¯ æ‰“åŒ…åœ¨æ§åˆ¶å°æ‰§è¡Œå‘½ä»¤ gradlew assembleï¼Œæ‰§è¡Œå®Œæ¯•åä¼šåœ¨ app\\build\\outputs\\apk é‡Œäº§ç”Ÿ æ‰€æœ‰ä½ é…ç½®è¿‡çš„apkæ–‡ä»¶ åœ¨æ‰§è¡Œæ‰“åŒ…å‘½ä»¤å‰ï¼Œæœ€å¥½å…ˆæ‰§è¡Œä¸‹ gradlew clean å‘½ä»¤","categories":[{"name":"å¼€å‘","slug":"å¼€å‘","permalink":"https://maydaychen.github.io/categories/%E5%BC%80%E5%8F%91/"}],"tags":[{"name":"Android","slug":"Android","permalink":"https://maydaychen.github.io/tags/Android/"}]},{"title":"Androidè®°å½•8--ç¼–è¯‘æ—¶éƒ¨åˆ†é”™è¯¯è®°è½½","slug":"Androidè®°å½•8--ç¼–è¯‘æ—¶éƒ¨åˆ†é”™è¯¯è®°è½½","date":"2020-06-09T06:14:52.000Z","updated":"2025-02-24T15:28:45.959Z","comments":true,"path":"2020/06/09/Androidè®°å½•8--ç¼–è¯‘æ—¶éƒ¨åˆ†é”™è¯¯è®°è½½/","link":"","permalink":"https://maydaychen.github.io/2020/06/09/Android%E8%AE%B0%E5%BD%958--%E7%BC%96%E8%AF%91%E6%97%B6%E9%83%A8%E5%88%86%E9%94%99%E8%AF%AF%E8%AE%B0%E8%BD%BD/","excerpt":"","text":"java.lang.IllegalArgumentException: URLDecoder: Illegal hex characters in esJavaè°ƒç”¨ URLDecoder.decode(str, â€œUTF-8â€); æŠ›å‡ºä»¥ä¸Šçš„å¼‚å¸¸ï¼Œå…¶ä¸»è¦åŸå› æ˜¯% åœ¨URLä¸­æ˜¯ç‰¹æ®Šå­—ç¬¦ï¼Œéœ€è¦ç‰¹æ®Šè½¬ä¹‰ä¸€ä¸‹ï¼Œ ä¸Šé¢çš„å­—ç¬¦ä¸²ä¸­â€™%â€™æ˜¯ä¸€ä¸ªä¸­æ–‡å­—ç¬¦â€™æ˜¯â€™ï¼Œè€Œè½¬æ¢çš„å®ç°æ˜¯å°†%åé¢çš„ä¸¤ä¸ªå­—ç¬¦ä¸€èµ·è½¬ä¸ºä¸€ä¸ª16è¿›åˆ¶æ•°ã€‚æ‹¿â€%æ˜¯â€æ¥è½¬æ¢æ•°å­—ï¼Œè‚¯å®šä¼šæœ‰NumberFormatExceptionå¼‚å¸¸ã€‚ ç±»ä¼¼çš„å¦‚æœè¯·æ±‚å­—ç¬¦ä¸²ä¸­æœ‰â€™+â€™ï¼Œä¹Ÿä¼šæœ‰é—®é¢˜ã€‚å› ä¸ºâ€™+â€™è¢«å½“åšç©ºæ ¼ä½¿ç”¨äº†ã€‚ ä¸€ä¸ªè§£å†³åŠæ³•å°±æ˜¯å°†%æ›¿æ¢ä¸º%25ã€‚ 123data = data.replaceAll(&quot;%(?![0-9a-fA-F]&#123;2&#125;)&quot;, &quot;%25&quot;);data = data.replaceAll(&quot;\\\\+&quot;, &quot;%2B&quot;);data = URLDecoder.decode(data, &quot;utf-8&quot;); è¿™é‡Œä½¿ç”¨äº†ä¸€ä¸ªç‰¹æ®Šæ­£åˆ™è¡¨è¾¾å¼ï¼šé›¶å®½è´Ÿå‘å…ˆè¡Œæ–­è¨€(zero-width negative lookahead assertion)ï¼Œæ¨¡å¼ä¸º(?!pattern)ï¼Œä»£è¡¨å­—ç¬¦ä¸²ä¸­çš„ä¸€ä¸ªä½ç½®ï¼Œç´§æ¥è¯¥ä½ç½®ä¹‹åçš„å­—ç¬¦åºåˆ—ä¸èƒ½åŒ¹é…patternã€‚%(?![0-9a-fA-F]{2})æ„æ€æ˜¯â€™%â€™å¼€å§‹ï¼Œä½†æ˜¯åé¢ä¸¤ä¸ªå­—ç¬¦ä¸æ˜¯æ•°å­—ï¼Œä¹Ÿä¸æ˜¯å­—æ¯ã€‚ Androidç‰ˆæœ¬27ä»¥ä¸Šnot permitted by network security policyç”±äº Android P(ç‰ˆæœ¬27ä»¥ä¸Š) é™åˆ¶äº†æ˜æ–‡æµé‡çš„ç½‘ç»œè¯·æ±‚ï¼ŒéåŠ å¯†çš„æµé‡è¯·æ±‚éƒ½ä¼šè¢«ç³»ç»Ÿç¦æ­¢æ‰ã€‚å¦‚æœå½“å‰åº”ç”¨çš„è¯·æ±‚æ˜¯ htttp è¯·æ±‚ï¼Œè€Œé https ,è¿™æ ·å°±ä¼šå¯¼ç³»ç»Ÿç¦æ­¢å½“å‰åº”ç”¨è¿›è¡Œè¯¥è¯·æ±‚ è§£å†³åŠæ³•ï¼š ï¼ˆæ¨èï¼‰æœåŠ¡å™¨å’Œæœ¬åœ°åº”ç”¨éƒ½æ”¹ç”¨ https (æ¨è) è®¾ç½®targetSdkVersion &lt;&#x3D; 27 åœ¨ res ä¸‹æ–°å»ºä¸€ä¸ª xml ç›®å½•ï¼Œç„¶ååˆ›å»ºä¸€ä¸ªåä¸ºï¼šnetwork_security_config.xml æ–‡ä»¶ ï¼Œè¯¥æ–‡ä»¶å†…å®¹å¦‚ä¸‹1234&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&lt;network-security-config&gt;&lt;base-config cleartextTrafficPermitted=&quot;true&quot; /&gt;&lt;/network-security-config&gt; å¹¶åœ¨ AndroidManifest.xml applicationå¢åŠ é…ç½®1android:networkSecurityConfig=&quot;@xml/network_security_config&quot; Received close_notify during handshakeé—®é¢˜å­˜åœ¨åŸå› ï¼šè¿™æ˜¯Androidç¼–è¯‘é”™è¯¯ï¼Œjcenteré‡Œé¢çš„ä¸œè¥¿ä¸‹è½½ä¸äº†å¼•èµ·çš„ã€‚ é—®é¢˜è§£å†³ï¼šåœ¨é¡¹ç›®çš„build.gradleæ–‡ä»¶ä¸­å°†jcenter()æ¢æˆé˜¿é‡Œçš„æºï¼Œå…·ä½“ç¤ºä¾‹ä»£ç å¦‚ä¸‹ã€‚ä¿®æ”¹ä¹‹åå†é‡æ–°Sync Projectå³å¯ã€‚ 12345678repositories &#123; mavenCentral() mavenLocal() // jcenter() maven&#123; url&#x27;http://maven.aliyun.com/nexus/content/groups/public/&#x27; &#125; maven&#123; url&#x27;http://maven.aliyun.com/nexus/content/repositories/jcenter&#x27;&#125; google() &#125;","categories":[{"name":"å¼€å‘","slug":"å¼€å‘","permalink":"https://maydaychen.github.io/categories/%E5%BC%80%E5%8F%91/"}],"tags":[{"name":"Android","slug":"Android","permalink":"https://maydaychen.github.io/tags/Android/"}]},{"title":"IDEAå…¨å®¶æ¡¶ æœç´¢é¡¹ç›®ä¸­æ‰€æœ‰ä¸­æ–‡å­—ç¬¦","slug":"IDEAå…¨å®¶æ¡¶æœç´¢é¡¹ç›®ä¸­æ‰€æœ‰ä¸­æ–‡å­—ç¬¦","date":"2020-01-13T07:51:23.000Z","updated":"2024-12-27T06:44:08.000Z","comments":true,"path":"2020/01/13/IDEAå…¨å®¶æ¡¶æœç´¢é¡¹ç›®ä¸­æ‰€æœ‰ä¸­æ–‡å­—ç¬¦/","link":"","permalink":"https://maydaychen.github.io/2020/01/13/IDEA%E5%85%A8%E5%AE%B6%E6%A1%B6%E6%90%9C%E7%B4%A2%E9%A1%B9%E7%9B%AE%E4%B8%AD%E6%89%80%E6%9C%89%E4%B8%AD%E6%96%87%E5%AD%97%E7%AC%A6/","excerpt":"","text":"éœ€æ±‚åœ¨å¾ˆå¤šå›½é™…æ€§é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬æœ‰æ—¶å€™æœ‰è¦æ±‚ä¸èƒ½å‡ºç°ä¸­æ–‡çš„æ³¨é‡Šç­‰ï¼Œå…¨å±€éƒ½è¦ä½¿ç”¨è‹±æ–‡ ä½†æ˜¯åœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œä¸ºäº†è®©è‡ªå·±èˆ’æœï¼Œè‚¯å®šæ˜¯ä¼˜å…ˆé€‰æ‹©ä¸­æ–‡æ³¨é‡Šï¼Œç­‰åˆ°æ­£å¼æäº¤äº†æ‰ä¼šæŠŠä»–ä»¬æ”¹æˆè‹±æ–‡ é‚£ä¹ˆï¼Œè¿™ç§éœ€æ±‚æ€ä¹ˆå®ç°å‘¢ï¼Ÿ å®ç°æ‰“å¼€å…¨å±€æœç´¢Edit -&gt; Find -&gt; Find In Pathè¾“å…¥æ­£åˆ™è¡¨è¾¾å¼ï¼š 1^((?!(\\*|//)).)+[\\u4e00-\\u9fa5] å³å¯æœç´¢æ‰€æœ‰çš„ä¸­æ–‡ï¼Œç„¶åå°†ä»–ä»¬æ”¹æˆè‹±æ–‡","categories":[{"name":"å¼€å‘","slug":"å¼€å‘","permalink":"https://maydaychen.github.io/categories/%E5%BC%80%E5%8F%91/"}],"tags":[]},{"title":"Androidè®°å½•7--LinearLayoutè®¾ç½®selectorå¹¶å°†çŠ¶æ€ä¼ é€’åˆ°å­view","slug":"Androidè®°å½•7--LinearLayoutè®¾ç½®selectorå¹¶å°†çŠ¶æ€ä¼ é€’åˆ°å­view","date":"2019-08-22T07:57:02.000Z","updated":"2025-02-24T15:34:02.381Z","comments":true,"path":"2019/08/22/Androidè®°å½•7--LinearLayoutè®¾ç½®selectorå¹¶å°†çŠ¶æ€ä¼ é€’åˆ°å­view/","link":"","permalink":"https://maydaychen.github.io/2019/08/22/Android%E8%AE%B0%E5%BD%957--LinearLayout%E8%AE%BE%E7%BD%AEselector%E5%B9%B6%E5%B0%86%E7%8A%B6%E6%80%81%E4%BC%A0%E9%80%92%E5%88%B0%E5%AD%90view/","excerpt":"","text":"åœ¨LinearLayoutä¸­ï¼Œå¦‚æœåŒæ—¶ä¸ºLinearLayoutä¸å­TextViewè®¾ç½®selectorï¼Œæ˜¯å¯ä»¥å®ç°çš„ï¼Œä»£ç å¦‚ä¸‹ 123456789101112131415161718192021222324 &lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot; android:id=&quot;@+id/ll_company&quot; android:layout_width=&quot;match_parent&quot; android:layout_height=&quot;102dp&quot; android:layout_marginStart=&quot;25dp&quot; android:layout_marginEnd=&quot;25dp&quot; android:layout_marginBottom=&quot;20dp&quot; android:background=&quot;@drawable/selector_company&quot; android:clickable=&quot;true&quot; android:focusable=&quot;true&quot; android:focusableInTouchMode=&quot;true&quot;&gt; &lt;TextView android:id=&quot;@+id/tv_company_name&quot; android:layout_width=&quot;wrap_content&quot; android:layout_height=&quot;match_parent&quot; android:layout_marginStart=&quot;20dp&quot; android:drawableStart=&quot;@mipmap/company_uncheck&quot; android:drawablePadding=&quot;20dp&quot; android:gravity=&quot;center_vertical&quot; android:text=&quot;test&quot; android:textColor=&quot;@drawable/selector_company_text&quot; android:textSize=&quot;19sp&quot; /&gt;&lt;/LinearLayout&gt; selectoræ–‡ä»¶ä¸ºï¼šselector_company.xmlï¼š 1234567891011&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&lt;selector xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt; &lt;item android:drawable=&quot;@drawable/company_selected&quot; android:state_focused=&quot;true&quot; /&gt; &lt;item android:drawable=&quot;@drawable/company_selected&quot; android:state_checked=&quot;true&quot; /&gt; &lt;item&gt; &lt;shape&gt; &lt;corners android:radius=&quot;15dp&quot; /&gt; &lt;solid android:color=&quot;@color/white&quot; /&gt; &lt;/shape&gt; &lt;/item&gt;&lt;/selector&gt; selector_company_text.xml: 123456&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&lt;selector xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt; &lt;item android:state_focused=&quot;true&quot; android:color=&quot;@color/white&quot; /&gt; &lt;item android:state_pressed=&quot;true&quot; android:color=&quot;@color/white&quot; /&gt; &lt;item android:color=&quot;@color/title&quot; android:state_checked=&quot;false&quot; /&gt;&lt;/selector&gt; æ­¤æ—¶ï¼Œtextviewå¯ä»¥å“åº”pressedçŠ¶æ€ï¼Œä½†æ˜¯ï¼ï¼ æ— æ³•ä¸LinearLayoutä¸€æ ·ä¿æŒfocusedçŠ¶æ€##è§£å†³åŠæ³•ï¼šä¸ºTextViewåŠ ä¸Š 1android:duplicateParentState=&quot;true&quot; android:duplicateParentStateæŒ‡çš„æ˜¯å½“å‰æ§ä»¶æ˜¯å¦è·Ÿéšçˆ¶æ§ä»¶çš„(ç‚¹å‡»ã€ç„¦ç‚¹ç­‰)çŠ¶æ€ PS:ç½‘ä¸Šæœ‰è¯´ç”¨RadioGroupæ¥å®ç°ï¼Œä½†æ˜¯ä¸é€‚ç”¨äºç”¨RecyclerViewå±•ç¤ºçš„LinearLayoutPS2:å°è¯•è¿‡ä½¿ç”¨CheckBoxï¼Œä½†æ˜¯é‡å¤ç‚¹å‡»ä¼šæœ‰checkedè·ŸuncheckedçŠ¶æ€é‡å¤åˆ‡æ¢ï¼Œä¸é€‚ç”¨","categories":[{"name":"å¼€å‘","slug":"å¼€å‘","permalink":"https://maydaychen.github.io/categories/%E5%BC%80%E5%8F%91/"}],"tags":[{"name":"Android","slug":"Android","permalink":"https://maydaychen.github.io/tags/Android/"}]},{"title":"Androidè®°å½•6--WebViewç›¸å…³å°çŸ¥è¯†","slug":"Androidè®°å½•6--WebViewç›¸å…³å°çŸ¥è¯†","date":"2019-07-18T06:49:28.000Z","updated":"2025-02-24T15:28:45.969Z","comments":true,"path":"2019/07/18/Androidè®°å½•6--WebViewç›¸å…³å°çŸ¥è¯†/","link":"","permalink":"https://maydaychen.github.io/2019/07/18/Android%E8%AE%B0%E5%BD%956--WebView%E7%9B%B8%E5%85%B3%E5%B0%8F%E7%9F%A5%E8%AF%86/","excerpt":"","text":"webviewæ— æ³•å±•ç¤ºalertè§£å†³åŠæ³•ï¼š 1mWebView.setWebChromeClient(new WebChromeClient()); Android webviewæ”¯æŒè·å–æœ¬åœ°å›¾ç‰‡æˆ–æ‹ç…§æ³¨æ„ï¼šAndroid6.0ä»¥ä¸Šéœ€è¦é¦–å…ˆè·å–æ‘„åƒå¤´æƒé™ï¼Œä¸ç„¶æ— æ³•è·å–ç…§ç‰‡ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254255256257258259260261262263264265266267268269270271272273274275276277278279280281282283284285286287288289290291292293294295296297298299package com.wshoto.user.anyong.ui.activity;public class BBSActivity extends InitActivity &#123; @BindView(R.id.wv_bbs) WebView mWvBbs; private ValueCallback&lt;Uri&gt; mUploadMessage;// è¡¨å•çš„æ•°æ®ä¿¡æ¯ private ValueCallback&lt;Uri[]&gt; mUploadCallbackAboveL; private final static int FILECHOOSER_RESULTCODE = 1;// è¡¨å•çš„ç»“æœå›è°ƒ private Uri imageUri; @Override public void initView(Bundle savedInstanceState) &#123; setContentView(R.layout.activity_bbs); ButterKnife.bind(this); init(); &#125; @Override public void initData() &#123; mWvBbs.loadUrl(&quot;https://xxx&quot;); &#125; private void init() &#123; WebSettings webSettings = mWvBbs.getSettings(); webSettings.setUseWideViewPort(true);//è®¾ç½®æ­¤å±æ€§ï¼Œå¯ä»»æ„æ¯”ä¾‹ç¼©æ”¾ webSettings.setRenderPriority(WebSettings.RenderPriority.HIGH); webSettings.setUseWideViewPort(true); webSettings.setLoadWithOverviewMode(true); webSettings.setJavaScriptEnabled(true); webSettings.setAppCacheMaxSize(1024 * 1024 * 8); String appCachePath = getApplicationContext().getCacheDir().getAbsolutePath(); webSettings.setAppCachePath(appCachePath); webSettings.setAllowFileAccess(true); webSettings.setSupportZoom(true); webSettings.setJavaScriptCanOpenWindowsAutomatically(true); webSettings.setTextSize(WebSettings.TextSize.NORMAL); mWvBbs.getSettings().setCacheMode(WebSettings.LOAD_NO_CACHE); //open dom storage webSettings.setDomStorageEnabled(true); //priority high webSettings.setRenderPriority(WebSettings.RenderPriority.HIGH); webSettings.setAppCacheEnabled(true); webSettings.setDatabaseEnabled(true); webSettings.setDatabasePath(BBSActivity.this.getApplicationContext().getCacheDir().getAbsolutePath()); //add by wjj end String ua = webSettings.getUserAgentString(); mWvBbs.setWebChromeClient(new WebChromeClient() &#123; @Override public boolean onShowFileChooser(WebView webView, ValueCallback&lt;Uri[]&gt; filePathCallback, FileChooserParams fileChooserParams) &#123; mUploadCallbackAboveL = filePathCallback; take(); return true; &#125; public void openFileChooser(ValueCallback&lt;Uri&gt; uploadMsg) &#123; mUploadMessage = uploadMsg; take(); &#125; public void openFileChooser(ValueCallback&lt;Uri&gt; uploadMsg, String acceptType) &#123; mUploadMessage = uploadMsg; take(); &#125; public void openFileChooser(ValueCallback&lt;Uri&gt; uploadMsg, String acceptType, String capture) &#123; mUploadMessage = uploadMsg; take(); &#125; &#125;); mWvBbs.setWebViewClient(new WebViewClient() &#123; @Override public boolean shouldOverrideUrlLoading(WebView view, String url) &#123; //è¯¥æ–¹æ³•åœ¨Build.VERSION_CODES.LOLLIPOPä»¥å‰æœ‰æ•ˆï¼Œä»Build.VERSION_CODES.LOLLIPOPèµ·ï¼Œå»ºè®®ä½¿ç”¨shouldOverrideUrlLoading(WebView, WebResourceRequest)&#125; instead //è¿”å›falseï¼Œæ„å‘³ç€è¯·æ±‚è¿‡ç¨‹é‡Œï¼Œä¸ç®¡æœ‰å¤šå°‘æ¬¡çš„è·³è½¬è¯·æ±‚ï¼ˆå³æ–°çš„è¯·æ±‚åœ°å€ï¼‰ï¼Œå‡äº¤ç»™webViewè‡ªå·±å¤„ç†ï¼Œè¿™ä¹Ÿæ˜¯æ­¤æ–¹æ³•çš„é»˜è®¤å¤„ç† //è¿”å›trueï¼Œè¯´æ˜ä½ è‡ªå·±æƒ³æ ¹æ®urlï¼Œåšæ–°çš„è·³è½¬ï¼Œæ¯”å¦‚åœ¨åˆ¤æ–­urlç¬¦åˆæ¡ä»¶çš„æƒ…å†µä¸‹ï¼Œæˆ‘æƒ³è®©webViewåŠ è½½http://ask.csdn.net/questions/178242 return false; &#125; @Override public boolean shouldOverrideUrlLoading(WebView view, WebResourceRequest request) &#123; //è¿”å›falseï¼Œæ„å‘³ç€è¯·æ±‚è¿‡ç¨‹é‡Œï¼Œä¸ç®¡æœ‰å¤šå°‘æ¬¡çš„è·³è½¬è¯·æ±‚ï¼ˆå³æ–°çš„è¯·æ±‚åœ°å€ï¼‰ï¼Œå‡äº¤ç»™webViewè‡ªå·±å¤„ç†ï¼Œè¿™ä¹Ÿæ˜¯æ­¤æ–¹æ³•çš„é»˜è®¤å¤„ç† //è¿”å›trueï¼Œè¯´æ˜ä½ è‡ªå·±æƒ³æ ¹æ®urlï¼Œåšæ–°çš„è·³è½¬ï¼Œæ¯”å¦‚åœ¨åˆ¤æ–­urlç¬¦åˆæ¡ä»¶çš„æƒ…å†µä¸‹ï¼Œæˆ‘æƒ³è®©webViewåŠ è½½https://maydaychen.github.io/ if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.LOLLIPOP) &#123; if (request.getUrl().toString().contains(&quot;github.io&quot;)) &#123; view.loadUrl(&quot;https://maydaychen.github.io/&quot;); return true; &#125; &#125; return false; &#125; &#125;); &#125; @Override protected void onActivityResult(int requestCode, int resultCode, Intent data) &#123; super.onActivityResult(requestCode, resultCode, data); if (requestCode == FILECHOOSER_RESULTCODE) &#123; if (null == mUploadMessage &amp;&amp; null == mUploadCallbackAboveL) return; Uri result = data == null || resultCode != RESULT_OK ? null : data.getData(); if (mUploadCallbackAboveL != null) &#123; onActivityResultAboveL(requestCode, resultCode, data); &#125; else if (mUploadMessage != null) &#123; if (result != null) &#123; String path = getPath(getApplicationContext(), result); Uri uri = Uri.fromFile(new File(path)); mUploadMessage.onReceiveValue(uri); &#125; else &#123; mUploadMessage.onReceiveValue(imageUri); &#125; mUploadMessage = null; &#125; &#125; &#125; @SuppressWarnings(&quot;null&quot;) @TargetApi(Build.VERSION_CODES.BASE) private void onActivityResultAboveL(int requestCode, int resultCode, Intent data) &#123; if (requestCode != FILECHOOSER_RESULTCODE || mUploadCallbackAboveL == null) &#123; return; &#125; Uri[] results = null; if (resultCode == Activity.RESULT_OK) &#123; if (data == null) &#123; results = new Uri[]&#123;imageUri&#125;; &#125; else &#123; String dataString = data.getDataString(); ClipData clipData = data.getClipData(); if (clipData != null) &#123; results = new Uri[clipData.getItemCount()]; for (int i = 0; i &lt; clipData.getItemCount(); i++) &#123; ClipData.Item item = clipData.getItemAt(i); results[i] = item.getUri(); &#125; &#125; if (dataString != null) results = new Uri[]&#123;Uri.parse(dataString)&#125;; &#125; &#125; if (results != null) &#123; mUploadCallbackAboveL.onReceiveValue(results); mUploadCallbackAboveL = null; &#125; else &#123; results = new Uri[]&#123;imageUri&#125;; mUploadCallbackAboveL.onReceiveValue(results); mUploadCallbackAboveL = null; &#125; return; &#125; private void take() &#123; File imageStorageDir = new File(Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_PICTURES), &quot;MyApp&quot;); // Create the storage directory if it does not exist if (!imageStorageDir.exists()) &#123; imageStorageDir.mkdirs(); &#125; File file = new File(imageStorageDir + File.separator + &quot;IMG_&quot; + String.valueOf(System.currentTimeMillis()) + &quot;.jpg&quot;); imageUri = Uri.fromFile(file); final List&lt;Intent&gt; cameraIntents = new ArrayList&lt;Intent&gt;(); final Intent captureIntent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE); final PackageManager packageManager = getPackageManager(); final List&lt;ResolveInfo&gt; listCam = packageManager.queryIntentActivities(captureIntent, 0); for (ResolveInfo res : listCam) &#123; final String packageName = res.activityInfo.packageName; final Intent i = new Intent(captureIntent); i.setComponent(new ComponentName(res.activityInfo.packageName, res.activityInfo.name)); i.setPackage(packageName); i.putExtra(MediaStore.EXTRA_OUTPUT, imageUri); cameraIntents.add(i); &#125; Intent i = new Intent(Intent.ACTION_GET_CONTENT); i.addCategory(Intent.CATEGORY_OPENABLE); i.setType(&quot;image/*&quot;); Intent chooserIntent = Intent.createChooser(i, &quot;Image Chooser&quot;); chooserIntent.putExtra(Intent.EXTRA_INITIAL_INTENTS, cameraIntents.toArray(new Parcelable[]&#123;&#125;)); BBSActivity.this.startActivityForResult(chooserIntent, FILECHOOSER_RESULTCODE); &#125; @SuppressLint(&quot;NewApi&quot;) @TargetApi(Build.VERSION_CODES.KITKAT) public static String getPath(final Context context, final Uri uri) &#123; final boolean isKitKat = Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.KITKAT; // DocumentProvider if (isKitKat &amp;&amp; DocumentsContract.isDocumentUri(context, uri)) &#123; // ExternalStorageProvider if (isExternalStorageDocument(uri)) &#123; final String docId = DocumentsContract.getDocumentId(uri); final String[] split = docId.split(&quot;:&quot;); final String type = split[0]; if (&quot;primary&quot;.equalsIgnoreCase(type)) &#123; return Environment.getExternalStorageDirectory() + &quot;/&quot; + split[1]; &#125; &#125; // DownloadsProvider else if (isDownloadsDocument(uri)) &#123; final String id = DocumentsContract.getDocumentId(uri); final Uri contentUri = ContentUris.withAppendedId(Uri.parse(&quot;content://downloads/public_downloads&quot;), Long.valueOf(id)); return getDataColumn(context, contentUri, null, null); &#125; // MediaProvider else if (isMediaDocument(uri)) &#123; final String docId = DocumentsContract.getDocumentId(uri); final String[] split = docId.split(&quot;:&quot;); final String type = split[0]; Uri contentUri = null; if (&quot;image&quot;.equals(type)) &#123; contentUri = MediaStore.Images.Media.EXTERNAL_CONTENT_URI; &#125; else if (&quot;video&quot;.equals(type)) &#123; contentUri = MediaStore.Video.Media.EXTERNAL_CONTENT_URI; &#125; else if (&quot;audio&quot;.equals(type)) &#123; contentUri = MediaStore.Audio.Media.EXTERNAL_CONTENT_URI; &#125; final String selection = &quot;_id=?&quot;; final String[] selectionArgs = new String[]&#123;split[1]&#125;; return getDataColumn(context, contentUri, selection, selectionArgs); &#125; &#125; // MediaStore (and general) else if (&quot;content&quot;.equalsIgnoreCase(uri.getScheme())) &#123; return getDataColumn(context, uri, null, null); &#125; // File else if (&quot;file&quot;.equalsIgnoreCase(uri.getScheme())) &#123; return uri.getPath(); &#125; return null; &#125; /** * Get the value of the data column for this Uri. This is useful for * MediaStore Uris, and other file-based ContentProviders. * * @param context The context. * @param uri The Uri to query. * @param selection (Optional) Filter used in the query. * @param selectionArgs (Optional) Selection arguments used in the query. * @return The value of the _data column, which is typically a file path. */ public static String getDataColumn(Context context, Uri uri, String selection, String[] selectionArgs) &#123; Cursor cursor = null; final String column = &quot;_data&quot;; final String[] projection = &#123;column&#125;; try &#123; cursor = context.getContentResolver().query(uri, projection, selection, selectionArgs, null); if (cursor != null &amp;&amp; cursor.moveToFirst()) &#123; final int column_index = cursor.getColumnIndexOrThrow(column); return cursor.getString(column_index); &#125; &#125; finally &#123; if (cursor != null) cursor.close(); &#125; return null; &#125; /** * @param uri The Uri to check. * @return Whether the Uri authority is ExternalStorageProvider. */ public static boolean isExternalStorageDocument(Uri uri) &#123; return &quot;com.android.externalstorage.documents&quot;.equals(uri.getAuthority()); &#125; /** * @param uri The Uri to check. * @return Whether the Uri authority is DownloadsProvider. */ public static boolean isDownloadsDocument(Uri uri) &#123; return &quot;com.android.providers.downloads.documents&quot;.equals(uri.getAuthority()); &#125; /** * @param uri The Uri to check. * @return Whether the Uri authority is MediaProvider. */ public static boolean isMediaDocument(Uri uri) &#123; return &quot;com.android.providers.media.documents&quot;.equals(uri.getAuthority()); &#125;&#125; webviewç‚¹å‡»é“¾æ¥è·³è½¬ç³»ç»Ÿæµè§ˆå™¨è§£å†³1webView.setWebViewClient(new WebViewClient()); webviewæœ‰äº›å›¾ç‰‡ä¸æ˜¾ç¤ºé—®é¢˜ä¸€èˆ¬æ˜¯ç”±äºAndroidç«¯ä½¿ç”¨äº†httpså¤´ï¼Œè€ŒH5ç«¯ä½¿ç”¨äº†httpå¤´ï¼Œéœ€è¦ä¸¤ç«¯ä¿æŒä¸€è‡´åœ¨5.0ä»¥ä¸Šçš„ç³»ç»Ÿä¸­ä½¿ç”¨æ··åˆæ¨¡å¼ä¹Ÿèƒ½è§£å†³æ­¤é—®é¢˜ 123if(Build.VERSION.SDK_INT&gt;=Build.VERSION_CODES.LOLLIPOPï¼‰&#123;getSettings().setMixedContentMode(WebSettings.MIXED_CONTENT_ALWAYS_ALLOW);&#125; ç½‘é¡µè°ƒç”¨æ‹¨æ‰“ç”µè¯123456789@Override public boolean shouldOverrideUrlLoading(WebView view, String url) &#123; if (url.startsWith(&quot;tel:&quot;)) &#123; Intent intent = new Intent(Intent.ACTION_DIAL, Uri.parse(url)); startActivity(intent); return true; &#125; return super.shouldOverrideUrlLoading(view, url); &#125;","categories":[{"name":"å¼€å‘","slug":"å¼€å‘","permalink":"https://maydaychen.github.io/categories/%E5%BC%80%E5%8F%91/"}],"tags":[{"name":"Android","slug":"Android","permalink":"https://maydaychen.github.io/tags/Android/"}]},{"title":"Androidè®°å½•5--Viewç›¸å…³å°çŸ¥è¯†","slug":"Androidè®°å½•5--Viewç›¸å…³å°çŸ¥è¯†","date":"2019-06-12T06:50:11.000Z","updated":"2025-02-24T15:28:45.966Z","comments":true,"path":"2019/06/12/Androidè®°å½•5--Viewç›¸å…³å°çŸ¥è¯†/","link":"","permalink":"https://maydaychen.github.io/2019/06/12/Android%E8%AE%B0%E5%BD%955--View%E7%9B%B8%E5%85%B3%E5%B0%8F%E7%9F%A5%E8%AF%86/","excerpt":"","text":"åŠ¨æ€è®¾ç½®paddingå€¼12ImageView imageView=new ImageView(Contextcontext);imageView.setPadding(left,top,right,bottom); åŠ¨æ€è®¾ç½®marginå€¼123RelativeLayout.LayoutParams params = new RelativeLayout.LayoutParams(10,10);//è¿™é‡Œçš„å•ä½æ˜¯åƒç´ params.setMargins(0, ScreenUtil.dip2px(5), 0, 0);view.setLayoutParams(params); åŠ¨æ€è®¾ç½®å±…ä¸­123RelativeLayout.LayoutParams params = new RelativeLayout.LayoutParams(10,10);//è¿™é‡Œçš„å•ä½æ˜¯åƒç´ params.addRule(RelativeLayout.CENTER_HORIZONTAL, RelativeLayout.TRUE);view.setLayoutParams(params); åŒæ—¶ä¹Ÿå¯ä»¥è®¾ç½®å…¶ä»–å¯¹é½æ–¹å¼ 123lp.addRule(RelativeLayout.ALIGN_WITH_PARENT_TOP);//çˆ¶å®¹å™¨é¡¶éƒ¨å¯¹é½lp.addRule(RelativeLayout.POSITION_BELOW, view1);//ä¸view1åº•éƒ¨å¯¹é½lp.addRule(RelativeLayout.ALIGN_LEFT, view2);//ä¸view2å·¦å¯¹é½ åŠ¨æ€è®¾ç½®å®½é«˜123RelativeLayout.LayoutParams Params = (RelativeLayout.LayoutParams)mView.getLayoutParams();Params.height = 100;mView.setLayoutParams(linearParams); RelativeLayout.LayoutParamsæ ¹æ®çˆ¶å¸ƒå±€çš„ç±»å‹å¯ä»¥æ”¹ä¸ºRelativeLayout.LayoutParamsã€LinearLayout.LayoutParamsã€ViewGroup.LayoutParamsä¸‰é€‰ä¸€","categories":[{"name":"å¼€å‘","slug":"å¼€å‘","permalink":"https://maydaychen.github.io/categories/%E5%BC%80%E5%8F%91/"}],"tags":[{"name":"Android","slug":"Android","permalink":"https://maydaychen.github.io/tags/Android/"}]},{"title":"Androidè®°å½•4--RecyclerViewç›¸å…³å°çŸ¥è¯†","slug":"Androidè®°å½•4--RecyclerViewç›¸å…³å°çŸ¥è¯†","date":"2019-05-14T06:50:57.000Z","updated":"2025-02-24T15:28:45.944Z","comments":true,"path":"2019/05/14/Androidè®°å½•4--RecyclerViewç›¸å…³å°çŸ¥è¯†/","link":"","permalink":"https://maydaychen.github.io/2019/05/14/Android%E8%AE%B0%E5%BD%954--RecyclerView%E7%9B%B8%E5%85%B3%E5%B0%8F%E7%9F%A5%E8%AF%86/","excerpt":"","text":"recyclerviewè®¾ç½®æ»‘åŠ¨åˆ°è¾¹ç¼˜æ—¶æ— æ•ˆæœæ¨¡å¼ï¼š1android:overScrollMode=&quot;never&quot; recyclerviewè®¾ç½®æ»šåŠ¨æ¡ä¸æ˜¾ç¤ºï¼š1android:scrollbars=&quot;none&quot; NestedScrollViewåµŒå¥—RecyclerViewï¼ŒRecyclerViewé«˜åº¦è®¾ç½®ä¸ºmatch_parentæ— æ•ˆNestedScrollViewè®¾ç½®android:fillViewport&#x3D;â€trueâ€ 1234&lt;android.support.v4.widget.NestedScrollView android:layout_width=&quot;match_parent&quot; android:fillViewport=&quot;true&quot; android:layout_height=&quot;match_parent&quot;&gt;","categories":[{"name":"å¼€å‘","slug":"å¼€å‘","permalink":"https://maydaychen.github.io/categories/%E5%BC%80%E5%8F%91/"}],"tags":[{"name":"Android","slug":"Android","permalink":"https://maydaychen.github.io/tags/Android/"}]},{"title":"Androidè®°å½•3--TabLayoutç›¸å…³å°çŸ¥è¯†","slug":"Androidè®°å½•3--TabLayoutç›¸å…³å°çŸ¥è¯†","date":"2019-04-27T06:54:19.000Z","updated":"2025-02-24T15:28:45.955Z","comments":true,"path":"2019/04/27/Androidè®°å½•3--TabLayoutç›¸å…³å°çŸ¥è¯†/","link":"","permalink":"https://maydaychen.github.io/2019/04/27/Android%E8%AE%B0%E5%BD%953--TabLayout%E7%9B%B8%E5%85%B3%E5%B0%8F%E7%9F%A5%E8%AF%86/","excerpt":"","text":"TabLayout+ViewPager+Fragmentçš„ä½¿ç”¨åŠé‡å¤onCreateViewé—®é¢˜è§£å†³ä½¿ç”¨TabLayout+ViewPagerè¿›è¡Œåˆ‡æ¢ç°åœ¨è²Œä¼¼å·²ç»æˆäº†å¾ˆå¤šappçš„æ ‡é…ï¼Œä½†æ˜¯æœ€è¿‘ä½¿ç”¨è¿‡ç¨‹ä¸­å‘ç°æœ‰ä¸€ä¸ªé—®é¢˜ å¦‚æœä»é¡µé¢1ç‚¹å‡»åˆ‡æ¢åˆ°é¡µé¢3ï¼Œç„¶ååˆ‡æ¢å›é¡µé¢1æ—¶ï¼Œé¡µé¢1ä¼šé‡æ–°åˆ›å»ºï¼Œæ­¤æ—¶ä¼šé‡å¤è°ƒç”¨onCreateView è§£å†³åŠæ³•ï¼šè®¾ç½®ç¼“å­˜é¡µé¢æ•° 1mContentVp.setOffscreenPageLimit(4); å…¶ä¸­ï¼ŒmContentVpå³ä¸ºViewPagerå˜é‡viewPager.setOffscreenPageLimit(int limit) èƒ½å¤Ÿæœ‰æ•ˆåœ°ä¸€æ¬¡æ€§ç¼“å­˜å¤šä¸ªFragmentï¼Œè¿™æ ·å°±èƒ½å¤Ÿè§£å†³åœ¨ä¹‹åæ¯æ¬¡åˆ‡æ¢æ—¶ä¸ä¼šåˆ›å»ºå®ä¾‹å¯¹è±¡ï¼Œçœ‹èµ·æ¥ä¹Ÿä¼šæµç•…ã€‚ä½†æ˜¯è¿™æ ·çš„åšæ³•ï¼Œæœ€å¤§çš„ç¼ºç‚¹å°±æ˜¯å®¹æ˜“é€ æˆç¬¬ä¸€æ¬¡å¯åŠ¨æ—¶éå¸¸ç¼“æ…¢ï¼å¦‚æœç¬¬ä¸€æ¬¡å¯åŠ¨æ—¶é—´æ»¡è¶³è¦æ±‚çš„è¯ï¼Œå¯ä»¥è¯•è¯•è¿™ç§ç®€å•çš„åŠæ³•ã€‚ TabLayout+ViewPagerï¼Œé»˜è®¤é¦–é€‰é¡¹è®¾ç½®select()æ— æ•ˆç”±äºä½¿ç”¨äº†è‡ªå®šä¹‰å¸ƒå±€ï¼Œæ‰€ä»¥åº”è¯¥æ“ä½œå¦‚ä¸‹ï¼š 1mTabLayout.getTabAt(i).getCustomView().setSelected(true); Tablayoutä¹‹Tabå®½åº¦å·¦å³æ— æ³•å¡«å……å‰æ®µæ—¶é—´åšä¸€ä¸ªé¡¹ç›®ä½¿ç”¨åˆ°äº†Tablayout,å¯ä»¥ç”¨æ¥å®ç°ç±»ä¼¼çŸ¥ä¹åˆ†æ çš„æ•ˆæœè¦ä½¿ç”¨Tablayoutï¼Œå¿…é¡»å¼•ç”¨Googleçš„Android Support Designåº“ï¼Œä½¿ç”¨Android Studio çš„åŒå­¦å¯ä»¥ç›´æ¥ä½¿ç”¨åªè¦åœ¨build.gradleä¸­åŠ å…¥ 1compile &#x27;com.android.support:design:22.2.0&#x27; å³å¯ é‡åˆ°çš„é—®é¢˜ä½¿ç”¨ä¸­ï¼Œæˆ‘éœ€è¦è®¾ç½®Tabçš„ç‚¹å‡»æ•ˆæœï¼Œæ‰€ä»¥æˆ‘æ–°å»ºäº†ä¸€ä¸ªselectorï¼Œå¹¶å°†æ¯ä¸€ä¸ªtabçš„ç•Œé¢èƒŒæ™¯è®¾ç½®ä¸ºè¯¥selector 12345itemTab.setCustomView(R.layout.item_tab_layout_custom); itemTab.getCustomView().setBackgroundResource(R.drawable.selector_tab); TextView itemTv = (TextView) itemTab.getCustomView().findViewById(R.id .tv_menu_item); itemTv.setText(tabIndicators.get(i)); è§£å†³åŠæ³•ç™¾åº¦äº†ä¸¤å¤©åï¼Œè¿˜æ˜¯æ²¡æœ‰è§£å†³è¯¥é—®é¢˜ï¼Œç›´åˆ°ç¬¬ä¸‰å¤©ï¼Œæˆ‘çš„ç§‘å­¦ä¸Šç½‘å·¥å…·åˆå¥½äº†- -æ„ŸåŠ¨åˆ°æ™•å¥ï¼ˆäº‹å®è¯æ˜ï¼Œç¨‹åºå‘˜çœŸçš„ä¸é€‚åˆç”¨ç™¾åº¦ï¼Œç”Ÿæ´»æœåŠ¡è¿˜å¥½ï¼‰æˆ‘googleåˆ°äº†ä¸‹é¢ä¸€ç¯‡æ–‡ç« ï¼Œå…¶ä¸­è®²åˆ°äº†ï¼šå¦‚æœä½ è®¾ç½®äº†TabModeä¸ºMODE_FIXEDç„¶åå‘ç°æ–‡æœ¬å¹¶æ²¡æœ‰åŒ…å›´å…¨å±€ï¼Œæˆ–è®¸æ˜¯å› ä¸ºTablayoutåœ¨åˆ›å»ºæ—¶åº”ç”¨äº†ä¸€äº›åµŒå…¥è®¾ç½®ï¼Œä½ å¯ä»¥å°†ä¸‹é¢çš„ä»£ç å†™å…¥xmlä»¥è§£å†³æ­¤é—®é¢˜ï¼š 12app:tabPaddingStart=&quot;-1dp&quot;app:tabPaddingEnd=&quot;-1dp&quot; ç”±æ­¤å¯è§ï¼Œé—®é¢˜å®Œç¾è§£å†³ æ€»ç»“ç»è¿‡äº†è¿™ä¸€æ¬¡çš„é—®é¢˜ï¼Œè¶Šå‘è§‰å¾—ç¨‹åºå‘˜å­¦ä¼šç§‘å­¦ä¸Šç½‘æ˜¯å¤šä¹ˆé‡è¦ï¼Œä¹Ÿå¢åŠ äº†è‡ªå·±æŸ¥è¯¢è§£å†³é—®é¢˜çš„èƒ½åŠ›ï¼ŒTablayoutä½œä¸ºè°·æ­Œæ¨å‡ºçš„éµå¾ªMDçš„æ§ä»¶ï¼Œåº”è¯¥å¤šåŠ å­¦ä¹ åˆ©ç”¨ã€‚","categories":[{"name":"å¼€å‘","slug":"å¼€å‘","permalink":"https://maydaychen.github.io/categories/%E5%BC%80%E5%8F%91/"}],"tags":[{"name":"Android","slug":"Android","permalink":"https://maydaychen.github.io/tags/Android/"}]},{"title":"Androidè®°å½•2--TextViewç›¸å…³å°çŸ¥è¯†","slug":"Androidè®°å½•2--TextViewç›¸å…³å°çŸ¥è¯†","date":"2019-03-08T06:38:27.000Z","updated":"2025-02-24T15:28:45.972Z","comments":true,"path":"2019/03/08/Androidè®°å½•2--TextViewç›¸å…³å°çŸ¥è¯†/","link":"","permalink":"https://maydaychen.github.io/2019/03/08/Android%E8%AE%B0%E5%BD%952--TextView%E7%9B%B8%E5%85%B3%E5%B0%8F%E7%9F%A5%E8%AF%86/","excerpt":"","text":"é™åˆ¶textviewåªæœ‰ä¸¤è¡Œä¸”å¤šä½™è¡Œç”¨çœç•¥å·ä»£æ›¿12345678&lt;TextView android:layout_width=&quot;match_parent&quot; android:layout_height=&quot;wrap_content&quot; android:text=&quot;@string/hospital_abstract_content&quot; android:lines=&quot;2&quot; android:maxLines=&quot;2&quot; android:ellipsize=&quot;end&quot; /&gt; android:maxLines&#x3D;â€2â€ æœ€å¤§è¡Œæ•°é™åˆ¶ï¼Œå¦‚æœè¶…è¿‡ä¸¤è¡Œä¹Ÿä¸ä¼šå†æ˜¾ç¤ºäº†android:ellipsize&#x3D;â€endâ€ è¶…è¿‡è§„å®šé•¿åº¦åˆ™ä½¿ç”¨æœ«å°¾çœç•¥å·android:lines&#x3D;â€2â€ æ˜¾ç¤ºä¸¤è¡Œï¼Œå³ä½¿textåªæœ‰ä¸€è¡Œä¹Ÿä¼šå ä½ä¸¤è¡Œçš„é«˜åº¦ å»é™¤textviewçš„é»˜è®¤padding1android:includeFontPadding=&quot;false&quot; æ–‡å­—åŠ ç©ºæ ¼ç©ºæ ¼ï¼š &#160;çª„ç©ºæ ¼ï¼š &#8201; é¦–è¡Œç¼©è¿›ä¸¤å­—ç¬¦ï¼šâ€¢åœ¨stringèµ„æºæ–‡ä»¶ä¸­ï¼Œåœ¨æ–‡å­—çš„å‰é¢åŠ å…¥â€\\u3000\\u3000â€å³å¯å®ç°é¦–è¡Œç¼©è¿› TextViewä¿®æ”¹éƒ¨åˆ†æ–‡å­—é¢œè‰²æ–¹æ³•ä¸€ï¼š1234SpannableStringBuilder builder1 = new SpannableStringBuilder(tvMallDaily.getText().toString()); ForegroundColorSpan redSpan = new ForegroundColorSpan(Color.RED); builder1.setSpan(redSpan, 2, 5, Spannable.SPAN_EXCLUSIVE_EXCLUSIVE); tvMallDaily.setText(builder1); æ–¹æ³•äºŒï¼š12&lt;string name=&quot;hh_no_order&quot;&gt;&lt;![CDATA[sorryï¼Œæ²¡æœ‰ä»»ä½•è®¢å•ï¼Œ&lt;font color=&quot;#fc2a56&quot;&gt;å‰å¾€ä¹°ä¹°ä¹°&lt;/font&gt;]]&gt;&lt;/string&gt;mTvTip.setText(Html.fromHtml(mTips))","categories":[{"name":"å¼€å‘","slug":"å¼€å‘","permalink":"https://maydaychen.github.io/categories/%E5%BC%80%E5%8F%91/"}],"tags":[{"name":"Android","slug":"Android","permalink":"https://maydaychen.github.io/tags/Android/"}]},{"title":"å‰ç«¯è®°å½•1--Vueç›¸å…³é—®é¢˜","slug":"å‰ç«¯è®°å½•1--Vueç›¸å…³é—®é¢˜","date":"2019-01-15T07:33:06.000Z","updated":"2025-02-24T15:01:20.386Z","comments":true,"path":"2019/01/15/å‰ç«¯è®°å½•1--Vueç›¸å…³é—®é¢˜/","link":"","permalink":"https://maydaychen.github.io/2019/01/15/%E5%89%8D%E7%AB%AF%E8%AE%B0%E5%BD%951--Vue%E7%9B%B8%E5%85%B3%E9%97%AE%E9%A2%98/","excerpt":"","text":"åˆ›å»ºé¡¹ç›®æ—¶æ— æ³•åŠ è½½æ–‡ä»¶ C:\\Users\\1111111\\AppData\\Roaming\\npm\\vue.ps1,å› ä¸ºåœ¨æ­¤ç³»ç»Ÿç¦æ­¢è¿è¡Œè„šæœ¬ è§£å†³åŠæ³•ï¼š ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œpower shell è¾“å…¥set-ExecutionPolicy RemoteSigned é€‰Yæˆ–è€…A è§£å†³ æŠ¥é”™ï¼šESLint: Unexpected string concatenation. (prefer-template) åŸå› ES6è§„åˆ™ï¼šè¡¨ç°ç¬¦å·é”™è¯¯ï¼Œåº”è¯¥ä¸ºTabé”®ä¸Šæ–¹çš„Â· ï¼Œä¿®æ”¹å¦‚ä¸‹ï¼š vueæ¸²æŸ“åˆ—è¡¨æ—¶æŠ¥é”™Avoid using non-primitive value as key, use string&#x2F;number value instead.è§£å†³ï¼šå¤§æ¦‚ç‡æ˜¯v-forçš„æ—¶å€™æ²¡æœ‰ç»‘å®škey","categories":[{"name":"å¼€å‘","slug":"å¼€å‘","permalink":"https://maydaychen.github.io/categories/%E5%BC%80%E5%8F%91/"}],"tags":[{"name":"å‰ç«¯","slug":"å‰ç«¯","permalink":"https://maydaychen.github.io/tags/%E5%89%8D%E7%AB%AF/"}]},{"title":"Androidè®°å½•1--5.0ä»¥ä¸‹æŠ¥NoClassDefFoundError","slug":"Androidè®°å½•1--5-0ä»¥ä¸‹æŠ¥NoClassDefFoundError","date":"2017-03-22T06:20:02.000Z","updated":"2025-02-24T15:26:45.501Z","comments":true,"path":"2017/03/22/Androidè®°å½•1--5-0ä»¥ä¸‹æŠ¥NoClassDefFoundError/","link":"","permalink":"https://maydaychen.github.io/2017/03/22/Android%E8%AE%B0%E5%BD%951--5-0%E4%BB%A5%E4%B8%8B%E6%8A%A5NoClassDefFoundError/","excerpt":"","text":"Android5.0ä»¥ä¸‹æŠ¥NoClassDefFoundErrorä¸€å¼€å§‹ï¼Œæˆ‘çš„é¡¹ç›®éƒ½æ˜¯åœ¨API21ï¼ˆ5.0ï¼‰çš„æƒ…å†µä¸‹ç¼–å†™çš„ï¼Œæ‰€ä»¥è¿‡ç¨‹å¾ˆé¡ºåˆ©ï¼Œæ²¡æœ‰ä»»ä½•çš„é”™è¯¯ï¼Œä½†æ˜¯å¶ç„¶ä¹‹ä¸‹ï¼Œæˆ‘ç”¨äº†åŒäº‹çš„4.4çš„æµ‹è¯•æœºï¼Œå‘ç°åªè¦ç”¨åˆ°ç½‘ç»œè¯·æ±‚çš„åœ°æ–¹ï¼Œå°±ä¼šæŠ¥NoClassDefFoundErrorï¼Œæ¯«æ— åŠæ³•ã€‚å› ä¸ºé¡¹ç›®é‡Œç”¨åˆ°äº†okhttpè·Ÿretrofitï¼Œæˆ‘ä¸€åº¦ä»¥ä¸ºæ˜¯å¼•å…¥çš„åŒ…å†²çªäº†ï¼Œåœ¨é‚£æŸ¥äº†åŠå¤©ï¼Œæ— æœã€‚åæ¥å‘ç°æ˜¯Multidexè¿™ä¸ªæ“ä½œçš„æ—¶å€™æœ‰é—®é¢˜ï¼Œç½‘ä¸Šä¸€æŸ¥ï¼ŒçœŸçš„æœ‰è¿™ä¸ªé—®é¢˜ï¼Œç°åœ¨é˜è¿°ä¸€ä¸‹å…·ä½“è§£å†³è¿‡ç¨‹ã€‚ è®ºå›æ–¹æ³•ï¼š1234567891011121314151617181920212223242526272829apply plugin: &#x27;com.android.application&#x27;android &#123; ...&#125;dependencies &#123; ...&#125;android.applicationVariants.all &#123; variant -&gt; task &quot;fix$&#123;variant.name.capitalize()&#125;MainDexClassList&quot; &lt;&lt; &#123; logger.info &quot;Fixing main dex keep file for $variant.name&quot; File keepFile = new File(&quot;$buildDir/intermediates/multi-dex/$variant.buildType.name/maindexlist.txt&quot;) keepFile.withWriterAppend &#123; w -&gt; // Get a reader for the input file w.append(&#x27;\\n&#x27;) new File(&quot;$&#123;projectDir&#125;/multidex.keep&quot;).withReader &#123; r -&gt; // And write data from the input into the output w &lt;&lt; r &lt;&lt; &#x27;\\n&#x27; &#125; logger.info &quot;Updated main dex keep file for $&#123;keepFile.getAbsolutePath()&#125;\\n$keepFile.text&quot; &#125; &#125;&#125;tasks.whenTaskAdded &#123; task -&gt; android.applicationVariants.all &#123; variant -&gt; if (task.name == &quot;create$&#123;variant.name.capitalize()&#125;MainDexClassList&quot;) &#123; task.finalizedBy &quot;fix$&#123;variant.name.capitalize()&#125;MainDexClassList&quot; &#125; &#125;&#125; clean ç„¶å rebuild é¡¹ç›®ï¼Œå®Œæˆä¹‹ååœ¨ module ä¸‹çš„ build&#x2F;intermediates&#x2F;multi-dex&#x2F;xxx é‡Œæ‰¾åˆ° maindexlist.txt æ–‡ä»¶ï¼ˆå¦‚æœæ‰¾ä¸åˆ°ç›¸å…³ç›®å½•ï¼Œå¯èƒ½éœ€è¦ä½ åŒæ­¥å rebuild é¡¹ç›®æ‰èƒ½ç”Ÿæˆï¼‰ï¼Œå¤åˆ¶é‡Œé¢çš„å†…å®¹åˆ° module æ ¹ç›®å½•ä¸‹ multidex.keep æ–‡ä»¶ä¸­ï¼ˆæ²¡æœ‰åˆ™å…ˆåˆ›å»ºæ­¤æ–‡ä»¶ï¼‰å…·ä½“çš„æ­¥éª¤ç»æµ‹è¯•å¯è¡Œ æ²¡ç”¨å‡ºç°è¯¥maindexlist.txt æ–‡ä»¶è§£å†³åŠæ³•åœ¨ä¸Šè¿°ä»£ç æ‰§è¡Œåå¹¶æ²¡æœ‰å‡ºç°maindexlist.txt è¿™ä¸ªæ–‡ä»¶ï¼ˆå…¶å®æˆ‘ä¸€å¼€å§‹ä¹Ÿæ²¡æœ‰- -ï¼‰ï¼Œç„¶åæˆ‘æŸ¥é˜…äº†androidç¨‹åºå‘˜éƒ½çŸ¥é“çš„ç½‘ç«™ï¼Œå‘ç°è‡ªå·±ç¡®å®å¼•ç”¨äº† 1compile &#x27;com.android.support:multidex:1.0.0&#x27; ä¹Ÿç¡®å®è®¾ç½®äº† 1multiDexEnabled true ä½†æ˜¯æ²¡æœ‰åœ¨manifestæ–‡ä»¶ä¸­è®¾ç½®ï¼ˆä¸å¤ªä¹ æƒ¯ä½¿ç”¨markdownçš„æ ‡ç­¾ï¼Œapplicationç¼ºå°‘æ ‡ç­¾ï¼Œè§è°…ï¼‰ 12345application ... android:name=&quot;android.support.multidex.MultiDexApplication&quot;&gt; .../application é‡æ–°è¿è¡Œï¼Œä¸æŠ¥é”™ï¼Œé—®é¢˜è§£å†³","categories":[{"name":"å¼€å‘","slug":"å¼€å‘","permalink":"https://maydaychen.github.io/categories/%E5%BC%80%E5%8F%91/"}],"tags":[{"name":"Android","slug":"Android","permalink":"https://maydaychen.github.io/tags/Android/"}]}],"categories":[{"name":"è¿ç»´","slug":"è¿ç»´","permalink":"https://maydaychen.github.io/categories/%E8%BF%90%E7%BB%B4/"},{"name":"AI","slug":"AI","permalink":"https://maydaychen.github.io/categories/AI/"},{"name":"Tools","slug":"Tools","permalink":"https://maydaychen.github.io/categories/Tools/"},{"name":"å¼€å‘","slug":"å¼€å‘","permalink":"https://maydaychen.github.io/categories/%E5%BC%80%E5%8F%91/"},{"name":"ç”Ÿæ´»","slug":"ç”Ÿæ´»","permalink":"https://maydaychen.github.io/categories/%E7%94%9F%E6%B4%BB/"},{"name":"åšå®¢ç›¸å…³","slug":"åšå®¢ç›¸å…³","permalink":"https://maydaychen.github.io/categories/%E5%8D%9A%E5%AE%A2%E7%9B%B8%E5%85%B3/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"https://maydaychen.github.io/tags/Linux/"},{"name":"AWS","slug":"AWS","permalink":"https://maydaychen.github.io/tags/AWS/"},{"name":"ç›‘æ§","slug":"ç›‘æ§","permalink":"https://maydaychen.github.io/tags/%E7%9B%91%E6%8E%A7/"},{"name":"Grafana","slug":"Grafana","permalink":"https://maydaychen.github.io/tags/Grafana/"},{"name":"Prometheus","slug":"Prometheus","permalink":"https://maydaychen.github.io/tags/Prometheus/"},{"name":"MacOS","slug":"MacOS","permalink":"https://maydaychen.github.io/tags/MacOS/"},{"name":"Zabbix","slug":"Zabbix","permalink":"https://maydaychen.github.io/tags/Zabbix/"},{"name":"NAS","slug":"NAS","permalink":"https://maydaychen.github.io/tags/NAS/"},{"name":"ELK","slug":"ELK","permalink":"https://maydaychen.github.io/tags/ELK/"},{"name":"Docker","slug":"Docker","permalink":"https://maydaychen.github.io/tags/Docker/"},{"name":"é£Ÿè°±","slug":"é£Ÿè°±","permalink":"https://maydaychen.github.io/tags/%E9%A3%9F%E8%B0%B1/"},{"name":"Hexo","slug":"Hexo","permalink":"https://maydaychen.github.io/tags/Hexo/"},{"name":"Ansible","slug":"Ansible","permalink":"https://maydaychen.github.io/tags/Ansible/"},{"name":"Windows","slug":"Windows","permalink":"https://maydaychen.github.io/tags/Windows/"},{"name":"å‰ç«¯","slug":"å‰ç«¯","permalink":"https://maydaychen.github.io/tags/%E5%89%8D%E7%AB%AF/"},{"name":"Python","slug":"Python","permalink":"https://maydaychen.github.io/tags/Python/"},{"name":"Android","slug":"Android","permalink":"https://maydaychen.github.io/tags/Android/"}]}